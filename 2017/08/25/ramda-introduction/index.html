<!DOCTYPE html>
<html>
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    <title>淺談 ramda 中的幾個 API | 欠・擬合 | UNder-fitting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="ramda,javascript,function programming" />
    
    <meta name="description" content="前言ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 functional programming 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。 比如說在 lodash 當中，API 常">
<meta name="keywords" content="ramda,javascript,function programming">
<meta property="og:type" content="article">
<meta property="og:title" content="淺談 ramda 中的幾個 API">
<meta property="og:url" content="http://kjj6198.github.io/2017/08/25/ramda-introduction/index.html">
<meta property="og:site_name" content="欠・擬合 | UNder-fitting">
<meta property="og:description" content="前言ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 functional programming 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。 比如說在 lodash 當中，API 常">
<meta property="og:locale" content="zh-TW">
<meta property="og:image" content="http://kjj6198.github.io/Users/kalan/Desktop/fn1.png">
<meta property="og:updated_time" content="2017-08-24T16:15:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="淺談 ramda 中的幾個 API">
<meta name="twitter:description" content="前言ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 functional programming 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。 比如說在 lodash 當中，API 常">
<meta name="twitter:image" content="http://kjj6198.github.io/Users/kalan/Desktop/fn1.png">
    

    

    
        <link rel="icon" href="/imgs/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56408806-4', 'auto');
ga('send', 'pageview');

</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
    

</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                      欠・擬合 | UNder-fitting
                    </h1>
                    <img src="https://pbs.twimg.com/profile_images/915528631065047040/5-Do3QWr_400x400.jpg" alt="" class="avatar">
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">Fun Driven Frontend Developer 最近的夢想是能夠光榮地回鄉工作。
如果你也對日劇、機器學習、日文、前後端開發、React、程式、咖啡有興趣，或許我們可以聊聊
</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主頁</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="https://kjj6198.github.io/resume">關於</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="https://www.shurado.com?ref=blog">日語八百屋</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要找..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '頁面',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/前端/">前端</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-ramda-introduction" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        淺談 ramda 中的幾個 API
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2017/08/25/ramda-introduction/" class="article-date">
    <time datetime="2017-08-24T16:14:45.000Z" itemprop="datePublished">2017-08-25</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/function-programming/">function programming</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ramda/">ramda</a></li></ul>

            </div>
        
        <div class="article-entry" itemprop="articleBody">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#直觀-functional-programming"><span class="post-toc-number">2.</span> <span class="post-toc-text">直觀 functional programming</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#propEq"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">propEq</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#zipObj"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">zipObj</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ifElse"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">ifElse</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#compose"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">compose</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#useWith"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">useWith</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#converge"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">converge</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#identity"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">identity</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#tap"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">tap</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#pluck"><span class="post-toc-number">2.9.</span> <span class="post-toc-text">pluck</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#pick-pickBy-pickAll"><span class="post-toc-number">2.10.</span> <span class="post-toc-text">pick, pickBy, pickAll</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#pathOr"><span class="post-toc-number">2.11.</span> <span class="post-toc-text">pathOr</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#memoize"><span class="post-toc-number">2.12.</span> <span class="post-toc-text">memoize</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#結論"><span class="post-toc-number">3.</span> <span class="post-toc-text">結論</span></a></li></ol>
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 <strong>functional programming</strong> 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。</p>
<p>比如說在 lodash 當中，API 常見的使用方式為：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_.map([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], (n) =&gt; n * <span class="number">2</span>); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>
<p>而在 ramda 當中則是：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">R.map(<span class="function">(<span class="params">n</span>) =&gt;</span> n * <span class="number">2</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>
<p>或者你可以這樣寫：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> times2 = R.map(<span class="function">(<span class="params">n</span>) =&gt;</span> n * <span class="number">2</span>); <span class="comment">// return function</span></span><br><span class="line">times2([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>
<p>這種方式讓我們不用被資料綁死，可以提高復用性。</p>
<p>如果你想要瞭解更多有關於 FP 的資訊，我推薦這篇文章：<a href="https://www.byvoid.com/zhs/blog/why-functional-programming" target="_blank" rel="noopener">函數式程序設計為什麼至關重要</a></p>
<h3 id="直觀-functional-programming"><a href="#直觀-functional-programming" class="headerlink" title="直觀 functional programming"></a>直觀 functional programming</h3><ul>
<li>一樣的 input 會輸出一樣的 output，不會受到外在狀態而改變結果</li>
<li>沒有副作用</li>
</ul>
<p>###為什麼選擇 Ramda</p>
<p>ramda 的 API 相當多，大部分的 API 也都非常直觀，所以我們也不需要一一細談。不過 ramda 中有許多優秀的 API 或許可以幫助你減少開發上的複雜度，以下介紹幾個我覺得值得一看的 API</p>
<h4 id="propEq"><a href="#propEq" class="headerlink" title="propEq"></a>propEq</h4><p>接受字串當作屬性，比對傳入的物件屬性值是否相等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'kalan'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">propEq(<span class="string">'name'</span>, <span class="string">'kalan'</span>)(obj); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等價於</span></span><br><span class="line"><span class="keyword">const</span> propEq = <span class="function">(<span class="params">name, value</span>) =&gt;</span> (obj) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[name] === value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="zipObj"><a href="#zipObj" class="headerlink" title="zipObj"></a>zipObj</h4><p>將傳入的參數壓縮為 <code>object</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">R.zipObj([<span class="string">'id'</span>, <span class="string">'title'</span>], [<span class="string">'2'</span>, <span class="string">'mytitle'</span>]);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  id: '2',</span></span><br><span class="line"><span class="comment">  title: 'mytitle'</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="ifElse"><a href="#ifElse" class="headerlink" title="ifElse"></a>ifElse</h4><p>在做 branch 的邏輯時相當好用，你可能會問，幹嘛不直接用 <code>if…else</code> 就好？ramda 當中的 API 都是回傳函數，這代表你可以用 compose 來組裝其他 API。</p>
<h4 id="compose"><a href="#compose" class="headerlink" title="compose"></a>compose</h4><p>將函式組合，執行的順序是由內到外。可以把它聯想為國高中很常見的函數題 <code>f(g(h(x)))</code>。所以要先計算 <code>h(x)</code> 的值，再依序下去。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = compose(</span><br><span class="line">  toInteger,</span><br><span class="line">  toCurrency(<span class="string">'TWD'</span>),</span><br><span class="line">  toUppercase</span><br><span class="line">)(<span class="string">"125000"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="useWith"><a href="#useWith" class="headerlink" title="useWith"></a>useWith</h4><p>接收一個函數跟函數陣列。將資料丟入函數陣列運算出來的結果，再丟入第一個函數當中。</p>
<p>善用 <code>useWith</code> 可以幫助我們達到 point free 的效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currencies = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'TWD'</span>, <span class="attr">shape</span>: <span class="string">'$'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'USD'</span>, <span class="attr">shape</span>: <span class="string">'$'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'JPY'</span>, <span class="attr">shape</span>: <span class="string">'¥'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'CAD'</span>, <span class="attr">shape</span>: <span class="string">'$'</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// without useWith</span></span><br><span class="line"><span class="keyword">const</span> getCurrency = <span class="function">(<span class="params">name, dic</span>) =&gt;</span> R.find(</span><br><span class="line">  R.propEq(<span class="string">'name'</span>, name),</span><br><span class="line">  dic</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">getCurrency(<span class="string">'TWD'</span>, currencies); <span class="comment">// $</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// with useWith</span></span><br><span class="line"><span class="keyword">const</span> getCurrency = R.useWith(</span><br><span class="line">  R.find,</span><br><span class="line">  [R.propEq(<span class="string">'name'</span>), R.identity]</span><br><span class="line">); <span class="comment">// 將第一個參數傳入 R.propEq，第二個參數傳入 R.identity，運算後的結果分別丟給 R.find 的第一與第二個參數。</span></span><br><span class="line"></span><br><span class="line">getCurrency(<span class="string">'TWD'</span>, currencies);</span><br></pre></td></tr></table></figure>
<p>使用 <code>useWith</code> 後消除了 <code>name</code> <code>dic</code> 這兩個參數。</p>
<p><img src="/Users/kalan/Desktop/fn1.png" alt="fn1"></p>
<h4 id="converge"><a href="#converge" class="headerlink" title="converge"></a>converge</h4><p>這個函數跟上面的 <code>useWith</code> 有點類似，不過 converge 只接收一個參數。下面這張圖可以很直觀地看出這兩者的差別。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getRange = R.converge(substract, [getFirst, getLast])(numbers); <span class="comment">// return 9</span></span><br></pre></td></tr></table></figure>
<p><img src="/Users/kalan/Desktop/fn2.png" alt="fn2"></p>
<h4 id="identity"><a href="#identity" class="headerlink" title="identity"></a>identity</h4><p>有點太直觀了……，反而不知道怎麼解釋。直接用程式碼解釋比較快。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> identify = <span class="function">(<span class="params">arg</span>) =&gt;</span> arg</span><br></pre></td></tr></table></figure>
<p>至於為什麼要這樣做呢？有時你可能需要組織你的函數達到 chainable，這時 <code>identity</code> 這個函數就能夠派上用場。</p>
<h4 id="tap"><a href="#tap" class="headerlink" title="tap"></a>tap</h4><p>傳入參數給指定的函數，然後回傳值。這在 debug 或是串接其他第三方的時候相當好用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tap(<span class="built_in">console</span>.log)(<span class="string">'hello world'</span>); <span class="comment">// 傳入 hello world 給 console.log，並且回傳 hello world 這個值</span></span><br></pre></td></tr></table></figure>
<p>上面的例子可能看不出來 <code>tap</code> 的用處，我們用搭配 <code>compose</code> 一起使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uploadToMedium = <span class="function"><span class="params">article</span> =&gt;</span> API.postArticle(article);</span><br><span class="line"><span class="keyword">const</span> notifyAdmin    = <span class="function"><span class="params">article</span> =&gt;</span> API.notify(article, subscribers);</span><br><span class="line"><span class="keyword">const</span> log = <span class="function"><span class="params">article</span> =&gt;</span> Logger.log(article)</span><br><span class="line"><span class="keyword">const</span> preprocessArticle = <span class="function"><span class="params">article</span> =&gt;</span> article.toLowerCase()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> publishPostFlow = <span class="function">(<span class="params">article</span>) =&gt;</span> compose(</span><br><span class="line">  preprocessArticle,</span><br><span class="line">  R.tap(uploadToMedium),</span><br><span class="line">  R.tap(notifyAdmin),</span><br><span class="line">  R.tap(log)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">publishPostFlow(article);</span><br></pre></td></tr></table></figure>
<p>這樣一來我們可以很方便地串接其他服務，而不必再撰寫類似 <code>return article</code> 這樣的程式碼，一方面可以減少樣板代碼的麻煩，一方面可以減少出錯的機率。</p>
<h4 id="pluck"><a href="#pluck" class="headerlink" title="pluck"></a>pluck</h4><p>跟字面上的意思差不多，將指定參數的 value 摘取下來變成新的值。在巢狀物件取值時很有幫助，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">&#123;</span><br><span class="line">  id: <span class="string">'1'</span>,</span><br><span class="line">  content: <span class="string">'content...'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  id: <span class="string">'2'</span>,</span><br><span class="line">  content: <span class="string">'content...'</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  id: <span class="string">'3'</span>,</span><br><span class="line">  content: <span class="string">'content...'</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getIds = R.pluck(<span class="string">'id'</span>, data); <span class="comment">// return ['1','2','3']</span></span><br></pre></td></tr></table></figure>
<h4 id="pick-pickBy-pickAll"><a href="#pick-pickBy-pickAll" class="headerlink" title="pick, pickBy, pickAll"></a>pick, pickBy, pickAll</h4><p>實務上我們可能不會用到物件當中所有的屬性，可能只要取出一些屬性來使用而已，這三個 <code>pick</code> 系列的函數可以很方便做到這件事：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="string">"url"</span>: <span class="string">"https://api.github.com/repos/example/magazine/issues/1"</span>,</span><br><span class="line">  <span class="string">"repository_url"</span>: <span class="string">"https://api.github.com/repos/example/magazine"</span>,</span><br><span class="line">  <span class="string">"labels_url"</span>: <span class="string">"https://api.github.com/repos/example/magazine/issues/1/labels&#123;/name&#125;"</span>,</span><br><span class="line">  <span class="string">"comments_url"</span>: <span class="string">"https://api.github.com/repos/example/magazine/issues/1/comments"</span>,</span><br><span class="line">  <span class="string">"events_url"</span>: <span class="string">"https://api.github.com/repos/example/magazine/issues/1/events"</span>,</span><br><span class="line">  <span class="string">"html_url"</span>: <span class="string">"https://github.com/example/magazine/issues/1"</span>,</span><br><span class="line">  <span class="string">"id"</span>: <span class="number">252372781</span>,</span><br><span class="line">  <span class="string">"number"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">"title"</span>: <span class="string">"test issue"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">R.pick([<span class="string">'url'</span>, <span class="string">'repository_url'</span>, <span class="string">'id'</span>, <span class="string">'name'</span>], data); <span class="comment">// 回傳這三個屬性的值，如果找不到此屬性直接忽略</span></span><br><span class="line"></span><br><span class="line">R.pickAll([<span class="string">'url'</span>, <span class="string">'repository_url'</span>, <span class="string">'name'</span>], data) <span class="comment">// 回傳值如果屬性存在，沒有的話會回傳 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isURL = <span class="function">(<span class="params">value, key</span>) =&gt;</span> key.indexOf(<span class="string">'_url'</span>) !== <span class="number">-1</span></span><br><span class="line">R.pickBy(isURL, data); <span class="comment">// 回傳任何屬性含有 _url</span></span><br></pre></td></tr></table></figure>
<h4 id="pathOr"><a href="#pathOr" class="headerlink" title="pathOr"></a>pathOr</h4><p>前端在呼叫後端 API 時，回傳的 JSON 有時會有相當深層的結構，如果用一般的方式 <code>a &amp;&amp; a.b &amp;&amp; a.b.c</code> 的方式取值，不僅程式碼相當雜亂，而且一旦結構過深，就要寫更多的判斷式。</p>
<p><code>pathOr</code> 接受陣列當作取值的順序，一旦取值回傳 <code>undefined</code> 就會回傳預設值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> article = &#123;</span><br><span class="line">  id: <span class="string">"116208916"</span>,</span><br><span class="line">  author: &#123;</span><br><span class="line">    information: &#123;</span><br><span class="line">      birthday: <span class="string">"1994-11-11"</span>,</span><br><span class="line">      name: <span class="string">'kalan'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    subscribers_count: <span class="number">1239</span></span><br><span class="line">  &#125;,</span><br><span class="line">  content: &#123;</span><br><span class="line">  	title: <span class="string">'title'</span>,</span><br><span class="line">	body: <span class="string">'body'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果後端回傳的欄位不齊全，很有可能造成錯誤發生，這個時候就能透過 <code>pathOr</code> 來做處理。這樣一來如果生日沒有值的話就會用「未提供生日」這個字串取代。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getBirthday = R.pathOr([<span class="string">'author'</span>, <span class="string">'information'</span>, <span class="string">'birthday'</span>], <span class="string">'未提供生日'</span>);</span><br><span class="line">getBirthday(article);</span><br></pre></td></tr></table></figure>
<h4 id="memoize"><a href="#memoize" class="headerlink" title="memoize"></a>memoize</h4><p>在計算質數、階層等運算量比較大情景，為了不在每次求值時重新運算一次，可以用 memoize 函數快取已經運算過的結果。</p>
<h3 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h3><p>ramda 是個相當好用函式庫，這篇文章提出一些在一般操作比較少見的 API，不過 ramda 本身的 <a href="http://ramdajs.com/docs/" target="_blank" rel="noopener">API</a> 相當豐富，搭配 <code>compose</code> 你可以自由組裝自己的 function，並且利用以上提到方法來簡化你的函數。</p>
<p>如果你也喜歡這種程式碼風格，歡迎踏入 functional programming 的世界。</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://kjj6198.github.io/2017/08/25/ramda-introduction/" data-id="cjky4lubm002di95t94r27iav" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>關注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/kalanyei" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/justkeiyi" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/kjj6198" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://www.linkedin.com/in/%E6%84%B7%E5%A5%95-%E9%99%B3-8595b1128/" target="_blank">
                        <i class="icon fa fa-linkedin"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="medium" href="https://medium.com/@Shurado" target="_blank">
                        <i class="icon fa fa-medium"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/09/02/frontend-interview/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            前端面試心得
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2017/08/18/Sass/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">你可能不知道的 Sass 技巧</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/雜談/">雜談</a></p>
                            <p class="item-title"><a href="/2018/05/02/birthday-paradox/" class="title">再談生日悖論（Birthday Paradox）</a></p>
                            <p class="item-date"><time datetime="2018-05-01T16:00:00.000Z" itemprop="datePublished">2018-05-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/雜談/">雜談</a></p>
                            <p class="item-title"><a href="/2018/01/01/2017-yearly-review/" class="title">2017 年度總結</a></p>
                            <p class="item-date"><time datetime="2017-12-31T16:00:00.000Z" itemprop="datePublished">2018-01-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/演算法/">演算法</a></p>
                            <p class="item-title"><a href="/2017/12/15/array-sort/" class="title">Array.sort 淺析</a></p>
                            <p class="item-date"><time datetime="2017-12-14T16:00:00.000Z" itemprop="datePublished">2017-12-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/前端/">前端</a></p>
                            <p class="item-title"><a href="/2017/11/24/user-friendly-table/" class="title">如何設計 user friendly 的 table</a></p>
                            <p class="item-date"><time datetime="2017-11-23T16:35:38.000Z" itemprop="datePublished">2017-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/雜談/">雜談</a></p>
                            <p class="item-title"><a href="/2017/11/11/1111-happy-birthday/" class="title">狂歡雙 11  —  祝我生日快樂</a></p>
                            <p class="item-date"><time datetime="2017-11-11T15:34:10.000Z" itemprop="datePublished">2017-11-11</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分類</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AWS/">AWS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rails/">rails</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端週刊/">前端週刊</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日語學習/">日語學習</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/機器學習/">機器學習</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/演算法/">演算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/程式筆記/">程式筆記</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/讀書心得/">讀書心得</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜談/">雜談</a><span class="category-list-count">4</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">歸檔</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit" style="text-align: center;">
                <p>&copy; 2018 Kalan</p>
            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'frontendclothesline';
    
    
    var disqus_url = 'http://kjj6198.github.io/2017/08/25/ramda-introduction/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
