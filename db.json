{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/hueman/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/hueman/source/imgs/favicon.ico","path":"imgs/favicon.ico","modified":0,"renderable":1},{"_id":"themes/hueman/source/js/insight.js","path":"js/insight.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/imgs/avatar.jpg","path":"imgs/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/hueman/source/css/images/opacity-10.png","path":"css/images/opacity-10.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/css/images/logo-header.png","path":"css/images/logo-header.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/css/images/s-left.png","path":"css/images/s-left.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/css/images/thumb-default-small.png","path":"css/images/thumb-default-small.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/css/images/thumb-default.png","path":"css/images/thumb-default.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/styles.css","path":"libs/source-code-pro/styles.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/styles.css","path":"libs/titillium-web/styles.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.css","path":"libs/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.min.css","path":"libs/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css","path":"libs/lightgallery/css/lg-fb-comment-box.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css.map","path":"libs/lightgallery/css/lg-fb-comment-box.css.map","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.min.css","path":"libs/lightgallery/css/lg-fb-comment-box.min.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css","path":"libs/lightgallery/css/lg-transitions.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css","path":"libs/lightgallery/css/lightgallery.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.min.css","path":"libs/lightgallery/css/lg-transitions.min.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css.map","path":"libs/lightgallery/css/lg-transitions.css.map","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css.map","path":"libs/lightgallery/css/lightgallery.css.map","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.svg","path":"libs/lightgallery/fonts/lg.svg","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.min.css","path":"libs/lightgallery/css/lightgallery.min.css","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.ttf","path":"libs/lightgallery/fonts/lg.ttf","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.eot","path":"libs/lightgallery/fonts/lg.eot","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/loading.gif","path":"libs/lightgallery/img/loading.gif","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.woff","path":"libs/lightgallery/fonts/lg.woff","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/vimeo-play.png","path":"libs/lightgallery/img/vimeo-play.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/video-play.png","path":"libs/lightgallery/img/video-play.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.js","path":"libs/lightgallery/js/lg-autoplay.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.min.js","path":"libs/lightgallery/js/lg-autoplay.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.js","path":"libs/lightgallery/js/lg-fullscreen.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.min.js","path":"libs/lightgallery/js/lg-fullscreen.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/youtube-play.png","path":"libs/lightgallery/img/youtube-play.png","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.js","path":"libs/lightgallery/js/lg-hash.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.min.js","path":"libs/lightgallery/js/lg-hash.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.js","path":"libs/lightgallery/js/lg-pager.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.min.js","path":"libs/lightgallery/js/lg-pager.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.js","path":"libs/lightgallery/js/lg-share.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.min.js","path":"libs/lightgallery/js/lg-share.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.js","path":"libs/lightgallery/js/lg-thumbnail.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.min.js","path":"libs/lightgallery/js/lg-thumbnail.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.js","path":"libs/lightgallery/js/lg-video.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.min.js","path":"libs/lightgallery/js/lg-video.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.js","path":"libs/lightgallery/js/lg-zoom.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.min.js","path":"libs/lightgallery/js/lg-zoom.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.js","path":"libs/lightgallery/js/lightgallery.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","path":"libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.min.js","path":"libs/lightgallery/js/lightgallery.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","path":"libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/FontAwesome.otf","path":"libs/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.eot","path":"libs/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff","path":"libs/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","path":"libs/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/jquery/2.0.3/jquery.min.js","path":"libs/jquery/2.0.3/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","path":"libs/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.svg","path":"libs/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"9c421bd8f2822481cab083d194f4ce222ce256b8","modified":1502509717000},{"_id":"themes/hueman/.gitignore","hash":"cd089ae45ce870c45e434019e8f1ed4f066cd425","modified":1485879562000},{"_id":"themes/hueman/.DS_Store","hash":"69de44a9618c556ee87f832f2ca9f97d61adfc0c","modified":1500481091000},{"_id":"themes/hueman/LICENSE","hash":"3975b7883caeb33f61fada7c0ef4add7ab189849","modified":1485879562000},{"_id":"themes/hueman/README.md","hash":"defb1f667677e1fd13b3a4799a6c70eae621f796","modified":1485879562000},{"_id":"themes/hueman/_config.yml","hash":"9f63bd09ea542201bfb618a326399191b633ba66","modified":1507432289000},{"_id":"themes/hueman/ko.yml","hash":"81ea44ecda87a4398bb6d88a3b02f6b73c9a1637","modified":1485879562000},{"_id":"themes/hueman/package.json","hash":"d4ff853568e592265c2c9a21ce358f15babec14a","modified":1485879562000},{"_id":"source/_drafts/performance-matters.md","hash":"08b3d7c327cc8e2dd07ff1dfe1ca754fd534d14b","modified":1499492111000},{"_id":"source/_drafts/video-element.md","hash":"36f00e8e420948a06b2dd997953efe78ac570c4a","modified":1477323161000},{"_id":"source/_drafts/why-cipher-matters.md","hash":"fab57d87a2196b38c4f2f2b4771bc6ff3eba809c","modified":1502376086000},{"_id":"source/_posts/.DS_Store","hash":"c72cea9946ec5ed2ca264975830db9c8c57d2e4f","modified":1488502389000},{"_id":"source/_posts/1111-happy-birthday.md","hash":"fb88d60d87d3a7cb24a8de4e2c5c1f3370541b93","modified":1510414648000},{"_id":"source/_posts/AWS-lambda-medium.md","hash":"f287f30b64b42aa49c1f0286bc945479d3f24097","modified":1510246215000},{"_id":"source/_posts/2016-g0v-summit.md","hash":"1742228cb94cc038827af4eb4ef2f3570592bcf3","modified":1500535191000},{"_id":"source/_posts/PCA-and-t-SNE.md","hash":"f758de7908639836b5259ffa044fb1f74951aa53","modified":1500474546000},{"_id":"source/_posts/Sass.md","hash":"19b51496a9f6e2ffa4d44591f4fef202e9b3f354","modified":1503342282000},{"_id":"source/_posts/aircrash-extreme-weather.md","hash":"65cfdbd4f178d4557604682e166b327033cf4088","modified":1501935454000},{"_id":"source/_posts/array-sort.md","hash":"9dd0df38b0b70061abe34a55e4e1d6993ef398d8","modified":1513491765000},{"_id":"source/_posts/better-express-error.md","hash":"7147fb9662e6564afd9b1ae083d9ce9f3f85c7a6","modified":1510246338000},{"_id":"source/_posts/code-review-101.md","hash":"da1ad413dc9adb646ded7e573a6f068e23129d29","modified":1488298756000},{"_id":"source/_posts/chatops.md","hash":"df15f88304dab1111dd69e9569e4c5cc9699f92e","modified":1488459343000},{"_id":"source/_posts/context-switch.md","hash":"cb49a1220944496756ff81a85acb87f4ea2951ca","modified":1488293912000},{"_id":"source/_posts/css-variable.md","hash":"224408ecdf8800f8793889c278a3a8c37ed33865","modified":1479125236000},{"_id":"source/_posts/frontend-weekly.md","hash":"e745f5c3d61d45518deb31cdbc7694a9174701f4","modified":1487503015000},{"_id":"source/_posts/frontend-interview.md","hash":"9bb3f52d23a7e91d994caceaba5bc6206c2b69fe","modified":1507455660000},{"_id":"source/_posts/gasline.md","hash":"684eb20fda393da70b263543e1b2b5984578807d","modified":1487503568000},{"_id":"source/_posts/go-to-postcss-or-not.md","hash":"e56864f9d79e2ba2857793a350861bf5b91f775e","modified":1488294248000},{"_id":"source/_posts/isaka-kupa.md","hash":"47e71a7eb0415328a7b73d97097617391d72fb41","modified":1476601193000},{"_id":"source/_posts/jlpt-learning.md","hash":"43f4e6edd70383c5ac9686f4dc7a8884131bb5d7","modified":1507384221000},{"_id":"source/_posts/labor-project.md","hash":"2b973cb46ac767dca553ac27fa14d14db0412d43","modified":1500472950000},{"_id":"source/_posts/legacy-code.md","hash":"5ae91cdbac99e2a576e5c6c23ee982937508a7f2","modified":1476790298000},{"_id":"source/_posts/legacy-code2.md","hash":"8eaadd71ff9484f677ef2ef8334654472dc76eff","modified":1476790320000},{"_id":"source/_posts/legacy-code3.md","hash":"bdee6536ca8fc789184b9ed5804cdccec4d83c1c","modified":1476790338000},{"_id":"source/_posts/low-poly-art.md","hash":"fc1aec18895eb5ddcc283165383e2bedc0c14c63","modified":1488296513000},{"_id":"source/_posts/morden-time.md","hash":"bb821cdc4b900b9173dfe01bfa174f78503f6875","modified":1488348200000},{"_id":"source/_posts/nihon-future.md","hash":"a84350f7d81e11593f207b49dbbb0a0343210c96","modified":1510246440000},{"_id":"source/_posts/ramda-introduction.md","hash":"5d3954dd3f894f0df4ac1a65351981cbc6d1c457","modified":1503591341000},{"_id":"source/_posts/react-16-features.md","hash":"937b156c684f02a736e4a8b53b26b8c5c764a90d","modified":1507383900000},{"_id":"source/_posts/readble-code-art.md","hash":"4f92bb0623de0e901254f099fa5882a69ac65e64","modified":1488298573000},{"_id":"source/_posts/redux-saga-and-redux-observable.md","hash":"4b6fbe9de3a678df5b185d0057db59ff408fe46f","modified":1502511621000},{"_id":"source/_posts/responsive-flex.md","hash":"dad6d544fbb5a79e8027ddfaa7230b2d37ef3064","modified":1488337494000},{"_id":"source/_posts/scroll-animation-2.md","hash":"cf04f726b9361ea21ca1f13b6b63257c4410fb15","modified":1476858045000},{"_id":"source/_posts/scroll-animation.md","hash":"618e37f477bfd10aa96f86318d908575636fb9fe","modified":1476858064000},{"_id":"source/_posts/user-friendly-table.md","hash":"ff709d49ff8bb32e7286b7eb9c6cd811b1836a36","modified":1513492757000},{"_id":"source/_posts/webgl-it.md","hash":"ff258cdb27958598223e561f945cd0bef5a937ec","modified":1488299331000},{"_id":"source/_posts/weekly-6-6.md","hash":"12e8d546c41271ed7a4d1ba27b583d4e001face5","modified":1479123910000},{"_id":"source/_posts/weekly-thought-5-29.md","hash":"e6fb6abfe0656424b8e8417c6b9c5d29dcd04488","modified":1487503148000},{"_id":"source/_posts/weekly-thought-5-30.md","hash":"adbfde5480313c4ca6c738dc6bdd6b12686d07c7","modified":1479124299000},{"_id":"source/_posts/weekly-thought-7-17.md","hash":"91c64a62746b92649187d0da38aee58d457856d3","modified":1479124491000},{"_id":"source/_posts/weekly-thought-7-31.md","hash":"0b955314fbed8d8e8855e614fff788500469b516","modified":1479124266000},{"_id":"source/_posts/what-is-yaoya.md","hash":"74dc1b419fe52a16980d0756f023b06935e09b28","modified":1500475952000},{"_id":"themes/hueman/.github/ISSUE_TEMPLATE.md","hash":"1ce6c6330e2e37fcf4764d69ed2c43670e30eb23","modified":1485879562000},{"_id":"themes/hueman/languages/ca.yml","hash":"d082e6f9e7615556b8f6c5f1286f0db8a0db195e","modified":1485879562000},{"_id":"themes/hueman/languages/en.yml","hash":"3416fee358d869e6abf0cca695edf8386349053f","modified":1485879562000},{"_id":"themes/hueman/languages/es.yml","hash":"97191c8ab7ce5334369d96f6e53a6d365a2057b1","modified":1485879562000},{"_id":"themes/hueman/languages/fr.yml","hash":"0624f8f7532f1312caaf4f8d498aab69c80a92f2","modified":1485879562000},{"_id":"themes/hueman/languages/hu.yml","hash":"5dd987ad5f33748bcba1d9a7eb78c1800b7c8bed","modified":1485879562000},{"_id":"themes/hueman/languages/id.yml","hash":"03e45cf88b69e657a340362e18668e443ddaae47","modified":1485879562000},{"_id":"themes/hueman/languages/ja.yml","hash":"56f3af0bf5cc56f9f7bf24fe5cb881a6a1b34e7b","modified":1485879562000},{"_id":"themes/hueman/languages/pt-BR.yml","hash":"6f9539673e08d66866bb210b78863ef68023f991","modified":1485879562000},{"_id":"themes/hueman/languages/ru.yml","hash":"99f111b39f867d421ff4cb859dd1deb26caa382e","modified":1485879562000},{"_id":"themes/hueman/languages/tr.yml","hash":"003cb50200eba865d57e5c53925636f1a5ec0a70","modified":1485879562000},{"_id":"themes/hueman/languages/vi.yml","hash":"edeb4492a08af458fe958dc4d48101c96750b159","modified":1485879562000},{"_id":"themes/hueman/layout/archive.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1485879562000},{"_id":"themes/hueman/languages/zh-TW.yml","hash":"83a51f84e9a9fdc5fbbfb3dae34ab416585d07fd","modified":1500474920000},{"_id":"themes/hueman/layout/category.ejs","hash":"5096d3f019098d9940429152295f6d6161d887ba","modified":1485879562000},{"_id":"themes/hueman/layout/index.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1485879562000},{"_id":"themes/hueman/layout/layout.ejs","hash":"35fd7fe6d4e2d313246a0a31446a597714facdea","modified":1500481387000},{"_id":"themes/hueman/layout/page.ejs","hash":"5afddd6a45fa72beacec8d760487dfe8a667e622","modified":1485879562000},{"_id":"themes/hueman/layout/post.ejs","hash":"5afddd6a45fa72beacec8d760487dfe8a667e622","modified":1485879562000},{"_id":"themes/hueman/layout/tag.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1485879562000},{"_id":"themes/hueman/scripts/excerpt.js","hash":"630f17f2647b2ba5b207dba36fb3c6587a3aa04f","modified":1485879562000},{"_id":"themes/hueman/scripts/meta.js","hash":"1993754a2f3dffa283fa0538eb8f056385b69ad4","modified":1485879562000},{"_id":"themes/hueman/scripts/thumbnail.js","hash":"e78b1b978fa1acad5409afc685d13f669e80b24f","modified":1485879562000},{"_id":"themes/hueman/source/.DS_Store","hash":"71de49345b332e02516e8cd5f553d3a97c7c0bf7","modified":1488300546000},{"_id":"source/_posts/chatops/success.png","hash":"9e9d45b959cdc054bfb53bab094b400bb4e302c6","modified":1488385204000},{"_id":"source/_posts/chatops/process.png","hash":"9d4a8270be6c09208aa0943cba8e65403ef498e5","modified":1488382789000},{"_id":"themes/hueman/layout/comment/counter.ejs","hash":"9c41bc718322ba0e4e08c301f15fae720c995b2e","modified":1485879562000},{"_id":"themes/hueman/layout/comment/disqus.ejs","hash":"83158f5b00f95acf847524fd7ffeb5aab25add78","modified":1485879562000},{"_id":"themes/hueman/layout/comment/duoshuo.ejs","hash":"ce46d7410a99b57704da32e9d09071cef6c9fa93","modified":1485879562000},{"_id":"themes/hueman/layout/comment/facebook.ejs","hash":"6407d3d6823503d043935b0bc16fa5f61aa9e4dc","modified":1485879562000},{"_id":"themes/hueman/layout/comment/index.ejs","hash":"1ecc5ba82ae4236da7635a58d4584fd67f6f1fc3","modified":1485879562000},{"_id":"themes/hueman/layout/comment/isso.ejs","hash":"4f8b81ff5bb418ec11ce080d515f247bfe436014","modified":1485879562000},{"_id":"themes/hueman/layout/comment/scripts.ejs","hash":"305aa07646ab03e00d8239a811f4ec6f75751e1e","modified":1485879562000},{"_id":"themes/hueman/layout/comment/youyan.ejs","hash":"6fe807992832939caf6c3e7651d052df9520d88e","modified":1485879562000},{"_id":"themes/hueman/layout/common/content-title.ejs","hash":"43288ebc0ea30d80e6d7df56f2e7ed5d7935ed1a","modified":1485879562000},{"_id":"themes/hueman/layout/common/archive.ejs","hash":"bf909e4d6798374daf114cf41540f2bd300408d9","modified":1500481293000},{"_id":"themes/hueman/layout/common/article.ejs","hash":"bb92ad6dcd9cfaa88aa589620cc1f87a2d7a665c","modified":1507383630000},{"_id":"themes/hueman/layout/common/head.ejs","hash":"dacc29256a51d4867c662b6f1805d0d7652de45d","modified":1485879562000},{"_id":"themes/hueman/layout/common/footer.ejs","hash":"f37d40bd587318e2f9946e61ecb83aa0d2637027","modified":1488301128000},{"_id":"themes/hueman/layout/common/header.ejs","hash":"97d5e1b91358bf2d4b3eb3272a6dfbcccbef0130","modified":1507384888000},{"_id":"themes/hueman/layout/common/scripts.ejs","hash":"db677ab336d31292bffc071b2115e25e9c6f198d","modified":1485879562000},{"_id":"themes/hueman/layout/common/sidebar.ejs","hash":"745666ee78b714aa34d8774a005a0598261ec349","modified":1485879562000},{"_id":"themes/hueman/layout/common/thumbnail.ejs","hash":"c5fba5d5287f49e02040c530cd92312b2221a2c1","modified":1485879562000},{"_id":"themes/hueman/layout/common/summary.ejs","hash":"16c50d2a9bfc5285cbd7fa77227c279f4104e1a3","modified":1488298897000},{"_id":"themes/hueman/layout/plugin/baidu-analytics.ejs","hash":"d99089976258050666208f29000f84496fe1029c","modified":1485879562000},{"_id":"themes/hueman/layout/plugin/google-analytics.ejs","hash":"349f08b6521a16e79046b1f94f04317ac74f556e","modified":1485879562000},{"_id":"themes/hueman/layout/plugin/scripts.ejs","hash":"52552496d83d032702f9fc40da8d62894dc51dae","modified":1485879562000},{"_id":"themes/hueman/layout/search/baidu.ejs","hash":"bcffa60f2d1750ac7499e928f538176e3804393b","modified":1485879562000},{"_id":"themes/hueman/layout/search/index.ejs","hash":"1a6a742727018567f60f8815be0bff5a45294ce5","modified":1485879562000},{"_id":"themes/hueman/layout/search/insight.ejs","hash":"130fe3d33ac71da0b50f7fee6a87979f30938a1b","modified":1485879562000},{"_id":"themes/hueman/layout/search/swiftype.ejs","hash":"379e66d2c13526e72e4120c443f95fccf4edef71","modified":1485879562000},{"_id":"themes/hueman/layout/share/addtoany.ejs","hash":"ac180c4c84b73a04d61b17e7dc18c257e20bf59f","modified":1485879562000},{"_id":"themes/hueman/layout/share/bdshare.ejs","hash":"a1e772c5a6f174d585b0c1e574058f75dc8e2898","modified":1485879562000},{"_id":"themes/hueman/layout/share/default.ejs","hash":"7492f5b375a56c67a1a1a4f6b893e37f49dc86dc","modified":1485879562000},{"_id":"themes/hueman/layout/share/index.ejs","hash":"029e91aace5a4c0d8387fc7744c477ccc6865c30","modified":1485879562000},{"_id":"themes/hueman/layout/share/jiathis.ejs","hash":"21ebaa51e828cba2cefbeeaccb01514643565755","modified":1485879562000},{"_id":"themes/hueman/layout/widget/archive.ejs","hash":"c4d303eaaa23768e52ead324c422a8900b1fe448","modified":1485879562000},{"_id":"themes/hueman/layout/widget/links.ejs","hash":"97dab84d6336a4c926ddc288d5a6c264f54c50c3","modified":1485879562000},{"_id":"themes/hueman/layout/widget/category.ejs","hash":"2d705df76f2eef7d695a971266fc104e89ca6bcd","modified":1485879562000},{"_id":"themes/hueman/layout/widget/sticky_posts.ejs","hash":"6bad4126bed652f5f9e93027cbe3ee03b67b034a","modified":1485879562000},{"_id":"themes/hueman/layout/widget/recent_posts.ejs","hash":"1238725b1cebf2eaaee4515c9579df62b961504c","modified":1488293682000},{"_id":"themes/hueman/layout/widget/tag.ejs","hash":"bfbc63e675439dcdc35e07dce6948e41500b649c","modified":1485879562000},{"_id":"themes/hueman/layout/widget/tagcloud.ejs","hash":"3ecb048d6098bc3953043a4c25f1f7c4b23397cf","modified":1485879562000},{"_id":"themes/hueman/source/css/_extend.styl","hash":"2860d503b68ae81ea7675c82c6e63873e0c9e761","modified":1485879562000},{"_id":"themes/hueman/source/css/.DS_Store","hash":"b8e5951c497e1060bfccf7be197be3bad8cb1885","modified":1488300554000},{"_id":"themes/hueman/source/css/_responsive.styl","hash":"4addaf2f203563accf0479850eda1ab4f4a4c34b","modified":1485879562000},{"_id":"themes/hueman/source/css/_variables.styl","hash":"47ad3caba4e424278acdfab9d65216b6aefc21c8","modified":1501935332000},{"_id":"themes/hueman/source/css/style.styl","hash":"f5d6f3cc56f9c452c721ae165742a49ce91fc62e","modified":1507384944000},{"_id":"themes/hueman/source/imgs/favicon.ico","hash":"b805bfe1b508329635722c8865ad039d0688750c","modified":1500480980000},{"_id":"themes/hueman/source/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1485879562000},{"_id":"themes/hueman/source/js/main.js","hash":"ebe5a326605ab655155235c532b54a78a0662988","modified":1485879562000},{"_id":"themes/hueman/source/imgs/avatar.jpg","hash":"b21ff62d3b433c1bb4970da7a1e0df8d5583ff3d","modified":1492568224000},{"_id":"themes/hueman/layout/common/post/category.ejs","hash":"f47522c059d3b4d721ce501203c05f94a285c0b5","modified":1485879562000},{"_id":"themes/hueman/layout/common/post/date.ejs","hash":"2d090d33cbd23129d63a0ba768a03d717399d9c5","modified":1485879562000},{"_id":"themes/hueman/layout/common/post/title.ejs","hash":"6d19c61afb1f5f71c483be2ce37c6820ac2cd8b5","modified":1485879562000},{"_id":"themes/hueman/layout/common/post/gallery.ejs","hash":"659f019761116313169148ec61773e7b84abb739","modified":1485879562000},{"_id":"themes/hueman/layout/common/post/nav.ejs","hash":"c5f41ebf451cff39eaf116096604ce706a175767","modified":1485879562000},{"_id":"themes/hueman/layout/common/post/tag.ejs","hash":"a364204d7152adf6c7522b6568990437e8308d1f","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/brown-paper.styl","hash":"c2326ba20a5020a66ca7895258d18833327d4334","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/highlightjs.styl","hash":"0e198b7a59191c7a39b641a4ddd22c948edb9358","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/index.styl","hash":"d421ed06c84f7a561b293f662a670bf132d41c63","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/school-book.styl","hash":"d43560fe519a931ce6da7d57416d7aa148441b83","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1485879562000},{"_id":"themes/hueman/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/archive.styl","hash":"5e5fb791ab54f0acf33850f586f7aa8cb2782f3a","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/comment.styl","hash":"d2de8f2c1cf6236ead0800c2a1566e01e7ae0b44","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/assets.styl","hash":"3d95417663c5a737f064a31ab4ef52bac7fda8df","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/article.styl","hash":"e498f535df9350d73c8c7f7f4c00024570a673c9","modified":1507384162000},{"_id":"themes/hueman/source/css/_partial/footer.styl","hash":"8dffae4ac6a57e506e378a9ce44b85a15a912cad","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/header.styl","hash":"86912e37cc67c8c92b5d7b208324065d86176e74","modified":1501935098000},{"_id":"themes/hueman/source/css/_partial/insight.styl","hash":"3d66323e7b75ad197e80d7189a8d9216e1e1ef2f","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/nav.styl","hash":"587a9c9d304ed83eb0331a1d16693461805311c3","modified":1485879562000},{"_id":"themes/hueman/source/css/_partial/sidebar.styl","hash":"172d793cc5ba3386066c418d63c0cc40be2292b8","modified":1488294978000},{"_id":"themes/hueman/source/css/images/opacity-10.png","hash":"bbc979866c5b50e8adb348419154b28b1ff44d78","modified":1485879562000},{"_id":"themes/hueman/source/css/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1488300570000},{"_id":"themes/hueman/source/css/images/logo-header.png","hash":"7e665de60c53992fd817ddb6d9a2bc5513a23c71","modified":1488300673000},{"_id":"themes/hueman/source/css/images/s-left.png","hash":"c8cac4f4e3492606fab93196364bd0f87d93bb98","modified":1485879562000},{"_id":"themes/hueman/source/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1485879562000},{"_id":"themes/hueman/source/css/images/thumb-default.png","hash":"2d0ba175d958d342494241c616a74d37f48059fb","modified":1485879562000},{"_id":"themes/hueman/source/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/styles.css","hash":"d98f0c50aae4c922cd0b663fa820fd7dff2dd9b1","modified":1485879562000},{"_id":"source/_posts/responsive-flex/example1.png","hash":"46415e1e6b976f38c0bfb2a55fd43a297eb6106a","modified":1479124117000},{"_id":"source/_posts/chatops/payload.png","hash":"31ca3ca8a007dc5b8ce80b39ab02254f7c443849","modified":1488456919000},{"_id":"source/_posts/responsive-flex/example3.png","hash":"010f246ab21f1db5ee419167087188f4090dc1f0","modified":1479124117000},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1485879562000},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1485879562000},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","hash":"78029561e4c2ec565ea11c3f5bbd052b018af8a6","modified":1485879562000},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","hash":"6d17eac7fcc2866f10d1f2725a08ab749a6e978d","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","hash":"4e5557954ec161edc03b6f971ddefee6179c1305","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","hash":"1454a4753468b607c23deac9f5438cd0ed5cb35d","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","hash":"1758c64c8acec4497735ccb5336b1a518d24024c","modified":1485879562000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","hash":"e2e2993940fc54ed41f26e39257fdbd824c05e81","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1485879562000},{"_id":"themes/hueman/source/libs/jquery/2.0.3/jquery.min.js","hash":"a6eedf84389e1bc9f757bc2d19538f8c8d1cae9d","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1485879562000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1485879562000},{"_id":"source/_posts/responsive-flex/example2.png","hash":"0dfd4db0f1a75a820371232cbf645066d412ed2c","modified":1479124117000},{"_id":"public/content.json","hash":"87604f6c72d62d327f4e1795613893b3e26b30ab","modified":1513492780187},{"_id":"public/2017/12/15/array-sort/index.html","hash":"3d34c9fcdb0f27332b969012b1d9982738329283","modified":1513492782134},{"_id":"public/2017/11/24/user-friendly-table/index.html","hash":"169b80079aa8c3886c358f398d2a6b8727cecd69","modified":1513492782134},{"_id":"public/2017/11/11/1111-happy-birthday/index.html","hash":"66071ececc0141d267dd07f87c834541f5f90996","modified":1513492782134},{"_id":"public/2017/11/10/better-express-error/index.html","hash":"7adf3c1694703091a7fb3fc13bc0507742c6da62","modified":1513492782134},{"_id":"public/2017/11/10/AWS-lambda-medium/index.html","hash":"0cb6e4671a3e55ad18abd7b90dd4b7d9af7ca660","modified":1513492782135},{"_id":"public/2017/10/07/jlpt-learning/index.html","hash":"a45a5eb259607adbf7afe584d89595c76670e0fa","modified":1513492782135},{"_id":"public/2017/10/02/react-16-features/index.html","hash":"81fb1b0ee065ec8c8523353e3ce1e9e5e7d0b6c4","modified":1513492782135},{"_id":"public/2017/09/02/frontend-interview/index.html","hash":"16cb5f14609902ab0115d7e37a9109267f5e582a","modified":1513492782135},{"_id":"public/2017/08/25/ramda-introduction/index.html","hash":"932597d17558c1c1dbe0b3a49bcb67c603373ea1","modified":1513492782135},{"_id":"public/2017/08/18/Sass/index.html","hash":"38f8a52eaffac17d7e072dd5719411dea2050888","modified":1513492782135},{"_id":"public/2017/08/05/aircrash-extreme-weather/index.html","hash":"3635f9613c905fd2778af9e597f83bcc25b9398d","modified":1513492782135},{"_id":"public/2017/07/18/PCA-and-t-SNE/index.html","hash":"8ec6afa09921dee78c5b2b7562c57181f17631c3","modified":1513492782135},{"_id":"public/2017/07/14/what-is-yaoya/index.html","hash":"6fde56fd17f827c2c0dfbccb4b0612de99e1f5ba","modified":1513492782135},{"_id":"public/2017/05/05/redux-saga-and-redux-observable/index.html","hash":"9d3ecc43cbde70c67ae89de12af73564c843c3c0","modified":1513492782135},{"_id":"public/2017/05/01/labor-project/index.html","hash":"f44a3b2b1c20f22ecacfd9dc4ffbd982094f1fad","modified":1513492782135},{"_id":"public/2017/03/01/chatops/index.html","hash":"1110282817a497a296722eb8960eb188c507d74d","modified":1513492782135},{"_id":"public/2017/02/28/webgl-it/index.html","hash":"fa45bb9d0f2980a7b803b7db6d811e154219873c","modified":1513492782135},{"_id":"public/2017/02/22/morden-time/index.html","hash":"5f70918e1b0fcc8655b9c8d1a9cce450d8de6360","modified":1513492782135},{"_id":"public/2017/02/01/responsive-flex/index.html","hash":"487e3bdf78e3cc2bc470ecaaaa509ccdb410fa4f","modified":1513492782136},{"_id":"public/2017/01/01/code-review-101/index.html","hash":"4368a0131e687db78c3d36e0581ce8b63a689d85","modified":1513492782136},{"_id":"public/2016/11/14/weekly-thought-5-30/index.html","hash":"663953eac073f5530a11bb27ec9b78aac6a4ac94","modified":1513492782136},{"_id":"public/2016/11/14/frontend-weekly/index.html","hash":"c0cdbef3cc3abcc441bf67358bc551691f57e324","modified":1513492782136},{"_id":"public/2016/11/14/css-variable/index.html","hash":"d270bf16d39057c7d2b4fdf91b73ef1fb4b8740e","modified":1513492782136},{"_id":"public/2016/11/01/low-poly-art/index.html","hash":"43cb934597c0e424f4a40f2e48a1631bbc333b64","modified":1513492782136},{"_id":"public/2016/10/27/context-switch/index.html","hash":"072177836e2915d49fa8bf17f1c51e62634a3164","modified":1513492782136},{"_id":"public/2016/10/16/gasline/index.html","hash":"ad30411941a20d1a563258b9ae6b4b132408384a","modified":1513492782136},{"_id":"public/2016/10/16/isaka-kupa/index.html","hash":"5b1457d4eddf0593166520238b4d3e2bd467aa6a","modified":1513492782136},{"_id":"public/2016/10/13/scroll-animation-2/index.html","hash":"cb875ce47bc766b6526816f74da9060447393d3b","modified":1513492782136},{"_id":"public/2016/10/12/scroll-animation/index.html","hash":"a9e6e1e285131f6a511e7bfe7c4a3371e285e483","modified":1513492782136},{"_id":"public/2016/09/17/legacy-code3/index.html","hash":"dae1ef1f4a48264de974ebbb28dc235a9e265aa6","modified":1513492782136},{"_id":"public/2016/09/16/go-to-postcss-or-not/index.html","hash":"4416ae479d6694f1bb8960dce73b5bf1d95c78de","modified":1513492782136},{"_id":"public/2016/07/31/weekly-thought-7-31/index.html","hash":"18f5d095a8365c5a53b65c60d0bf2e6b12ee97d2","modified":1513492782136},{"_id":"public/2016/07/17/weekly-thought-7-17/index.html","hash":"f6bf26d80483c97dacf39345ef78cdc16f60269c","modified":1513492782136},{"_id":"public/2016/06/14/legacy-code2/index.html","hash":"5c6153d2c1743f4c9b8f99eff54f2932bc0585b8","modified":1513492782136},{"_id":"public/2016/06/11/legacy-code/index.html","hash":"93a539b61ed9308830b4a2df241b41e627fefb5b","modified":1513492782137},{"_id":"public/2016/06/11/2016-g0v-summit/index.html","hash":"ec1ba93e61575f968614c9f6c3a43f2268cb0d88","modified":1513492782137},{"_id":"public/2016/06/06/weekly-6-6/index.html","hash":"e593e0adccb972a147db48c52aaebf71feb9c88e","modified":1513492782137},{"_id":"public/2016/05/29/weekly-thought-5-29/index.html","hash":"aa3e3b4fac19a70b8bc285390a28da71966f83a3","modified":1513492782137},{"_id":"public/2016/03/20/readble-code-art/index.html","hash":"0b09ab42a7532a5cf4c2bd9edab9c92dac85a7ac","modified":1513492782137},{"_id":"public/archives/index.html","hash":"162e41b4f79aaeed5bcdedbe3b407382cf636049","modified":1513492782137},{"_id":"public/archives/page/2/index.html","hash":"7f80bd0f3ce5be7774c83720c2d619da467b6688","modified":1513492782137},{"_id":"public/archives/page/3/index.html","hash":"c996af9ba4bdd5c78c8862dcdde4dd504716eddf","modified":1513492782137},{"_id":"public/archives/page/4/index.html","hash":"4c75b4f3f4d3e00a64c38720b904074f5fbaea66","modified":1513492782137},{"_id":"public/archives/2016/index.html","hash":"b8feb61cd89183f49b774e951dd31dfb4b5f1b5b","modified":1513492782137},{"_id":"public/archives/2016/page/2/index.html","hash":"479b6caca62c64393840693984d7ae1a2017370b","modified":1513492782137},{"_id":"public/archives/2016/03/index.html","hash":"94c9c80801621cd68338657280788ca955ec90e3","modified":1513492782137},{"_id":"public/archives/2016/05/index.html","hash":"216010454403bed0259d421397440f58067698f2","modified":1513492782137},{"_id":"public/archives/2016/06/index.html","hash":"b6d9ecac8c8edb2531bb209ee59f4ebaa8a77a6f","modified":1513492782137},{"_id":"public/archives/2016/07/index.html","hash":"84697c18b96a91f5f4832b389d115ad321bb87f0","modified":1513492782137},{"_id":"public/archives/2016/09/index.html","hash":"19ae52f1cc5803cdf2d8b724532460f7166d83b4","modified":1513492782138},{"_id":"public/archives/2016/10/index.html","hash":"fa657f576f814dffea7913ff4b05a68ea3346d21","modified":1513492782138},{"_id":"public/archives/2016/11/index.html","hash":"b6ee3218391be8768d19f72f3a86c04514264809","modified":1513492782138},{"_id":"public/archives/2017/index.html","hash":"4d8624eda8f4e12b9ebdd088501898b2228f7645","modified":1513492782138},{"_id":"public/archives/2017/page/2/index.html","hash":"e908a6c55d67635742dd565ecaadb5817065b666","modified":1513492782138},{"_id":"public/archives/2017/01/index.html","hash":"9d82e1aedfd493375f81dfa9a011f3d2569d8aaa","modified":1513492782138},{"_id":"public/archives/2017/02/index.html","hash":"58217132a1a56dd30f0f1da19776b1759bf9de1c","modified":1513492782138},{"_id":"public/archives/2017/03/index.html","hash":"49cd8bedaed54d9370915ac70c32bc62747a7b46","modified":1513492782138},{"_id":"public/archives/2017/05/index.html","hash":"409d367e8fd653a8004df99a208c4481266687f3","modified":1513492782138},{"_id":"public/archives/2017/07/index.html","hash":"8f89d440b2e8b0e3e6583bcdeacf00178e772dfb","modified":1513492782138},{"_id":"public/archives/2017/08/index.html","hash":"cf1e0e5b981c14edad3e7cfd5372f324b7aa5b72","modified":1513492782138},{"_id":"public/archives/2017/09/index.html","hash":"9c67e5e3a3058bc23e8f78c347123fbbf902be5b","modified":1513492782138},{"_id":"public/archives/2017/10/index.html","hash":"f10a896ee59cbfe0544e99dbe6b7dcaf0348c914","modified":1513492782138},{"_id":"public/archives/2017/11/index.html","hash":"0503236e2dda0dc1547a329d23e35c7d0b4bbbb4","modified":1513492782138},{"_id":"public/archives/2017/12/index.html","hash":"ea50b075a40e59baff5336ea0348bf2aa2541bff","modified":1513492782138},{"_id":"public/categories/前端/index.html","hash":"3a423250a7f948ea6cbc97f0679241165b18e7ad","modified":1513492782139},{"_id":"public/categories/前端/page/2/index.html","hash":"16fc4a0e880c748a97f1c523e42dbde1bfbd2eb3","modified":1513492782139},{"_id":"public/categories/雜談/index.html","hash":"5407825491d8b31ec4a4a28d1fcf160fb528f0ac","modified":1513492782139},{"_id":"public/categories/AWS/index.html","hash":"45c042a1c1a44a891379d2df41cff041a2ea2884","modified":1513492782139},{"_id":"public/categories/機器學習/index.html","hash":"2264e26b6ccc8f91a078f1830e3436d269f7e297","modified":1513492782139},{"_id":"public/categories/演算法/index.html","hash":"f9bd1517ac7a90e74126277635c96b6627a5ec6e","modified":1513492782139},{"_id":"public/categories/nodejs/index.html","hash":"1e2bb461aa134ea93aff94bda0210b116f06d6a8","modified":1513492782139},{"_id":"public/categories/rails/index.html","hash":"c2e02e657ba2e9e89382b1f2dcb7e0dc4d7878c4","modified":1513492782139},{"_id":"public/categories/前端週刊/index.html","hash":"a8818f453e0b2f281035ad529d9f4e977e99e13b","modified":1513492782139},{"_id":"public/categories/讀書心得/index.html","hash":"d42ddc872725e9f5b5fa0bacaf50b4c4858c6253","modified":1513492782139},{"_id":"public/categories/日語學習/index.html","hash":"901bc5ab141dcb578270bfd0b27a779c0795025b","modified":1513492782139},{"_id":"public/categories/程式筆記/index.html","hash":"0d353e3cc21d71dbcb33a9a5af24ae82396116b9","modified":1513492782139},{"_id":"public/index.html","hash":"4a028a2b0dd4f44af49c350ca406039fa8df354c","modified":1513492782139},{"_id":"public/page/2/index.html","hash":"8e4f601c8b7f24972262cf9832d85eaf792006b4","modified":1513492782139},{"_id":"public/page/3/index.html","hash":"aeb1ee9d38c6c946b6989a9ad21f0677b6bc3fd0","modified":1513492782140},{"_id":"public/page/4/index.html","hash":"c176af89941bfc196fd2377d29bc2e5c42635b2b","modified":1513492782140},{"_id":"public/tags/canvas/index.html","hash":"1675df054929fbefa08722b64d757807cf6df495","modified":1513492782140},{"_id":"public/tags/雙-11/index.html","hash":"973f9c398ccc3e04db8c03293952cb9c52494737","modified":1513492782140},{"_id":"public/tags/lambda/index.html","hash":"830119221d5b4872daccb6d1f1dbc9d07748a347","modified":1513492782140},{"_id":"public/tags/medium/index.html","hash":"495cc9de0194383df7279870a632256685c048bf","modified":1513492782140},{"_id":"public/tags/g0v/index.html","hash":"f61877893a10a201820909ccc1e29bf360f39133","modified":1513492782140},{"_id":"public/tags/降維/index.html","hash":"510710937ccd2d14fea0c4405f0b1c842abcf5d4","modified":1513492782140},{"_id":"public/tags/PCA/index.html","hash":"982bedaaf08814c141acca77a0cafa73aa969447","modified":1513492782140},{"_id":"public/tags/t-SNE/index.html","hash":"007844a9de64e17c14a9cb8f39df3b5a22748ac6","modified":1513492782140},{"_id":"public/tags/sass/index.html","hash":"314906a903ea04ad52867e8661a6a45c887cca49","modified":1513492782140},{"_id":"public/tags/飛機/index.html","hash":"d10c44fe0bd4e671587afc9ceaeb85f4e0d86e84","modified":1513492782140},{"_id":"public/tags/空難/index.html","hash":"d95e26474ec38bb073352e2c336673f96f3e0e22","modified":1513492782140},{"_id":"public/tags/天氣/index.html","hash":"9fb50ce42cbbb1b25ca61bc3d0531872ecf0407e","modified":1513492782141},{"_id":"public/tags/algorithm/index.html","hash":"3a08b9d60dff35670f3260a3c974d66ab94c8d5f","modified":1513492782141},{"_id":"public/tags/sorting/index.html","hash":"f21d649e4529c3ddc8f1c4bb0498ee420ef8118c","modified":1513492782141},{"_id":"public/tags/nodejs/index.html","hash":"bc69c5951730d454748025c74792e68b9a9b38ec","modified":1513492782141},{"_id":"public/tags/express/index.html","hash":"d2c98753e9fe3903990d1ba1c32b8b128f5f1847","modified":1513492782141},{"_id":"public/tags/devops/index.html","hash":"f9fb8de1dd088e588624fe4523a8d47d9e1c6e06","modified":1513492782141},{"_id":"public/tags/chatops/index.html","hash":"3e6a7d23137f55481337c263fc49a330f05de040","modified":1513492782141},{"_id":"public/tags/capistrano/index.html","hash":"199cb5a970ed874c0f7caa565bbb5f308a157a6a","modified":1513492782141},{"_id":"public/tags/css/index.html","hash":"d7e841218213462f3ad294242c8c345f5172d978","modified":1513492782141},{"_id":"public/tags/react/index.html","hash":"bfd6ba99d9e3ef9fb82719f826c408eea9ad0270","modified":1513492782141},{"_id":"public/tags/webpack/index.html","hash":"a1591e4b879a378692cd7e661b49da626cd3dcab","modified":1513492782141},{"_id":"public/tags/面試/index.html","hash":"4106caa00afc505492659e8fbcd9c70d442876da","modified":1513492782141},{"_id":"public/tags/伊坂幸太郎/index.html","hash":"93346687648d1ee1191993a2de5cd3c375a472f9","modified":1513492782141},{"_id":"public/tags/postcss/index.html","hash":"80104640b7c14f79712d8ffabc985f79891715ef","modified":1513492782141},{"_id":"public/tags/推理/index.html","hash":"7c95cc0cc09f1eac45ce91cda6bc700eda1e1d6d","modified":1513492782141},{"_id":"public/tags/JLPT/index.html","hash":"1015a5d169d5f4c131499a2beff0a157607294de","modified":1513492782141},{"_id":"public/tags/日檢/index.html","hash":"72f0a6e25d864b6345bee0788a38d98b83bbe417","modified":1513492782141},{"_id":"public/tags/日語學習/index.html","hash":"7269701466eb97db62bc959d4c31dfe5509d99fe","modified":1513492782141},{"_id":"public/tags/日語八百屋/index.html","hash":"d2e6fd72695bb7bcf3880ddf19ad54014370a90b","modified":1513492782141},{"_id":"public/tags/勞動節/index.html","hash":"7f3d6dea91c4ab84c2f0d3cf9fda2dce5260c947","modified":1513492782142},{"_id":"public/tags/視覺化/index.html","hash":"847d34f66accb6856eaee54adb753c77389a3584","modified":1513492782142},{"_id":"public/tags/d3js/index.html","hash":"ac2cf1b922a39605bdd775edd813792550a8bd1d","modified":1513492782142},{"_id":"public/tags/勞工大代誌/index.html","hash":"2869259570c7e039b2b8d4991b56c0267fc6fc07","modified":1513492782142},{"_id":"public/tags/重構/index.html","hash":"57e1f5fb7cd9fe3eb761343785dbb55bf1f0141e","modified":1513492782142},{"_id":"public/tags/前端/index.html","hash":"37406eba52802b7cf92c950c8740c1fc6f8543f4","modified":1513492782142},{"_id":"public/tags/HTML/index.html","hash":"8f2bfa257e1e7fe9c3199cb651fd82f5c5ae6e0c","modified":1513492782142},{"_id":"public/tags/aria/index.html","hash":"5ab879116e4e1e9a5098dd325dee32f1cffd861f","modified":1513492782142},{"_id":"public/tags/low-poly/index.html","hash":"9dc0371571f58eca6523eda41f083bd91bb0f90c","modified":1513492782142},{"_id":"public/tags/卓别林/index.html","hash":"7c0466bf992f6514f07c1059dcd4b6314b735561","modified":1513492782142},{"_id":"public/tags/摩登時代/index.html","hash":"f395327a920cce51117213170a7ab0449c0e970c","modified":1513492782142},{"_id":"public/tags/ramda/index.html","hash":"2a5d14e0eb3365ccaa4b5fc43bd60fe0bc0be405","modified":1513492782142},{"_id":"public/tags/javascript/index.html","hash":"caa997f6c5bbc81a95f2790fc1df349acf11491b","modified":1513492782142},{"_id":"public/tags/function-programming/index.html","hash":"2146d9d59d20d960a08bef4c25421703ec87a6aa","modified":1513492782142},{"_id":"public/tags/redux/index.html","hash":"4876948fa53d484a8868aa694d6e143b523e8525","modified":1513492782142},{"_id":"public/tags/saga-pattern/index.html","hash":"6f13b0a72b1ebec55a33f8a3fab640af24c5b49d","modified":1513492782142},{"_id":"public/tags/observable/index.html","hash":"64c11b36109489207005dd074fe6bc7e4c8235ad","modified":1513492782142},{"_id":"public/tags/RxJS/index.html","hash":"e2876d2023a329aafeb5c8105ba1cea48e8b3e8c","modified":1513492782143},{"_id":"public/tags/flex/index.html","hash":"7d43807486b50cade6f16702d42ae3920b07d5c2","modified":1513492782143},{"_id":"public/tags/smooth-scoll/index.html","hash":"439efd7b352a20296cd84071fa44e9b1fe42fc70","modified":1513492782143},{"_id":"public/tags/animation/index.html","hash":"e84853c77324358c4f03477d3d54fc86223e7c35","modified":1513492782143},{"_id":"public/tags/easing/index.html","hash":"b545e9928869cb7bdbad1f4e741516b35ddb4103","modified":1513492782143},{"_id":"public/tags/scroll/index.html","hash":"12ac413f86349ea4dd513bd87d38df7f78ca7a9c","modified":1513492782143},{"_id":"public/tags/table/index.html","hash":"53a499b6bcaa414a3c121392a118eaea74741857","modified":1513492782143},{"_id":"public/tags/CSS/index.html","hash":"21307bae6458e42c6a7148459d069f502ea7d196","modified":1513492782143},{"_id":"public/tags/webGL/index.html","hash":"6bdf2cc6f4438ebb6d44886e1b92a0a583f1b8f5","modified":1513492782143},{"_id":"public/tags/IT-鐵人幫/index.html","hash":"2a45e9b64b2ea474d5d2f94cceac67b23029dabf","modified":1513492782143},{"_id":"public/tags/js/index.html","hash":"fa5d95aa9fdca0175a0935411ad1940f3bd0790f","modified":1513492782143},{"_id":"public/tags/draft-js/index.html","hash":"fbd49e69c50c6ea800e040bbfb9a005ac30f875d","modified":1513492782143},{"_id":"public/tags/flow/index.html","hash":"af324dacb7b426a5097b7d43aa62d15639514399","modified":1513492782143},{"_id":"public/tags/html/index.html","hash":"08ffe6456635ba0c82555b9c2fc0a0c1a350ccae","modified":1513492782143},{"_id":"public/tags/sudo週刊/index.html","hash":"54a5a4d00b10ddf443b0eca0023605c5605981dc","modified":1513492782143},{"_id":"public/imgs/favicon.ico","hash":"b805bfe1b508329635722c8865ad039d0688750c","modified":1513492782152},{"_id":"public/css/images/opacity-10.png","hash":"bbc979866c5b50e8adb348419154b28b1ff44d78","modified":1513492782152},{"_id":"public/css/images/logo-header.png","hash":"7e665de60c53992fd817ddb6d9a2bc5513a23c71","modified":1513492782152},{"_id":"public/css/images/s-left.png","hash":"c8cac4f4e3492606fab93196364bd0f87d93bb98","modified":1513492782152},{"_id":"public/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1513492782152},{"_id":"public/css/images/thumb-default.png","hash":"2d0ba175d958d342494241c616a74d37f48059fb","modified":1513492782152},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1513492782152},{"_id":"public/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1513492782152},{"_id":"public/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1513492782152},{"_id":"public/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1513492782152},{"_id":"public/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1513492782152},{"_id":"public/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1513492782152},{"_id":"public/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1513492782152},{"_id":"public/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1513492782152},{"_id":"public/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1513492782152},{"_id":"public/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1513492782152},{"_id":"public/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1513492782152},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1513492782153},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","hash":"78029561e4c2ec565ea11c3f5bbd052b018af8a6","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","hash":"6d17eac7fcc2866f10d1f2725a08ab749a6e978d","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","hash":"4e5557954ec161edc03b6f971ddefee6179c1305","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","hash":"1454a4753468b607c23deac9f5438cd0ed5cb35d","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","hash":"1758c64c8acec4497735ccb5336b1a518d24024c","modified":1513492782153},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","hash":"e2e2993940fc54ed41f26e39257fdbd824c05e81","modified":1513492782153},{"_id":"public/2017/03/01/chatops/process.png","hash":"9d4a8270be6c09208aa0943cba8e65403ef498e5","modified":1513492782153},{"_id":"public/2017/03/01/chatops/success.png","hash":"9e9d45b959cdc054bfb53bab094b400bb4e302c6","modified":1513492782153},{"_id":"public/imgs/avatar.jpg","hash":"b21ff62d3b433c1bb4970da7a1e0df8d5583ff3d","modified":1513492782776},{"_id":"public/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1513492782777},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1513492782780},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1513492782780},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1513492782780},{"_id":"public/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1513492782835},{"_id":"public/js/main.js","hash":"ebe5a326605ab655155235c532b54a78a0662988","modified":1513492782835},{"_id":"public/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1513492782835},{"_id":"public/libs/titillium-web/styles.css","hash":"d98f0c50aae4c922cd0b663fa820fd7dff2dd9b1","modified":1513492782836},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1513492782836},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1513492782836},{"_id":"public/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1513492782838},{"_id":"public/css/style.css","hash":"29a37f00012ae676adf47af27fbfe1217c50e8ca","modified":1513492782838},{"_id":"public/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1513492782838},{"_id":"public/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1513492782838},{"_id":"public/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1513492782838},{"_id":"public/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1513492782838},{"_id":"public/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1513492782838},{"_id":"public/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1513492782838},{"_id":"public/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1513492782839},{"_id":"public/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1513492782839},{"_id":"public/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1513492782839},{"_id":"public/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1513492782839},{"_id":"public/libs/jquery/2.0.3/jquery.min.js","hash":"a6eedf84389e1bc9f757bc2d19538f8c8d1cae9d","modified":1513492782839},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1513492782839},{"_id":"public/2017/02/01/responsive-flex/example1.png","hash":"46415e1e6b976f38c0bfb2a55fd43a297eb6106a","modified":1513492782845},{"_id":"public/2017/03/01/chatops/payload.png","hash":"31ca3ca8a007dc5b8ce80b39ab02254f7c443849","modified":1513492782854},{"_id":"public/2017/02/01/responsive-flex/example3.png","hash":"010f246ab21f1db5ee419167087188f4090dc1f0","modified":1513492782854},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1513492782860},{"_id":"public/2017/02/01/responsive-flex/example2.png","hash":"0dfd4db0f1a75a820371232cbf645066d412ed2c","modified":1513492782902}],"Category":[{"name":"前端","_id":"cjbaeitpq0003iw5tw5bdsyf5"},{"name":"雜談","_id":"cjbaeitq20008iw5t7mogkqbj"},{"name":"AWS","_id":"cjbaeitq5000diw5trdp3laqn"},{"name":"機器學習","_id":"cjbaeitqb000iiw5tbibyt44r"},{"name":"演算法","_id":"cjbaeitqg000qiw5t0lk87n10"},{"name":"nodejs","_id":"cjbaeitqk000ziw5tdum1qzxi"},{"name":"rails","_id":"cjbaeitqn0015iw5ty4066zzt"},{"name":"前端週刊","_id":"cjbaeitqt001diw5ti9qon7l4"},{"name":"讀書心得","_id":"cjbaeitr1001kiw5t8h9j1dr6"},{"name":"日語學習","_id":"cjbaeitrj001xiw5tpvqejxwf"},{"name":"程式筆記","_id":"cjbaeits2002fiw5tzgi8kiy9"}],"Data":[],"Page":[],"Post":[{"_content":"## 瀏覽器渲染優化\n\njavascript > style > layout > paint > composite\n\n要練習！\n\n### 重新了解瀏覽器的渲染流程\n\n#### Worker\n\n如何使用 worker?\n\n- Forced synchrounous layout is a possible performance bottleneck.\n\n  ```javascript\n  for(var p = 0; p < paragraphs.length; p++) {\n    var blockWidth = greenBlock.offsetWidth; \n    paragraphs[p].style.width = blockWidth + 'px'; // 會觸發重新計算 layout\n  }\n  ```\n\n- 如何解決 synchrounous layout\n\n  read layout properties then batch style changes. 盡量讀取 layout property 越少越好\n\n- 會觸發 layout 的 js function\n\n  `clientHeight...系列, focus(), getBoundingClientRect(), innerText, offsetHeight...系列, scrollByLInes(), scrollByPages(), scrollHeight, scrollIntoView(), scrollIntroViewIfNeeded(), scrollLeft, scrollTop, scrollWidth`\n\n- trigger paint is very expensive.\n\n- 在做動畫的時候盡量把所有 layout 的計算搬移到 idle loading 的時間。\n\n- update layer tree, composite layer => `will-change transform: translateZ(0)`\n\n- performant matters\n\n\n\n[street view API](http://maps.googleapis.com/maps/api/streetview?size=600x300&location=)\n\n\n\n","source":"_drafts/performance-matters.md","raw":"## 瀏覽器渲染優化\n\njavascript > style > layout > paint > composite\n\n要練習！\n\n### 重新了解瀏覽器的渲染流程\n\n#### Worker\n\n如何使用 worker?\n\n- Forced synchrounous layout is a possible performance bottleneck.\n\n  ```javascript\n  for(var p = 0; p < paragraphs.length; p++) {\n    var blockWidth = greenBlock.offsetWidth; \n    paragraphs[p].style.width = blockWidth + 'px'; // 會觸發重新計算 layout\n  }\n  ```\n\n- 如何解決 synchrounous layout\n\n  read layout properties then batch style changes. 盡量讀取 layout property 越少越好\n\n- 會觸發 layout 的 js function\n\n  `clientHeight...系列, focus(), getBoundingClientRect(), innerText, offsetHeight...系列, scrollByLInes(), scrollByPages(), scrollHeight, scrollIntoView(), scrollIntroViewIfNeeded(), scrollLeft, scrollTop, scrollWidth`\n\n- trigger paint is very expensive.\n\n- 在做動畫的時候盡量把所有 layout 的計算搬移到 idle loading 的時間。\n\n- update layer tree, composite layer => `will-change transform: translateZ(0)`\n\n- performant matters\n\n\n\n[street view API](http://maps.googleapis.com/maps/api/streetview?size=600x300&location=)\n\n\n\n","slug":"performance-matters","published":0,"date":"2017-07-08T04:08:40.000Z","updated":"2017-07-08T05:35:11.000Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitpf0000iw5tcs1le9i7","content":"<h2 id=\"瀏覽器渲染優化\"><a href=\"#瀏覽器渲染優化\" class=\"headerlink\" title=\"瀏覽器渲染優化\"></a>瀏覽器渲染優化</h2><p>javascript &gt; style &gt; layout &gt; paint &gt; composite</p>\n<p>要練習！</p>\n<h3 id=\"重新了解瀏覽器的渲染流程\"><a href=\"#重新了解瀏覽器的渲染流程\" class=\"headerlink\" title=\"重新了解瀏覽器的渲染流程\"></a>重新了解瀏覽器的渲染流程</h3><h4 id=\"Worker\"><a href=\"#Worker\" class=\"headerlink\" title=\"Worker\"></a>Worker</h4><p>如何使用 worker?</p>\n<ul>\n<li><p>Forced synchrounous layout is a possible performance bottleneck.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> p = <span class=\"number\">0</span>; p &lt; paragraphs.length; p++) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> blockWidth = greenBlock.offsetWidth; </div><div class=\"line\">  paragraphs[p].style.width = blockWidth + <span class=\"string\">'px'</span>; <span class=\"comment\">// 會觸發重新計算 layout</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>如何解決 synchrounous layout</p>\n<p>read layout properties then batch style changes. 盡量讀取 layout property 越少越好</p>\n</li>\n<li><p>會觸發 layout 的 js function</p>\n<p><code>clientHeight...系列, focus(), getBoundingClientRect(), innerText, offsetHeight...系列, scrollByLInes(), scrollByPages(), scrollHeight, scrollIntoView(), scrollIntroViewIfNeeded(), scrollLeft, scrollTop, scrollWidth</code></p>\n</li>\n<li><p>trigger paint is very expensive.</p>\n</li>\n<li><p>在做動畫的時候盡量把所有 layout 的計算搬移到 idle loading 的時間。</p>\n</li>\n<li><p>update layer tree, composite layer =&gt; <code>will-change transform: translateZ(0)</code></p>\n</li>\n<li><p>performant matters</p>\n</li>\n</ul>\n<p><a href=\"http://maps.googleapis.com/maps/api/streetview?size=600x300&amp;location=\" target=\"_blank\" rel=\"external\">street view API</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"瀏覽器渲染優化\"><a href=\"#瀏覽器渲染優化\" class=\"headerlink\" title=\"瀏覽器渲染優化\"></a>瀏覽器渲染優化</h2><p>javascript &gt; style &gt; layout &gt; paint &gt; composite</p>\n<p>要練習！</p>\n<h3 id=\"重新了解瀏覽器的渲染流程\"><a href=\"#重新了解瀏覽器的渲染流程\" class=\"headerlink\" title=\"重新了解瀏覽器的渲染流程\"></a>重新了解瀏覽器的渲染流程</h3><h4 id=\"Worker\"><a href=\"#Worker\" class=\"headerlink\" title=\"Worker\"></a>Worker</h4><p>如何使用 worker?</p>\n<ul>\n<li><p>Forced synchrounous layout is a possible performance bottleneck.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> p = <span class=\"number\">0</span>; p &lt; paragraphs.length; p++) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> blockWidth = greenBlock.offsetWidth; </div><div class=\"line\">  paragraphs[p].style.width = blockWidth + <span class=\"string\">'px'</span>; <span class=\"comment\">// 會觸發重新計算 layout</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>如何解決 synchrounous layout</p>\n<p>read layout properties then batch style changes. 盡量讀取 layout property 越少越好</p>\n</li>\n<li><p>會觸發 layout 的 js function</p>\n<p><code>clientHeight...系列, focus(), getBoundingClientRect(), innerText, offsetHeight...系列, scrollByLInes(), scrollByPages(), scrollHeight, scrollIntoView(), scrollIntroViewIfNeeded(), scrollLeft, scrollTop, scrollWidth</code></p>\n</li>\n<li><p>trigger paint is very expensive.</p>\n</li>\n<li><p>在做動畫的時候盡量把所有 layout 的計算搬移到 idle loading 的時間。</p>\n</li>\n<li><p>update layer tree, composite layer =&gt; <code>will-change transform: translateZ(0)</code></p>\n</li>\n<li><p>performant matters</p>\n</li>\n</ul>\n<p><a href=\"http://maps.googleapis.com/maps/api/streetview?size=600x300&amp;location=\" target=\"_blank\" rel=\"external\">street view API</a></p>\n"},{"title":"video + canvas = 😍","_content":"\n\n\n## Event\n\n- progress\n- canplaythrough\n\n`HTMLVideoElement.buffered.end(0)`\n\n\n\n### 為什麼要在 Canvas 寫入 Video？\n\n因為 canvas 能夠賦予我們更多的操作權。z","source":"_drafts/video-element.md","raw":"---\ntitle: video + canvas = 😍\ncategory: 前端\ntags:\n  - video\n  - canvas\n  - HTML5\n---\n\n\n\n## Event\n\n- progress\n- canplaythrough\n\n`HTMLVideoElement.buffered.end(0)`\n\n\n\n### 為什麼要在 Canvas 寫入 Video？\n\n因為 canvas 能夠賦予我們更多的操作權。z","slug":"video-element","published":0,"date":"2016-10-24T13:47:40.000Z","updated":"2016-10-24T15:32:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitpl0001iw5twpg89p72","content":"<h2 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h2><ul>\n<li>progress</li>\n<li>canplaythrough</li>\n</ul>\n<p><code>HTMLVideoElement.buffered.end(0)</code></p>\n<h3 id=\"為什麼要在-Canvas-寫入-Video？\"><a href=\"#為什麼要在-Canvas-寫入-Video？\" class=\"headerlink\" title=\"為什麼要在 Canvas 寫入 Video？\"></a>為什麼要在 Canvas 寫入 Video？</h3><p>因為 canvas 能夠賦予我們更多的操作權。z</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h2><ul>\n<li>progress</li>\n<li>canplaythrough</li>\n</ul>\n<p><code>HTMLVideoElement.buffered.end(0)</code></p>\n<h3 id=\"為什麼要在-Canvas-寫入-Video？\"><a href=\"#為什麼要在-Canvas-寫入-Video？\" class=\"headerlink\" title=\"為什麼要在 Canvas 寫入 Video？\"></a>為什麼要在 Canvas 寫入 Video？</h3><p>因為 canvas 能夠賦予我們更多的操作權。z</p>\n"},{"_content":"### 為什麼你可能需要懂密碼學？\n\n前幾天看到 Denny 所撰寫的「為什麼你可能不需要程式補習班」以及昨天在推上分享的有關密碼的文章。想起之前在上密碼學時的種種。\n\n如果你的 Application 使用像 express 之類的框架開發，你可能常常會遇到一個問題：「如何處理使用者密碼？」。\n\n最直覺的做法當然是直接把它存在資料庫。這很快就會發現幾個問題，管理者可以看到使用者的明文密碼，如果是有心人士，他們或許可以把你的密碼拿去其他網站試試看，這樣你的資料就全部噴光光了。\n\n所以如何處理密碼儲存、如何幫使用者的密碼加上保護膜，就需要牽涉到一些密碼學的基本知識。當然如果你使用像是 Devise 之類成熟的 Library，你可以完全忽略這些瑣事，但根據抽象化滲透法則，或許有一天你會需要這些知識也說不定。\n\n### 為什麼需要密碼學\n\n- 區塊鏈、比特幣正夯，你要如何確保你的戶頭只有你自己能動？交易又是如何運作的？\n- 在網路上傳遞不可告人的秘密，封包可能被人監聽、修改，如何確保資料的隱密性、正確性？\n\n### 密碼學主要分類\n\n根據用途不同，主要可以分為：\n\n- 編碼：其實嚴格來講不算加密，他只是把資料做編碼方便在網路上傳遞。但實際使用時很常看到，所以特別提出來。常見的編碼如 base64、UTF-8 等等\n- Hash (單向雜湊)：將長度不固定的資料映射為固定長度的字串，如 MD5, SHA。\n- 對稱性密碼系統：加密與解密時使用相同的密鑰。常見的演算法有 AES, Blowfish 等\n- 非對稱密碼系統：除了自己擁有密鑰（私鑰）之外，還有一個公鑰。經過公鑰加密的資料只有私鑰能夠解密、而用私鑰加密過後的資料只能用公鑰解密。這確保了 1. 資料是由私鑰的擁有者傳遞的 2. 公鑰加密的資料只有私鑰的擁有者才能解密。如 RSA\n\n### 編碼\n\n為了讓資料可以在網路間傳送（傳輸協定只允許特定的字元集），我們需要一種方式能夠對資料做編碼，在 Server 端做解碼。\n\n#### 什麼是 ASCII？\n\n如果是資工領域可能都知道，65 就是大寫的 A，16 進位為 41。\n\n#### 編碼原理\n\n因為稍嫌複雜，可能需要額外一個篇幅解釋，這邊只簡單解釋。\n\n#### 如果拿來加密會怎樣？\n\n懂一點密碼學的人很容易就看出來，更何況是經驗老道的駭客，隨便丟到解碼器你的資料就全部噴出來了。\n\n**base64 不能加密，base64 不能加密，base64 不能加密**\n\n\n\n### One way Hash \n\n什麼是雜湊？將資料經過設計好的 Hash function，放入一個固定長度的 table 當中。一個好的 Hash 應該有幾個特點：\n\n- 不容易產生碰撞。如果不同的密碼輸入都會得到相同的 Hash 值，那麽這個 hash function 就是不安全的。\n\n  ```javascript\n  const mypassword = 1234;\n  const myhashFn = (password) => password % 100;\n  ```\n\n  這個 hash function 不旦只能處理數字的 input，而且最多只有 100 個雜湊值，相當的不安全。\n\n  所以設計一個不容易產生碰撞的 hash function，是實作單向雜湊的重點。也是許多研究者的論文重點（如果你能設計出一個比 SHA 更厲害的 hash function，那麼你可能可以直接拿到博士學位XD）\n  目前常見的單向雜湊演算法 MD5, SHA1 都已經被破解。SHA256, SHA512 都還算安全。\n\n- 相同的值相同的結果，不同的值不同的結果\n\n- 不可逆：不能從雜湊值中推出原始的密碼是什麼\n\n這樣子有個問題，如果我們知道 1234 的 hash function 都是 4321，是否可以用一連串常見的密碼值來試試看？事實上這就是彩虹表（Rainbow Table）攻擊。\n\n為了防止上述的問題，在 hash 之前，我們可以在密碼後加入亂數 salt，再送進去 hash function 做 hash。加密後的值後面再加入我們的亂數 salt。\n\n![亂數 salt](/Users/kalan/Desktop/cipher1.jpg)\n\n#### 小結\n\n- 良好的 hash function 在於它容不容易產生碰撞。（理論上所有 hash function 都會產生碰撞）\n- 目前 MD5, SHA1 都已經被破解，使用比較安全的 SHA256, SHA512（找到可以讓 Hash function 碰撞的方法）\n- 加入亂數 salt 來預防彩虹表攻擊\n\n#### 更安全的雜湊：bcrypt，bcrypt，bcrypt\n\n如果你在實作密碼雜湊，更好的選擇可能是 bcrypt。除了他的實作讓密碼更安全之外，許多的語言都已經實作相關的 library。\n\n如果你對其他 hash function 有興趣，可以參考：\n\n- https://www.wikiwand.com/en/Bcrypt\n- [PBKDF2](https://www.wikiwand.com/en/PBKDF2)\n\n\n\n\n\n### JWT \n\n如果你使用 nodejs 做開發，你可能聽過 JWT 這個名詞。他的原理相當簡單，在做 SPA 的登入時可以很方便的當作 token 使用。\n\n不過你仍然要注意幾件事情，**不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送**。\n\n### 結論\n\n這些演算法看起來可能微不足道，在多數的情況下你也不需要自己實作加密演算法，但如果不了解這些演算法的原理，你很有可能挑選一個有破綻的加密演算法、將密碼暴露在極度危險的環境中。\n\n另外就算是前端，在你的日常工作中，或許也有機會接觸到加密相關的需求。例如在前端加密密碼之後再送出，或者私人訊息加密後再傳到 Server 端。\n\n","source":"_drafts/why-cipher-matters.md","raw":"### 為什麼你可能需要懂密碼學？\n\n前幾天看到 Denny 所撰寫的「為什麼你可能不需要程式補習班」以及昨天在推上分享的有關密碼的文章。想起之前在上密碼學時的種種。\n\n如果你的 Application 使用像 express 之類的框架開發，你可能常常會遇到一個問題：「如何處理使用者密碼？」。\n\n最直覺的做法當然是直接把它存在資料庫。這很快就會發現幾個問題，管理者可以看到使用者的明文密碼，如果是有心人士，他們或許可以把你的密碼拿去其他網站試試看，這樣你的資料就全部噴光光了。\n\n所以如何處理密碼儲存、如何幫使用者的密碼加上保護膜，就需要牽涉到一些密碼學的基本知識。當然如果你使用像是 Devise 之類成熟的 Library，你可以完全忽略這些瑣事，但根據抽象化滲透法則，或許有一天你會需要這些知識也說不定。\n\n### 為什麼需要密碼學\n\n- 區塊鏈、比特幣正夯，你要如何確保你的戶頭只有你自己能動？交易又是如何運作的？\n- 在網路上傳遞不可告人的秘密，封包可能被人監聽、修改，如何確保資料的隱密性、正確性？\n\n### 密碼學主要分類\n\n根據用途不同，主要可以分為：\n\n- 編碼：其實嚴格來講不算加密，他只是把資料做編碼方便在網路上傳遞。但實際使用時很常看到，所以特別提出來。常見的編碼如 base64、UTF-8 等等\n- Hash (單向雜湊)：將長度不固定的資料映射為固定長度的字串，如 MD5, SHA。\n- 對稱性密碼系統：加密與解密時使用相同的密鑰。常見的演算法有 AES, Blowfish 等\n- 非對稱密碼系統：除了自己擁有密鑰（私鑰）之外，還有一個公鑰。經過公鑰加密的資料只有私鑰能夠解密、而用私鑰加密過後的資料只能用公鑰解密。這確保了 1. 資料是由私鑰的擁有者傳遞的 2. 公鑰加密的資料只有私鑰的擁有者才能解密。如 RSA\n\n### 編碼\n\n為了讓資料可以在網路間傳送（傳輸協定只允許特定的字元集），我們需要一種方式能夠對資料做編碼，在 Server 端做解碼。\n\n#### 什麼是 ASCII？\n\n如果是資工領域可能都知道，65 就是大寫的 A，16 進位為 41。\n\n#### 編碼原理\n\n因為稍嫌複雜，可能需要額外一個篇幅解釋，這邊只簡單解釋。\n\n#### 如果拿來加密會怎樣？\n\n懂一點密碼學的人很容易就看出來，更何況是經驗老道的駭客，隨便丟到解碼器你的資料就全部噴出來了。\n\n**base64 不能加密，base64 不能加密，base64 不能加密**\n\n\n\n### One way Hash \n\n什麼是雜湊？將資料經過設計好的 Hash function，放入一個固定長度的 table 當中。一個好的 Hash 應該有幾個特點：\n\n- 不容易產生碰撞。如果不同的密碼輸入都會得到相同的 Hash 值，那麽這個 hash function 就是不安全的。\n\n  ```javascript\n  const mypassword = 1234;\n  const myhashFn = (password) => password % 100;\n  ```\n\n  這個 hash function 不旦只能處理數字的 input，而且最多只有 100 個雜湊值，相當的不安全。\n\n  所以設計一個不容易產生碰撞的 hash function，是實作單向雜湊的重點。也是許多研究者的論文重點（如果你能設計出一個比 SHA 更厲害的 hash function，那麼你可能可以直接拿到博士學位XD）\n  目前常見的單向雜湊演算法 MD5, SHA1 都已經被破解。SHA256, SHA512 都還算安全。\n\n- 相同的值相同的結果，不同的值不同的結果\n\n- 不可逆：不能從雜湊值中推出原始的密碼是什麼\n\n這樣子有個問題，如果我們知道 1234 的 hash function 都是 4321，是否可以用一連串常見的密碼值來試試看？事實上這就是彩虹表（Rainbow Table）攻擊。\n\n為了防止上述的問題，在 hash 之前，我們可以在密碼後加入亂數 salt，再送進去 hash function 做 hash。加密後的值後面再加入我們的亂數 salt。\n\n![亂數 salt](/Users/kalan/Desktop/cipher1.jpg)\n\n#### 小結\n\n- 良好的 hash function 在於它容不容易產生碰撞。（理論上所有 hash function 都會產生碰撞）\n- 目前 MD5, SHA1 都已經被破解，使用比較安全的 SHA256, SHA512（找到可以讓 Hash function 碰撞的方法）\n- 加入亂數 salt 來預防彩虹表攻擊\n\n#### 更安全的雜湊：bcrypt，bcrypt，bcrypt\n\n如果你在實作密碼雜湊，更好的選擇可能是 bcrypt。除了他的實作讓密碼更安全之外，許多的語言都已經實作相關的 library。\n\n如果你對其他 hash function 有興趣，可以參考：\n\n- https://www.wikiwand.com/en/Bcrypt\n- [PBKDF2](https://www.wikiwand.com/en/PBKDF2)\n\n\n\n\n\n### JWT \n\n如果你使用 nodejs 做開發，你可能聽過 JWT 這個名詞。他的原理相當簡單，在做 SPA 的登入時可以很方便的當作 token 使用。\n\n不過你仍然要注意幾件事情，**不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送**。\n\n### 結論\n\n這些演算法看起來可能微不足道，在多數的情況下你也不需要自己實作加密演算法，但如果不了解這些演算法的原理，你很有可能挑選一個有破綻的加密演算法、將密碼暴露在極度危險的環境中。\n\n另外就算是前端，在你的日常工作中，或許也有機會接觸到加密相關的需求。例如在前端加密密碼之後再送出，或者私人訊息加密後再傳到 Server 端。\n\n","slug":"why-cipher-matters","published":0,"date":"2017-08-10T14:41:26.000Z","updated":"2017-08-10T14:41:26.000Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitpo0002iw5tjes5bzf7","content":"<h3 id=\"為什麼你可能需要懂密碼學？\"><a href=\"#為什麼你可能需要懂密碼學？\" class=\"headerlink\" title=\"為什麼你可能需要懂密碼學？\"></a>為什麼你可能需要懂密碼學？</h3><p>前幾天看到 Denny 所撰寫的「為什麼你可能不需要程式補習班」以及昨天在推上分享的有關密碼的文章。想起之前在上密碼學時的種種。</p>\n<p>如果你的 Application 使用像 express 之類的框架開發，你可能常常會遇到一個問題：「如何處理使用者密碼？」。</p>\n<p>最直覺的做法當然是直接把它存在資料庫。這很快就會發現幾個問題，管理者可以看到使用者的明文密碼，如果是有心人士，他們或許可以把你的密碼拿去其他網站試試看，這樣你的資料就全部噴光光了。</p>\n<p>所以如何處理密碼儲存、如何幫使用者的密碼加上保護膜，就需要牽涉到一些密碼學的基本知識。當然如果你使用像是 Devise 之類成熟的 Library，你可以完全忽略這些瑣事，但根據抽象化滲透法則，或許有一天你會需要這些知識也說不定。</p>\n<h3 id=\"為什麼需要密碼學\"><a href=\"#為什麼需要密碼學\" class=\"headerlink\" title=\"為什麼需要密碼學\"></a>為什麼需要密碼學</h3><ul>\n<li>區塊鏈、比特幣正夯，你要如何確保你的戶頭只有你自己能動？交易又是如何運作的？</li>\n<li>在網路上傳遞不可告人的秘密，封包可能被人監聽、修改，如何確保資料的隱密性、正確性？</li>\n</ul>\n<h3 id=\"密碼學主要分類\"><a href=\"#密碼學主要分類\" class=\"headerlink\" title=\"密碼學主要分類\"></a>密碼學主要分類</h3><p>根據用途不同，主要可以分為：</p>\n<ul>\n<li>編碼：其實嚴格來講不算加密，他只是把資料做編碼方便在網路上傳遞。但實際使用時很常看到，所以特別提出來。常見的編碼如 base64、UTF-8 等等</li>\n<li>Hash (單向雜湊)：將長度不固定的資料映射為固定長度的字串，如 MD5, SHA。</li>\n<li>對稱性密碼系統：加密與解密時使用相同的密鑰。常見的演算法有 AES, Blowfish 等</li>\n<li>非對稱密碼系統：除了自己擁有密鑰（私鑰）之外，還有一個公鑰。經過公鑰加密的資料只有私鑰能夠解密、而用私鑰加密過後的資料只能用公鑰解密。這確保了 1. 資料是由私鑰的擁有者傳遞的 2. 公鑰加密的資料只有私鑰的擁有者才能解密。如 RSA</li>\n</ul>\n<h3 id=\"編碼\"><a href=\"#編碼\" class=\"headerlink\" title=\"編碼\"></a>編碼</h3><p>為了讓資料可以在網路間傳送（傳輸協定只允許特定的字元集），我們需要一種方式能夠對資料做編碼，在 Server 端做解碼。</p>\n<h4 id=\"什麼是-ASCII？\"><a href=\"#什麼是-ASCII？\" class=\"headerlink\" title=\"什麼是 ASCII？\"></a>什麼是 ASCII？</h4><p>如果是資工領域可能都知道，65 就是大寫的 A，16 進位為 41。</p>\n<h4 id=\"編碼原理\"><a href=\"#編碼原理\" class=\"headerlink\" title=\"編碼原理\"></a>編碼原理</h4><p>因為稍嫌複雜，可能需要額外一個篇幅解釋，這邊只簡單解釋。</p>\n<h4 id=\"如果拿來加密會怎樣？\"><a href=\"#如果拿來加密會怎樣？\" class=\"headerlink\" title=\"如果拿來加密會怎樣？\"></a>如果拿來加密會怎樣？</h4><p>懂一點密碼學的人很容易就看出來，更何況是經驗老道的駭客，隨便丟到解碼器你的資料就全部噴出來了。</p>\n<p><strong>base64 不能加密，base64 不能加密，base64 不能加密</strong></p>\n<h3 id=\"One-way-Hash\"><a href=\"#One-way-Hash\" class=\"headerlink\" title=\"One way Hash\"></a>One way Hash</h3><p>什麼是雜湊？將資料經過設計好的 Hash function，放入一個固定長度的 table 當中。一個好的 Hash 應該有幾個特點：</p>\n<ul>\n<li><p>不容易產生碰撞。如果不同的密碼輸入都會得到相同的 Hash 值，那麽這個 hash function 就是不安全的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> mypassword = <span class=\"number\">1234</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> myhashFn = <span class=\"function\">(<span class=\"params\">password</span>) =&gt;</span> password % <span class=\"number\">100</span>;</div></pre></td></tr></table></figure>\n<p>這個 hash function 不旦只能處理數字的 input，而且最多只有 100 個雜湊值，相當的不安全。</p>\n<p>所以設計一個不容易產生碰撞的 hash function，是實作單向雜湊的重點。也是許多研究者的論文重點（如果你能設計出一個比 SHA 更厲害的 hash function，那麼你可能可以直接拿到博士學位XD）<br>目前常見的單向雜湊演算法 MD5, SHA1 都已經被破解。SHA256, SHA512 都還算安全。</p>\n</li>\n<li><p>相同的值相同的結果，不同的值不同的結果</p>\n</li>\n<li><p>不可逆：不能從雜湊值中推出原始的密碼是什麼</p>\n</li>\n</ul>\n<p>這樣子有個問題，如果我們知道 1234 的 hash function 都是 4321，是否可以用一連串常見的密碼值來試試看？事實上這就是彩虹表（Rainbow Table）攻擊。</p>\n<p>為了防止上述的問題，在 hash 之前，我們可以在密碼後加入亂數 salt，再送進去 hash function 做 hash。加密後的值後面再加入我們的亂數 salt。</p>\n<p><img src=\"/Users/kalan/Desktop/cipher1.jpg\" alt=\"亂數 salt\"></p>\n<h4 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h4><ul>\n<li>良好的 hash function 在於它容不容易產生碰撞。（理論上所有 hash function 都會產生碰撞）</li>\n<li>目前 MD5, SHA1 都已經被破解，使用比較安全的 SHA256, SHA512（找到可以讓 Hash function 碰撞的方法）</li>\n<li>加入亂數 salt 來預防彩虹表攻擊</li>\n</ul>\n<h4 id=\"更安全的雜湊：bcrypt，bcrypt，bcrypt\"><a href=\"#更安全的雜湊：bcrypt，bcrypt，bcrypt\" class=\"headerlink\" title=\"更安全的雜湊：bcrypt，bcrypt，bcrypt\"></a>更安全的雜湊：bcrypt，bcrypt，bcrypt</h4><p>如果你在實作密碼雜湊，更好的選擇可能是 bcrypt。除了他的實作讓密碼更安全之外，許多的語言都已經實作相關的 library。</p>\n<p>如果你對其他 hash function 有興趣，可以參考：</p>\n<ul>\n<li><a href=\"https://www.wikiwand.com/en/Bcrypt\" target=\"_blank\" rel=\"external\">https://www.wikiwand.com/en/Bcrypt</a></li>\n<li><a href=\"https://www.wikiwand.com/en/PBKDF2\" target=\"_blank\" rel=\"external\">PBKDF2</a></li>\n</ul>\n<h3 id=\"JWT\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h3><p>如果你使用 nodejs 做開發，你可能聽過 JWT 這個名詞。他的原理相當簡單，在做 SPA 的登入時可以很方便的當作 token 使用。</p>\n<p>不過你仍然要注意幾件事情，<strong>不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送</strong>。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>這些演算法看起來可能微不足道，在多數的情況下你也不需要自己實作加密演算法，但如果不了解這些演算法的原理，你很有可能挑選一個有破綻的加密演算法、將密碼暴露在極度危險的環境中。</p>\n<p>另外就算是前端，在你的日常工作中，或許也有機會接觸到加密相關的需求。例如在前端加密密碼之後再送出，或者私人訊息加密後再傳到 Server 端。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"為什麼你可能需要懂密碼學？\"><a href=\"#為什麼你可能需要懂密碼學？\" class=\"headerlink\" title=\"為什麼你可能需要懂密碼學？\"></a>為什麼你可能需要懂密碼學？</h3><p>前幾天看到 Denny 所撰寫的「為什麼你可能不需要程式補習班」以及昨天在推上分享的有關密碼的文章。想起之前在上密碼學時的種種。</p>\n<p>如果你的 Application 使用像 express 之類的框架開發，你可能常常會遇到一個問題：「如何處理使用者密碼？」。</p>\n<p>最直覺的做法當然是直接把它存在資料庫。這很快就會發現幾個問題，管理者可以看到使用者的明文密碼，如果是有心人士，他們或許可以把你的密碼拿去其他網站試試看，這樣你的資料就全部噴光光了。</p>\n<p>所以如何處理密碼儲存、如何幫使用者的密碼加上保護膜，就需要牽涉到一些密碼學的基本知識。當然如果你使用像是 Devise 之類成熟的 Library，你可以完全忽略這些瑣事，但根據抽象化滲透法則，或許有一天你會需要這些知識也說不定。</p>\n<h3 id=\"為什麼需要密碼學\"><a href=\"#為什麼需要密碼學\" class=\"headerlink\" title=\"為什麼需要密碼學\"></a>為什麼需要密碼學</h3><ul>\n<li>區塊鏈、比特幣正夯，你要如何確保你的戶頭只有你自己能動？交易又是如何運作的？</li>\n<li>在網路上傳遞不可告人的秘密，封包可能被人監聽、修改，如何確保資料的隱密性、正確性？</li>\n</ul>\n<h3 id=\"密碼學主要分類\"><a href=\"#密碼學主要分類\" class=\"headerlink\" title=\"密碼學主要分類\"></a>密碼學主要分類</h3><p>根據用途不同，主要可以分為：</p>\n<ul>\n<li>編碼：其實嚴格來講不算加密，他只是把資料做編碼方便在網路上傳遞。但實際使用時很常看到，所以特別提出來。常見的編碼如 base64、UTF-8 等等</li>\n<li>Hash (單向雜湊)：將長度不固定的資料映射為固定長度的字串，如 MD5, SHA。</li>\n<li>對稱性密碼系統：加密與解密時使用相同的密鑰。常見的演算法有 AES, Blowfish 等</li>\n<li>非對稱密碼系統：除了自己擁有密鑰（私鑰）之外，還有一個公鑰。經過公鑰加密的資料只有私鑰能夠解密、而用私鑰加密過後的資料只能用公鑰解密。這確保了 1. 資料是由私鑰的擁有者傳遞的 2. 公鑰加密的資料只有私鑰的擁有者才能解密。如 RSA</li>\n</ul>\n<h3 id=\"編碼\"><a href=\"#編碼\" class=\"headerlink\" title=\"編碼\"></a>編碼</h3><p>為了讓資料可以在網路間傳送（傳輸協定只允許特定的字元集），我們需要一種方式能夠對資料做編碼，在 Server 端做解碼。</p>\n<h4 id=\"什麼是-ASCII？\"><a href=\"#什麼是-ASCII？\" class=\"headerlink\" title=\"什麼是 ASCII？\"></a>什麼是 ASCII？</h4><p>如果是資工領域可能都知道，65 就是大寫的 A，16 進位為 41。</p>\n<h4 id=\"編碼原理\"><a href=\"#編碼原理\" class=\"headerlink\" title=\"編碼原理\"></a>編碼原理</h4><p>因為稍嫌複雜，可能需要額外一個篇幅解釋，這邊只簡單解釋。</p>\n<h4 id=\"如果拿來加密會怎樣？\"><a href=\"#如果拿來加密會怎樣？\" class=\"headerlink\" title=\"如果拿來加密會怎樣？\"></a>如果拿來加密會怎樣？</h4><p>懂一點密碼學的人很容易就看出來，更何況是經驗老道的駭客，隨便丟到解碼器你的資料就全部噴出來了。</p>\n<p><strong>base64 不能加密，base64 不能加密，base64 不能加密</strong></p>\n<h3 id=\"One-way-Hash\"><a href=\"#One-way-Hash\" class=\"headerlink\" title=\"One way Hash\"></a>One way Hash</h3><p>什麼是雜湊？將資料經過設計好的 Hash function，放入一個固定長度的 table 當中。一個好的 Hash 應該有幾個特點：</p>\n<ul>\n<li><p>不容易產生碰撞。如果不同的密碼輸入都會得到相同的 Hash 值，那麽這個 hash function 就是不安全的。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> mypassword = <span class=\"number\">1234</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> myhashFn = <span class=\"function\">(<span class=\"params\">password</span>) =&gt;</span> password % <span class=\"number\">100</span>;</div></pre></td></tr></table></figure>\n<p>這個 hash function 不旦只能處理數字的 input，而且最多只有 100 個雜湊值，相當的不安全。</p>\n<p>所以設計一個不容易產生碰撞的 hash function，是實作單向雜湊的重點。也是許多研究者的論文重點（如果你能設計出一個比 SHA 更厲害的 hash function，那麼你可能可以直接拿到博士學位XD）<br>目前常見的單向雜湊演算法 MD5, SHA1 都已經被破解。SHA256, SHA512 都還算安全。</p>\n</li>\n<li><p>相同的值相同的結果，不同的值不同的結果</p>\n</li>\n<li><p>不可逆：不能從雜湊值中推出原始的密碼是什麼</p>\n</li>\n</ul>\n<p>這樣子有個問題，如果我們知道 1234 的 hash function 都是 4321，是否可以用一連串常見的密碼值來試試看？事實上這就是彩虹表（Rainbow Table）攻擊。</p>\n<p>為了防止上述的問題，在 hash 之前，我們可以在密碼後加入亂數 salt，再送進去 hash function 做 hash。加密後的值後面再加入我們的亂數 salt。</p>\n<p><img src=\"/Users/kalan/Desktop/cipher1.jpg\" alt=\"亂數 salt\"></p>\n<h4 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h4><ul>\n<li>良好的 hash function 在於它容不容易產生碰撞。（理論上所有 hash function 都會產生碰撞）</li>\n<li>目前 MD5, SHA1 都已經被破解，使用比較安全的 SHA256, SHA512（找到可以讓 Hash function 碰撞的方法）</li>\n<li>加入亂數 salt 來預防彩虹表攻擊</li>\n</ul>\n<h4 id=\"更安全的雜湊：bcrypt，bcrypt，bcrypt\"><a href=\"#更安全的雜湊：bcrypt，bcrypt，bcrypt\" class=\"headerlink\" title=\"更安全的雜湊：bcrypt，bcrypt，bcrypt\"></a>更安全的雜湊：bcrypt，bcrypt，bcrypt</h4><p>如果你在實作密碼雜湊，更好的選擇可能是 bcrypt。除了他的實作讓密碼更安全之外，許多的語言都已經實作相關的 library。</p>\n<p>如果你對其他 hash function 有興趣，可以參考：</p>\n<ul>\n<li><a href=\"https://www.wikiwand.com/en/Bcrypt\" target=\"_blank\" rel=\"external\">https://www.wikiwand.com/en/Bcrypt</a></li>\n<li><a href=\"https://www.wikiwand.com/en/PBKDF2\" target=\"_blank\" rel=\"external\">PBKDF2</a></li>\n</ul>\n<h3 id=\"JWT\"><a href=\"#JWT\" class=\"headerlink\" title=\"JWT\"></a>JWT</h3><p>如果你使用 nodejs 做開發，你可能聽過 JWT 這個名詞。他的原理相當簡單，在做 SPA 的登入時可以很方便的當作 token 使用。</p>\n<p>不過你仍然要注意幾件事情，<strong>不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送，不要把密碼放入 JWT 傳送</strong>。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>這些演算法看起來可能微不足道，在多數的情況下你也不需要自己實作加密演算法，但如果不了解這些演算法的原理，你很有可能挑選一個有破綻的加密演算法、將密碼暴露在極度危險的環境中。</p>\n<p>另外就算是前端，在你的日常工作中，或許也有機會接觸到加密相關的需求。例如在前端加密密碼之後再送出，或者私人訊息加密後再傳到 Server 端。</p>\n"},{"title":"狂歡雙 11  —  祝我生日快樂","_content":"\n\n\n今年 1111，除了各大電商正在雙 11 特價外，今天剛好也是我的滿 23 歲的生日。就把這幾年做的事做個整理吧。這篇文章篇幅很長，而且內容很瑣碎，幾乎都是從筆記跟日記當中東拼西湊寫出來的。\n\n這篇文章有一大部分是寫給自己警惕用的。\n\n## 我是誰？\n\n有時候，年紀越大越有一種逐漸迷失自己的感覺，每次都以為自己找到一個不錯的目標了，再繼續深究下去卻還有一大堆事情，直到現在我恐怕還是沒辦法講清楚我到底想要做什麼吧。不過人生大概就是這樣，會一直迷惘下去的，因此現在最重要的事情應該是，一旦決定好要做什麼，就不要輕易地反悔，否則就是在浪費人生了。\n\n## 勞工大代誌\n\n這是我在勞工節製作的專案，從四月中旬開始規劃、搜集資料到實作，因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。\n\n有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。\n\n我以為給自己時間很充裕了，但仍然有太多議題沒有涵蓋到，像是年金制度、職災統計等等。\n\n### 為什麼想要做這份專案\n\n國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。\n\n這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。\n工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會等等。\n\n如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音是怎樣，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。\n\n更何況是在我還沒出社會之前，就已經是那麼慘的現況了。\n\n台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。\n\n這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。\n\n身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。\n但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。\n\n其實在查資料的時候，有很多讓人鼻酸的故事。\n\n像是關廠工人臥軌時，民眾大喊輾過去；像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。\n\n我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，\n更何況是以前沒有任何勞基法保護的勞工們。\n\n## 日語八百屋\n\n### 學日文\n\n我還依稀記得學日文初期，每天都在咖啡廳點完一杯拿鐵後，從中午待到晚上，學習方式也相當土法煉鋼。把書裡頭的課文看過幾遍後，練習書中的習題與文法，再把單字與學到的概念記錄在筆記本上。就這樣持續了一年左右，筆記本已經塞得滿滿的。\n\n這期間真的空虛寂寞覺得冷，因為沒有人能夠讓你練習，在還沒有到達一定程度前，別人也只會用肥魯宅之類的字眼來嘲笑你而已。當時對我來說最好的方式就是用 lang-8。\n\n有時候一不小心就會落入寫程式的陷阱，會非常直觀地去用「是否與程式有關」的方式選擇自己的行為。這對當時的我來說是個很好的指標，不過這顯然不該是不去學習新東西的理由。\n\n幾年前的我曾經寫過「小說，我最愛的毒品」，看得出來當時文筆的稚嫩跟想法的天真。然而我很慶幸當時曾經有各種方式來記錄生活。包含部落格之外，我從國中到現在，已經寫了四本日記。\n\n雖然用現在的角度來看，不免對自己以前的荒唐與智障莞爾一笑，不過他也的確構築了現在的我。我並不希望自己成為一個除了寫程式以外，眼睛黯淡無光，無法對世上其他事物產生熱情的人。\n\n大約在前幾個月，我開始準備了線上課程。那對我來說是個很特別的體驗，因為之前並沒有任何日語的教學經驗，但想趁著這個機會來練習自己的教學規劃外，也希望能夠把以前的筆記、經驗統一做個整理。\n\n規劃期花了我 2~3 個禮拜，從思考一位日語初學者在剛學習日文時會遇到的困難，循序漸進到名詞、形容詞、動詞、敬語常體轉換等等。送出審核時很緊張，很怕自己沒辦法通過。又偷偷地想，如果沒有通過至少我就不用準備了吧XD。\n\n通過後，陷入了三個月的忙碌期，每天下班回來後就是坐在電腦前錄音，寫講義。幸好當時有規劃好整個課程架構，才讓課程順利上線。\n\n這讓我深刻體會到線上教學的難處，雖然省下了實體教學的重複性與場地限制，但是每次的影片剪輯都要花將近 3 ~ 4 個小時製作、微調，更別說後期的字幕了，尤其是語言教學要在雙語間切換。\n\n不過最後仍然順利上線了，對我來說這是個相當有成就感的一件事，看著大家報名與提問，覺得一切都很值得。\n\n## 自學日文文章整理\n\n- [自學四年通過日檢 N3, N2 心得](https://goo.gl/Tm336k)\n- [只要活著就會有痛苦－聲之形](https://goo.gl/dnN5Zk)\n- [給初學者的日文自學指南](https://goo.gl/LRjtDd)\n- [日語學習資源總整理](https://goo.gl/6mieM9)\n- [日檢 N3, N2 文法總整理 - part1](https://goo.gl/sW3Lkp)\n- [日本服務業用語](https://goo.gl/KVU5Vf)\n- [我的日語學習之道](https://goo.gl/BDweo5)\n- [日本眾議院選舉](https://goo.gl/1gkYqv)\n- [教科書上的八田與一](https://goo.gl/KAR7UC)\n- [日文主題單字篇 - 剪髮](https://goo.gl/vmd5i3)\n- [「気」的各種用法](https://goo.gl/4JKWZm)\n\n## 語言能力\n\n在這個年代，語言能力已經算是基本條件。更何況，在台灣比我厲害的人超乎想像。更何況，幾乎每間大學、科大的應外系，標配就是英文和日文。就算精通這兩門語言，也只是統計樣本中的一點而已。\n\n## 整理經驗\n\n大家在小時候是否都有寫過訂正本？如果我們可以把遇到的問題記錄下來，並且把當時的解決辦法記錄下來的話，以後遇到類似的問題就可以比較快的解決。\n\n我在開發時會把當時遇到的問題、或是自己在開發途中延伸出來的概念記錄下來，並且在月底統一 review 一次，整理過後把概念已經相對完整的筆記統整為一篇文章發佈。\n\n> 唯一能夠改變你的，只有你自己的行為而已。\n\n## 你的未來不是擰螺絲工人\n\n摩登時代是卓別林的著名默劇之一，因為工業化跟經濟大蕭條的影響，勞工們被資本家壓榨，同時也造成百萬人失業。很諷刺的一部電影。\n\n現在這個資本過剩的年代，生存已經不是太大的問題。\n\n但如果不思考人生，那麽就跟裡頭的工人差不多，整天在工廠擰螺絲。\n\n> 比起支配，我更想要幫助別人 - 卓別林\n\n## 不要做不喜歡做的工作\n\n對一件事情有熱情是非常助力的。舉例來說好了，當時為了賺錢，早上通常在漢堡王打工，只能透過晚上自學來補足程式上的不足。進入實習後，才發現強度跟之前比起來實在是天壤之別。所有的事情都會在工作的壓力下被放大，產生的效應是非常可怕的一件事情。我在實習之後才接觸了許多當時線上課程完全沒教、業界卻已經逐漸開始引入的東西。\n\n別人是用一天 10 小時的時間在做自己喜歡的事，而自己只是用閒暇擠出來的三兩分鐘來做，先不說天份上的差距，光是時間上就已經產生足夠顯著的差異了。\n\n## 不要跟別人比較修了幾學分\n\n在現行體制下的大學教育制度下，畢業門檻通常在 120 ~ 140 學分左右，扣除專業選修及必修外，還有將近 30 多學分的通識課。\n\n說真的，修的通識課是真的學到東西了，還是只是上下交相賊的營養學分而已？在大一的時候我也把學分修滿，到處去找一些看起來不錯的課上，雖然得到一份看似充實的課程表，但真正精華的知識也只有幾堂課而已，更別說在台科大選通識，根本就是個笑話。\n\n比起推動 XXX 教育，找到自己真正想要幹嘛才是真正重要的事。在高職或許課業上的壓力比較沒有那麼大，但現在的國民教育，幾乎就像職場一樣，把一天 8 小時塞到滿檔，晚上繼續補習。晚上累得要命，更別提深入思考所學的本質、關心週遭事物、甚至是培養興趣。\n\n因此在追求知識的同時，自己多出去看看週遭的事物、思考、深思熟慮之後再做選擇，比起到處比較學分來得重要多了。\n\n## 不要被 Buzzword 影響\n\n你是真的喜歡現在做的事，還是只是時勢而已？前陣子推廣的程式教育以及多元領域課程、機器學習等等，其實都是假議題，如果不思考自己學習的目的，學習這些領域都只會落入痛苦的泥沼而已。\n\n> 沒有人能夠幫你決定未來。\n\n如果決定自己要做什麼很難，那麼可以從決定自己不要做什麼開始。\n\n## 不要後悔自己的選擇\n\n人生是一連串的選擇。\n實習很好，唸書很好，出國留學很好，去旅行也很好，待在台灣也很好，\n只要那是你想要的，那就好。\n\n但不要惋惜自己的人生，一旦你厭倦，你就只是在浪費人生。儘管我仍然不確定是否在這個領域上走下去是不是正確的道路。\n\n## 不要汲汲營營於逢場作戲的人際關係\n\n剛上大學的時候常常會去跟同學進行「社交」活動，例如一起吃午餐、逛夜市、唱歌等等，後來想想，或許只是自己只是害怕沒有人的情況下，要不斷在問自己的問題而已。\n\n這種時間通常才是最重要的，因為後來根本不會有人因為和你吃過飯，有過幾次交流，就突然變成知心好友。更別講有人會把這種行為視為拓展人脈。\n\n因此如果真心想要在大學中找到比較要好的朋友，或許可以從社團、擔任幹部開始，當一群人有了同一個目標而聚在一起時，也比較容易和彼此交流，而不是午飯間的雜談閒聊而已。\n\n## 年輕不是本錢\n\n很多人都會說年輕是本錢，目前的我很幸運，都還在平均年齡 30 歲以下的團隊工作。\n\n但是這個社會很多人並不在乎你的經歷、能力是什麼。就像雖然我有兩年多的工作經驗，在社會上仍然會被認為是個剛畢業的大學生，然後再用各種美麗的包裝壓低你的薪水而已。\n\n他們通常並不在乎你做了什麼，而是你的學歷、有沒有在上市公司上班、多益成績這種根本無法辨識的指標。當然啦具備能力的人通常也會有上述幾個條件，他們根本不在乎學歷年紀這種指標。畢竟資深有時只是代表做的比較久而已。\n\n## 臉書\n\n最近，我把臉書上許多會令我分心粉絲專頁以及內容農場給刪掉了，像是各種行車記錄器影片、蘋果日報、即時動新聞等等。盡量讓我的動態牆不要被各種我不喜歡的事物強姦。\n\n絕望的是，舉凡youtube 爆紅、某某女星私密照流出、一生要做的幾件事等等，下面的回應都非常熱烈。\n\n他們看似無傷大雅，可是卻在默默腐蝕我的心靈，尤其像我這種會被下一個影片給吸引的人，一旦點開來第一部影片就會繼續看下去。\n\n最後，為了避免惱人的通知，我把 Facebook 的 App 也刪掉了。除了剛開始有點不習慣之外，其實沒有太大的變化，反而空出更多時間來。也不會下意識地打開 App，如果真的想滑就用網頁版的，那種單純和不方便的操作方式反而可以減少我在 Facebook 上虛耗的光陰。\n\n## 最重要的是思考\n\n台灣的教育在高中上後直接導向士農工商，成績比較爛的就被丟去二流的職業學校。把課程排爆棚，一天跟上班時間一樣的 8 小時，再加上補習班，根本沒有多餘的時間讓你思考人生、關心周遭的事物，只會讓人變得跟溫順。\n\n對於一個只要頭腦不要太差，經濟狀況許可的一般人來說，一路安然到大學是個常態分佈現象。但神奇的是這群人在畢業以後，出來做的卻是幾乎在撿角般的工作。他們覺得自己很努力了。\n\n可是努力這個字本身是個相當諷刺的字眼，尤其是這個年代來說，「努力」基本上已經是個基本條件，而不再是個能夠拿來說嘴的人格特質。在大學時拼命攢學分，去修一些名不見經傳的課程，對於無法用努力取勝的科目就施以小惠，再想辦法矇混過關。\n\n最後發現四年過去了，找工作時一點屁用都沒有。從小到大我們並沒有好好地去思考自己想要的是什麼，導致念完大學之後已經逐漸喪失獨立思考的能力，變成隨波逐流的島民。\n\n不要管太多，只要努力工作就好；修法？這是沒辦法的事；薪水被壓榨？就算不開心生活還是要過。於是圈養出了一群已經生活毫無目標可言，每天抱怨的愚民們。\n\n他們不但鄙視那些地位比較高的人，一旦有人試圖反抗，想要為這個社會發聲，如果他看起來並沒有這群人那麼慘，他們還會沆瀣一氣去阻止這個人，變成了同階級之間的弱弱相殘。很怕其他人不小心就得到了比自己更好的生活。\n\n這群人很努力，但如果被施以錯誤的教育以及思考上的怠惰，最終或許就會導致這樣的結果。\n\n因此最重要的在於如何思考，這個目標是一輩子的課題，「生也有涯、而知也無涯」後面常常被省略一句，「以有涯隨無涯，殆已。已而為知者，殆而已矣」，用有限的生命來追求無盡的知（不只限於知識），是很危險的事情。如果這樣做還自以為很聰明，那就更危險了。\n\n知識上的不足可以用思考彌補，但是不思考又一知半解，什麼事都做不好，那才是最可怕的。而目前的台灣大學生，恐怕都在往這個方向前進。\n\n至於怎麼練習思考，最剛開始或許可以從閱讀開始。\n\n## 2018 年目標\n\n轉眼間四五年過去了，走了不少冤枉路，每次到自己的生日，都會有種馬齒徒增的焦慮感，也不知道自己是否在一條正確的道路上。回顧一下之前所發生的事，不禁覺得自己有一大半的時間都在虛度光陰。不過儘管如此，他也的確是一部分的我。\n\n想要做的事情還有很多，但如果真的要說出一個比較完整的目標，大概就是「我想做一個有用的人」吧。\n","source":"_posts/1111-happy-birthday.md","raw":"---\ntitle: 狂歡雙 11  —  祝我生日快樂\ncategories: 雜談\ntags:\n  - 雙 11\n---\n\n\n\n今年 1111，除了各大電商正在雙 11 特價外，今天剛好也是我的滿 23 歲的生日。就把這幾年做的事做個整理吧。這篇文章篇幅很長，而且內容很瑣碎，幾乎都是從筆記跟日記當中東拼西湊寫出來的。\n\n這篇文章有一大部分是寫給自己警惕用的。\n\n## 我是誰？\n\n有時候，年紀越大越有一種逐漸迷失自己的感覺，每次都以為自己找到一個不錯的目標了，再繼續深究下去卻還有一大堆事情，直到現在我恐怕還是沒辦法講清楚我到底想要做什麼吧。不過人生大概就是這樣，會一直迷惘下去的，因此現在最重要的事情應該是，一旦決定好要做什麼，就不要輕易地反悔，否則就是在浪費人生了。\n\n## 勞工大代誌\n\n這是我在勞工節製作的專案，從四月中旬開始規劃、搜集資料到實作，因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。\n\n有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。\n\n我以為給自己時間很充裕了，但仍然有太多議題沒有涵蓋到，像是年金制度、職災統計等等。\n\n### 為什麼想要做這份專案\n\n國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。\n\n這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。\n工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會等等。\n\n如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音是怎樣，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。\n\n更何況是在我還沒出社會之前，就已經是那麼慘的現況了。\n\n台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。\n\n這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。\n\n身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。\n但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。\n\n其實在查資料的時候，有很多讓人鼻酸的故事。\n\n像是關廠工人臥軌時，民眾大喊輾過去；像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。\n\n我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，\n更何況是以前沒有任何勞基法保護的勞工們。\n\n## 日語八百屋\n\n### 學日文\n\n我還依稀記得學日文初期，每天都在咖啡廳點完一杯拿鐵後，從中午待到晚上，學習方式也相當土法煉鋼。把書裡頭的課文看過幾遍後，練習書中的習題與文法，再把單字與學到的概念記錄在筆記本上。就這樣持續了一年左右，筆記本已經塞得滿滿的。\n\n這期間真的空虛寂寞覺得冷，因為沒有人能夠讓你練習，在還沒有到達一定程度前，別人也只會用肥魯宅之類的字眼來嘲笑你而已。當時對我來說最好的方式就是用 lang-8。\n\n有時候一不小心就會落入寫程式的陷阱，會非常直觀地去用「是否與程式有關」的方式選擇自己的行為。這對當時的我來說是個很好的指標，不過這顯然不該是不去學習新東西的理由。\n\n幾年前的我曾經寫過「小說，我最愛的毒品」，看得出來當時文筆的稚嫩跟想法的天真。然而我很慶幸當時曾經有各種方式來記錄生活。包含部落格之外，我從國中到現在，已經寫了四本日記。\n\n雖然用現在的角度來看，不免對自己以前的荒唐與智障莞爾一笑，不過他也的確構築了現在的我。我並不希望自己成為一個除了寫程式以外，眼睛黯淡無光，無法對世上其他事物產生熱情的人。\n\n大約在前幾個月，我開始準備了線上課程。那對我來說是個很特別的體驗，因為之前並沒有任何日語的教學經驗，但想趁著這個機會來練習自己的教學規劃外，也希望能夠把以前的筆記、經驗統一做個整理。\n\n規劃期花了我 2~3 個禮拜，從思考一位日語初學者在剛學習日文時會遇到的困難，循序漸進到名詞、形容詞、動詞、敬語常體轉換等等。送出審核時很緊張，很怕自己沒辦法通過。又偷偷地想，如果沒有通過至少我就不用準備了吧XD。\n\n通過後，陷入了三個月的忙碌期，每天下班回來後就是坐在電腦前錄音，寫講義。幸好當時有規劃好整個課程架構，才讓課程順利上線。\n\n這讓我深刻體會到線上教學的難處，雖然省下了實體教學的重複性與場地限制，但是每次的影片剪輯都要花將近 3 ~ 4 個小時製作、微調，更別說後期的字幕了，尤其是語言教學要在雙語間切換。\n\n不過最後仍然順利上線了，對我來說這是個相當有成就感的一件事，看著大家報名與提問，覺得一切都很值得。\n\n## 自學日文文章整理\n\n- [自學四年通過日檢 N3, N2 心得](https://goo.gl/Tm336k)\n- [只要活著就會有痛苦－聲之形](https://goo.gl/dnN5Zk)\n- [給初學者的日文自學指南](https://goo.gl/LRjtDd)\n- [日語學習資源總整理](https://goo.gl/6mieM9)\n- [日檢 N3, N2 文法總整理 - part1](https://goo.gl/sW3Lkp)\n- [日本服務業用語](https://goo.gl/KVU5Vf)\n- [我的日語學習之道](https://goo.gl/BDweo5)\n- [日本眾議院選舉](https://goo.gl/1gkYqv)\n- [教科書上的八田與一](https://goo.gl/KAR7UC)\n- [日文主題單字篇 - 剪髮](https://goo.gl/vmd5i3)\n- [「気」的各種用法](https://goo.gl/4JKWZm)\n\n## 語言能力\n\n在這個年代，語言能力已經算是基本條件。更何況，在台灣比我厲害的人超乎想像。更何況，幾乎每間大學、科大的應外系，標配就是英文和日文。就算精通這兩門語言，也只是統計樣本中的一點而已。\n\n## 整理經驗\n\n大家在小時候是否都有寫過訂正本？如果我們可以把遇到的問題記錄下來，並且把當時的解決辦法記錄下來的話，以後遇到類似的問題就可以比較快的解決。\n\n我在開發時會把當時遇到的問題、或是自己在開發途中延伸出來的概念記錄下來，並且在月底統一 review 一次，整理過後把概念已經相對完整的筆記統整為一篇文章發佈。\n\n> 唯一能夠改變你的，只有你自己的行為而已。\n\n## 你的未來不是擰螺絲工人\n\n摩登時代是卓別林的著名默劇之一，因為工業化跟經濟大蕭條的影響，勞工們被資本家壓榨，同時也造成百萬人失業。很諷刺的一部電影。\n\n現在這個資本過剩的年代，生存已經不是太大的問題。\n\n但如果不思考人生，那麽就跟裡頭的工人差不多，整天在工廠擰螺絲。\n\n> 比起支配，我更想要幫助別人 - 卓別林\n\n## 不要做不喜歡做的工作\n\n對一件事情有熱情是非常助力的。舉例來說好了，當時為了賺錢，早上通常在漢堡王打工，只能透過晚上自學來補足程式上的不足。進入實習後，才發現強度跟之前比起來實在是天壤之別。所有的事情都會在工作的壓力下被放大，產生的效應是非常可怕的一件事情。我在實習之後才接觸了許多當時線上課程完全沒教、業界卻已經逐漸開始引入的東西。\n\n別人是用一天 10 小時的時間在做自己喜歡的事，而自己只是用閒暇擠出來的三兩分鐘來做，先不說天份上的差距，光是時間上就已經產生足夠顯著的差異了。\n\n## 不要跟別人比較修了幾學分\n\n在現行體制下的大學教育制度下，畢業門檻通常在 120 ~ 140 學分左右，扣除專業選修及必修外，還有將近 30 多學分的通識課。\n\n說真的，修的通識課是真的學到東西了，還是只是上下交相賊的營養學分而已？在大一的時候我也把學分修滿，到處去找一些看起來不錯的課上，雖然得到一份看似充實的課程表，但真正精華的知識也只有幾堂課而已，更別說在台科大選通識，根本就是個笑話。\n\n比起推動 XXX 教育，找到自己真正想要幹嘛才是真正重要的事。在高職或許課業上的壓力比較沒有那麼大，但現在的國民教育，幾乎就像職場一樣，把一天 8 小時塞到滿檔，晚上繼續補習。晚上累得要命，更別提深入思考所學的本質、關心週遭事物、甚至是培養興趣。\n\n因此在追求知識的同時，自己多出去看看週遭的事物、思考、深思熟慮之後再做選擇，比起到處比較學分來得重要多了。\n\n## 不要被 Buzzword 影響\n\n你是真的喜歡現在做的事，還是只是時勢而已？前陣子推廣的程式教育以及多元領域課程、機器學習等等，其實都是假議題，如果不思考自己學習的目的，學習這些領域都只會落入痛苦的泥沼而已。\n\n> 沒有人能夠幫你決定未來。\n\n如果決定自己要做什麼很難，那麼可以從決定自己不要做什麼開始。\n\n## 不要後悔自己的選擇\n\n人生是一連串的選擇。\n實習很好，唸書很好，出國留學很好，去旅行也很好，待在台灣也很好，\n只要那是你想要的，那就好。\n\n但不要惋惜自己的人生，一旦你厭倦，你就只是在浪費人生。儘管我仍然不確定是否在這個領域上走下去是不是正確的道路。\n\n## 不要汲汲營營於逢場作戲的人際關係\n\n剛上大學的時候常常會去跟同學進行「社交」活動，例如一起吃午餐、逛夜市、唱歌等等，後來想想，或許只是自己只是害怕沒有人的情況下，要不斷在問自己的問題而已。\n\n這種時間通常才是最重要的，因為後來根本不會有人因為和你吃過飯，有過幾次交流，就突然變成知心好友。更別講有人會把這種行為視為拓展人脈。\n\n因此如果真心想要在大學中找到比較要好的朋友，或許可以從社團、擔任幹部開始，當一群人有了同一個目標而聚在一起時，也比較容易和彼此交流，而不是午飯間的雜談閒聊而已。\n\n## 年輕不是本錢\n\n很多人都會說年輕是本錢，目前的我很幸運，都還在平均年齡 30 歲以下的團隊工作。\n\n但是這個社會很多人並不在乎你的經歷、能力是什麼。就像雖然我有兩年多的工作經驗，在社會上仍然會被認為是個剛畢業的大學生，然後再用各種美麗的包裝壓低你的薪水而已。\n\n他們通常並不在乎你做了什麼，而是你的學歷、有沒有在上市公司上班、多益成績這種根本無法辨識的指標。當然啦具備能力的人通常也會有上述幾個條件，他們根本不在乎學歷年紀這種指標。畢竟資深有時只是代表做的比較久而已。\n\n## 臉書\n\n最近，我把臉書上許多會令我分心粉絲專頁以及內容農場給刪掉了，像是各種行車記錄器影片、蘋果日報、即時動新聞等等。盡量讓我的動態牆不要被各種我不喜歡的事物強姦。\n\n絕望的是，舉凡youtube 爆紅、某某女星私密照流出、一生要做的幾件事等等，下面的回應都非常熱烈。\n\n他們看似無傷大雅，可是卻在默默腐蝕我的心靈，尤其像我這種會被下一個影片給吸引的人，一旦點開來第一部影片就會繼續看下去。\n\n最後，為了避免惱人的通知，我把 Facebook 的 App 也刪掉了。除了剛開始有點不習慣之外，其實沒有太大的變化，反而空出更多時間來。也不會下意識地打開 App，如果真的想滑就用網頁版的，那種單純和不方便的操作方式反而可以減少我在 Facebook 上虛耗的光陰。\n\n## 最重要的是思考\n\n台灣的教育在高中上後直接導向士農工商，成績比較爛的就被丟去二流的職業學校。把課程排爆棚，一天跟上班時間一樣的 8 小時，再加上補習班，根本沒有多餘的時間讓你思考人生、關心周遭的事物，只會讓人變得跟溫順。\n\n對於一個只要頭腦不要太差，經濟狀況許可的一般人來說，一路安然到大學是個常態分佈現象。但神奇的是這群人在畢業以後，出來做的卻是幾乎在撿角般的工作。他們覺得自己很努力了。\n\n可是努力這個字本身是個相當諷刺的字眼，尤其是這個年代來說，「努力」基本上已經是個基本條件，而不再是個能夠拿來說嘴的人格特質。在大學時拼命攢學分，去修一些名不見經傳的課程，對於無法用努力取勝的科目就施以小惠，再想辦法矇混過關。\n\n最後發現四年過去了，找工作時一點屁用都沒有。從小到大我們並沒有好好地去思考自己想要的是什麼，導致念完大學之後已經逐漸喪失獨立思考的能力，變成隨波逐流的島民。\n\n不要管太多，只要努力工作就好；修法？這是沒辦法的事；薪水被壓榨？就算不開心生活還是要過。於是圈養出了一群已經生活毫無目標可言，每天抱怨的愚民們。\n\n他們不但鄙視那些地位比較高的人，一旦有人試圖反抗，想要為這個社會發聲，如果他看起來並沒有這群人那麼慘，他們還會沆瀣一氣去阻止這個人，變成了同階級之間的弱弱相殘。很怕其他人不小心就得到了比自己更好的生活。\n\n這群人很努力，但如果被施以錯誤的教育以及思考上的怠惰，最終或許就會導致這樣的結果。\n\n因此最重要的在於如何思考，這個目標是一輩子的課題，「生也有涯、而知也無涯」後面常常被省略一句，「以有涯隨無涯，殆已。已而為知者，殆而已矣」，用有限的生命來追求無盡的知（不只限於知識），是很危險的事情。如果這樣做還自以為很聰明，那就更危險了。\n\n知識上的不足可以用思考彌補，但是不思考又一知半解，什麼事都做不好，那才是最可怕的。而目前的台灣大學生，恐怕都在往這個方向前進。\n\n至於怎麼練習思考，最剛開始或許可以從閱讀開始。\n\n## 2018 年目標\n\n轉眼間四五年過去了，走了不少冤枉路，每次到自己的生日，都會有種馬齒徒增的焦慮感，也不知道自己是否在一條正確的道路上。回顧一下之前所發生的事，不禁覺得自己有一大半的時間都在虛度光陰。不過儘管如此，他也的確是一部分的我。\n\n想要做的事情還有很多，但如果真的要說出一個比較完整的目標，大概就是「我想做一個有用的人」吧。\n","slug":"1111-happy-birthday","published":1,"date":"2017-11-11T15:34:10.000Z","updated":"2017-11-11T15:37:28.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitps0005iw5teqrdzv7q","content":"<p>今年 1111，除了各大電商正在雙 11 特價外，今天剛好也是我的滿 23 歲的生日。就把這幾年做的事做個整理吧。這篇文章篇幅很長，而且內容很瑣碎，幾乎都是從筆記跟日記當中東拼西湊寫出來的。</p>\n<p>這篇文章有一大部分是寫給自己警惕用的。</p>\n<h2 id=\"我是誰？\"><a href=\"#我是誰？\" class=\"headerlink\" title=\"我是誰？\"></a>我是誰？</h2><p>有時候，年紀越大越有一種逐漸迷失自己的感覺，每次都以為自己找到一個不錯的目標了，再繼續深究下去卻還有一大堆事情，直到現在我恐怕還是沒辦法講清楚我到底想要做什麼吧。不過人生大概就是這樣，會一直迷惘下去的，因此現在最重要的事情應該是，一旦決定好要做什麼，就不要輕易地反悔，否則就是在浪費人生了。</p>\n<h2 id=\"勞工大代誌\"><a href=\"#勞工大代誌\" class=\"headerlink\" title=\"勞工大代誌\"></a>勞工大代誌</h2><p>這是我在勞工節製作的專案，從四月中旬開始規劃、搜集資料到實作，因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。</p>\n<p>有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。</p>\n<p>我以為給自己時間很充裕了，但仍然有太多議題沒有涵蓋到，像是年金制度、職災統計等等。</p>\n<h3 id=\"為什麼想要做這份專案\"><a href=\"#為什麼想要做這份專案\" class=\"headerlink\" title=\"為什麼想要做這份專案\"></a>為什麼想要做這份專案</h3><p>國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。</p>\n<p>這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。<br>工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會等等。</p>\n<p>如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音是怎樣，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。</p>\n<p>更何況是在我還沒出社會之前，就已經是那麼慘的現況了。</p>\n<p>台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。</p>\n<p>這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。</p>\n<p>身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。<br>但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。</p>\n<p>其實在查資料的時候，有很多讓人鼻酸的故事。</p>\n<p>像是關廠工人臥軌時，民眾大喊輾過去；像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。</p>\n<p>我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，<br>更何況是以前沒有任何勞基法保護的勞工們。</p>\n<h2 id=\"日語八百屋\"><a href=\"#日語八百屋\" class=\"headerlink\" title=\"日語八百屋\"></a>日語八百屋</h2><h3 id=\"學日文\"><a href=\"#學日文\" class=\"headerlink\" title=\"學日文\"></a>學日文</h3><p>我還依稀記得學日文初期，每天都在咖啡廳點完一杯拿鐵後，從中午待到晚上，學習方式也相當土法煉鋼。把書裡頭的課文看過幾遍後，練習書中的習題與文法，再把單字與學到的概念記錄在筆記本上。就這樣持續了一年左右，筆記本已經塞得滿滿的。</p>\n<p>這期間真的空虛寂寞覺得冷，因為沒有人能夠讓你練習，在還沒有到達一定程度前，別人也只會用肥魯宅之類的字眼來嘲笑你而已。當時對我來說最好的方式就是用 lang-8。</p>\n<p>有時候一不小心就會落入寫程式的陷阱，會非常直觀地去用「是否與程式有關」的方式選擇自己的行為。這對當時的我來說是個很好的指標，不過這顯然不該是不去學習新東西的理由。</p>\n<p>幾年前的我曾經寫過「小說，我最愛的毒品」，看得出來當時文筆的稚嫩跟想法的天真。然而我很慶幸當時曾經有各種方式來記錄生活。包含部落格之外，我從國中到現在，已經寫了四本日記。</p>\n<p>雖然用現在的角度來看，不免對自己以前的荒唐與智障莞爾一笑，不過他也的確構築了現在的我。我並不希望自己成為一個除了寫程式以外，眼睛黯淡無光，無法對世上其他事物產生熱情的人。</p>\n<p>大約在前幾個月，我開始準備了線上課程。那對我來說是個很特別的體驗，因為之前並沒有任何日語的教學經驗，但想趁著這個機會來練習自己的教學規劃外，也希望能夠把以前的筆記、經驗統一做個整理。</p>\n<p>規劃期花了我 2~3 個禮拜，從思考一位日語初學者在剛學習日文時會遇到的困難，循序漸進到名詞、形容詞、動詞、敬語常體轉換等等。送出審核時很緊張，很怕自己沒辦法通過。又偷偷地想，如果沒有通過至少我就不用準備了吧XD。</p>\n<p>通過後，陷入了三個月的忙碌期，每天下班回來後就是坐在電腦前錄音，寫講義。幸好當時有規劃好整個課程架構，才讓課程順利上線。</p>\n<p>這讓我深刻體會到線上教學的難處，雖然省下了實體教學的重複性與場地限制，但是每次的影片剪輯都要花將近 3 ~ 4 個小時製作、微調，更別說後期的字幕了，尤其是語言教學要在雙語間切換。</p>\n<p>不過最後仍然順利上線了，對我來說這是個相當有成就感的一件事，看著大家報名與提問，覺得一切都很值得。</p>\n<h2 id=\"自學日文文章整理\"><a href=\"#自學日文文章整理\" class=\"headerlink\" title=\"自學日文文章整理\"></a>自學日文文章整理</h2><ul>\n<li><a href=\"https://goo.gl/Tm336k\" target=\"_blank\" rel=\"external\">自學四年通過日檢 N3, N2 心得</a></li>\n<li><a href=\"https://goo.gl/dnN5Zk\" target=\"_blank\" rel=\"external\">只要活著就會有痛苦－聲之形</a></li>\n<li><a href=\"https://goo.gl/LRjtDd\" target=\"_blank\" rel=\"external\">給初學者的日文自學指南</a></li>\n<li><a href=\"https://goo.gl/6mieM9\" target=\"_blank\" rel=\"external\">日語學習資源總整理</a></li>\n<li><a href=\"https://goo.gl/sW3Lkp\" target=\"_blank\" rel=\"external\">日檢 N3, N2 文法總整理 - part1</a></li>\n<li><a href=\"https://goo.gl/KVU5Vf\" target=\"_blank\" rel=\"external\">日本服務業用語</a></li>\n<li><a href=\"https://goo.gl/BDweo5\" target=\"_blank\" rel=\"external\">我的日語學習之道</a></li>\n<li><a href=\"https://goo.gl/1gkYqv\" target=\"_blank\" rel=\"external\">日本眾議院選舉</a></li>\n<li><a href=\"https://goo.gl/KAR7UC\" target=\"_blank\" rel=\"external\">教科書上的八田與一</a></li>\n<li><a href=\"https://goo.gl/vmd5i3\" target=\"_blank\" rel=\"external\">日文主題單字篇 - 剪髮</a></li>\n<li><a href=\"https://goo.gl/4JKWZm\" target=\"_blank\" rel=\"external\">「気」的各種用法</a></li>\n</ul>\n<h2 id=\"語言能力\"><a href=\"#語言能力\" class=\"headerlink\" title=\"語言能力\"></a>語言能力</h2><p>在這個年代，語言能力已經算是基本條件。更何況，在台灣比我厲害的人超乎想像。更何況，幾乎每間大學、科大的應外系，標配就是英文和日文。就算精通這兩門語言，也只是統計樣本中的一點而已。</p>\n<h2 id=\"整理經驗\"><a href=\"#整理經驗\" class=\"headerlink\" title=\"整理經驗\"></a>整理經驗</h2><p>大家在小時候是否都有寫過訂正本？如果我們可以把遇到的問題記錄下來，並且把當時的解決辦法記錄下來的話，以後遇到類似的問題就可以比較快的解決。</p>\n<p>我在開發時會把當時遇到的問題、或是自己在開發途中延伸出來的概念記錄下來，並且在月底統一 review 一次，整理過後把概念已經相對完整的筆記統整為一篇文章發佈。</p>\n<blockquote>\n<p>唯一能夠改變你的，只有你自己的行為而已。</p>\n</blockquote>\n<h2 id=\"你的未來不是擰螺絲工人\"><a href=\"#你的未來不是擰螺絲工人\" class=\"headerlink\" title=\"你的未來不是擰螺絲工人\"></a>你的未來不是擰螺絲工人</h2><p>摩登時代是卓別林的著名默劇之一，因為工業化跟經濟大蕭條的影響，勞工們被資本家壓榨，同時也造成百萬人失業。很諷刺的一部電影。</p>\n<p>現在這個資本過剩的年代，生存已經不是太大的問題。</p>\n<p>但如果不思考人生，那麽就跟裡頭的工人差不多，整天在工廠擰螺絲。</p>\n<blockquote>\n<p>比起支配，我更想要幫助別人 - 卓別林</p>\n</blockquote>\n<h2 id=\"不要做不喜歡做的工作\"><a href=\"#不要做不喜歡做的工作\" class=\"headerlink\" title=\"不要做不喜歡做的工作\"></a>不要做不喜歡做的工作</h2><p>對一件事情有熱情是非常助力的。舉例來說好了，當時為了賺錢，早上通常在漢堡王打工，只能透過晚上自學來補足程式上的不足。進入實習後，才發現強度跟之前比起來實在是天壤之別。所有的事情都會在工作的壓力下被放大，產生的效應是非常可怕的一件事情。我在實習之後才接觸了許多當時線上課程完全沒教、業界卻已經逐漸開始引入的東西。</p>\n<p>別人是用一天 10 小時的時間在做自己喜歡的事，而自己只是用閒暇擠出來的三兩分鐘來做，先不說天份上的差距，光是時間上就已經產生足夠顯著的差異了。</p>\n<h2 id=\"不要跟別人比較修了幾學分\"><a href=\"#不要跟別人比較修了幾學分\" class=\"headerlink\" title=\"不要跟別人比較修了幾學分\"></a>不要跟別人比較修了幾學分</h2><p>在現行體制下的大學教育制度下，畢業門檻通常在 120 ~ 140 學分左右，扣除專業選修及必修外，還有將近 30 多學分的通識課。</p>\n<p>說真的，修的通識課是真的學到東西了，還是只是上下交相賊的營養學分而已？在大一的時候我也把學分修滿，到處去找一些看起來不錯的課上，雖然得到一份看似充實的課程表，但真正精華的知識也只有幾堂課而已，更別說在台科大選通識，根本就是個笑話。</p>\n<p>比起推動 XXX 教育，找到自己真正想要幹嘛才是真正重要的事。在高職或許課業上的壓力比較沒有那麼大，但現在的國民教育，幾乎就像職場一樣，把一天 8 小時塞到滿檔，晚上繼續補習。晚上累得要命，更別提深入思考所學的本質、關心週遭事物、甚至是培養興趣。</p>\n<p>因此在追求知識的同時，自己多出去看看週遭的事物、思考、深思熟慮之後再做選擇，比起到處比較學分來得重要多了。</p>\n<h2 id=\"不要被-Buzzword-影響\"><a href=\"#不要被-Buzzword-影響\" class=\"headerlink\" title=\"不要被 Buzzword 影響\"></a>不要被 Buzzword 影響</h2><p>你是真的喜歡現在做的事，還是只是時勢而已？前陣子推廣的程式教育以及多元領域課程、機器學習等等，其實都是假議題，如果不思考自己學習的目的，學習這些領域都只會落入痛苦的泥沼而已。</p>\n<blockquote>\n<p>沒有人能夠幫你決定未來。</p>\n</blockquote>\n<p>如果決定自己要做什麼很難，那麼可以從決定自己不要做什麼開始。</p>\n<h2 id=\"不要後悔自己的選擇\"><a href=\"#不要後悔自己的選擇\" class=\"headerlink\" title=\"不要後悔自己的選擇\"></a>不要後悔自己的選擇</h2><p>人生是一連串的選擇。<br>實習很好，唸書很好，出國留學很好，去旅行也很好，待在台灣也很好，<br>只要那是你想要的，那就好。</p>\n<p>但不要惋惜自己的人生，一旦你厭倦，你就只是在浪費人生。儘管我仍然不確定是否在這個領域上走下去是不是正確的道路。</p>\n<h2 id=\"不要汲汲營營於逢場作戲的人際關係\"><a href=\"#不要汲汲營營於逢場作戲的人際關係\" class=\"headerlink\" title=\"不要汲汲營營於逢場作戲的人際關係\"></a>不要汲汲營營於逢場作戲的人際關係</h2><p>剛上大學的時候常常會去跟同學進行「社交」活動，例如一起吃午餐、逛夜市、唱歌等等，後來想想，或許只是自己只是害怕沒有人的情況下，要不斷在問自己的問題而已。</p>\n<p>這種時間通常才是最重要的，因為後來根本不會有人因為和你吃過飯，有過幾次交流，就突然變成知心好友。更別講有人會把這種行為視為拓展人脈。</p>\n<p>因此如果真心想要在大學中找到比較要好的朋友，或許可以從社團、擔任幹部開始，當一群人有了同一個目標而聚在一起時，也比較容易和彼此交流，而不是午飯間的雜談閒聊而已。</p>\n<h2 id=\"年輕不是本錢\"><a href=\"#年輕不是本錢\" class=\"headerlink\" title=\"年輕不是本錢\"></a>年輕不是本錢</h2><p>很多人都會說年輕是本錢，目前的我很幸運，都還在平均年齡 30 歲以下的團隊工作。</p>\n<p>但是這個社會很多人並不在乎你的經歷、能力是什麼。就像雖然我有兩年多的工作經驗，在社會上仍然會被認為是個剛畢業的大學生，然後再用各種美麗的包裝壓低你的薪水而已。</p>\n<p>他們通常並不在乎你做了什麼，而是你的學歷、有沒有在上市公司上班、多益成績這種根本無法辨識的指標。當然啦具備能力的人通常也會有上述幾個條件，他們根本不在乎學歷年紀這種指標。畢竟資深有時只是代表做的比較久而已。</p>\n<h2 id=\"臉書\"><a href=\"#臉書\" class=\"headerlink\" title=\"臉書\"></a>臉書</h2><p>最近，我把臉書上許多會令我分心粉絲專頁以及內容農場給刪掉了，像是各種行車記錄器影片、蘋果日報、即時動新聞等等。盡量讓我的動態牆不要被各種我不喜歡的事物強姦。</p>\n<p>絕望的是，舉凡youtube 爆紅、某某女星私密照流出、一生要做的幾件事等等，下面的回應都非常熱烈。</p>\n<p>他們看似無傷大雅，可是卻在默默腐蝕我的心靈，尤其像我這種會被下一個影片給吸引的人，一旦點開來第一部影片就會繼續看下去。</p>\n<p>最後，為了避免惱人的通知，我把 Facebook 的 App 也刪掉了。除了剛開始有點不習慣之外，其實沒有太大的變化，反而空出更多時間來。也不會下意識地打開 App，如果真的想滑就用網頁版的，那種單純和不方便的操作方式反而可以減少我在 Facebook 上虛耗的光陰。</p>\n<h2 id=\"最重要的是思考\"><a href=\"#最重要的是思考\" class=\"headerlink\" title=\"最重要的是思考\"></a>最重要的是思考</h2><p>台灣的教育在高中上後直接導向士農工商，成績比較爛的就被丟去二流的職業學校。把課程排爆棚，一天跟上班時間一樣的 8 小時，再加上補習班，根本沒有多餘的時間讓你思考人生、關心周遭的事物，只會讓人變得跟溫順。</p>\n<p>對於一個只要頭腦不要太差，經濟狀況許可的一般人來說，一路安然到大學是個常態分佈現象。但神奇的是這群人在畢業以後，出來做的卻是幾乎在撿角般的工作。他們覺得自己很努力了。</p>\n<p>可是努力這個字本身是個相當諷刺的字眼，尤其是這個年代來說，「努力」基本上已經是個基本條件，而不再是個能夠拿來說嘴的人格特質。在大學時拼命攢學分，去修一些名不見經傳的課程，對於無法用努力取勝的科目就施以小惠，再想辦法矇混過關。</p>\n<p>最後發現四年過去了，找工作時一點屁用都沒有。從小到大我們並沒有好好地去思考自己想要的是什麼，導致念完大學之後已經逐漸喪失獨立思考的能力，變成隨波逐流的島民。</p>\n<p>不要管太多，只要努力工作就好；修法？這是沒辦法的事；薪水被壓榨？就算不開心生活還是要過。於是圈養出了一群已經生活毫無目標可言，每天抱怨的愚民們。</p>\n<p>他們不但鄙視那些地位比較高的人，一旦有人試圖反抗，想要為這個社會發聲，如果他看起來並沒有這群人那麼慘，他們還會沆瀣一氣去阻止這個人，變成了同階級之間的弱弱相殘。很怕其他人不小心就得到了比自己更好的生活。</p>\n<p>這群人很努力，但如果被施以錯誤的教育以及思考上的怠惰，最終或許就會導致這樣的結果。</p>\n<p>因此最重要的在於如何思考，這個目標是一輩子的課題，「生也有涯、而知也無涯」後面常常被省略一句，「以有涯隨無涯，殆已。已而為知者，殆而已矣」，用有限的生命來追求無盡的知（不只限於知識），是很危險的事情。如果這樣做還自以為很聰明，那就更危險了。</p>\n<p>知識上的不足可以用思考彌補，但是不思考又一知半解，什麼事都做不好，那才是最可怕的。而目前的台灣大學生，恐怕都在往這個方向前進。</p>\n<p>至於怎麼練習思考，最剛開始或許可以從閱讀開始。</p>\n<h2 id=\"2018-年目標\"><a href=\"#2018-年目標\" class=\"headerlink\" title=\"2018 年目標\"></a>2018 年目標</h2><p>轉眼間四五年過去了，走了不少冤枉路，每次到自己的生日，都會有種馬齒徒增的焦慮感，也不知道自己是否在一條正確的道路上。回顧一下之前所發生的事，不禁覺得自己有一大半的時間都在虛度光陰。不過儘管如此，他也的確是一部分的我。</p>\n<p>想要做的事情還有很多，但如果真的要說出一個比較完整的目標，大概就是「我想做一個有用的人」吧。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>今年 1111，除了各大電商正在雙 11 特價外，今天剛好也是我的滿 23 歲的生日。就把這幾年做的事做個整理吧。這篇文章篇幅很長，而且內容很瑣碎，幾乎都是從筆記跟日記當中東拼西湊寫出來的。</p>\n<p>這篇文章有一大部分是寫給自己警惕用的。</p>\n<h2 id=\"我是誰？\"><a href=\"#我是誰？\" class=\"headerlink\" title=\"我是誰？\"></a>我是誰？</h2><p>有時候，年紀越大越有一種逐漸迷失自己的感覺，每次都以為自己找到一個不錯的目標了，再繼續深究下去卻還有一大堆事情，直到現在我恐怕還是沒辦法講清楚我到底想要做什麼吧。不過人生大概就是這樣，會一直迷惘下去的，因此現在最重要的事情應該是，一旦決定好要做什麼，就不要輕易地反悔，否則就是在浪費人生了。</p>\n<h2 id=\"勞工大代誌\"><a href=\"#勞工大代誌\" class=\"headerlink\" title=\"勞工大代誌\"></a>勞工大代誌</h2><p>這是我在勞工節製作的專案，從四月中旬開始規劃、搜集資料到實作，因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。</p>\n<p>有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。</p>\n<p>我以為給自己時間很充裕了，但仍然有太多議題沒有涵蓋到，像是年金制度、職災統計等等。</p>\n<h3 id=\"為什麼想要做這份專案\"><a href=\"#為什麼想要做這份專案\" class=\"headerlink\" title=\"為什麼想要做這份專案\"></a>為什麼想要做這份專案</h3><p>國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。</p>\n<p>這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。<br>工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會等等。</p>\n<p>如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音是怎樣，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。</p>\n<p>更何況是在我還沒出社會之前，就已經是那麼慘的現況了。</p>\n<p>台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。</p>\n<p>這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。</p>\n<p>身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。<br>但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。</p>\n<p>其實在查資料的時候，有很多讓人鼻酸的故事。</p>\n<p>像是關廠工人臥軌時，民眾大喊輾過去；像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。</p>\n<p>我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，<br>更何況是以前沒有任何勞基法保護的勞工們。</p>\n<h2 id=\"日語八百屋\"><a href=\"#日語八百屋\" class=\"headerlink\" title=\"日語八百屋\"></a>日語八百屋</h2><h3 id=\"學日文\"><a href=\"#學日文\" class=\"headerlink\" title=\"學日文\"></a>學日文</h3><p>我還依稀記得學日文初期，每天都在咖啡廳點完一杯拿鐵後，從中午待到晚上，學習方式也相當土法煉鋼。把書裡頭的課文看過幾遍後，練習書中的習題與文法，再把單字與學到的概念記錄在筆記本上。就這樣持續了一年左右，筆記本已經塞得滿滿的。</p>\n<p>這期間真的空虛寂寞覺得冷，因為沒有人能夠讓你練習，在還沒有到達一定程度前，別人也只會用肥魯宅之類的字眼來嘲笑你而已。當時對我來說最好的方式就是用 lang-8。</p>\n<p>有時候一不小心就會落入寫程式的陷阱，會非常直觀地去用「是否與程式有關」的方式選擇自己的行為。這對當時的我來說是個很好的指標，不過這顯然不該是不去學習新東西的理由。</p>\n<p>幾年前的我曾經寫過「小說，我最愛的毒品」，看得出來當時文筆的稚嫩跟想法的天真。然而我很慶幸當時曾經有各種方式來記錄生活。包含部落格之外，我從國中到現在，已經寫了四本日記。</p>\n<p>雖然用現在的角度來看，不免對自己以前的荒唐與智障莞爾一笑，不過他也的確構築了現在的我。我並不希望自己成為一個除了寫程式以外，眼睛黯淡無光，無法對世上其他事物產生熱情的人。</p>\n<p>大約在前幾個月，我開始準備了線上課程。那對我來說是個很特別的體驗，因為之前並沒有任何日語的教學經驗，但想趁著這個機會來練習自己的教學規劃外，也希望能夠把以前的筆記、經驗統一做個整理。</p>\n<p>規劃期花了我 2~3 個禮拜，從思考一位日語初學者在剛學習日文時會遇到的困難，循序漸進到名詞、形容詞、動詞、敬語常體轉換等等。送出審核時很緊張，很怕自己沒辦法通過。又偷偷地想，如果沒有通過至少我就不用準備了吧XD。</p>\n<p>通過後，陷入了三個月的忙碌期，每天下班回來後就是坐在電腦前錄音，寫講義。幸好當時有規劃好整個課程架構，才讓課程順利上線。</p>\n<p>這讓我深刻體會到線上教學的難處，雖然省下了實體教學的重複性與場地限制，但是每次的影片剪輯都要花將近 3 ~ 4 個小時製作、微調，更別說後期的字幕了，尤其是語言教學要在雙語間切換。</p>\n<p>不過最後仍然順利上線了，對我來說這是個相當有成就感的一件事，看著大家報名與提問，覺得一切都很值得。</p>\n<h2 id=\"自學日文文章整理\"><a href=\"#自學日文文章整理\" class=\"headerlink\" title=\"自學日文文章整理\"></a>自學日文文章整理</h2><ul>\n<li><a href=\"https://goo.gl/Tm336k\" target=\"_blank\" rel=\"external\">自學四年通過日檢 N3, N2 心得</a></li>\n<li><a href=\"https://goo.gl/dnN5Zk\" target=\"_blank\" rel=\"external\">只要活著就會有痛苦－聲之形</a></li>\n<li><a href=\"https://goo.gl/LRjtDd\" target=\"_blank\" rel=\"external\">給初學者的日文自學指南</a></li>\n<li><a href=\"https://goo.gl/6mieM9\" target=\"_blank\" rel=\"external\">日語學習資源總整理</a></li>\n<li><a href=\"https://goo.gl/sW3Lkp\" target=\"_blank\" rel=\"external\">日檢 N3, N2 文法總整理 - part1</a></li>\n<li><a href=\"https://goo.gl/KVU5Vf\" target=\"_blank\" rel=\"external\">日本服務業用語</a></li>\n<li><a href=\"https://goo.gl/BDweo5\" target=\"_blank\" rel=\"external\">我的日語學習之道</a></li>\n<li><a href=\"https://goo.gl/1gkYqv\" target=\"_blank\" rel=\"external\">日本眾議院選舉</a></li>\n<li><a href=\"https://goo.gl/KAR7UC\" target=\"_blank\" rel=\"external\">教科書上的八田與一</a></li>\n<li><a href=\"https://goo.gl/vmd5i3\" target=\"_blank\" rel=\"external\">日文主題單字篇 - 剪髮</a></li>\n<li><a href=\"https://goo.gl/4JKWZm\" target=\"_blank\" rel=\"external\">「気」的各種用法</a></li>\n</ul>\n<h2 id=\"語言能力\"><a href=\"#語言能力\" class=\"headerlink\" title=\"語言能力\"></a>語言能力</h2><p>在這個年代，語言能力已經算是基本條件。更何況，在台灣比我厲害的人超乎想像。更何況，幾乎每間大學、科大的應外系，標配就是英文和日文。就算精通這兩門語言，也只是統計樣本中的一點而已。</p>\n<h2 id=\"整理經驗\"><a href=\"#整理經驗\" class=\"headerlink\" title=\"整理經驗\"></a>整理經驗</h2><p>大家在小時候是否都有寫過訂正本？如果我們可以把遇到的問題記錄下來，並且把當時的解決辦法記錄下來的話，以後遇到類似的問題就可以比較快的解決。</p>\n<p>我在開發時會把當時遇到的問題、或是自己在開發途中延伸出來的概念記錄下來，並且在月底統一 review 一次，整理過後把概念已經相對完整的筆記統整為一篇文章發佈。</p>\n<blockquote>\n<p>唯一能夠改變你的，只有你自己的行為而已。</p>\n</blockquote>\n<h2 id=\"你的未來不是擰螺絲工人\"><a href=\"#你的未來不是擰螺絲工人\" class=\"headerlink\" title=\"你的未來不是擰螺絲工人\"></a>你的未來不是擰螺絲工人</h2><p>摩登時代是卓別林的著名默劇之一，因為工業化跟經濟大蕭條的影響，勞工們被資本家壓榨，同時也造成百萬人失業。很諷刺的一部電影。</p>\n<p>現在這個資本過剩的年代，生存已經不是太大的問題。</p>\n<p>但如果不思考人生，那麽就跟裡頭的工人差不多，整天在工廠擰螺絲。</p>\n<blockquote>\n<p>比起支配，我更想要幫助別人 - 卓別林</p>\n</blockquote>\n<h2 id=\"不要做不喜歡做的工作\"><a href=\"#不要做不喜歡做的工作\" class=\"headerlink\" title=\"不要做不喜歡做的工作\"></a>不要做不喜歡做的工作</h2><p>對一件事情有熱情是非常助力的。舉例來說好了，當時為了賺錢，早上通常在漢堡王打工，只能透過晚上自學來補足程式上的不足。進入實習後，才發現強度跟之前比起來實在是天壤之別。所有的事情都會在工作的壓力下被放大，產生的效應是非常可怕的一件事情。我在實習之後才接觸了許多當時線上課程完全沒教、業界卻已經逐漸開始引入的東西。</p>\n<p>別人是用一天 10 小時的時間在做自己喜歡的事，而自己只是用閒暇擠出來的三兩分鐘來做，先不說天份上的差距，光是時間上就已經產生足夠顯著的差異了。</p>\n<h2 id=\"不要跟別人比較修了幾學分\"><a href=\"#不要跟別人比較修了幾學分\" class=\"headerlink\" title=\"不要跟別人比較修了幾學分\"></a>不要跟別人比較修了幾學分</h2><p>在現行體制下的大學教育制度下，畢業門檻通常在 120 ~ 140 學分左右，扣除專業選修及必修外，還有將近 30 多學分的通識課。</p>\n<p>說真的，修的通識課是真的學到東西了，還是只是上下交相賊的營養學分而已？在大一的時候我也把學分修滿，到處去找一些看起來不錯的課上，雖然得到一份看似充實的課程表，但真正精華的知識也只有幾堂課而已，更別說在台科大選通識，根本就是個笑話。</p>\n<p>比起推動 XXX 教育，找到自己真正想要幹嘛才是真正重要的事。在高職或許課業上的壓力比較沒有那麼大，但現在的國民教育，幾乎就像職場一樣，把一天 8 小時塞到滿檔，晚上繼續補習。晚上累得要命，更別提深入思考所學的本質、關心週遭事物、甚至是培養興趣。</p>\n<p>因此在追求知識的同時，自己多出去看看週遭的事物、思考、深思熟慮之後再做選擇，比起到處比較學分來得重要多了。</p>\n<h2 id=\"不要被-Buzzword-影響\"><a href=\"#不要被-Buzzword-影響\" class=\"headerlink\" title=\"不要被 Buzzword 影響\"></a>不要被 Buzzword 影響</h2><p>你是真的喜歡現在做的事，還是只是時勢而已？前陣子推廣的程式教育以及多元領域課程、機器學習等等，其實都是假議題，如果不思考自己學習的目的，學習這些領域都只會落入痛苦的泥沼而已。</p>\n<blockquote>\n<p>沒有人能夠幫你決定未來。</p>\n</blockquote>\n<p>如果決定自己要做什麼很難，那麼可以從決定自己不要做什麼開始。</p>\n<h2 id=\"不要後悔自己的選擇\"><a href=\"#不要後悔自己的選擇\" class=\"headerlink\" title=\"不要後悔自己的選擇\"></a>不要後悔自己的選擇</h2><p>人生是一連串的選擇。<br>實習很好，唸書很好，出國留學很好，去旅行也很好，待在台灣也很好，<br>只要那是你想要的，那就好。</p>\n<p>但不要惋惜自己的人生，一旦你厭倦，你就只是在浪費人生。儘管我仍然不確定是否在這個領域上走下去是不是正確的道路。</p>\n<h2 id=\"不要汲汲營營於逢場作戲的人際關係\"><a href=\"#不要汲汲營營於逢場作戲的人際關係\" class=\"headerlink\" title=\"不要汲汲營營於逢場作戲的人際關係\"></a>不要汲汲營營於逢場作戲的人際關係</h2><p>剛上大學的時候常常會去跟同學進行「社交」活動，例如一起吃午餐、逛夜市、唱歌等等，後來想想，或許只是自己只是害怕沒有人的情況下，要不斷在問自己的問題而已。</p>\n<p>這種時間通常才是最重要的，因為後來根本不會有人因為和你吃過飯，有過幾次交流，就突然變成知心好友。更別講有人會把這種行為視為拓展人脈。</p>\n<p>因此如果真心想要在大學中找到比較要好的朋友，或許可以從社團、擔任幹部開始，當一群人有了同一個目標而聚在一起時，也比較容易和彼此交流，而不是午飯間的雜談閒聊而已。</p>\n<h2 id=\"年輕不是本錢\"><a href=\"#年輕不是本錢\" class=\"headerlink\" title=\"年輕不是本錢\"></a>年輕不是本錢</h2><p>很多人都會說年輕是本錢，目前的我很幸運，都還在平均年齡 30 歲以下的團隊工作。</p>\n<p>但是這個社會很多人並不在乎你的經歷、能力是什麼。就像雖然我有兩年多的工作經驗，在社會上仍然會被認為是個剛畢業的大學生，然後再用各種美麗的包裝壓低你的薪水而已。</p>\n<p>他們通常並不在乎你做了什麼，而是你的學歷、有沒有在上市公司上班、多益成績這種根本無法辨識的指標。當然啦具備能力的人通常也會有上述幾個條件，他們根本不在乎學歷年紀這種指標。畢竟資深有時只是代表做的比較久而已。</p>\n<h2 id=\"臉書\"><a href=\"#臉書\" class=\"headerlink\" title=\"臉書\"></a>臉書</h2><p>最近，我把臉書上許多會令我分心粉絲專頁以及內容農場給刪掉了，像是各種行車記錄器影片、蘋果日報、即時動新聞等等。盡量讓我的動態牆不要被各種我不喜歡的事物強姦。</p>\n<p>絕望的是，舉凡youtube 爆紅、某某女星私密照流出、一生要做的幾件事等等，下面的回應都非常熱烈。</p>\n<p>他們看似無傷大雅，可是卻在默默腐蝕我的心靈，尤其像我這種會被下一個影片給吸引的人，一旦點開來第一部影片就會繼續看下去。</p>\n<p>最後，為了避免惱人的通知，我把 Facebook 的 App 也刪掉了。除了剛開始有點不習慣之外，其實沒有太大的變化，反而空出更多時間來。也不會下意識地打開 App，如果真的想滑就用網頁版的，那種單純和不方便的操作方式反而可以減少我在 Facebook 上虛耗的光陰。</p>\n<h2 id=\"最重要的是思考\"><a href=\"#最重要的是思考\" class=\"headerlink\" title=\"最重要的是思考\"></a>最重要的是思考</h2><p>台灣的教育在高中上後直接導向士農工商，成績比較爛的就被丟去二流的職業學校。把課程排爆棚，一天跟上班時間一樣的 8 小時，再加上補習班，根本沒有多餘的時間讓你思考人生、關心周遭的事物，只會讓人變得跟溫順。</p>\n<p>對於一個只要頭腦不要太差，經濟狀況許可的一般人來說，一路安然到大學是個常態分佈現象。但神奇的是這群人在畢業以後，出來做的卻是幾乎在撿角般的工作。他們覺得自己很努力了。</p>\n<p>可是努力這個字本身是個相當諷刺的字眼，尤其是這個年代來說，「努力」基本上已經是個基本條件，而不再是個能夠拿來說嘴的人格特質。在大學時拼命攢學分，去修一些名不見經傳的課程，對於無法用努力取勝的科目就施以小惠，再想辦法矇混過關。</p>\n<p>最後發現四年過去了，找工作時一點屁用都沒有。從小到大我們並沒有好好地去思考自己想要的是什麼，導致念完大學之後已經逐漸喪失獨立思考的能力，變成隨波逐流的島民。</p>\n<p>不要管太多，只要努力工作就好；修法？這是沒辦法的事；薪水被壓榨？就算不開心生活還是要過。於是圈養出了一群已經生活毫無目標可言，每天抱怨的愚民們。</p>\n<p>他們不但鄙視那些地位比較高的人，一旦有人試圖反抗，想要為這個社會發聲，如果他看起來並沒有這群人那麼慘，他們還會沆瀣一氣去阻止這個人，變成了同階級之間的弱弱相殘。很怕其他人不小心就得到了比自己更好的生活。</p>\n<p>這群人很努力，但如果被施以錯誤的教育以及思考上的怠惰，最終或許就會導致這樣的結果。</p>\n<p>因此最重要的在於如何思考，這個目標是一輩子的課題，「生也有涯、而知也無涯」後面常常被省略一句，「以有涯隨無涯，殆已。已而為知者，殆而已矣」，用有限的生命來追求無盡的知（不只限於知識），是很危險的事情。如果這樣做還自以為很聰明，那就更危險了。</p>\n<p>知識上的不足可以用思考彌補，但是不思考又一知半解，什麼事都做不好，那才是最可怕的。而目前的台灣大學生，恐怕都在往這個方向前進。</p>\n<p>至於怎麼練習思考，最剛開始或許可以從閱讀開始。</p>\n<h2 id=\"2018-年目標\"><a href=\"#2018-年目標\" class=\"headerlink\" title=\"2018 年目標\"></a>2018 年目標</h2><p>轉眼間四五年過去了，走了不少冤枉路，每次到自己的生日，都會有種馬齒徒增的焦慮感，也不知道自己是否在一條正確的道路上。回顧一下之前所發生的事，不禁覺得自己有一大半的時間都在虛度光陰。不過儘管如此，他也的確是一部分的我。</p>\n<p>想要做的事情還有很多，但如果真的要說出一個比較完整的目標，大概就是「我想做一個有用的人」吧。</p>\n"},{"title":"透過 AWS lambda 上傳 Medium 文章","_content":"\nMedium 本身不支援 code block 編輯，雖然不知道背後的原因為何（或許工程師並非主要客群），所以如果要高亮程式碼，一個作法是直接貼圖片，一個是貼在 gist 上後再 embed 到文章當中。\n\n程式碼用圖片貼出雖然可以達到高亮效果，但對工程師來說是一件相當不友善的事，因為無法透過複製貼上的方式來實際測試你的程式碼，或者編輯文章時還要手動修圖，是一件很麻煩的事。\n\n不過貼上 gist 也有幾個問題\n\n- 手機版無法觀看，會直接噴出連結給你而非嵌入的內容\n- 自己貼 code 到 gist 太麻煩。（不過搭配 vscode sublime 等套件上傳到 gist 也是個不錯的方式）\n\n為了盡量在 Medium 看到高亮的 code block，最後決定使用 AWS Lambda 解決這件事。\n\n## [AWS Lambda](https://aws.amazon.com/tw/lambda/)\n\n對於 Lambda 還不了解的讀者，目前網路上已經有很多資源可以觀看，這邊不再贅述。Lambda 是讓 AWS 幫你執行想要的 function，而不用實際去建立一個 server（當然背後還是有 server 啦）。透過這種方式，我們不用寫個 function 就要部署到一台機器，甚至去維護它，我們只需要執行就好。\n\n### Github Issue\n\n為了串接到 lambda 的 endpoint，決定透過 github webhook 觸發。因為在 github 可以使用 issue 寫 markdown，還可以上傳圖片（github 幫你 host）、預覽、code block 等，其實相當方便。想要發布文章時，再透過 close issue 觸發 webhook，再透過 lambda 將 code block 上傳至 gist，最後呼叫 Medium API 建立文章。\n\n### Medium API\n\n- https://github.com/Medium/medium-api-docs\n\nMedium 的 API 短小輕薄，不過方便好用。首先先到個人頁面的 **setting** > **Integration tokens** 生成 token，再透過 token 呼叫建立文章的 API 即可。\n\n### Gist API\n\ngist API 也是一樣，為了不讓自己的 gist 一片混亂，建議可以另外再開一個帳號專門存放文章使用的 code。到 **settings > developer settings > personal access token > generate token** 建立 token，記得勾選 gist 權限。\n\n## 串接 Lambda\n\n前置工作做好後就可以開始串接 lambda 了。\n\n首先把建立好的 lambda endpoint 放到 github webhook 中，然後隨便找一個可以編譯 markdown 為 HTML 的 package（我是用 `marked`），結合起來就可以囉！\n\n一個簡單的實作在[這裡](https://github.com/DnD-mag/DnD-lamda)。雖然稍嫌麻煩，不過其實還挺方便的。不知道 Medium 何時才要支援 code block QQ。\n","source":"_posts/AWS-lambda-medium.md","raw":"---\ntitle: 透過 AWS lambda 上傳 Medium 文章\ncategories: AWS\ntags:\n  - lambda\n  - medium\n---\n\nMedium 本身不支援 code block 編輯，雖然不知道背後的原因為何（或許工程師並非主要客群），所以如果要高亮程式碼，一個作法是直接貼圖片，一個是貼在 gist 上後再 embed 到文章當中。\n\n程式碼用圖片貼出雖然可以達到高亮效果，但對工程師來說是一件相當不友善的事，因為無法透過複製貼上的方式來實際測試你的程式碼，或者編輯文章時還要手動修圖，是一件很麻煩的事。\n\n不過貼上 gist 也有幾個問題\n\n- 手機版無法觀看，會直接噴出連結給你而非嵌入的內容\n- 自己貼 code 到 gist 太麻煩。（不過搭配 vscode sublime 等套件上傳到 gist 也是個不錯的方式）\n\n為了盡量在 Medium 看到高亮的 code block，最後決定使用 AWS Lambda 解決這件事。\n\n## [AWS Lambda](https://aws.amazon.com/tw/lambda/)\n\n對於 Lambda 還不了解的讀者，目前網路上已經有很多資源可以觀看，這邊不再贅述。Lambda 是讓 AWS 幫你執行想要的 function，而不用實際去建立一個 server（當然背後還是有 server 啦）。透過這種方式，我們不用寫個 function 就要部署到一台機器，甚至去維護它，我們只需要執行就好。\n\n### Github Issue\n\n為了串接到 lambda 的 endpoint，決定透過 github webhook 觸發。因為在 github 可以使用 issue 寫 markdown，還可以上傳圖片（github 幫你 host）、預覽、code block 等，其實相當方便。想要發布文章時，再透過 close issue 觸發 webhook，再透過 lambda 將 code block 上傳至 gist，最後呼叫 Medium API 建立文章。\n\n### Medium API\n\n- https://github.com/Medium/medium-api-docs\n\nMedium 的 API 短小輕薄，不過方便好用。首先先到個人頁面的 **setting** > **Integration tokens** 生成 token，再透過 token 呼叫建立文章的 API 即可。\n\n### Gist API\n\ngist API 也是一樣，為了不讓自己的 gist 一片混亂，建議可以另外再開一個帳號專門存放文章使用的 code。到 **settings > developer settings > personal access token > generate token** 建立 token，記得勾選 gist 權限。\n\n## 串接 Lambda\n\n前置工作做好後就可以開始串接 lambda 了。\n\n首先把建立好的 lambda endpoint 放到 github webhook 中，然後隨便找一個可以編譯 markdown 為 HTML 的 package（我是用 `marked`），結合起來就可以囉！\n\n一個簡單的實作在[這裡](https://github.com/DnD-mag/DnD-lamda)。雖然稍嫌麻煩，不過其實還挺方便的。不知道 Medium 何時才要支援 code block QQ。\n","slug":"AWS-lambda-medium","published":1,"date":"2017-11-09T16:46:28.000Z","updated":"2017-11-09T16:50:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitpy0006iw5tgbhwirqs","content":"<p>Medium 本身不支援 code block 編輯，雖然不知道背後的原因為何（或許工程師並非主要客群），所以如果要高亮程式碼，一個作法是直接貼圖片，一個是貼在 gist 上後再 embed 到文章當中。</p>\n<p>程式碼用圖片貼出雖然可以達到高亮效果，但對工程師來說是一件相當不友善的事，因為無法透過複製貼上的方式來實際測試你的程式碼，或者編輯文章時還要手動修圖，是一件很麻煩的事。</p>\n<p>不過貼上 gist 也有幾個問題</p>\n<ul>\n<li>手機版無法觀看，會直接噴出連結給你而非嵌入的內容</li>\n<li>自己貼 code 到 gist 太麻煩。（不過搭配 vscode sublime 等套件上傳到 gist 也是個不錯的方式）</li>\n</ul>\n<p>為了盡量在 Medium 看到高亮的 code block，最後決定使用 AWS Lambda 解決這件事。</p>\n<h2 id=\"AWS-Lambda\"><a href=\"#AWS-Lambda\" class=\"headerlink\" title=\"AWS Lambda\"></a><a href=\"https://aws.amazon.com/tw/lambda/\" target=\"_blank\" rel=\"external\">AWS Lambda</a></h2><p>對於 Lambda 還不了解的讀者，目前網路上已經有很多資源可以觀看，這邊不再贅述。Lambda 是讓 AWS 幫你執行想要的 function，而不用實際去建立一個 server（當然背後還是有 server 啦）。透過這種方式，我們不用寫個 function 就要部署到一台機器，甚至去維護它，我們只需要執行就好。</p>\n<h3 id=\"Github-Issue\"><a href=\"#Github-Issue\" class=\"headerlink\" title=\"Github Issue\"></a>Github Issue</h3><p>為了串接到 lambda 的 endpoint，決定透過 github webhook 觸發。因為在 github 可以使用 issue 寫 markdown，還可以上傳圖片（github 幫你 host）、預覽、code block 等，其實相當方便。想要發布文章時，再透過 close issue 觸發 webhook，再透過 lambda 將 code block 上傳至 gist，最後呼叫 Medium API 建立文章。</p>\n<h3 id=\"Medium-API\"><a href=\"#Medium-API\" class=\"headerlink\" title=\"Medium API\"></a>Medium API</h3><ul>\n<li><a href=\"https://github.com/Medium/medium-api-docs\" target=\"_blank\" rel=\"external\">https://github.com/Medium/medium-api-docs</a></li>\n</ul>\n<p>Medium 的 API 短小輕薄，不過方便好用。首先先到個人頁面的 <strong>setting</strong> &gt; <strong>Integration tokens</strong> 生成 token，再透過 token 呼叫建立文章的 API 即可。</p>\n<h3 id=\"Gist-API\"><a href=\"#Gist-API\" class=\"headerlink\" title=\"Gist API\"></a>Gist API</h3><p>gist API 也是一樣，為了不讓自己的 gist 一片混亂，建議可以另外再開一個帳號專門存放文章使用的 code。到 <strong>settings &gt; developer settings &gt; personal access token &gt; generate token</strong> 建立 token，記得勾選 gist 權限。</p>\n<h2 id=\"串接-Lambda\"><a href=\"#串接-Lambda\" class=\"headerlink\" title=\"串接 Lambda\"></a>串接 Lambda</h2><p>前置工作做好後就可以開始串接 lambda 了。</p>\n<p>首先把建立好的 lambda endpoint 放到 github webhook 中，然後隨便找一個可以編譯 markdown 為 HTML 的 package（我是用 <code>marked</code>），結合起來就可以囉！</p>\n<p>一個簡單的實作在<a href=\"https://github.com/DnD-mag/DnD-lamda\" target=\"_blank\" rel=\"external\">這裡</a>。雖然稍嫌麻煩，不過其實還挺方便的。不知道 Medium 何時才要支援 code block QQ。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Medium 本身不支援 code block 編輯，雖然不知道背後的原因為何（或許工程師並非主要客群），所以如果要高亮程式碼，一個作法是直接貼圖片，一個是貼在 gist 上後再 embed 到文章當中。</p>\n<p>程式碼用圖片貼出雖然可以達到高亮效果，但對工程師來說是一件相當不友善的事，因為無法透過複製貼上的方式來實際測試你的程式碼，或者編輯文章時還要手動修圖，是一件很麻煩的事。</p>\n<p>不過貼上 gist 也有幾個問題</p>\n<ul>\n<li>手機版無法觀看，會直接噴出連結給你而非嵌入的內容</li>\n<li>自己貼 code 到 gist 太麻煩。（不過搭配 vscode sublime 等套件上傳到 gist 也是個不錯的方式）</li>\n</ul>\n<p>為了盡量在 Medium 看到高亮的 code block，最後決定使用 AWS Lambda 解決這件事。</p>\n<h2 id=\"AWS-Lambda\"><a href=\"#AWS-Lambda\" class=\"headerlink\" title=\"AWS Lambda\"></a><a href=\"https://aws.amazon.com/tw/lambda/\" target=\"_blank\" rel=\"external\">AWS Lambda</a></h2><p>對於 Lambda 還不了解的讀者，目前網路上已經有很多資源可以觀看，這邊不再贅述。Lambda 是讓 AWS 幫你執行想要的 function，而不用實際去建立一個 server（當然背後還是有 server 啦）。透過這種方式，我們不用寫個 function 就要部署到一台機器，甚至去維護它，我們只需要執行就好。</p>\n<h3 id=\"Github-Issue\"><a href=\"#Github-Issue\" class=\"headerlink\" title=\"Github Issue\"></a>Github Issue</h3><p>為了串接到 lambda 的 endpoint，決定透過 github webhook 觸發。因為在 github 可以使用 issue 寫 markdown，還可以上傳圖片（github 幫你 host）、預覽、code block 等，其實相當方便。想要發布文章時，再透過 close issue 觸發 webhook，再透過 lambda 將 code block 上傳至 gist，最後呼叫 Medium API 建立文章。</p>\n<h3 id=\"Medium-API\"><a href=\"#Medium-API\" class=\"headerlink\" title=\"Medium API\"></a>Medium API</h3><ul>\n<li><a href=\"https://github.com/Medium/medium-api-docs\" target=\"_blank\" rel=\"external\">https://github.com/Medium/medium-api-docs</a></li>\n</ul>\n<p>Medium 的 API 短小輕薄，不過方便好用。首先先到個人頁面的 <strong>setting</strong> &gt; <strong>Integration tokens</strong> 生成 token，再透過 token 呼叫建立文章的 API 即可。</p>\n<h3 id=\"Gist-API\"><a href=\"#Gist-API\" class=\"headerlink\" title=\"Gist API\"></a>Gist API</h3><p>gist API 也是一樣，為了不讓自己的 gist 一片混亂，建議可以另外再開一個帳號專門存放文章使用的 code。到 <strong>settings &gt; developer settings &gt; personal access token &gt; generate token</strong> 建立 token，記得勾選 gist 權限。</p>\n<h2 id=\"串接-Lambda\"><a href=\"#串接-Lambda\" class=\"headerlink\" title=\"串接 Lambda\"></a>串接 Lambda</h2><p>前置工作做好後就可以開始串接 lambda 了。</p>\n<p>首先把建立好的 lambda endpoint 放到 github webhook 中，然後隨便找一個可以編譯 markdown 為 HTML 的 package（我是用 <code>marked</code>），結合起來就可以囉！</p>\n<p>一個簡單的實作在<a href=\"https://github.com/DnD-mag/DnD-lamda\" target=\"_blank\" rel=\"external\">這裡</a>。雖然稍嫌麻煩，不過其實還挺方便的。不知道 Medium 何時才要支援 code block QQ。</p>\n"},{"title":"2016 g0v summit 心得","date":"2016-06-10T16:00:00.000Z","_content":"\n\n\n\n\n## 因為一則廣告而創立的 g0v\n\ng0v 的由來其實是因為經濟動能推升方案（就是那個史上最腦殘的[廣告](https://www.youtube.com/watch?v=JfMHB-YqPGg))\n\n這群熱血的工程師決定組成 g0v。致力於推動政府開放，並且以網路的方式推廣給大眾。\n\ng0v 能夠紅，是從 318 學運開始。因為 hackfold 的共筆資料夾引入、直播工具...，讓大眾更了解...。\n\n然後在場的 700 多位參與者中，大約有一成左右是來自政府的事務員，甚至連即將卸任的張善政也到了 g0v 分享**推動政府開放資料**的過程。\n\n「把夢做大，然後相信總有一天會被別人看見，屬於自己的故事。」這大概是參加 g0v 最大的感觸。\n\n只能說，方心沒辦法參與實在是很可惜的一件事，不過 g0v 有直播以及大會的共筆，能夠看看筆記、影片過過乾癮也好。\n\n\n## TL;DR\n\n沒人想得到，目前遍佈三大洲、超過500名公民黑客的零時政府，當初是因為台灣政府的無效廣告而催生。這群黑客村裡的工程師除了會寫程式，普遍英語能力好，他們關注世界各國公民科技對政府的影響。高嘉良在2014年就曾花兩個月的時間到各國城市，與開放組織、社群交流，吸取當地經驗，回台分享給社群。就這樣，本來應該平淡度日的程式工程師們，因為改造社會的熱情，一腳踏入公民科技。\n\n第一次參加 g0v summit，聽說（和與會者聊天）這次的主題「拆後重建」有把主題拉廣。以前的議題技術性比較濃厚，吸引到的與會者也大多為工程師。這次不但有來自各國的與會者、講者，還有將近一成的與會者是政府機構的事務員。\n\n你會發現 g0v 不會抱有特定立場，而是用一種中介者的角度幫你把事情記錄下來。直播也好、[他們開源的小工具](http://g0v.tw/zh-TW/projects.html)也好，都是如此。如果你有時間，可以看看這次的直播或是大會共筆，如果真的抽不出時間來，就來看看我的筆記吧！\n\n\n* [大會共筆](http://beta.hackfoldr.org/g0v-summit-2016)\n\n## 筆記\n\n### .org 到 .ngo\n\n分享者是 ngo 的工程師，所以在講述自己在 NGO 的同時，也分享蠻多在開發時遇到的問題的。\n\n分享者提到，環境資訊協會目前遇到的挑戰有：\n- 2000 年到 2016 年：關於環境的議題根本沒有報社要報，頂多出現在生活版。=>當時代開始逐漸變遷時，工具勢必要做改變\n- 程式翻修：產品從剛上線開始就是 legacy system，通常要做好準備，在早期的沒有時間讓你 refactor，而是穩定之後才會開始重構，而且當時還導入了外部工程師幫忙\n- 當 nobody 變成 somebody：面對的問題越來越多\n  * 人：有了組織、人、主管、薪水，管理變得困難\n  * 世代變遷：新人不斷輪替、老人沒時間談理想 => 溝通出現問題\n  * 既得利益者：當 nobody 變成既得利益者之後，我們還記得自己的初衷嗎\n\n\n最後他將 NGO 扮演的角色做了總結：\n\n- 匯聚資訊與力量的平台\n- Proxy：代理政府，快速回應議題\n- Agent：公民代理人\n\n> 結論： 公司是除了國家以外，最重要、影響大家最多的組織。\n\n## 民主與公民參與之開放媒體\n\n講者是 VOXE 的創辦人。VOXE 的概念跟台灣的(立委投票指南)[http://vote.ly.g0v.tw/]很像，46% US 的選民在總統大選時根本沒有出來投票。70%年輕人在2014的歐洲議會選舉都沒有出來投，很多人認為沒差。很多人認為選出來的人不在意民意，所以就乾脆不投。所以希望能夠透過工具來改善，而創立了這個平台。\n\n其中有個問題讓我印象比較深刻，「怎麼讓大家付諸行動？這是最困難的一部份」，講者的回答是，透過工具的使用。畢竟一般人不可能整天抗議、整天看政見，有小孩老婆工作等等要顧，所以工具一定要夠簡單，才會刺激別人去用。\n\n原本還有人問到，阿你們要怎麼募資，他的回答是 google 給了他們 20 萬歐元XD。完全不用擔心了啊！\n\n> 結論：工具是用來解決問題的。\n\n## 強震即時警報系統\n\n這幾天大家應該都有收到地震的預報簡訊。講者開頭先敘述了 921 的實際經驗，提醒大家防震的重要性。\n先提一些地震小知識。[wiki](https://www.wikiwand.com/zh-tw/%E5%9C%B0%E9%9C%87%E9%A0%90%E6%B8%AC)\n\nP 波的傳播速度最快，每小時兩萬八千里。地震預報就是用這樣的原理。當 P 波到達之後就是 S 波，S 波之後就是最可怕的表面波。\n\n也就說在 P 波抵達時，接下來在表面波到達時所採取的動作是關鍵\n\n今天，假設我們收到了這樣的簡訊，該怎麼辦才好？\n- 確認是否能在 30 秒內跑到屋外。\n- 30 秒無法跑走，就需要知道房屋裡最安全的地方。\n- 不要打卡，有可能 30 秒之後你就消失在這個世界上了\n\n有些地震盲區，可能在震完之後才收到簡訊。日本大阪神地震，根據統計有七成受難者是自救，兩成是靠親友，剩下一成才是官方。這代表日本人真的把防災當作一回事。\n\n**額外加碼**\n\n[精美東京防災手冊](http://www.metro.tokyo.jp/CHINESE/GUIDE/BOSAI/)\n\n我們的心態、以及相對應的防範措施，我們準備好了嗎？講者認為基金會會是一個解法。\n\n> 結論： 防災，要從自己做起\n\n## 我在新聞界臥底的日子\n\n講者是 Kirby。是 [零傳媒](http://0media.tw/) 的創辦人\n\n[奇怪欸！女師二度爬山](http://www.appledaily.com.tw/appledaily/article/headline/20120805/34417382/)\n後來調查發現，這個女老師根本沒有男朋友。新聞的資料錯誤百出，媒體報導普遍素質低落。於是決定創辦零傳媒、以及提供資料視覺化的工具幫助記者在報導時有資料可以引述。而且可以提供給非技術人好上手的工具。\n\n目前好用的資料搜集工具：\n\n- open refine\n- spreadsheet\n- p5.js\n- kimono\n\n同時講者也分享了幾個真實案例：\n\n- 冰桶挑戰：發現冰桶盛行的那幾週，佔了總捐款金額的 70%\n- [急診人生](http://0media.tw/p/ergame/)\n\n發現了以下情況：\n\n- 資料記者要會寫程式嗎？進入成本會不會太高\n- 找得到會設計、會寫文章、會採訪、又會技術的工程師非常難\n- 新聞網站的文章表現沒有精練\n- 開源的工具有可能沒有再維護了\n- 服務有可能會終止\n\n於是希望透過 piotDB 幫助到記者，也能夠幫助工程師在以後資料收集、視覺化中有更好的選擇。\n\n## 秒退頂新地圖\n\n聽完講者分享之後，其實會發現這場看似臨時起意的秒買秒退，背後其實是有經過縝密計算的。\n到最後竟然還出現發起人上台分享心得。\n\n因為秒退發起人已經先研究過好市多的商業結構，100% 滿意是買賣雙方的保證行為，對好市多來說這個活動達到需宣傳的效果，對於使用者來講則是滿足了購買滿意的條件。雙方利害一致、提高曝光度，好市多沒有理由拒絕。\n\n先講結論\n\n- 2015 營收少 15 億，淨虧損 19 億。（總資產 2.5 兆，佔全台灣的六分之一）\n\n直接擊垮頂新大魔王是比較困難的一件事，所以先從小頭目開始。\n人民的力量是分散的，秒退地圖縮短長期抗戰的時間，秒退的挑戰第一個是爭議性的問題，第二個是行動本身的問題（需要親自到目的地去，忍受民眾和店員的目光）。秒退地圖可以把秒退狀況視覺化，把數據視覺化之後，比較可以組織與策劃下一步的目標。需要有人維持系統、推廣、蒐集登入資料等（系統本身的）挑戰。\n\n不過身為一位正常公民，要做的事情實在太多了。誰跟你每天秒買秒退，今天林鳳營特價還是跑去小確幸一下。\n\n[長大是什麼感覺](https://www.ptt.cc/bbs/Gossiping/M.1457003863.A.501.html)\n\n來看看日本當初是怎麼讓雪印倒閉的[連結](http://www.thenewslens.com/article/15347)。\n\n從社群的角度來看：\n\n- ptt 大部分是贊成，偶爾會有噓出現\n- Dcard 罵聲連連。一大堆反秒買秒對的文出現\n- Facebook 偶爾出現反秒買秒退的動態\n\n 先不論這個活動本身的道德辯證（講者說他只 focus 在解法）。\n\n不管這個活動本身正不正確，他也已經有效地引起關注及**思考**，而大家一起討論、尋求解答，其實就是一種開放協作(**open collcation**)。\n\n[秒買秒退地圖](http://jimhorng.github.io/return_as_buy/)\n\n> 結論： 頂新或許什麼都可以買，但他買不到公民行動的良心跟憤慨\n\n\n## 從 g0v 到 gov -- 潛入衛福部 400 天\n\n讓我噴淚的一場分享，潛入衛福部第 400 天。也是我今天聽下來覺得最棒的演講\n\n[直播影片](https://www.youtube.com/watch?v=xG1oEBs5uyM)\n\n[公共政策網路參與平台](join.gov.tw)\n\n這個平台仿效美國、英國的機制，只要超過 5000 人連署，政府就要在 2 個月內作出回應。\n\n講者從原本的 g0v 進入 gov，在引入協作工具中，也開始反思。政府要面對民間訴求很難嗎？\n詳細介紹一個公民提案到法案修正經過的過程與遭遇到的問題，點出社群參與者與政府觀點的落差。可以發現到，政府裡頭的公務員其實還是很願意做事情的。而這個案例最後政府回覆並且承諾修法，可惜提案人在法令公告前已經過世，而這項法案修正很可惜的沒有在他在世時協助到提案人。\n\n我還記得聽完演講之後，掌聲大概持續了三十秒有吧！雖然最後真的很可惜沒有幫助到提案人，但我相信他的分享已經間接影響很多人對政府的觀點了。\n\n> 政府要面對民間訴求，還真的挺難的\n\n> 開放，是有成本的。\n\n> 工程師要避免 single point of failure，公務員要避免 single point of success\n\n## 不開放、不透明的黨產\n\n在選前常常看到國民黨黨產的相關圖表。\n\n講者還開玩笑說具有所謂的地址，做成了地圖，可以看到國民黨在台北的土地，在台南白河有很大的地方都是國民黨的！一看街景種滿了檳榔香蕉。以後搞不好會做出國民黨黨產觀光app。\n\n[國民黨黨產尋訪車遊](https://www.facebook.com/events/1617242885159718/)\n\n在台灣因為沒有政黨法的關係，所以沒有特別限制黨產的來源。這造成了國民黨無私地接收了當時國家徵收的土地和營收。\n\n- 國民黨： 225 億\n- 民進黨： 4 億\n- 其他： 1900 萬\n\n可以看到這樣懸殊的落差，造成小黨生存不易，光是打廣告就先輸一半了。\n\n- 開放的問題\n- 歷史檔案的保存與修復\n- 資訊的完整性\n\n[黨產解密 gitbook](https://www.gitbook.com/book/billy3321/decipher_kmt_property/details)\n\n> 結論：國民黨不倒，台灣不會好\n\n\n### unconference\n\n在 unconference 裡主要是讓與會者發起自己的想法，第二天早上在交誼廳互相討論自己的想法。\n\n時間有限，我只聽一些自己有興趣的主題：\n\n#### 轉型正義\n\n如何降低討論的門檻，吸引一般人關注是討論重點。通常除了 228 受害的家屬、親友會去關注之外，一般社會大眾比較不會關心。一來是台灣歷史教育對 228 的輕描淡寫，再來是因為大部分人沒有經歷過 228。\n\n- 歷史學家的instagram\n- 二二八事件地圖\n- 轉型正義遊戲\n- 建構大眾對議題的興趣\n\n#### 對抗資本主義的共享經濟\n\n談大家對共享經濟的想像\n\n- [維納斯計畫](http://twtzm.weebly.com/)\n- 日本共生住宅\n- Uber AirBnB又是共享主義，但又是資本主義的代表。沒有辦法自己對抗自己。另外一本書「零邊際成本的社會」，才能夠更去了解。屬於中產階級的共享，並非理想中的共享\n- 只能從內部被摧毀，不能從外部去征服。當邊際成本走到零的時候，資本主義就不會繼續做那件事了，所以就會變成共享經濟了。\n\n## 寫在最後\n\n花了 1200 參加 conference，感覺不做點什麼也不太好。所以就把自己的心得跟筆記一起寫下來了。除了給方心過過乾癮，也順便給公司一個交代（？）。\n\n是真的看到、也學到挺多東西的啦！而且便當好吃又環保，但是他們賣的那雙環保筷一組要 300 塊耶！跟漁夫一樣完全下不了手啊！\n\n這次也有 unconference 的 session 跟與會者互動的小遊戲（搜集杯子）換獎品。感覺之後聚會的主角會越來越偏向與會者本身。","source":"_posts/2016-g0v-summit.md","raw":"---\ntitle: 2016 g0v summit 心得\ndate: 2016-6-11\ntags:\n  - g0v\n---\n\n\n\n\n\n## 因為一則廣告而創立的 g0v\n\ng0v 的由來其實是因為經濟動能推升方案（就是那個史上最腦殘的[廣告](https://www.youtube.com/watch?v=JfMHB-YqPGg))\n\n這群熱血的工程師決定組成 g0v。致力於推動政府開放，並且以網路的方式推廣給大眾。\n\ng0v 能夠紅，是從 318 學運開始。因為 hackfold 的共筆資料夾引入、直播工具...，讓大眾更了解...。\n\n然後在場的 700 多位參與者中，大約有一成左右是來自政府的事務員，甚至連即將卸任的張善政也到了 g0v 分享**推動政府開放資料**的過程。\n\n「把夢做大，然後相信總有一天會被別人看見，屬於自己的故事。」這大概是參加 g0v 最大的感觸。\n\n只能說，方心沒辦法參與實在是很可惜的一件事，不過 g0v 有直播以及大會的共筆，能夠看看筆記、影片過過乾癮也好。\n\n\n## TL;DR\n\n沒人想得到，目前遍佈三大洲、超過500名公民黑客的零時政府，當初是因為台灣政府的無效廣告而催生。這群黑客村裡的工程師除了會寫程式，普遍英語能力好，他們關注世界各國公民科技對政府的影響。高嘉良在2014年就曾花兩個月的時間到各國城市，與開放組織、社群交流，吸取當地經驗，回台分享給社群。就這樣，本來應該平淡度日的程式工程師們，因為改造社會的熱情，一腳踏入公民科技。\n\n第一次參加 g0v summit，聽說（和與會者聊天）這次的主題「拆後重建」有把主題拉廣。以前的議題技術性比較濃厚，吸引到的與會者也大多為工程師。這次不但有來自各國的與會者、講者，還有將近一成的與會者是政府機構的事務員。\n\n你會發現 g0v 不會抱有特定立場，而是用一種中介者的角度幫你把事情記錄下來。直播也好、[他們開源的小工具](http://g0v.tw/zh-TW/projects.html)也好，都是如此。如果你有時間，可以看看這次的直播或是大會共筆，如果真的抽不出時間來，就來看看我的筆記吧！\n\n\n* [大會共筆](http://beta.hackfoldr.org/g0v-summit-2016)\n\n## 筆記\n\n### .org 到 .ngo\n\n分享者是 ngo 的工程師，所以在講述自己在 NGO 的同時，也分享蠻多在開發時遇到的問題的。\n\n分享者提到，環境資訊協會目前遇到的挑戰有：\n- 2000 年到 2016 年：關於環境的議題根本沒有報社要報，頂多出現在生活版。=>當時代開始逐漸變遷時，工具勢必要做改變\n- 程式翻修：產品從剛上線開始就是 legacy system，通常要做好準備，在早期的沒有時間讓你 refactor，而是穩定之後才會開始重構，而且當時還導入了外部工程師幫忙\n- 當 nobody 變成 somebody：面對的問題越來越多\n  * 人：有了組織、人、主管、薪水，管理變得困難\n  * 世代變遷：新人不斷輪替、老人沒時間談理想 => 溝通出現問題\n  * 既得利益者：當 nobody 變成既得利益者之後，我們還記得自己的初衷嗎\n\n\n最後他將 NGO 扮演的角色做了總結：\n\n- 匯聚資訊與力量的平台\n- Proxy：代理政府，快速回應議題\n- Agent：公民代理人\n\n> 結論： 公司是除了國家以外，最重要、影響大家最多的組織。\n\n## 民主與公民參與之開放媒體\n\n講者是 VOXE 的創辦人。VOXE 的概念跟台灣的(立委投票指南)[http://vote.ly.g0v.tw/]很像，46% US 的選民在總統大選時根本沒有出來投票。70%年輕人在2014的歐洲議會選舉都沒有出來投，很多人認為沒差。很多人認為選出來的人不在意民意，所以就乾脆不投。所以希望能夠透過工具來改善，而創立了這個平台。\n\n其中有個問題讓我印象比較深刻，「怎麼讓大家付諸行動？這是最困難的一部份」，講者的回答是，透過工具的使用。畢竟一般人不可能整天抗議、整天看政見，有小孩老婆工作等等要顧，所以工具一定要夠簡單，才會刺激別人去用。\n\n原本還有人問到，阿你們要怎麼募資，他的回答是 google 給了他們 20 萬歐元XD。完全不用擔心了啊！\n\n> 結論：工具是用來解決問題的。\n\n## 強震即時警報系統\n\n這幾天大家應該都有收到地震的預報簡訊。講者開頭先敘述了 921 的實際經驗，提醒大家防震的重要性。\n先提一些地震小知識。[wiki](https://www.wikiwand.com/zh-tw/%E5%9C%B0%E9%9C%87%E9%A0%90%E6%B8%AC)\n\nP 波的傳播速度最快，每小時兩萬八千里。地震預報就是用這樣的原理。當 P 波到達之後就是 S 波，S 波之後就是最可怕的表面波。\n\n也就說在 P 波抵達時，接下來在表面波到達時所採取的動作是關鍵\n\n今天，假設我們收到了這樣的簡訊，該怎麼辦才好？\n- 確認是否能在 30 秒內跑到屋外。\n- 30 秒無法跑走，就需要知道房屋裡最安全的地方。\n- 不要打卡，有可能 30 秒之後你就消失在這個世界上了\n\n有些地震盲區，可能在震完之後才收到簡訊。日本大阪神地震，根據統計有七成受難者是自救，兩成是靠親友，剩下一成才是官方。這代表日本人真的把防災當作一回事。\n\n**額外加碼**\n\n[精美東京防災手冊](http://www.metro.tokyo.jp/CHINESE/GUIDE/BOSAI/)\n\n我們的心態、以及相對應的防範措施，我們準備好了嗎？講者認為基金會會是一個解法。\n\n> 結論： 防災，要從自己做起\n\n## 我在新聞界臥底的日子\n\n講者是 Kirby。是 [零傳媒](http://0media.tw/) 的創辦人\n\n[奇怪欸！女師二度爬山](http://www.appledaily.com.tw/appledaily/article/headline/20120805/34417382/)\n後來調查發現，這個女老師根本沒有男朋友。新聞的資料錯誤百出，媒體報導普遍素質低落。於是決定創辦零傳媒、以及提供資料視覺化的工具幫助記者在報導時有資料可以引述。而且可以提供給非技術人好上手的工具。\n\n目前好用的資料搜集工具：\n\n- open refine\n- spreadsheet\n- p5.js\n- kimono\n\n同時講者也分享了幾個真實案例：\n\n- 冰桶挑戰：發現冰桶盛行的那幾週，佔了總捐款金額的 70%\n- [急診人生](http://0media.tw/p/ergame/)\n\n發現了以下情況：\n\n- 資料記者要會寫程式嗎？進入成本會不會太高\n- 找得到會設計、會寫文章、會採訪、又會技術的工程師非常難\n- 新聞網站的文章表現沒有精練\n- 開源的工具有可能沒有再維護了\n- 服務有可能會終止\n\n於是希望透過 piotDB 幫助到記者，也能夠幫助工程師在以後資料收集、視覺化中有更好的選擇。\n\n## 秒退頂新地圖\n\n聽完講者分享之後，其實會發現這場看似臨時起意的秒買秒退，背後其實是有經過縝密計算的。\n到最後竟然還出現發起人上台分享心得。\n\n因為秒退發起人已經先研究過好市多的商業結構，100% 滿意是買賣雙方的保證行為，對好市多來說這個活動達到需宣傳的效果，對於使用者來講則是滿足了購買滿意的條件。雙方利害一致、提高曝光度，好市多沒有理由拒絕。\n\n先講結論\n\n- 2015 營收少 15 億，淨虧損 19 億。（總資產 2.5 兆，佔全台灣的六分之一）\n\n直接擊垮頂新大魔王是比較困難的一件事，所以先從小頭目開始。\n人民的力量是分散的，秒退地圖縮短長期抗戰的時間，秒退的挑戰第一個是爭議性的問題，第二個是行動本身的問題（需要親自到目的地去，忍受民眾和店員的目光）。秒退地圖可以把秒退狀況視覺化，把數據視覺化之後，比較可以組織與策劃下一步的目標。需要有人維持系統、推廣、蒐集登入資料等（系統本身的）挑戰。\n\n不過身為一位正常公民，要做的事情實在太多了。誰跟你每天秒買秒退，今天林鳳營特價還是跑去小確幸一下。\n\n[長大是什麼感覺](https://www.ptt.cc/bbs/Gossiping/M.1457003863.A.501.html)\n\n來看看日本當初是怎麼讓雪印倒閉的[連結](http://www.thenewslens.com/article/15347)。\n\n從社群的角度來看：\n\n- ptt 大部分是贊成，偶爾會有噓出現\n- Dcard 罵聲連連。一大堆反秒買秒對的文出現\n- Facebook 偶爾出現反秒買秒退的動態\n\n 先不論這個活動本身的道德辯證（講者說他只 focus 在解法）。\n\n不管這個活動本身正不正確，他也已經有效地引起關注及**思考**，而大家一起討論、尋求解答，其實就是一種開放協作(**open collcation**)。\n\n[秒買秒退地圖](http://jimhorng.github.io/return_as_buy/)\n\n> 結論： 頂新或許什麼都可以買，但他買不到公民行動的良心跟憤慨\n\n\n## 從 g0v 到 gov -- 潛入衛福部 400 天\n\n讓我噴淚的一場分享，潛入衛福部第 400 天。也是我今天聽下來覺得最棒的演講\n\n[直播影片](https://www.youtube.com/watch?v=xG1oEBs5uyM)\n\n[公共政策網路參與平台](join.gov.tw)\n\n這個平台仿效美國、英國的機制，只要超過 5000 人連署，政府就要在 2 個月內作出回應。\n\n講者從原本的 g0v 進入 gov，在引入協作工具中，也開始反思。政府要面對民間訴求很難嗎？\n詳細介紹一個公民提案到法案修正經過的過程與遭遇到的問題，點出社群參與者與政府觀點的落差。可以發現到，政府裡頭的公務員其實還是很願意做事情的。而這個案例最後政府回覆並且承諾修法，可惜提案人在法令公告前已經過世，而這項法案修正很可惜的沒有在他在世時協助到提案人。\n\n我還記得聽完演講之後，掌聲大概持續了三十秒有吧！雖然最後真的很可惜沒有幫助到提案人，但我相信他的分享已經間接影響很多人對政府的觀點了。\n\n> 政府要面對民間訴求，還真的挺難的\n\n> 開放，是有成本的。\n\n> 工程師要避免 single point of failure，公務員要避免 single point of success\n\n## 不開放、不透明的黨產\n\n在選前常常看到國民黨黨產的相關圖表。\n\n講者還開玩笑說具有所謂的地址，做成了地圖，可以看到國民黨在台北的土地，在台南白河有很大的地方都是國民黨的！一看街景種滿了檳榔香蕉。以後搞不好會做出國民黨黨產觀光app。\n\n[國民黨黨產尋訪車遊](https://www.facebook.com/events/1617242885159718/)\n\n在台灣因為沒有政黨法的關係，所以沒有特別限制黨產的來源。這造成了國民黨無私地接收了當時國家徵收的土地和營收。\n\n- 國民黨： 225 億\n- 民進黨： 4 億\n- 其他： 1900 萬\n\n可以看到這樣懸殊的落差，造成小黨生存不易，光是打廣告就先輸一半了。\n\n- 開放的問題\n- 歷史檔案的保存與修復\n- 資訊的完整性\n\n[黨產解密 gitbook](https://www.gitbook.com/book/billy3321/decipher_kmt_property/details)\n\n> 結論：國民黨不倒，台灣不會好\n\n\n### unconference\n\n在 unconference 裡主要是讓與會者發起自己的想法，第二天早上在交誼廳互相討論自己的想法。\n\n時間有限，我只聽一些自己有興趣的主題：\n\n#### 轉型正義\n\n如何降低討論的門檻，吸引一般人關注是討論重點。通常除了 228 受害的家屬、親友會去關注之外，一般社會大眾比較不會關心。一來是台灣歷史教育對 228 的輕描淡寫，再來是因為大部分人沒有經歷過 228。\n\n- 歷史學家的instagram\n- 二二八事件地圖\n- 轉型正義遊戲\n- 建構大眾對議題的興趣\n\n#### 對抗資本主義的共享經濟\n\n談大家對共享經濟的想像\n\n- [維納斯計畫](http://twtzm.weebly.com/)\n- 日本共生住宅\n- Uber AirBnB又是共享主義，但又是資本主義的代表。沒有辦法自己對抗自己。另外一本書「零邊際成本的社會」，才能夠更去了解。屬於中產階級的共享，並非理想中的共享\n- 只能從內部被摧毀，不能從外部去征服。當邊際成本走到零的時候，資本主義就不會繼續做那件事了，所以就會變成共享經濟了。\n\n## 寫在最後\n\n花了 1200 參加 conference，感覺不做點什麼也不太好。所以就把自己的心得跟筆記一起寫下來了。除了給方心過過乾癮，也順便給公司一個交代（？）。\n\n是真的看到、也學到挺多東西的啦！而且便當好吃又環保，但是他們賣的那雙環保筷一組要 300 塊耶！跟漁夫一樣完全下不了手啊！\n\n這次也有 unconference 的 session 跟與會者互動的小遊戲（搜集杯子）換獎品。感覺之後聚會的主角會越來越偏向與會者本身。","slug":"2016-g0v-summit","published":1,"updated":"2017-07-20T07:19:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitq00007iw5tjvy46a13","content":"<h2 id=\"因為一則廣告而創立的-g0v\"><a href=\"#因為一則廣告而創立的-g0v\" class=\"headerlink\" title=\"因為一則廣告而創立的 g0v\"></a>因為一則廣告而創立的 g0v</h2><p>g0v 的由來其實是因為經濟動能推升方案（就是那個史上最腦殘的<a href=\"https://www.youtube.com/watch?v=JfMHB-YqPGg\" target=\"_blank\" rel=\"external\">廣告</a>)</p>\n<p>這群熱血的工程師決定組成 g0v。致力於推動政府開放，並且以網路的方式推廣給大眾。</p>\n<p>g0v 能夠紅，是從 318 學運開始。因為 hackfold 的共筆資料夾引入、直播工具…，讓大眾更了解…。</p>\n<p>然後在場的 700 多位參與者中，大約有一成左右是來自政府的事務員，甚至連即將卸任的張善政也到了 g0v 分享<strong>推動政府開放資料</strong>的過程。</p>\n<p>「把夢做大，然後相信總有一天會被別人看見，屬於自己的故事。」這大概是參加 g0v 最大的感觸。</p>\n<p>只能說，方心沒辦法參與實在是很可惜的一件事，不過 g0v 有直播以及大會的共筆，能夠看看筆記、影片過過乾癮也好。</p>\n<h2 id=\"TL-DR\"><a href=\"#TL-DR\" class=\"headerlink\" title=\"TL;DR\"></a>TL;DR</h2><p>沒人想得到，目前遍佈三大洲、超過500名公民黑客的零時政府，當初是因為台灣政府的無效廣告而催生。這群黑客村裡的工程師除了會寫程式，普遍英語能力好，他們關注世界各國公民科技對政府的影響。高嘉良在2014年就曾花兩個月的時間到各國城市，與開放組織、社群交流，吸取當地經驗，回台分享給社群。就這樣，本來應該平淡度日的程式工程師們，因為改造社會的熱情，一腳踏入公民科技。</p>\n<p>第一次參加 g0v summit，聽說（和與會者聊天）這次的主題「拆後重建」有把主題拉廣。以前的議題技術性比較濃厚，吸引到的與會者也大多為工程師。這次不但有來自各國的與會者、講者，還有將近一成的與會者是政府機構的事務員。</p>\n<p>你會發現 g0v 不會抱有特定立場，而是用一種中介者的角度幫你把事情記錄下來。直播也好、<a href=\"http://g0v.tw/zh-TW/projects.html\" target=\"_blank\" rel=\"external\">他們開源的小工具</a>也好，都是如此。如果你有時間，可以看看這次的直播或是大會共筆，如果真的抽不出時間來，就來看看我的筆記吧！</p>\n<ul>\n<li><a href=\"http://beta.hackfoldr.org/g0v-summit-2016\" target=\"_blank\" rel=\"external\">大會共筆</a></li>\n</ul>\n<h2 id=\"筆記\"><a href=\"#筆記\" class=\"headerlink\" title=\"筆記\"></a>筆記</h2><h3 id=\"org-到-ngo\"><a href=\"#org-到-ngo\" class=\"headerlink\" title=\".org 到 .ngo\"></a>.org 到 .ngo</h3><p>分享者是 ngo 的工程師，所以在講述自己在 NGO 的同時，也分享蠻多在開發時遇到的問題的。</p>\n<p>分享者提到，環境資訊協會目前遇到的挑戰有：</p>\n<ul>\n<li>2000 年到 2016 年：關於環境的議題根本沒有報社要報，頂多出現在生活版。=&gt;當時代開始逐漸變遷時，工具勢必要做改變</li>\n<li>程式翻修：產品從剛上線開始就是 legacy system，通常要做好準備，在早期的沒有時間讓你 refactor，而是穩定之後才會開始重構，而且當時還導入了外部工程師幫忙</li>\n<li>當 nobody 變成 somebody：面對的問題越來越多<ul>\n<li>人：有了組織、人、主管、薪水，管理變得困難</li>\n<li>世代變遷：新人不斷輪替、老人沒時間談理想 =&gt; 溝通出現問題</li>\n<li>既得利益者：當 nobody 變成既得利益者之後，我們還記得自己的初衷嗎</li>\n</ul>\n</li>\n</ul>\n<p>最後他將 NGO 扮演的角色做了總結：</p>\n<ul>\n<li>匯聚資訊與力量的平台</li>\n<li>Proxy：代理政府，快速回應議題</li>\n<li>Agent：公民代理人</li>\n</ul>\n<blockquote>\n<p>結論： 公司是除了國家以外，最重要、影響大家最多的組織。</p>\n</blockquote>\n<h2 id=\"民主與公民參與之開放媒體\"><a href=\"#民主與公民參與之開放媒體\" class=\"headerlink\" title=\"民主與公民參與之開放媒體\"></a>民主與公民參與之開放媒體</h2><p>講者是 VOXE 的創辦人。VOXE 的概念跟台灣的(立委投票指南)[<a href=\"http://vote.ly.g0v.tw/]很像，46%\" target=\"_blank\" rel=\"external\">http://vote.ly.g0v.tw/]很像，46%</a> US 的選民在總統大選時根本沒有出來投票。70%年輕人在2014的歐洲議會選舉都沒有出來投，很多人認為沒差。很多人認為選出來的人不在意民意，所以就乾脆不投。所以希望能夠透過工具來改善，而創立了這個平台。</p>\n<p>其中有個問題讓我印象比較深刻，「怎麼讓大家付諸行動？這是最困難的一部份」，講者的回答是，透過工具的使用。畢竟一般人不可能整天抗議、整天看政見，有小孩老婆工作等等要顧，所以工具一定要夠簡單，才會刺激別人去用。</p>\n<p>原本還有人問到，阿你們要怎麼募資，他的回答是 google 給了他們 20 萬歐元XD。完全不用擔心了啊！</p>\n<blockquote>\n<p>結論：工具是用來解決問題的。</p>\n</blockquote>\n<h2 id=\"強震即時警報系統\"><a href=\"#強震即時警報系統\" class=\"headerlink\" title=\"強震即時警報系統\"></a>強震即時警報系統</h2><p>這幾天大家應該都有收到地震的預報簡訊。講者開頭先敘述了 921 的實際經驗，提醒大家防震的重要性。<br>先提一些地震小知識。<a href=\"https://www.wikiwand.com/zh-tw/%E5%9C%B0%E9%9C%87%E9%A0%90%E6%B8%AC\" target=\"_blank\" rel=\"external\">wiki</a></p>\n<p>P 波的傳播速度最快，每小時兩萬八千里。地震預報就是用這樣的原理。當 P 波到達之後就是 S 波，S 波之後就是最可怕的表面波。</p>\n<p>也就說在 P 波抵達時，接下來在表面波到達時所採取的動作是關鍵</p>\n<p>今天，假設我們收到了這樣的簡訊，該怎麼辦才好？</p>\n<ul>\n<li>確認是否能在 30 秒內跑到屋外。</li>\n<li>30 秒無法跑走，就需要知道房屋裡最安全的地方。</li>\n<li>不要打卡，有可能 30 秒之後你就消失在這個世界上了</li>\n</ul>\n<p>有些地震盲區，可能在震完之後才收到簡訊。日本大阪神地震，根據統計有七成受難者是自救，兩成是靠親友，剩下一成才是官方。這代表日本人真的把防災當作一回事。</p>\n<p><strong>額外加碼</strong></p>\n<p><a href=\"http://www.metro.tokyo.jp/CHINESE/GUIDE/BOSAI/\" target=\"_blank\" rel=\"external\">精美東京防災手冊</a></p>\n<p>我們的心態、以及相對應的防範措施，我們準備好了嗎？講者認為基金會會是一個解法。</p>\n<blockquote>\n<p>結論： 防災，要從自己做起</p>\n</blockquote>\n<h2 id=\"我在新聞界臥底的日子\"><a href=\"#我在新聞界臥底的日子\" class=\"headerlink\" title=\"我在新聞界臥底的日子\"></a>我在新聞界臥底的日子</h2><p>講者是 Kirby。是 <a href=\"http://0media.tw/\" target=\"_blank\" rel=\"external\">零傳媒</a> 的創辦人</p>\n<p><a href=\"http://www.appledaily.com.tw/appledaily/article/headline/20120805/34417382/\" target=\"_blank\" rel=\"external\">奇怪欸！女師二度爬山</a><br>後來調查發現，這個女老師根本沒有男朋友。新聞的資料錯誤百出，媒體報導普遍素質低落。於是決定創辦零傳媒、以及提供資料視覺化的工具幫助記者在報導時有資料可以引述。而且可以提供給非技術人好上手的工具。</p>\n<p>目前好用的資料搜集工具：</p>\n<ul>\n<li>open refine</li>\n<li>spreadsheet</li>\n<li>p5.js</li>\n<li>kimono</li>\n</ul>\n<p>同時講者也分享了幾個真實案例：</p>\n<ul>\n<li>冰桶挑戰：發現冰桶盛行的那幾週，佔了總捐款金額的 70%</li>\n<li><a href=\"http://0media.tw/p/ergame/\" target=\"_blank\" rel=\"external\">急診人生</a></li>\n</ul>\n<p>發現了以下情況：</p>\n<ul>\n<li>資料記者要會寫程式嗎？進入成本會不會太高</li>\n<li>找得到會設計、會寫文章、會採訪、又會技術的工程師非常難</li>\n<li>新聞網站的文章表現沒有精練</li>\n<li>開源的工具有可能沒有再維護了</li>\n<li>服務有可能會終止</li>\n</ul>\n<p>於是希望透過 piotDB 幫助到記者，也能夠幫助工程師在以後資料收集、視覺化中有更好的選擇。</p>\n<h2 id=\"秒退頂新地圖\"><a href=\"#秒退頂新地圖\" class=\"headerlink\" title=\"秒退頂新地圖\"></a>秒退頂新地圖</h2><p>聽完講者分享之後，其實會發現這場看似臨時起意的秒買秒退，背後其實是有經過縝密計算的。<br>到最後竟然還出現發起人上台分享心得。</p>\n<p>因為秒退發起人已經先研究過好市多的商業結構，100% 滿意是買賣雙方的保證行為，對好市多來說這個活動達到需宣傳的效果，對於使用者來講則是滿足了購買滿意的條件。雙方利害一致、提高曝光度，好市多沒有理由拒絕。</p>\n<p>先講結論</p>\n<ul>\n<li>2015 營收少 15 億，淨虧損 19 億。（總資產 2.5 兆，佔全台灣的六分之一）</li>\n</ul>\n<p>直接擊垮頂新大魔王是比較困難的一件事，所以先從小頭目開始。<br>人民的力量是分散的，秒退地圖縮短長期抗戰的時間，秒退的挑戰第一個是爭議性的問題，第二個是行動本身的問題（需要親自到目的地去，忍受民眾和店員的目光）。秒退地圖可以把秒退狀況視覺化，把數據視覺化之後，比較可以組織與策劃下一步的目標。需要有人維持系統、推廣、蒐集登入資料等（系統本身的）挑戰。</p>\n<p>不過身為一位正常公民，要做的事情實在太多了。誰跟你每天秒買秒退，今天林鳳營特價還是跑去小確幸一下。</p>\n<p><a href=\"https://www.ptt.cc/bbs/Gossiping/M.1457003863.A.501.html\" target=\"_blank\" rel=\"external\">長大是什麼感覺</a></p>\n<p>來看看日本當初是怎麼讓雪印倒閉的<a href=\"http://www.thenewslens.com/article/15347\" target=\"_blank\" rel=\"external\">連結</a>。</p>\n<p>從社群的角度來看：</p>\n<ul>\n<li>ptt 大部分是贊成，偶爾會有噓出現</li>\n<li>Dcard 罵聲連連。一大堆反秒買秒對的文出現</li>\n<li><p>Facebook 偶爾出現反秒買秒退的動態</p>\n<p>先不論這個活動本身的道德辯證（講者說他只 focus 在解法）。</p>\n</li>\n</ul>\n<p>不管這個活動本身正不正確，他也已經有效地引起關注及<strong>思考</strong>，而大家一起討論、尋求解答，其實就是一種開放協作(<strong>open collcation</strong>)。</p>\n<p><a href=\"http://jimhorng.github.io/return_as_buy/\" target=\"_blank\" rel=\"external\">秒買秒退地圖</a></p>\n<blockquote>\n<p>結論： 頂新或許什麼都可以買，但他買不到公民行動的良心跟憤慨</p>\n</blockquote>\n<h2 id=\"從-g0v-到-gov-–-潛入衛福部-400-天\"><a href=\"#從-g0v-到-gov-–-潛入衛福部-400-天\" class=\"headerlink\" title=\"從 g0v 到 gov – 潛入衛福部 400 天\"></a>從 g0v 到 gov – 潛入衛福部 400 天</h2><p>讓我噴淚的一場分享，潛入衛福部第 400 天。也是我今天聽下來覺得最棒的演講</p>\n<p><a href=\"https://www.youtube.com/watch?v=xG1oEBs5uyM\" target=\"_blank\" rel=\"external\">直播影片</a></p>\n<p><a href=\"join.gov.tw\">公共政策網路參與平台</a></p>\n<p>這個平台仿效美國、英國的機制，只要超過 5000 人連署，政府就要在 2 個月內作出回應。</p>\n<p>講者從原本的 g0v 進入 gov，在引入協作工具中，也開始反思。政府要面對民間訴求很難嗎？<br>詳細介紹一個公民提案到法案修正經過的過程與遭遇到的問題，點出社群參與者與政府觀點的落差。可以發現到，政府裡頭的公務員其實還是很願意做事情的。而這個案例最後政府回覆並且承諾修法，可惜提案人在法令公告前已經過世，而這項法案修正很可惜的沒有在他在世時協助到提案人。</p>\n<p>我還記得聽完演講之後，掌聲大概持續了三十秒有吧！雖然最後真的很可惜沒有幫助到提案人，但我相信他的分享已經間接影響很多人對政府的觀點了。</p>\n<blockquote>\n<p>政府要面對民間訴求，還真的挺難的</p>\n<p>開放，是有成本的。</p>\n<p>工程師要避免 single point of failure，公務員要避免 single point of success</p>\n</blockquote>\n<h2 id=\"不開放、不透明的黨產\"><a href=\"#不開放、不透明的黨產\" class=\"headerlink\" title=\"不開放、不透明的黨產\"></a>不開放、不透明的黨產</h2><p>在選前常常看到國民黨黨產的相關圖表。</p>\n<p>講者還開玩笑說具有所謂的地址，做成了地圖，可以看到國民黨在台北的土地，在台南白河有很大的地方都是國民黨的！一看街景種滿了檳榔香蕉。以後搞不好會做出國民黨黨產觀光app。</p>\n<p><a href=\"https://www.facebook.com/events/1617242885159718/\" target=\"_blank\" rel=\"external\">國民黨黨產尋訪車遊</a></p>\n<p>在台灣因為沒有政黨法的關係，所以沒有特別限制黨產的來源。這造成了國民黨無私地接收了當時國家徵收的土地和營收。</p>\n<ul>\n<li>國民黨： 225 億</li>\n<li>民進黨： 4 億</li>\n<li>其他： 1900 萬</li>\n</ul>\n<p>可以看到這樣懸殊的落差，造成小黨生存不易，光是打廣告就先輸一半了。</p>\n<ul>\n<li>開放的問題</li>\n<li>歷史檔案的保存與修復</li>\n<li>資訊的完整性</li>\n</ul>\n<p><a href=\"https://www.gitbook.com/book/billy3321/decipher_kmt_property/details\" target=\"_blank\" rel=\"external\">黨產解密 gitbook</a></p>\n<blockquote>\n<p>結論：國民黨不倒，台灣不會好</p>\n</blockquote>\n<h3 id=\"unconference\"><a href=\"#unconference\" class=\"headerlink\" title=\"unconference\"></a>unconference</h3><p>在 unconference 裡主要是讓與會者發起自己的想法，第二天早上在交誼廳互相討論自己的想法。</p>\n<p>時間有限，我只聽一些自己有興趣的主題：</p>\n<h4 id=\"轉型正義\"><a href=\"#轉型正義\" class=\"headerlink\" title=\"轉型正義\"></a>轉型正義</h4><p>如何降低討論的門檻，吸引一般人關注是討論重點。通常除了 228 受害的家屬、親友會去關注之外，一般社會大眾比較不會關心。一來是台灣歷史教育對 228 的輕描淡寫，再來是因為大部分人沒有經歷過 228。</p>\n<ul>\n<li>歷史學家的instagram</li>\n<li>二二八事件地圖</li>\n<li>轉型正義遊戲</li>\n<li>建構大眾對議題的興趣</li>\n</ul>\n<h4 id=\"對抗資本主義的共享經濟\"><a href=\"#對抗資本主義的共享經濟\" class=\"headerlink\" title=\"對抗資本主義的共享經濟\"></a>對抗資本主義的共享經濟</h4><p>談大家對共享經濟的想像</p>\n<ul>\n<li><a href=\"http://twtzm.weebly.com/\" target=\"_blank\" rel=\"external\">維納斯計畫</a></li>\n<li>日本共生住宅</li>\n<li>Uber AirBnB又是共享主義，但又是資本主義的代表。沒有辦法自己對抗自己。另外一本書「零邊際成本的社會」，才能夠更去了解。屬於中產階級的共享，並非理想中的共享</li>\n<li>只能從內部被摧毀，不能從外部去征服。當邊際成本走到零的時候，資本主義就不會繼續做那件事了，所以就會變成共享經濟了。</li>\n</ul>\n<h2 id=\"寫在最後\"><a href=\"#寫在最後\" class=\"headerlink\" title=\"寫在最後\"></a>寫在最後</h2><p>花了 1200 參加 conference，感覺不做點什麼也不太好。所以就把自己的心得跟筆記一起寫下來了。除了給方心過過乾癮，也順便給公司一個交代（？）。</p>\n<p>是真的看到、也學到挺多東西的啦！而且便當好吃又環保，但是他們賣的那雙環保筷一組要 300 塊耶！跟漁夫一樣完全下不了手啊！</p>\n<p>這次也有 unconference 的 session 跟與會者互動的小遊戲（搜集杯子）換獎品。感覺之後聚會的主角會越來越偏向與會者本身。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"因為一則廣告而創立的-g0v\"><a href=\"#因為一則廣告而創立的-g0v\" class=\"headerlink\" title=\"因為一則廣告而創立的 g0v\"></a>因為一則廣告而創立的 g0v</h2><p>g0v 的由來其實是因為經濟動能推升方案（就是那個史上最腦殘的<a href=\"https://www.youtube.com/watch?v=JfMHB-YqPGg\" target=\"_blank\" rel=\"external\">廣告</a>)</p>\n<p>這群熱血的工程師決定組成 g0v。致力於推動政府開放，並且以網路的方式推廣給大眾。</p>\n<p>g0v 能夠紅，是從 318 學運開始。因為 hackfold 的共筆資料夾引入、直播工具…，讓大眾更了解…。</p>\n<p>然後在場的 700 多位參與者中，大約有一成左右是來自政府的事務員，甚至連即將卸任的張善政也到了 g0v 分享<strong>推動政府開放資料</strong>的過程。</p>\n<p>「把夢做大，然後相信總有一天會被別人看見，屬於自己的故事。」這大概是參加 g0v 最大的感觸。</p>\n<p>只能說，方心沒辦法參與實在是很可惜的一件事，不過 g0v 有直播以及大會的共筆，能夠看看筆記、影片過過乾癮也好。</p>\n<h2 id=\"TL-DR\"><a href=\"#TL-DR\" class=\"headerlink\" title=\"TL;DR\"></a>TL;DR</h2><p>沒人想得到，目前遍佈三大洲、超過500名公民黑客的零時政府，當初是因為台灣政府的無效廣告而催生。這群黑客村裡的工程師除了會寫程式，普遍英語能力好，他們關注世界各國公民科技對政府的影響。高嘉良在2014年就曾花兩個月的時間到各國城市，與開放組織、社群交流，吸取當地經驗，回台分享給社群。就這樣，本來應該平淡度日的程式工程師們，因為改造社會的熱情，一腳踏入公民科技。</p>\n<p>第一次參加 g0v summit，聽說（和與會者聊天）這次的主題「拆後重建」有把主題拉廣。以前的議題技術性比較濃厚，吸引到的與會者也大多為工程師。這次不但有來自各國的與會者、講者，還有將近一成的與會者是政府機構的事務員。</p>\n<p>你會發現 g0v 不會抱有特定立場，而是用一種中介者的角度幫你把事情記錄下來。直播也好、<a href=\"http://g0v.tw/zh-TW/projects.html\" target=\"_blank\" rel=\"external\">他們開源的小工具</a>也好，都是如此。如果你有時間，可以看看這次的直播或是大會共筆，如果真的抽不出時間來，就來看看我的筆記吧！</p>\n<ul>\n<li><a href=\"http://beta.hackfoldr.org/g0v-summit-2016\" target=\"_blank\" rel=\"external\">大會共筆</a></li>\n</ul>\n<h2 id=\"筆記\"><a href=\"#筆記\" class=\"headerlink\" title=\"筆記\"></a>筆記</h2><h3 id=\"org-到-ngo\"><a href=\"#org-到-ngo\" class=\"headerlink\" title=\".org 到 .ngo\"></a>.org 到 .ngo</h3><p>分享者是 ngo 的工程師，所以在講述自己在 NGO 的同時，也分享蠻多在開發時遇到的問題的。</p>\n<p>分享者提到，環境資訊協會目前遇到的挑戰有：</p>\n<ul>\n<li>2000 年到 2016 年：關於環境的議題根本沒有報社要報，頂多出現在生活版。=&gt;當時代開始逐漸變遷時，工具勢必要做改變</li>\n<li>程式翻修：產品從剛上線開始就是 legacy system，通常要做好準備，在早期的沒有時間讓你 refactor，而是穩定之後才會開始重構，而且當時還導入了外部工程師幫忙</li>\n<li>當 nobody 變成 somebody：面對的問題越來越多<ul>\n<li>人：有了組織、人、主管、薪水，管理變得困難</li>\n<li>世代變遷：新人不斷輪替、老人沒時間談理想 =&gt; 溝通出現問題</li>\n<li>既得利益者：當 nobody 變成既得利益者之後，我們還記得自己的初衷嗎</li>\n</ul>\n</li>\n</ul>\n<p>最後他將 NGO 扮演的角色做了總結：</p>\n<ul>\n<li>匯聚資訊與力量的平台</li>\n<li>Proxy：代理政府，快速回應議題</li>\n<li>Agent：公民代理人</li>\n</ul>\n<blockquote>\n<p>結論： 公司是除了國家以外，最重要、影響大家最多的組織。</p>\n</blockquote>\n<h2 id=\"民主與公民參與之開放媒體\"><a href=\"#民主與公民參與之開放媒體\" class=\"headerlink\" title=\"民主與公民參與之開放媒體\"></a>民主與公民參與之開放媒體</h2><p>講者是 VOXE 的創辦人。VOXE 的概念跟台灣的(立委投票指南)[<a href=\"http://vote.ly.g0v.tw/]很像，46%\" target=\"_blank\" rel=\"external\">http://vote.ly.g0v.tw/]很像，46%</a> US 的選民在總統大選時根本沒有出來投票。70%年輕人在2014的歐洲議會選舉都沒有出來投，很多人認為沒差。很多人認為選出來的人不在意民意，所以就乾脆不投。所以希望能夠透過工具來改善，而創立了這個平台。</p>\n<p>其中有個問題讓我印象比較深刻，「怎麼讓大家付諸行動？這是最困難的一部份」，講者的回答是，透過工具的使用。畢竟一般人不可能整天抗議、整天看政見，有小孩老婆工作等等要顧，所以工具一定要夠簡單，才會刺激別人去用。</p>\n<p>原本還有人問到，阿你們要怎麼募資，他的回答是 google 給了他們 20 萬歐元XD。完全不用擔心了啊！</p>\n<blockquote>\n<p>結論：工具是用來解決問題的。</p>\n</blockquote>\n<h2 id=\"強震即時警報系統\"><a href=\"#強震即時警報系統\" class=\"headerlink\" title=\"強震即時警報系統\"></a>強震即時警報系統</h2><p>這幾天大家應該都有收到地震的預報簡訊。講者開頭先敘述了 921 的實際經驗，提醒大家防震的重要性。<br>先提一些地震小知識。<a href=\"https://www.wikiwand.com/zh-tw/%E5%9C%B0%E9%9C%87%E9%A0%90%E6%B8%AC\" target=\"_blank\" rel=\"external\">wiki</a></p>\n<p>P 波的傳播速度最快，每小時兩萬八千里。地震預報就是用這樣的原理。當 P 波到達之後就是 S 波，S 波之後就是最可怕的表面波。</p>\n<p>也就說在 P 波抵達時，接下來在表面波到達時所採取的動作是關鍵</p>\n<p>今天，假設我們收到了這樣的簡訊，該怎麼辦才好？</p>\n<ul>\n<li>確認是否能在 30 秒內跑到屋外。</li>\n<li>30 秒無法跑走，就需要知道房屋裡最安全的地方。</li>\n<li>不要打卡，有可能 30 秒之後你就消失在這個世界上了</li>\n</ul>\n<p>有些地震盲區，可能在震完之後才收到簡訊。日本大阪神地震，根據統計有七成受難者是自救，兩成是靠親友，剩下一成才是官方。這代表日本人真的把防災當作一回事。</p>\n<p><strong>額外加碼</strong></p>\n<p><a href=\"http://www.metro.tokyo.jp/CHINESE/GUIDE/BOSAI/\" target=\"_blank\" rel=\"external\">精美東京防災手冊</a></p>\n<p>我們的心態、以及相對應的防範措施，我們準備好了嗎？講者認為基金會會是一個解法。</p>\n<blockquote>\n<p>結論： 防災，要從自己做起</p>\n</blockquote>\n<h2 id=\"我在新聞界臥底的日子\"><a href=\"#我在新聞界臥底的日子\" class=\"headerlink\" title=\"我在新聞界臥底的日子\"></a>我在新聞界臥底的日子</h2><p>講者是 Kirby。是 <a href=\"http://0media.tw/\" target=\"_blank\" rel=\"external\">零傳媒</a> 的創辦人</p>\n<p><a href=\"http://www.appledaily.com.tw/appledaily/article/headline/20120805/34417382/\" target=\"_blank\" rel=\"external\">奇怪欸！女師二度爬山</a><br>後來調查發現，這個女老師根本沒有男朋友。新聞的資料錯誤百出，媒體報導普遍素質低落。於是決定創辦零傳媒、以及提供資料視覺化的工具幫助記者在報導時有資料可以引述。而且可以提供給非技術人好上手的工具。</p>\n<p>目前好用的資料搜集工具：</p>\n<ul>\n<li>open refine</li>\n<li>spreadsheet</li>\n<li>p5.js</li>\n<li>kimono</li>\n</ul>\n<p>同時講者也分享了幾個真實案例：</p>\n<ul>\n<li>冰桶挑戰：發現冰桶盛行的那幾週，佔了總捐款金額的 70%</li>\n<li><a href=\"http://0media.tw/p/ergame/\" target=\"_blank\" rel=\"external\">急診人生</a></li>\n</ul>\n<p>發現了以下情況：</p>\n<ul>\n<li>資料記者要會寫程式嗎？進入成本會不會太高</li>\n<li>找得到會設計、會寫文章、會採訪、又會技術的工程師非常難</li>\n<li>新聞網站的文章表現沒有精練</li>\n<li>開源的工具有可能沒有再維護了</li>\n<li>服務有可能會終止</li>\n</ul>\n<p>於是希望透過 piotDB 幫助到記者，也能夠幫助工程師在以後資料收集、視覺化中有更好的選擇。</p>\n<h2 id=\"秒退頂新地圖\"><a href=\"#秒退頂新地圖\" class=\"headerlink\" title=\"秒退頂新地圖\"></a>秒退頂新地圖</h2><p>聽完講者分享之後，其實會發現這場看似臨時起意的秒買秒退，背後其實是有經過縝密計算的。<br>到最後竟然還出現發起人上台分享心得。</p>\n<p>因為秒退發起人已經先研究過好市多的商業結構，100% 滿意是買賣雙方的保證行為，對好市多來說這個活動達到需宣傳的效果，對於使用者來講則是滿足了購買滿意的條件。雙方利害一致、提高曝光度，好市多沒有理由拒絕。</p>\n<p>先講結論</p>\n<ul>\n<li>2015 營收少 15 億，淨虧損 19 億。（總資產 2.5 兆，佔全台灣的六分之一）</li>\n</ul>\n<p>直接擊垮頂新大魔王是比較困難的一件事，所以先從小頭目開始。<br>人民的力量是分散的，秒退地圖縮短長期抗戰的時間，秒退的挑戰第一個是爭議性的問題，第二個是行動本身的問題（需要親自到目的地去，忍受民眾和店員的目光）。秒退地圖可以把秒退狀況視覺化，把數據視覺化之後，比較可以組織與策劃下一步的目標。需要有人維持系統、推廣、蒐集登入資料等（系統本身的）挑戰。</p>\n<p>不過身為一位正常公民，要做的事情實在太多了。誰跟你每天秒買秒退，今天林鳳營特價還是跑去小確幸一下。</p>\n<p><a href=\"https://www.ptt.cc/bbs/Gossiping/M.1457003863.A.501.html\" target=\"_blank\" rel=\"external\">長大是什麼感覺</a></p>\n<p>來看看日本當初是怎麼讓雪印倒閉的<a href=\"http://www.thenewslens.com/article/15347\" target=\"_blank\" rel=\"external\">連結</a>。</p>\n<p>從社群的角度來看：</p>\n<ul>\n<li>ptt 大部分是贊成，偶爾會有噓出現</li>\n<li>Dcard 罵聲連連。一大堆反秒買秒對的文出現</li>\n<li><p>Facebook 偶爾出現反秒買秒退的動態</p>\n<p>先不論這個活動本身的道德辯證（講者說他只 focus 在解法）。</p>\n</li>\n</ul>\n<p>不管這個活動本身正不正確，他也已經有效地引起關注及<strong>思考</strong>，而大家一起討論、尋求解答，其實就是一種開放協作(<strong>open collcation</strong>)。</p>\n<p><a href=\"http://jimhorng.github.io/return_as_buy/\" target=\"_blank\" rel=\"external\">秒買秒退地圖</a></p>\n<blockquote>\n<p>結論： 頂新或許什麼都可以買，但他買不到公民行動的良心跟憤慨</p>\n</blockquote>\n<h2 id=\"從-g0v-到-gov-–-潛入衛福部-400-天\"><a href=\"#從-g0v-到-gov-–-潛入衛福部-400-天\" class=\"headerlink\" title=\"從 g0v 到 gov – 潛入衛福部 400 天\"></a>從 g0v 到 gov – 潛入衛福部 400 天</h2><p>讓我噴淚的一場分享，潛入衛福部第 400 天。也是我今天聽下來覺得最棒的演講</p>\n<p><a href=\"https://www.youtube.com/watch?v=xG1oEBs5uyM\" target=\"_blank\" rel=\"external\">直播影片</a></p>\n<p><a href=\"join.gov.tw\">公共政策網路參與平台</a></p>\n<p>這個平台仿效美國、英國的機制，只要超過 5000 人連署，政府就要在 2 個月內作出回應。</p>\n<p>講者從原本的 g0v 進入 gov，在引入協作工具中，也開始反思。政府要面對民間訴求很難嗎？<br>詳細介紹一個公民提案到法案修正經過的過程與遭遇到的問題，點出社群參與者與政府觀點的落差。可以發現到，政府裡頭的公務員其實還是很願意做事情的。而這個案例最後政府回覆並且承諾修法，可惜提案人在法令公告前已經過世，而這項法案修正很可惜的沒有在他在世時協助到提案人。</p>\n<p>我還記得聽完演講之後，掌聲大概持續了三十秒有吧！雖然最後真的很可惜沒有幫助到提案人，但我相信他的分享已經間接影響很多人對政府的觀點了。</p>\n<blockquote>\n<p>政府要面對民間訴求，還真的挺難的</p>\n<p>開放，是有成本的。</p>\n<p>工程師要避免 single point of failure，公務員要避免 single point of success</p>\n</blockquote>\n<h2 id=\"不開放、不透明的黨產\"><a href=\"#不開放、不透明的黨產\" class=\"headerlink\" title=\"不開放、不透明的黨產\"></a>不開放、不透明的黨產</h2><p>在選前常常看到國民黨黨產的相關圖表。</p>\n<p>講者還開玩笑說具有所謂的地址，做成了地圖，可以看到國民黨在台北的土地，在台南白河有很大的地方都是國民黨的！一看街景種滿了檳榔香蕉。以後搞不好會做出國民黨黨產觀光app。</p>\n<p><a href=\"https://www.facebook.com/events/1617242885159718/\" target=\"_blank\" rel=\"external\">國民黨黨產尋訪車遊</a></p>\n<p>在台灣因為沒有政黨法的關係，所以沒有特別限制黨產的來源。這造成了國民黨無私地接收了當時國家徵收的土地和營收。</p>\n<ul>\n<li>國民黨： 225 億</li>\n<li>民進黨： 4 億</li>\n<li>其他： 1900 萬</li>\n</ul>\n<p>可以看到這樣懸殊的落差，造成小黨生存不易，光是打廣告就先輸一半了。</p>\n<ul>\n<li>開放的問題</li>\n<li>歷史檔案的保存與修復</li>\n<li>資訊的完整性</li>\n</ul>\n<p><a href=\"https://www.gitbook.com/book/billy3321/decipher_kmt_property/details\" target=\"_blank\" rel=\"external\">黨產解密 gitbook</a></p>\n<blockquote>\n<p>結論：國民黨不倒，台灣不會好</p>\n</blockquote>\n<h3 id=\"unconference\"><a href=\"#unconference\" class=\"headerlink\" title=\"unconference\"></a>unconference</h3><p>在 unconference 裡主要是讓與會者發起自己的想法，第二天早上在交誼廳互相討論自己的想法。</p>\n<p>時間有限，我只聽一些自己有興趣的主題：</p>\n<h4 id=\"轉型正義\"><a href=\"#轉型正義\" class=\"headerlink\" title=\"轉型正義\"></a>轉型正義</h4><p>如何降低討論的門檻，吸引一般人關注是討論重點。通常除了 228 受害的家屬、親友會去關注之外，一般社會大眾比較不會關心。一來是台灣歷史教育對 228 的輕描淡寫，再來是因為大部分人沒有經歷過 228。</p>\n<ul>\n<li>歷史學家的instagram</li>\n<li>二二八事件地圖</li>\n<li>轉型正義遊戲</li>\n<li>建構大眾對議題的興趣</li>\n</ul>\n<h4 id=\"對抗資本主義的共享經濟\"><a href=\"#對抗資本主義的共享經濟\" class=\"headerlink\" title=\"對抗資本主義的共享經濟\"></a>對抗資本主義的共享經濟</h4><p>談大家對共享經濟的想像</p>\n<ul>\n<li><a href=\"http://twtzm.weebly.com/\" target=\"_blank\" rel=\"external\">維納斯計畫</a></li>\n<li>日本共生住宅</li>\n<li>Uber AirBnB又是共享主義，但又是資本主義的代表。沒有辦法自己對抗自己。另外一本書「零邊際成本的社會」，才能夠更去了解。屬於中產階級的共享，並非理想中的共享</li>\n<li>只能從內部被摧毀，不能從外部去征服。當邊際成本走到零的時候，資本主義就不會繼續做那件事了，所以就會變成共享經濟了。</li>\n</ul>\n<h2 id=\"寫在最後\"><a href=\"#寫在最後\" class=\"headerlink\" title=\"寫在最後\"></a>寫在最後</h2><p>花了 1200 參加 conference，感覺不做點什麼也不太好。所以就把自己的心得跟筆記一起寫下來了。除了給方心過過乾癮，也順便給公司一個交代（？）。</p>\n<p>是真的看到、也學到挺多東西的啦！而且便當好吃又環保，但是他們賣的那雙環保筷一組要 300 塊耶！跟漁夫一樣完全下不了手啊！</p>\n<p>這次也有 unconference 的 session 跟與會者互動的小遊戲（搜集杯子）換獎品。感覺之後聚會的主角會越來越偏向與會者本身。</p>\n"},{"title":"淺談降維方法中的 PCA 與 t-SNE","date":"2017-07-17T16:00:00.000Z","_content":"\n在機器學習當中，如果特徵數過多時，有可能會造成一些問題，像是：\n\n- 過擬合 (overfitting)\n- 處理速度較慢\n- 如果超過三個特徵以上不好視覺化\n\n所以這時候就需要對特徵做降維，在實務上，一個幾百幾千個的特徵當中，手動挑選特徵顯然不是一個明智的方法，所以以下來介紹兩個在機器學習中常常使用的兩種降維方法。\n\n### PCA（principal component analysis）主成份分析\n\n在介紹 PCA 之前，我們先來定義一下我們的目標是什麼：\n\n> *將一個具有 n 個特徵空間的樣本，轉換為具有 k 個特徵空間的樣本，其中 k < n*\n\n以下是 PCA 的主要步驟：\n\n1. 將數據標準化\n2. 建立**共變異數矩陣（covariance matrix）**\n3. 利用**奇異值分解（SVD）**求得**特徵向量（eigenvector）**跟**特徵值（eigenvalue）**\n4. 通常特徵值會由大到小排列，選取 k 個特徵值與特徵向量\n5. 將原本的數據投影（映射）到特徵向量上，得到新的特徵數\n\nPCA 最重要的部分就是奇異值分解，因此接下來的章節讓我們來談談**奇異值分解**\n\n#### 直觀理解奇異值分解\n\n在矩陣分解當中，奇異值分解是個相當有名的方法。矩陣分解在高中數學當中最常見的用途就是解方程式（如 LU 分解），從奇異值分解的公式當中我們可以直觀地了解：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*EW7y-TDCOHClCKINXFtlZQ.png)\n\n其中 A 為一個 m x n 的矩陣，𝑈 跟 V 都為正交矩陣，**𝛴 為奇異值矩陣**。奇異值矩陣為矩陣 A 對應的特徵值，在 PCA 當中又叫做**主成份**，代表對保存訊息的重要程度，通常由大到小遞減排列在對角中，是個對稱矩陣。\n\n那麼這邊的 A 對應什麼呢？當然就是我們的特徵，只是特別要注意的是這邊的 A 我們通常使用**共變異數矩陣（covariance martix）**來求算，記得資料一定要先正規化後在進行奇異值分解\n\n![img](https://cdn-images-1.medium.com/max/1000/1*xk7Vhzw5dI77BLNl3Dsdlw.png)\n\n共變異數矩陣（covariance matrix）\n\n因為共變異數矩陣**常用 Sigma 表示，不要跟上面的 𝛴 搞混囉**。因此如果要降維，我們可以用 U 的前 k 列乘上對應 𝛴 當中的特徵向量，就可以得出新的特徵了，而從幾何的角度來看\n\n![img](https://cdn-images-1.medium.com/max/1000/1*3nASowA14C1z-hIshmfg7w.png)\n\n這樣子的運算在幾何當中，其實是將 X 投影到 U 的前 k 個向量\n\n![img](https://cdn-images-1.medium.com/max/1000/1*GVOZv-_OBKayNVhI3t9LLA.jpeg)\n\n當中的黑線為特徵向量，長度為特徵值。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*spkrM0Qi2A0dQ1G-O_M1hQ.jpeg)\n\n當中的藍點為數據原本的位置，紅點則是投影到特徵向量的位置。以上，我們成功將 2 維的數據降至一維了。\n\n當然也可以從 3 維降到 2 維：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*O4CvQRZqb74Wd3JlOQKwaw.jpeg)\n\n![img](https://cdn-images-1.medium.com/max/1000/1*V9nMHPOfLqUunNsRVQHoSA.jpeg)\n\n#### PCA 的應用\n\n**在降維的時候，我們希望留下最重要的特徵**，剩下的比較不重要的特徵我們直接捨棄掉。\n\n像是判斷一個人時，最重要的判別方式可能就是眼睛、鼻子、嘴巴等等，所以膚色、頭髮等等的特徵我們就可以捨棄，事實上在人臉辨識當中也常利用 PCA 做降維。\n\n![img](https://cdn-images-1.medium.com/max/1250/1*yAtJRzT9un7JP9yllYs3mg.jpeg)\n\n*這是對奇異值分解相當直觀的了解，篇幅關係無法深入細談，若對奇異值分解有興趣可自行到*[*維基百科*](https://www.wikiwand.com/zh-tw/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3)\n\n### t-SNE\n\nPCA 是個相當直觀且有效的降維方式，不過在三維轉換為二維時我們可以看到，有些數據的集群完全被搗成一團。\n\nPCA 是一種線性降維的方式，但如果特徵與特徵間的關聯是非線性關係的話，用 PCA 可能會導致**欠擬合（underfitting）**\n\n**t-SNE 也是一種降維方式**，不過他用了更複雜的公式來表達高維與低維之間的關係。t-SNE 主要是將高維的數據用高斯分佈的機率密度函數近似，而低維數據的部分使用 t 分佈的方式來近似，在使用 KL 距離計算相似度，最後再以梯度下降（或隨機梯度下降）求最佳解 。\n\n#### 高斯分佈的機率密度函數\n\n![img](https://cdn-images-1.medium.com/max/1000/1*9CSkBUO3tvJAhq8Wzv9s2Q.png)\n\n其中，X 為隨機變量，𝝈 為變異數，𝜇 為平均。\n\n因此原本高維的數據可以這樣表示：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*KxxzB_L8Wi1L-FgznjhkyA.png)\n\n而低維的數據用 t 分布的機率密度函數可以這樣表示（自由度為 1）\n\n![img](https://cdn-images-1.medium.com/max/1000/1*OwvAZgYHAfYvKehREGH9WQ.png)\n\n其中，x 為高維當中的數據，y 為低維當中的數據。P, Q 分別代表機率分佈。\n\n為什麼會使用 t 分佈來近似低維的數據呢？主要是因為轉換成低維之後一定會丟失許多訊息，所以為了不被異常值影響可以使用 t 分佈。\n\nt 分佈在樣本數較少時，可以比較好模擬母體分布的情形，不容易被異常值所影響。\n\n![img](https://cdn-images-1.medium.com/max/1250/1*hkZuHGVNMmS4_MHfxoIDdA.jpeg)T 分佈與高斯分佈的機率密度函數\n\n#### 兩個分佈之間的相似度\n\n求算兩個分佈之間的相似度，經常用 KL 距離（Kullback-Leibler Divergence）來表示，也叫做相對熵（Relative Entropy）。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*geKaV3PDC2idMGUCXroJzw.png)\n\n在 t-SNE 中使用了困惑度（Perp）來當作超參數。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*BiQ-gYxdbZsGP5KfYUF9Kg.png)\n\n論文中提出通常困惑度在 5 ~ 50 之間。\n\n#### Cost function\n\n用 KL 距離計算 Cost\n\n![img](https://cdn-images-1.medium.com/max/1000/1*2XSnUoPaYB2_FMQ8xMzOuQ.png)\n\n求梯度可以寫成\n\n![img](https://cdn-images-1.medium.com/max/1000/1*MzouyFbnSKdeBA7nLJVCPw.png)\n\n最後再利用梯度下降法（或隨機梯度下降法）就可以找到最小值了。\n\n#### 實測：使用 MNIST 測試\n\n測試集可以到[這裡](http://yann.lecun.com/exdb/mnist/)下載，首先我們先用 PCA 降到二維看看。\n\n**PCA**\n\n![img](https://cdn-images-1.medium.com/max/1250/1*Be6oSLuXgG0cDi2gJEL-wA.jpeg)PCA 降維\n\n可以發現降到二維之後，資料幾乎被搗成一團，完全看不出集群，這是因為 PCA 的線性降維在過程中損失太多訊息。\n\n**t-SNE**\n\n接下來使用 t-SNE 測試\n\n![img](https://cdn-images-1.medium.com/max/1250/1*5i8McPBKmFOMOcCDjl8w4Q.jpeg)使用 t-SNE 降維\n\n這是使用 t-SNE 後的降維結果，可以發現降維過後，資料仍然分群地相當明確。從這兩張圖可以非常明顯看出這兩者（PCA, t-SNE）的差別。\n\n### 小結\n\n後來又有人提出一連串改善 t-SNE 效能的演算法，詳情可以參考[**Accelerating t-sne using tree-based algorithms**](https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf)，大部分熱門的資料分析程式語言也都有實作，像是 sklearn, R, matlab 等等。\n\n不過畢竟** t-SNE 不是線性降維，在執行時間上會比 PCA 來得久許多。**\n\n- 當特徵數量過多時，使用 PCA 可能會造成降維後的特徵欠擬合（underfitting），這時可以考慮使用 t-SNE 來降維\n- t-SNE 的需要比較多的時間執行\n- 論文當中還有一些優化技巧（如何選擇困惑度等等），因為還沒有閱讀完畢，之後會再逐漸補上\n\n#### 參考資料\n\n- [Van der Maaten L, Hinton G. **Visualizing data using t-SNE**](http://siplab.tudelft.nl/sites/default/files/vandermaaten08a.pdf)\n- [**Accelerating t-sne using tree-based algorithms**](https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf) 利用各種樹的演算法來加速 t-SNE 的運算\n- [線代啟示錄 - 奇異值分解](https://ccjou.wordpress.com/2009/09/01/%E5%A5%87%E7%95%B0%E5%80%BC%E5%88%86%E8%A7%A3-svd/)\n\n*文章同步發表於 [medium](https://medium.com/@Shurado/%E6%B7%BA%E8%AB%87%E5%85%A9%E7%A8%AE%E9%99%8D%E7%B6%AD%E6%96%B9%E6%B3%95-pca-%E8%88%87-t-sne-d4254916925b)*","source":"_posts/PCA-and-t-SNE.md","raw":"---\ntitle: 淺談降維方法中的 PCA 與 t-SNE\ncategories: 機器學習\ndate: 2017-7-18\ntags:\n  - 降維\n  - PCA\n  - t-SNE\n---\n\n在機器學習當中，如果特徵數過多時，有可能會造成一些問題，像是：\n\n- 過擬合 (overfitting)\n- 處理速度較慢\n- 如果超過三個特徵以上不好視覺化\n\n所以這時候就需要對特徵做降維，在實務上，一個幾百幾千個的特徵當中，手動挑選特徵顯然不是一個明智的方法，所以以下來介紹兩個在機器學習中常常使用的兩種降維方法。\n\n### PCA（principal component analysis）主成份分析\n\n在介紹 PCA 之前，我們先來定義一下我們的目標是什麼：\n\n> *將一個具有 n 個特徵空間的樣本，轉換為具有 k 個特徵空間的樣本，其中 k < n*\n\n以下是 PCA 的主要步驟：\n\n1. 將數據標準化\n2. 建立**共變異數矩陣（covariance matrix）**\n3. 利用**奇異值分解（SVD）**求得**特徵向量（eigenvector）**跟**特徵值（eigenvalue）**\n4. 通常特徵值會由大到小排列，選取 k 個特徵值與特徵向量\n5. 將原本的數據投影（映射）到特徵向量上，得到新的特徵數\n\nPCA 最重要的部分就是奇異值分解，因此接下來的章節讓我們來談談**奇異值分解**\n\n#### 直觀理解奇異值分解\n\n在矩陣分解當中，奇異值分解是個相當有名的方法。矩陣分解在高中數學當中最常見的用途就是解方程式（如 LU 分解），從奇異值分解的公式當中我們可以直觀地了解：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*EW7y-TDCOHClCKINXFtlZQ.png)\n\n其中 A 為一個 m x n 的矩陣，𝑈 跟 V 都為正交矩陣，**𝛴 為奇異值矩陣**。奇異值矩陣為矩陣 A 對應的特徵值，在 PCA 當中又叫做**主成份**，代表對保存訊息的重要程度，通常由大到小遞減排列在對角中，是個對稱矩陣。\n\n那麼這邊的 A 對應什麼呢？當然就是我們的特徵，只是特別要注意的是這邊的 A 我們通常使用**共變異數矩陣（covariance martix）**來求算，記得資料一定要先正規化後在進行奇異值分解\n\n![img](https://cdn-images-1.medium.com/max/1000/1*xk7Vhzw5dI77BLNl3Dsdlw.png)\n\n共變異數矩陣（covariance matrix）\n\n因為共變異數矩陣**常用 Sigma 表示，不要跟上面的 𝛴 搞混囉**。因此如果要降維，我們可以用 U 的前 k 列乘上對應 𝛴 當中的特徵向量，就可以得出新的特徵了，而從幾何的角度來看\n\n![img](https://cdn-images-1.medium.com/max/1000/1*3nASowA14C1z-hIshmfg7w.png)\n\n這樣子的運算在幾何當中，其實是將 X 投影到 U 的前 k 個向量\n\n![img](https://cdn-images-1.medium.com/max/1000/1*GVOZv-_OBKayNVhI3t9LLA.jpeg)\n\n當中的黑線為特徵向量，長度為特徵值。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*spkrM0Qi2A0dQ1G-O_M1hQ.jpeg)\n\n當中的藍點為數據原本的位置，紅點則是投影到特徵向量的位置。以上，我們成功將 2 維的數據降至一維了。\n\n當然也可以從 3 維降到 2 維：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*O4CvQRZqb74Wd3JlOQKwaw.jpeg)\n\n![img](https://cdn-images-1.medium.com/max/1000/1*V9nMHPOfLqUunNsRVQHoSA.jpeg)\n\n#### PCA 的應用\n\n**在降維的時候，我們希望留下最重要的特徵**，剩下的比較不重要的特徵我們直接捨棄掉。\n\n像是判斷一個人時，最重要的判別方式可能就是眼睛、鼻子、嘴巴等等，所以膚色、頭髮等等的特徵我們就可以捨棄，事實上在人臉辨識當中也常利用 PCA 做降維。\n\n![img](https://cdn-images-1.medium.com/max/1250/1*yAtJRzT9un7JP9yllYs3mg.jpeg)\n\n*這是對奇異值分解相當直觀的了解，篇幅關係無法深入細談，若對奇異值分解有興趣可自行到*[*維基百科*](https://www.wikiwand.com/zh-tw/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3)\n\n### t-SNE\n\nPCA 是個相當直觀且有效的降維方式，不過在三維轉換為二維時我們可以看到，有些數據的集群完全被搗成一團。\n\nPCA 是一種線性降維的方式，但如果特徵與特徵間的關聯是非線性關係的話，用 PCA 可能會導致**欠擬合（underfitting）**\n\n**t-SNE 也是一種降維方式**，不過他用了更複雜的公式來表達高維與低維之間的關係。t-SNE 主要是將高維的數據用高斯分佈的機率密度函數近似，而低維數據的部分使用 t 分佈的方式來近似，在使用 KL 距離計算相似度，最後再以梯度下降（或隨機梯度下降）求最佳解 。\n\n#### 高斯分佈的機率密度函數\n\n![img](https://cdn-images-1.medium.com/max/1000/1*9CSkBUO3tvJAhq8Wzv9s2Q.png)\n\n其中，X 為隨機變量，𝝈 為變異數，𝜇 為平均。\n\n因此原本高維的數據可以這樣表示：\n\n![img](https://cdn-images-1.medium.com/max/1000/1*KxxzB_L8Wi1L-FgznjhkyA.png)\n\n而低維的數據用 t 分布的機率密度函數可以這樣表示（自由度為 1）\n\n![img](https://cdn-images-1.medium.com/max/1000/1*OwvAZgYHAfYvKehREGH9WQ.png)\n\n其中，x 為高維當中的數據，y 為低維當中的數據。P, Q 分別代表機率分佈。\n\n為什麼會使用 t 分佈來近似低維的數據呢？主要是因為轉換成低維之後一定會丟失許多訊息，所以為了不被異常值影響可以使用 t 分佈。\n\nt 分佈在樣本數較少時，可以比較好模擬母體分布的情形，不容易被異常值所影響。\n\n![img](https://cdn-images-1.medium.com/max/1250/1*hkZuHGVNMmS4_MHfxoIDdA.jpeg)T 分佈與高斯分佈的機率密度函數\n\n#### 兩個分佈之間的相似度\n\n求算兩個分佈之間的相似度，經常用 KL 距離（Kullback-Leibler Divergence）來表示，也叫做相對熵（Relative Entropy）。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*geKaV3PDC2idMGUCXroJzw.png)\n\n在 t-SNE 中使用了困惑度（Perp）來當作超參數。\n\n![img](https://cdn-images-1.medium.com/max/1000/1*BiQ-gYxdbZsGP5KfYUF9Kg.png)\n\n論文中提出通常困惑度在 5 ~ 50 之間。\n\n#### Cost function\n\n用 KL 距離計算 Cost\n\n![img](https://cdn-images-1.medium.com/max/1000/1*2XSnUoPaYB2_FMQ8xMzOuQ.png)\n\n求梯度可以寫成\n\n![img](https://cdn-images-1.medium.com/max/1000/1*MzouyFbnSKdeBA7nLJVCPw.png)\n\n最後再利用梯度下降法（或隨機梯度下降法）就可以找到最小值了。\n\n#### 實測：使用 MNIST 測試\n\n測試集可以到[這裡](http://yann.lecun.com/exdb/mnist/)下載，首先我們先用 PCA 降到二維看看。\n\n**PCA**\n\n![img](https://cdn-images-1.medium.com/max/1250/1*Be6oSLuXgG0cDi2gJEL-wA.jpeg)PCA 降維\n\n可以發現降到二維之後，資料幾乎被搗成一團，完全看不出集群，這是因為 PCA 的線性降維在過程中損失太多訊息。\n\n**t-SNE**\n\n接下來使用 t-SNE 測試\n\n![img](https://cdn-images-1.medium.com/max/1250/1*5i8McPBKmFOMOcCDjl8w4Q.jpeg)使用 t-SNE 降維\n\n這是使用 t-SNE 後的降維結果，可以發現降維過後，資料仍然分群地相當明確。從這兩張圖可以非常明顯看出這兩者（PCA, t-SNE）的差別。\n\n### 小結\n\n後來又有人提出一連串改善 t-SNE 效能的演算法，詳情可以參考[**Accelerating t-sne using tree-based algorithms**](https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf)，大部分熱門的資料分析程式語言也都有實作，像是 sklearn, R, matlab 等等。\n\n不過畢竟** t-SNE 不是線性降維，在執行時間上會比 PCA 來得久許多。**\n\n- 當特徵數量過多時，使用 PCA 可能會造成降維後的特徵欠擬合（underfitting），這時可以考慮使用 t-SNE 來降維\n- t-SNE 的需要比較多的時間執行\n- 論文當中還有一些優化技巧（如何選擇困惑度等等），因為還沒有閱讀完畢，之後會再逐漸補上\n\n#### 參考資料\n\n- [Van der Maaten L, Hinton G. **Visualizing data using t-SNE**](http://siplab.tudelft.nl/sites/default/files/vandermaaten08a.pdf)\n- [**Accelerating t-sne using tree-based algorithms**](https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf) 利用各種樹的演算法來加速 t-SNE 的運算\n- [線代啟示錄 - 奇異值分解](https://ccjou.wordpress.com/2009/09/01/%E5%A5%87%E7%95%B0%E5%80%BC%E5%88%86%E8%A7%A3-svd/)\n\n*文章同步發表於 [medium](https://medium.com/@Shurado/%E6%B7%BA%E8%AB%87%E5%85%A9%E7%A8%AE%E9%99%8D%E7%B6%AD%E6%96%B9%E6%B3%95-pca-%E8%88%87-t-sne-d4254916925b)*","slug":"PCA-and-t-SNE","published":1,"updated":"2017-07-19T14:29:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitq2000aiw5tftku7e46","content":"<p>在機器學習當中，如果特徵數過多時，有可能會造成一些問題，像是：</p>\n<ul>\n<li>過擬合 (overfitting)</li>\n<li>處理速度較慢</li>\n<li>如果超過三個特徵以上不好視覺化</li>\n</ul>\n<p>所以這時候就需要對特徵做降維，在實務上，一個幾百幾千個的特徵當中，手動挑選特徵顯然不是一個明智的方法，所以以下來介紹兩個在機器學習中常常使用的兩種降維方法。</p>\n<h3 id=\"PCA（principal-component-analysis）主成份分析\"><a href=\"#PCA（principal-component-analysis）主成份分析\" class=\"headerlink\" title=\"PCA（principal component analysis）主成份分析\"></a>PCA（principal component analysis）主成份分析</h3><p>在介紹 PCA 之前，我們先來定義一下我們的目標是什麼：</p>\n<blockquote>\n<p><em>將一個具有 n 個特徵空間的樣本，轉換為具有 k 個特徵空間的樣本，其中 k &lt; n</em></p>\n</blockquote>\n<p>以下是 PCA 的主要步驟：</p>\n<ol>\n<li>將數據標準化</li>\n<li>建立<strong>共變異數矩陣（covariance matrix）</strong></li>\n<li>利用<strong>奇異值分解（SVD）</strong>求得<strong>特徵向量（eigenvector）</strong>跟<strong>特徵值（eigenvalue）</strong></li>\n<li>通常特徵值會由大到小排列，選取 k 個特徵值與特徵向量</li>\n<li>將原本的數據投影（映射）到特徵向量上，得到新的特徵數</li>\n</ol>\n<p>PCA 最重要的部分就是奇異值分解，因此接下來的章節讓我們來談談<strong>奇異值分解</strong></p>\n<h4 id=\"直觀理解奇異值分解\"><a href=\"#直觀理解奇異值分解\" class=\"headerlink\" title=\"直觀理解奇異值分解\"></a>直觀理解奇異值分解</h4><p>在矩陣分解當中，奇異值分解是個相當有名的方法。矩陣分解在高中數學當中最常見的用途就是解方程式（如 LU 分解），從奇異值分解的公式當中我們可以直觀地了解：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*EW7y-TDCOHClCKINXFtlZQ.png\" alt=\"img\"></p>\n<p>其中 A 為一個 m x n 的矩陣，𝑈 跟 V 都為正交矩陣，<strong>𝛴 為奇異值矩陣</strong>。奇異值矩陣為矩陣 A 對應的特徵值，在 PCA 當中又叫做<strong>主成份</strong>，代表對保存訊息的重要程度，通常由大到小遞減排列在對角中，是個對稱矩陣。</p>\n<p>那麼這邊的 A 對應什麼呢？當然就是我們的特徵，只是特別要注意的是這邊的 A 我們通常使用<strong>共變異數矩陣（covariance martix）</strong>來求算，記得資料一定要先正規化後在進行奇異值分解</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*xk7Vhzw5dI77BLNl3Dsdlw.png\" alt=\"img\"></p>\n<p>共變異數矩陣（covariance matrix）</p>\n<p>因為共變異數矩陣<strong>常用 Sigma 表示，不要跟上面的 𝛴 搞混囉</strong>。因此如果要降維，我們可以用 U 的前 k 列乘上對應 𝛴 當中的特徵向量，就可以得出新的特徵了，而從幾何的角度來看</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*3nASowA14C1z-hIshmfg7w.png\" alt=\"img\"></p>\n<p>這樣子的運算在幾何當中，其實是將 X 投影到 U 的前 k 個向量</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*GVOZv-_OBKayNVhI3t9LLA.jpeg\" alt=\"img\"></p>\n<p>當中的黑線為特徵向量，長度為特徵值。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*spkrM0Qi2A0dQ1G-O_M1hQ.jpeg\" alt=\"img\"></p>\n<p>當中的藍點為數據原本的位置，紅點則是投影到特徵向量的位置。以上，我們成功將 2 維的數據降至一維了。</p>\n<p>當然也可以從 3 維降到 2 維：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*O4CvQRZqb74Wd3JlOQKwaw.jpeg\" alt=\"img\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*V9nMHPOfLqUunNsRVQHoSA.jpeg\" alt=\"img\"></p>\n<h4 id=\"PCA-的應用\"><a href=\"#PCA-的應用\" class=\"headerlink\" title=\"PCA 的應用\"></a>PCA 的應用</h4><p><strong>在降維的時候，我們希望留下最重要的特徵</strong>，剩下的比較不重要的特徵我們直接捨棄掉。</p>\n<p>像是判斷一個人時，最重要的判別方式可能就是眼睛、鼻子、嘴巴等等，所以膚色、頭髮等等的特徵我們就可以捨棄，事實上在人臉辨識當中也常利用 PCA 做降維。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*yAtJRzT9un7JP9yllYs3mg.jpeg\" alt=\"img\"></p>\n<p><em>這是對奇異值分解相當直觀的了解，篇幅關係無法深入細談，若對奇異值分解有興趣可自行到</em><a href=\"https://www.wikiwand.com/zh-tw/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3\" target=\"_blank\" rel=\"external\"><em>維基百科</em></a></p>\n<h3 id=\"t-SNE\"><a href=\"#t-SNE\" class=\"headerlink\" title=\"t-SNE\"></a>t-SNE</h3><p>PCA 是個相當直觀且有效的降維方式，不過在三維轉換為二維時我們可以看到，有些數據的集群完全被搗成一團。</p>\n<p>PCA 是一種線性降維的方式，但如果特徵與特徵間的關聯是非線性關係的話，用 PCA 可能會導致<strong>欠擬合（underfitting）</strong></p>\n<p><strong>t-SNE 也是一種降維方式</strong>，不過他用了更複雜的公式來表達高維與低維之間的關係。t-SNE 主要是將高維的數據用高斯分佈的機率密度函數近似，而低維數據的部分使用 t 分佈的方式來近似，在使用 KL 距離計算相似度，最後再以梯度下降（或隨機梯度下降）求最佳解 。</p>\n<h4 id=\"高斯分佈的機率密度函數\"><a href=\"#高斯分佈的機率密度函數\" class=\"headerlink\" title=\"高斯分佈的機率密度函數\"></a>高斯分佈的機率密度函數</h4><p><img src=\"https://cdn-images-1.medium.com/max/1000/1*9CSkBUO3tvJAhq8Wzv9s2Q.png\" alt=\"img\"></p>\n<p>其中，X 為隨機變量，𝝈 為變異數，𝜇 為平均。</p>\n<p>因此原本高維的數據可以這樣表示：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*KxxzB_L8Wi1L-FgznjhkyA.png\" alt=\"img\"></p>\n<p>而低維的數據用 t 分布的機率密度函數可以這樣表示（自由度為 1）</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*OwvAZgYHAfYvKehREGH9WQ.png\" alt=\"img\"></p>\n<p>其中，x 為高維當中的數據，y 為低維當中的數據。P, Q 分別代表機率分佈。</p>\n<p>為什麼會使用 t 分佈來近似低維的數據呢？主要是因為轉換成低維之後一定會丟失許多訊息，所以為了不被異常值影響可以使用 t 分佈。</p>\n<p>t 分佈在樣本數較少時，可以比較好模擬母體分布的情形，不容易被異常值所影響。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*hkZuHGVNMmS4_MHfxoIDdA.jpeg\" alt=\"img\">T 分佈與高斯分佈的機率密度函數</p>\n<h4 id=\"兩個分佈之間的相似度\"><a href=\"#兩個分佈之間的相似度\" class=\"headerlink\" title=\"兩個分佈之間的相似度\"></a>兩個分佈之間的相似度</h4><p>求算兩個分佈之間的相似度，經常用 KL 距離（Kullback-Leibler Divergence）來表示，也叫做相對熵（Relative Entropy）。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*geKaV3PDC2idMGUCXroJzw.png\" alt=\"img\"></p>\n<p>在 t-SNE 中使用了困惑度（Perp）來當作超參數。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*BiQ-gYxdbZsGP5KfYUF9Kg.png\" alt=\"img\"></p>\n<p>論文中提出通常困惑度在 5 ~ 50 之間。</p>\n<h4 id=\"Cost-function\"><a href=\"#Cost-function\" class=\"headerlink\" title=\"Cost function\"></a>Cost function</h4><p>用 KL 距離計算 Cost</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*2XSnUoPaYB2_FMQ8xMzOuQ.png\" alt=\"img\"></p>\n<p>求梯度可以寫成</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*MzouyFbnSKdeBA7nLJVCPw.png\" alt=\"img\"></p>\n<p>最後再利用梯度下降法（或隨機梯度下降法）就可以找到最小值了。</p>\n<h4 id=\"實測：使用-MNIST-測試\"><a href=\"#實測：使用-MNIST-測試\" class=\"headerlink\" title=\"實測：使用 MNIST 測試\"></a>實測：使用 MNIST 測試</h4><p>測試集可以到<a href=\"http://yann.lecun.com/exdb/mnist/\" target=\"_blank\" rel=\"external\">這裡</a>下載，首先我們先用 PCA 降到二維看看。</p>\n<p><strong>PCA</strong></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*Be6oSLuXgG0cDi2gJEL-wA.jpeg\" alt=\"img\">PCA 降維</p>\n<p>可以發現降到二維之後，資料幾乎被搗成一團，完全看不出集群，這是因為 PCA 的線性降維在過程中損失太多訊息。</p>\n<p><strong>t-SNE</strong></p>\n<p>接下來使用 t-SNE 測試</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*5i8McPBKmFOMOcCDjl8w4Q.jpeg\" alt=\"img\">使用 t-SNE 降維</p>\n<p>這是使用 t-SNE 後的降維結果，可以發現降維過後，資料仍然分群地相當明確。從這兩張圖可以非常明顯看出這兩者（PCA, t-SNE）的差別。</p>\n<h3 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h3><p>後來又有人提出一連串改善 t-SNE 效能的演算法，詳情可以參考<a href=\"https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf\" target=\"_blank\" rel=\"external\"><strong>Accelerating t-sne using tree-based algorithms</strong></a>，大部分熱門的資料分析程式語言也都有實作，像是 sklearn, R, matlab 等等。</p>\n<p>不過畢竟<strong> t-SNE 不是線性降維，在執行時間上會比 PCA 來得久許多。</strong></p>\n<ul>\n<li>當特徵數量過多時，使用 PCA 可能會造成降維後的特徵欠擬合（underfitting），這時可以考慮使用 t-SNE 來降維</li>\n<li>t-SNE 的需要比較多的時間執行</li>\n<li>論文當中還有一些優化技巧（如何選擇困惑度等等），因為還沒有閱讀完畢，之後會再逐漸補上</li>\n</ul>\n<h4 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h4><ul>\n<li><a href=\"http://siplab.tudelft.nl/sites/default/files/vandermaaten08a.pdf\" target=\"_blank\" rel=\"external\">Van der Maaten L, Hinton G. <strong>Visualizing data using t-SNE</strong></a></li>\n<li><a href=\"https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf\" target=\"_blank\" rel=\"external\"><strong>Accelerating t-sne using tree-based algorithms</strong></a> 利用各種樹的演算法來加速 t-SNE 的運算</li>\n<li><a href=\"https://ccjou.wordpress.com/2009/09/01/%E5%A5%87%E7%95%B0%E5%80%BC%E5%88%86%E8%A7%A3-svd/\" target=\"_blank\" rel=\"external\">線代啟示錄 - 奇異值分解</a></li>\n</ul>\n<p><em>文章同步發表於 <a href=\"https://medium.com/@Shurado/%E6%B7%BA%E8%AB%87%E5%85%A9%E7%A8%AE%E9%99%8D%E7%B6%AD%E6%96%B9%E6%B3%95-pca-%E8%88%87-t-sne-d4254916925b\" target=\"_blank\" rel=\"external\">medium</a></em></p>\n","site":{"data":{}},"excerpt":"","more":"<p>在機器學習當中，如果特徵數過多時，有可能會造成一些問題，像是：</p>\n<ul>\n<li>過擬合 (overfitting)</li>\n<li>處理速度較慢</li>\n<li>如果超過三個特徵以上不好視覺化</li>\n</ul>\n<p>所以這時候就需要對特徵做降維，在實務上，一個幾百幾千個的特徵當中，手動挑選特徵顯然不是一個明智的方法，所以以下來介紹兩個在機器學習中常常使用的兩種降維方法。</p>\n<h3 id=\"PCA（principal-component-analysis）主成份分析\"><a href=\"#PCA（principal-component-analysis）主成份分析\" class=\"headerlink\" title=\"PCA（principal component analysis）主成份分析\"></a>PCA（principal component analysis）主成份分析</h3><p>在介紹 PCA 之前，我們先來定義一下我們的目標是什麼：</p>\n<blockquote>\n<p><em>將一個具有 n 個特徵空間的樣本，轉換為具有 k 個特徵空間的樣本，其中 k &lt; n</em></p>\n</blockquote>\n<p>以下是 PCA 的主要步驟：</p>\n<ol>\n<li>將數據標準化</li>\n<li>建立<strong>共變異數矩陣（covariance matrix）</strong></li>\n<li>利用<strong>奇異值分解（SVD）</strong>求得<strong>特徵向量（eigenvector）</strong>跟<strong>特徵值（eigenvalue）</strong></li>\n<li>通常特徵值會由大到小排列，選取 k 個特徵值與特徵向量</li>\n<li>將原本的數據投影（映射）到特徵向量上，得到新的特徵數</li>\n</ol>\n<p>PCA 最重要的部分就是奇異值分解，因此接下來的章節讓我們來談談<strong>奇異值分解</strong></p>\n<h4 id=\"直觀理解奇異值分解\"><a href=\"#直觀理解奇異值分解\" class=\"headerlink\" title=\"直觀理解奇異值分解\"></a>直觀理解奇異值分解</h4><p>在矩陣分解當中，奇異值分解是個相當有名的方法。矩陣分解在高中數學當中最常見的用途就是解方程式（如 LU 分解），從奇異值分解的公式當中我們可以直觀地了解：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*EW7y-TDCOHClCKINXFtlZQ.png\" alt=\"img\"></p>\n<p>其中 A 為一個 m x n 的矩陣，𝑈 跟 V 都為正交矩陣，<strong>𝛴 為奇異值矩陣</strong>。奇異值矩陣為矩陣 A 對應的特徵值，在 PCA 當中又叫做<strong>主成份</strong>，代表對保存訊息的重要程度，通常由大到小遞減排列在對角中，是個對稱矩陣。</p>\n<p>那麼這邊的 A 對應什麼呢？當然就是我們的特徵，只是特別要注意的是這邊的 A 我們通常使用<strong>共變異數矩陣（covariance martix）</strong>來求算，記得資料一定要先正規化後在進行奇異值分解</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*xk7Vhzw5dI77BLNl3Dsdlw.png\" alt=\"img\"></p>\n<p>共變異數矩陣（covariance matrix）</p>\n<p>因為共變異數矩陣<strong>常用 Sigma 表示，不要跟上面的 𝛴 搞混囉</strong>。因此如果要降維，我們可以用 U 的前 k 列乘上對應 𝛴 當中的特徵向量，就可以得出新的特徵了，而從幾何的角度來看</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*3nASowA14C1z-hIshmfg7w.png\" alt=\"img\"></p>\n<p>這樣子的運算在幾何當中，其實是將 X 投影到 U 的前 k 個向量</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*GVOZv-_OBKayNVhI3t9LLA.jpeg\" alt=\"img\"></p>\n<p>當中的黑線為特徵向量，長度為特徵值。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*spkrM0Qi2A0dQ1G-O_M1hQ.jpeg\" alt=\"img\"></p>\n<p>當中的藍點為數據原本的位置，紅點則是投影到特徵向量的位置。以上，我們成功將 2 維的數據降至一維了。</p>\n<p>當然也可以從 3 維降到 2 維：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*O4CvQRZqb74Wd3JlOQKwaw.jpeg\" alt=\"img\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*V9nMHPOfLqUunNsRVQHoSA.jpeg\" alt=\"img\"></p>\n<h4 id=\"PCA-的應用\"><a href=\"#PCA-的應用\" class=\"headerlink\" title=\"PCA 的應用\"></a>PCA 的應用</h4><p><strong>在降維的時候，我們希望留下最重要的特徵</strong>，剩下的比較不重要的特徵我們直接捨棄掉。</p>\n<p>像是判斷一個人時，最重要的判別方式可能就是眼睛、鼻子、嘴巴等等，所以膚色、頭髮等等的特徵我們就可以捨棄，事實上在人臉辨識當中也常利用 PCA 做降維。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*yAtJRzT9un7JP9yllYs3mg.jpeg\" alt=\"img\"></p>\n<p><em>這是對奇異值分解相當直觀的了解，篇幅關係無法深入細談，若對奇異值分解有興趣可自行到</em><a href=\"https://www.wikiwand.com/zh-tw/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3\" target=\"_blank\" rel=\"external\"><em>維基百科</em></a></p>\n<h3 id=\"t-SNE\"><a href=\"#t-SNE\" class=\"headerlink\" title=\"t-SNE\"></a>t-SNE</h3><p>PCA 是個相當直觀且有效的降維方式，不過在三維轉換為二維時我們可以看到，有些數據的集群完全被搗成一團。</p>\n<p>PCA 是一種線性降維的方式，但如果特徵與特徵間的關聯是非線性關係的話，用 PCA 可能會導致<strong>欠擬合（underfitting）</strong></p>\n<p><strong>t-SNE 也是一種降維方式</strong>，不過他用了更複雜的公式來表達高維與低維之間的關係。t-SNE 主要是將高維的數據用高斯分佈的機率密度函數近似，而低維數據的部分使用 t 分佈的方式來近似，在使用 KL 距離計算相似度，最後再以梯度下降（或隨機梯度下降）求最佳解 。</p>\n<h4 id=\"高斯分佈的機率密度函數\"><a href=\"#高斯分佈的機率密度函數\" class=\"headerlink\" title=\"高斯分佈的機率密度函數\"></a>高斯分佈的機率密度函數</h4><p><img src=\"https://cdn-images-1.medium.com/max/1000/1*9CSkBUO3tvJAhq8Wzv9s2Q.png\" alt=\"img\"></p>\n<p>其中，X 為隨機變量，𝝈 為變異數，𝜇 為平均。</p>\n<p>因此原本高維的數據可以這樣表示：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*KxxzB_L8Wi1L-FgznjhkyA.png\" alt=\"img\"></p>\n<p>而低維的數據用 t 分布的機率密度函數可以這樣表示（自由度為 1）</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*OwvAZgYHAfYvKehREGH9WQ.png\" alt=\"img\"></p>\n<p>其中，x 為高維當中的數據，y 為低維當中的數據。P, Q 分別代表機率分佈。</p>\n<p>為什麼會使用 t 分佈來近似低維的數據呢？主要是因為轉換成低維之後一定會丟失許多訊息，所以為了不被異常值影響可以使用 t 分佈。</p>\n<p>t 分佈在樣本數較少時，可以比較好模擬母體分布的情形，不容易被異常值所影響。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*hkZuHGVNMmS4_MHfxoIDdA.jpeg\" alt=\"img\">T 分佈與高斯分佈的機率密度函數</p>\n<h4 id=\"兩個分佈之間的相似度\"><a href=\"#兩個分佈之間的相似度\" class=\"headerlink\" title=\"兩個分佈之間的相似度\"></a>兩個分佈之間的相似度</h4><p>求算兩個分佈之間的相似度，經常用 KL 距離（Kullback-Leibler Divergence）來表示，也叫做相對熵（Relative Entropy）。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*geKaV3PDC2idMGUCXroJzw.png\" alt=\"img\"></p>\n<p>在 t-SNE 中使用了困惑度（Perp）來當作超參數。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*BiQ-gYxdbZsGP5KfYUF9Kg.png\" alt=\"img\"></p>\n<p>論文中提出通常困惑度在 5 ~ 50 之間。</p>\n<h4 id=\"Cost-function\"><a href=\"#Cost-function\" class=\"headerlink\" title=\"Cost function\"></a>Cost function</h4><p>用 KL 距離計算 Cost</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*2XSnUoPaYB2_FMQ8xMzOuQ.png\" alt=\"img\"></p>\n<p>求梯度可以寫成</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*MzouyFbnSKdeBA7nLJVCPw.png\" alt=\"img\"></p>\n<p>最後再利用梯度下降法（或隨機梯度下降法）就可以找到最小值了。</p>\n<h4 id=\"實測：使用-MNIST-測試\"><a href=\"#實測：使用-MNIST-測試\" class=\"headerlink\" title=\"實測：使用 MNIST 測試\"></a>實測：使用 MNIST 測試</h4><p>測試集可以到<a href=\"http://yann.lecun.com/exdb/mnist/\" target=\"_blank\" rel=\"external\">這裡</a>下載，首先我們先用 PCA 降到二維看看。</p>\n<p><strong>PCA</strong></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*Be6oSLuXgG0cDi2gJEL-wA.jpeg\" alt=\"img\">PCA 降維</p>\n<p>可以發現降到二維之後，資料幾乎被搗成一團，完全看不出集群，這是因為 PCA 的線性降維在過程中損失太多訊息。</p>\n<p><strong>t-SNE</strong></p>\n<p>接下來使用 t-SNE 測試</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*5i8McPBKmFOMOcCDjl8w4Q.jpeg\" alt=\"img\">使用 t-SNE 降維</p>\n<p>這是使用 t-SNE 後的降維結果，可以發現降維過後，資料仍然分群地相當明確。從這兩張圖可以非常明顯看出這兩者（PCA, t-SNE）的差別。</p>\n<h3 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h3><p>後來又有人提出一連串改善 t-SNE 效能的演算法，詳情可以參考<a href=\"https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf\" target=\"_blank\" rel=\"external\"><strong>Accelerating t-sne using tree-based algorithms</strong></a>，大部分熱門的資料分析程式語言也都有實作，像是 sklearn, R, matlab 等等。</p>\n<p>不過畢竟<strong> t-SNE 不是線性降維，在執行時間上會比 PCA 來得久許多。</strong></p>\n<ul>\n<li>當特徵數量過多時，使用 PCA 可能會造成降維後的特徵欠擬合（underfitting），這時可以考慮使用 t-SNE 來降維</li>\n<li>t-SNE 的需要比較多的時間執行</li>\n<li>論文當中還有一些優化技巧（如何選擇困惑度等等），因為還沒有閱讀完畢，之後會再逐漸補上</li>\n</ul>\n<h4 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h4><ul>\n<li><a href=\"http://siplab.tudelft.nl/sites/default/files/vandermaaten08a.pdf\" target=\"_blank\" rel=\"external\">Van der Maaten L, Hinton G. <strong>Visualizing data using t-SNE</strong></a></li>\n<li><a href=\"https://lvdmaaten.github.io/publications/papers/JMLR_2014.pdf\" target=\"_blank\" rel=\"external\"><strong>Accelerating t-sne using tree-based algorithms</strong></a> 利用各種樹的演算法來加速 t-SNE 的運算</li>\n<li><a href=\"https://ccjou.wordpress.com/2009/09/01/%E5%A5%87%E7%95%B0%E5%80%BC%E5%88%86%E8%A7%A3-svd/\" target=\"_blank\" rel=\"external\">線代啟示錄 - 奇異值分解</a></li>\n</ul>\n<p><em>文章同步發表於 <a href=\"https://medium.com/@Shurado/%E6%B7%BA%E8%AB%87%E5%85%A9%E7%A8%AE%E9%99%8D%E7%B6%AD%E6%96%B9%E6%B3%95-pca-%E8%88%87-t-sne-d4254916925b\" target=\"_blank\" rel=\"external\">medium</a></em></p>\n"},{"title":"你可能不知道的 Sass 技巧","_content":"\n\n\n我發現有許多前端工程師只把 sass 當作有變數、nested class 跟 `&` 的 CSS 來撰寫。\n\n在 Sass 當中有許多好用的函式跟功能，如果不知道如何使用的話，對一個強大的預處理器來說，這是件相當可惜的事情。`Sass3.5` 的更新加強了對 css variable 的支持。\n\n在考慮使用 CSS in Javascript 或是引入 PostCSS 的 plugin 之前，先看看是否能夠用 Sass 達到同樣的目的吧！\n\n#### 變數宣告\n\n我們可以透過變數宣告 !defualt, !global\n\n\n\n#### 資料型別 List, Map\n\n除了一般的變數用 `$` 開頭宣告之外，其實在 Sass 當中還有兩種資料型別，List 和 Map。List 就像一般 array，而 Map 有點像是 Object。\n\n如果運用得好，我們可以收斂一下常見的變數，像是 color, font, size 等等。同時 List 與 Map 在 Sass 當中提供了一些函數來操作，像是 `map-get` `map-has-key` 等等，以下我們以常見的顏色管理做舉例。\n\n##### Map\n\nSass 的 Map 類似 Javascript 當中的 Object 的功能，提供了 key-value 的方式儲存變數，並且內建一些函式以供操作。\n\n在顏色宣告時，我們通常都會這樣寫：\n\n```scss\n$mainColor: #aaa;\n$fontColor: #333;\n$dangerColor: red;\n\n.word {\n    color: $fontColor;\n}\n\n.container {\n    background-color: $mainColor;\n}\n\n.btn.danger {\n    background-color: $dangerColor;\n}\n\n```\n\n如果將原本的變數改寫為 Map 的形式：\n\n```scss\n$colors: (\n  main: #aaa,\n  font: #333,\n  danger: red\n);\n\n.word {\n  color: map-get($colors, font);\n}\n\n.container {\n  background-color: map-get($colors, main);\n}\n\n.btn.danger {\n  background-color: map-get($colors, danger);\n}\n```\n\n當然，這個函數還有一些優化的空間，我們下面會再做介紹。\n\n\n\n##### 其他 API\n\n- map-get\n- map-has-key\n- merge-map\n\n##### List\n\nList 可以簡單的聯想為 array，Sass 內建了一些函數提供操作 List。List 的內容可以是顏色、字串、甚至塞入 Map 也可以。比如說我們想要對一連串的 content 賦值：\n\n```scss\n.tag.danger::before {\n    content: \"danger\";\n}\n\n.tag.normal::before {\n    content: \"normal\";\n}\n//...\n```\n\n當內容一多，寫這種重複的 CSS 是一件很痛苦的事，這時候就可以使用 List 簡化操作。使用 Map 或是 List，也可以用 `@each...in` 的迴圈來遍歷整個 Map 或是 List。\n\n```scss\n$contentList: ('danger', 'normal', 'suck');\n\n@each $content in $contentList {\n  .tag.#{$content}::before {\n      content: $content;\n  }\n}\n// compiled\n\n.tag.danger {}\n.tag.normal {}\n.tag.suck {}\n```\n\n##### 管理 `z-index`\n\n運用 List 當中的 API 來管理複雜的 `z-index`。\n\n`z-index` 一直是每個前端工程師的心頭之痛，因為很容易就使用 magic number 來管理。一般的解決方法是用變數的方式來管理：\n\n```scss\n$zindex-dropdown-backdrop:  990 !default;\n$zindex-navbar:            1000 !default;\n$zindex-dropdown:          1000 !default;\n$zindex-fixed:             1030 !default;\n$zindex-sticky:            1030 !default;\n$zindex-modal-backdrop:    1040 !default;\n$zindex-modal:             1050 !default;\n$zindex-popover:           1060 !default;\n$zindex-tooltip:           1070 !default;\n// 取自 bootstrap 代碼\n```\n\n我們可以運用 `index` 這個 API 搭配 List 達到類似的效果：\n\n```scss\n$zIndexs: (\n  'dropdown-backdrop',\n  'navbar',\n  'normal',\n  'dropdown',\n  'fixed',\n  'sticky',\n  'modal-backdrop',\n  'modal',\n  'popover',\n  'tooltip'\n);\n\n.dropdown {\n  z-index: index($zIndexs, 'dropdown') // 類似 indexOf\n}\n\n.dropdown-backdrop {\n  z-index: index($zIndexs, 'dropdown-backdrop');\n}\n// ...\n.tooltip {\n  z-index: index($zIndexs, 'tooltip');\n}\n```\n\n這樣一來，我們除了可以減少變數前綴的麻煩，也可以避免用區間來防止 `z-index` 被其他元素時插入的困擾。（只要直接在 List 加入值就好，不用再修改其他值）。\n\n以上 Map 與 List 的介紹用實例讓大家了解在實際開發時的運用，當然使用場景不限於以上兩種而已。\n\n我們之後會再優化這些 function。\n\n###### 其他 list 函數\n\n- `nth`\n- `index`\n- `join`\n- `append`\n- `zip`\n- `length`\n\n#### 內建函數\n\n在 Sass 當中有一些函數可以幫助簡化 CSS 檔案。\n\n##### `darken` `lighten`\n\n這兩個函數在操作 hover 狀態時非常好用，有時候我們收到的需求是：「hover 後的顏色變暗 10%」，通常設計師會直接給你顏色，不過透過 darken, lighten 這兩個函式操作的話能夠讓我們在實際開發上更有彈性。\n\n```scss\n.btn {\n  background-color: #000;\n  &:hover { background-color: #333; }\n}\n```\n\n搭配 `darken`, `lighten`\n\n```scss\n.btn {\n  background-color: #000;\n  &:hover { background-color: lighten(#000, 30%); }\n}\n```\n\n##### `rgba` `rgb`\n\nSass 支援 rgba 與 hex 混合的語法，你可以直接這樣寫：\n\n```scss\nbody {\n  background-color: rgba(#000, 0.3);\n  // compiled\n  background-color: rgba(0, 0, 0, 0.3);\n}\n```\n\n比起原生的語法要額外寫 RGB 這三個參數，直接用 16 進位的表示法相對簡潔許多。Sass 會自動偵測是否要幫你轉換。\n\n##### `invert`\n\n將輸入的顏色反轉。\n\n##### `@at-root`\n\n在開發時，如果想要 access 到外層的 class，又希望保持模組化所以將 class 寫在 nested 內時，`@at-root` 就相當好用。\n\n```scss\n.tooltip {\n  //...\n  font-size: 20px;\n  @at-root body.active .tooltip-backdrop {\n    position: fixed;\n  }\n}\n\n// compiled\n.tooltip {\n  font-size: 20px;\n}\n\nbody.active .tooltip-backdrop {\n  position: fixed;\n}\n```\n\n加入 `@at-root` 之後，編譯後會將 class 搬移到最外層，而不是在 tooltip 裏面。這在保持模組化時、不想將 class 寫在外層、不想導致太深層的巢狀 class 時相當有用。\n\n#### mixin\n\nmixin 在 autoprefixer 還沒有發佈之前，一直都被用來當作加入前綴使用。不過除了前綴之外，我們還能夠利用 mixin 做到許多事。像是：\n\n- 管理字體大小\n- 設定常見的 media query\n- 簡化 class\n\n`mixin` 的撰寫方式是以 `@mixin` 作為開頭，呼叫時用 `@include`。\n\n##### 管理字體大小\n\n在 desktop 以及 mobile 上我們可能有不同的字體大小或字級想要管理，首先我們能夠用 map 宣告字體大小，再搭配 mixin 簡化流程。\n\n```scss\n$fontSizes: (\n  desktop: (\n  \t'x-large': 32px,\n    'large': 30px,\n    'medium': 26px,\n    'normal': 18px,\n    'small': 14px,\n    'x-small': 12px\n  ), \n  mobile: (\n    'x-large': 28px,\n    'large': 24px,\n    'medium': 20px,\n    'normal': 16px,\n    'small': 12px,\n    'x-small': 10px\n  )\n);\n\n@mixin font-size(size: \"normal\") {\n  @media screen and (min-width: 768px) {\n    $desktop: map-get($fontSizes, desktop);\n    font-size: map-get($desktop, size);\n  }\n  \n  @media screen and (max-width: 767px) {\n    $mobile: map-get($fontSizes, mobile);\n    font-size: map-get($mobile, size);\n  }\n\n}\n\n.article {\n  @include font-size(normal);\n  \n  &.large {\n    @include font-size(large);\n  }\n}\n```\n\n這樣一來可以很容易地在手機、桌面中切換不同的字級設定。\n\n##### 管理 `@media`\n\n在 class 寫一大堆 `@media` 是一件很頭痛的事，我們可以設定好 `$breakpoint` 的變數後，再利用 mixin 封裝。\n\n```scss\n$breakpoints: (\n  desktop: 960px\n  mobile: 568px,\n);\n\n@mixin for-mobile {\n  @media screen and (max-width: map-get($breakpoints, \"mobile\")) {\n    @content;\n  }\n}\n\n@mixin for-desktop {\n  @media screen and (min-width: map-get($breakpoints, \"desktop\")) {\n    @content;\n  }\n}\n```\n\n你也可以將所有的 `breakpoint` 統一封裝為一個 mixin，並且透過傳入參數的方式來決定，不過分開的寫法比較直覺一些。\n\n #### Function\n\n在 Sass 當中寫 function 非常簡單。宣告 function 時用 `@function` 表示：\n\n```scss\n@function return123 {\n  @return \"123\";\n}\n```\n\n或者加入參數：\n\n```scss\n@function returnString($string) {\n  @return $string;\n}\n\nreturnString(\"123\"); // \"123\"\n```\n\nSass 裡頭有迴圈、for-loop、while 等等的功能，所以你可以客製化自己想要的函數，幫助開發。\n\n#### Logging\n\n在 sass 當中，我們可以利用 `@warn` 、`@error`、`@debug` 這兩個函數做更好的開發體驗。\n\n ```scss\n@function getMessage($message, $type: \"error\") {\n  @if $type == \"error\" {\n    @error $message;\n  } @elseif $type == \"warn\" {\n    @warn $message;\n  } @else {\n    @debug $meesage;\n  }\n}\n ```\n\n如果你是使用原生的 Sass 編譯，則 error 會直接打斷編譯流程，並且印出錯誤在 stdout，使用 warn 的話不會打斷編譯，但會印出訊息在 stdout 上，而 debug 則是單純印出在 stdout 上。\n\n---\n\n搭配以上的功能，我們來實作一些在開發上常見的函數吧！\n\n#### BEM utils\n\n為了讓 CSS 保持命名空間，我們常常使用 BEM 來組織 CSS 代碼。不過卻常常出現 `__`、`-`之類不太好看的符號，一不小心就可能打錯，我們可以使用 `mixin` 封裝這個功能。\n\n```scss\n@mixin block($block_name) {\n  .#{$block_name} { @content; }\n}\n\n@mixin element($element_name) {\n  @at-root &__#{$element_name} { @content; }\n}\n\n@mixin modifier($modifier_name) {\n  @at-root &--#{$modifier_name} { @content; }\t\n}\n\n@include block(article-entry) {\n  padding: 20px;\n  @include element(content) {\n    font-size: 20px;\n  }\n  \n  @include element(footer) {\n    background-color: #fff;\n    @include modifier(larger) {\n      height: 500px;\n    }\n  }\n}\n\n//\n.article-entry { padding: 20px; }\n.article-entry__content { font-size: 20px; }\n.article-entry__footer { background-size: #fff; }\n.article-entry__footer--larger { height: 500px; }\n\n\n```\n\n注意到我們在 mixin 當中使用了 `@at-root`，所以編譯的 CSS 會一律放到最頂層，這可以解決 BEM 層數太深的問題，也可以在開發時保持良好的模組性。你也可以在 `mixin` 加上一些參數決定是否要套用 `@at-root` 來保持開發上的彈性。\n\n#### z-index 管理\n\n在上面的例子當中，我們利用 `map-get` 來取值，在實際開發上我們可能會想要再簡化一些，現在搭配 `@function` 做改善。\n\n```scss\n$zIndexs: (\n  'dropdown-backdrop',\n  'navbar',\n  'normal',\n  'dropdown',\n  'fixed',\n  'sticky',\n  'modal-backdrop',\n  'modal',\n  'popover',\n  'tooltip'\n);\n\n@function zindex($name: normal) {\n  $index: index($zIndexs, $name);\n  if (!$index) {\n    @error \"#{$name} doesn't exist! please checkout your `$zIndexs` variable.\";\n  }\n  \n  @return $index;\n}\n\n.dropdown {\n  z-index: zindex('dropdown') // 類似 indexOf\n}\n\n.dropdown-backdrop {\n  z-index: zindex('dropdown-backdrop');\n}\n// ...\n.tooltip {\n  z-index: zindex('tooltip');\n}\n```\n\n我們將 `$zIndexs` 包裝起來，並且如果傳入的參數並不存在於 `$zIndexs` 當中就會直接打斷編譯過程，並且顯示錯誤，也提供了相關的錯誤訊息給開發者參考。\n\n#### 引入 css variable\n\n目前比較新的瀏覽器都已經支援 css variable 了。我們可以將顏色等變數使用 css variable 重新撰寫，並且使用優雅降級來確保在其他瀏覽器也能正常工作。\n\n```scss\n$colors: (\n  main: #aaa,\n  font: #333,\n  danger: red\n);\n\n:root {\n  @each $key, $color in $colors {\n    --#{key}: $color;\n  }\n}\n\n@mixin css($prop, $key) {\n  #{$prop}: map-get($colors, $key);\n  @if (map-has-key($colors, $key) == false) {\n    @error \"Unknown key `#{$key}`. checkout your `$colors` variable\";\n  }\n  \n  @supports (--foo: \"bar\") {\n    #{$prop}: var(--#{$key});\n  }\n}\n.container {\n  @include css('background-color', \"main\");\n}\n\n// compiled\n:root {\n  --main: #aaa;\n  --font: #333;\n  --danger: red;\n}\n\n.container {\n  background-color: #aaa;\n  @supports (--foo: \"bar\") {\n    background-color: var(--main);\n  }\n}\n\n\n```\n\n這個 `@mixin` 寫得比較陽春一些，你可以加入更多參數或修改讓這個 `mixin` 能夠配合其他屬性。\n\n\n\n### 結論\n\nPostCSS, CSS in Javascript, styled-component，都是為了解決問題而發展出來的工具，不過 Sass 也有許多功能值得大家參考，這篇文章提出一些常見的開發問題，並使用 Sass 來解決。Sass 的函數並沒有想像中那麼複雜，而且功能強大，你甚至可以利用 Sass 的內建函數來建置 sin, cos 等三角函數幫助運算，撰寫排序演算法、使用遞迴（如果你想的話...）。\n\n使用 Sass 並不代表你需要拋棄 PostCSS 或其他工具帶來的便利性，像是 autoprefixer 以及 cssnano 等等，都是相當好用的插件。你甚至可以搭配使用帶來更快速及穩固的開發體驗。","source":"_posts/Sass.md","raw":"---\ntitle: 你可能不知道的 Sass 技巧\ncategories: 前端\ntags:\n  - sass\n---\n\n\n\n我發現有許多前端工程師只把 sass 當作有變數、nested class 跟 `&` 的 CSS 來撰寫。\n\n在 Sass 當中有許多好用的函式跟功能，如果不知道如何使用的話，對一個強大的預處理器來說，這是件相當可惜的事情。`Sass3.5` 的更新加強了對 css variable 的支持。\n\n在考慮使用 CSS in Javascript 或是引入 PostCSS 的 plugin 之前，先看看是否能夠用 Sass 達到同樣的目的吧！\n\n#### 變數宣告\n\n我們可以透過變數宣告 !defualt, !global\n\n\n\n#### 資料型別 List, Map\n\n除了一般的變數用 `$` 開頭宣告之外，其實在 Sass 當中還有兩種資料型別，List 和 Map。List 就像一般 array，而 Map 有點像是 Object。\n\n如果運用得好，我們可以收斂一下常見的變數，像是 color, font, size 等等。同時 List 與 Map 在 Sass 當中提供了一些函數來操作，像是 `map-get` `map-has-key` 等等，以下我們以常見的顏色管理做舉例。\n\n##### Map\n\nSass 的 Map 類似 Javascript 當中的 Object 的功能，提供了 key-value 的方式儲存變數，並且內建一些函式以供操作。\n\n在顏色宣告時，我們通常都會這樣寫：\n\n```scss\n$mainColor: #aaa;\n$fontColor: #333;\n$dangerColor: red;\n\n.word {\n    color: $fontColor;\n}\n\n.container {\n    background-color: $mainColor;\n}\n\n.btn.danger {\n    background-color: $dangerColor;\n}\n\n```\n\n如果將原本的變數改寫為 Map 的形式：\n\n```scss\n$colors: (\n  main: #aaa,\n  font: #333,\n  danger: red\n);\n\n.word {\n  color: map-get($colors, font);\n}\n\n.container {\n  background-color: map-get($colors, main);\n}\n\n.btn.danger {\n  background-color: map-get($colors, danger);\n}\n```\n\n當然，這個函數還有一些優化的空間，我們下面會再做介紹。\n\n\n\n##### 其他 API\n\n- map-get\n- map-has-key\n- merge-map\n\n##### List\n\nList 可以簡單的聯想為 array，Sass 內建了一些函數提供操作 List。List 的內容可以是顏色、字串、甚至塞入 Map 也可以。比如說我們想要對一連串的 content 賦值：\n\n```scss\n.tag.danger::before {\n    content: \"danger\";\n}\n\n.tag.normal::before {\n    content: \"normal\";\n}\n//...\n```\n\n當內容一多，寫這種重複的 CSS 是一件很痛苦的事，這時候就可以使用 List 簡化操作。使用 Map 或是 List，也可以用 `@each...in` 的迴圈來遍歷整個 Map 或是 List。\n\n```scss\n$contentList: ('danger', 'normal', 'suck');\n\n@each $content in $contentList {\n  .tag.#{$content}::before {\n      content: $content;\n  }\n}\n// compiled\n\n.tag.danger {}\n.tag.normal {}\n.tag.suck {}\n```\n\n##### 管理 `z-index`\n\n運用 List 當中的 API 來管理複雜的 `z-index`。\n\n`z-index` 一直是每個前端工程師的心頭之痛，因為很容易就使用 magic number 來管理。一般的解決方法是用變數的方式來管理：\n\n```scss\n$zindex-dropdown-backdrop:  990 !default;\n$zindex-navbar:            1000 !default;\n$zindex-dropdown:          1000 !default;\n$zindex-fixed:             1030 !default;\n$zindex-sticky:            1030 !default;\n$zindex-modal-backdrop:    1040 !default;\n$zindex-modal:             1050 !default;\n$zindex-popover:           1060 !default;\n$zindex-tooltip:           1070 !default;\n// 取自 bootstrap 代碼\n```\n\n我們可以運用 `index` 這個 API 搭配 List 達到類似的效果：\n\n```scss\n$zIndexs: (\n  'dropdown-backdrop',\n  'navbar',\n  'normal',\n  'dropdown',\n  'fixed',\n  'sticky',\n  'modal-backdrop',\n  'modal',\n  'popover',\n  'tooltip'\n);\n\n.dropdown {\n  z-index: index($zIndexs, 'dropdown') // 類似 indexOf\n}\n\n.dropdown-backdrop {\n  z-index: index($zIndexs, 'dropdown-backdrop');\n}\n// ...\n.tooltip {\n  z-index: index($zIndexs, 'tooltip');\n}\n```\n\n這樣一來，我們除了可以減少變數前綴的麻煩，也可以避免用區間來防止 `z-index` 被其他元素時插入的困擾。（只要直接在 List 加入值就好，不用再修改其他值）。\n\n以上 Map 與 List 的介紹用實例讓大家了解在實際開發時的運用，當然使用場景不限於以上兩種而已。\n\n我們之後會再優化這些 function。\n\n###### 其他 list 函數\n\n- `nth`\n- `index`\n- `join`\n- `append`\n- `zip`\n- `length`\n\n#### 內建函數\n\n在 Sass 當中有一些函數可以幫助簡化 CSS 檔案。\n\n##### `darken` `lighten`\n\n這兩個函數在操作 hover 狀態時非常好用，有時候我們收到的需求是：「hover 後的顏色變暗 10%」，通常設計師會直接給你顏色，不過透過 darken, lighten 這兩個函式操作的話能夠讓我們在實際開發上更有彈性。\n\n```scss\n.btn {\n  background-color: #000;\n  &:hover { background-color: #333; }\n}\n```\n\n搭配 `darken`, `lighten`\n\n```scss\n.btn {\n  background-color: #000;\n  &:hover { background-color: lighten(#000, 30%); }\n}\n```\n\n##### `rgba` `rgb`\n\nSass 支援 rgba 與 hex 混合的語法，你可以直接這樣寫：\n\n```scss\nbody {\n  background-color: rgba(#000, 0.3);\n  // compiled\n  background-color: rgba(0, 0, 0, 0.3);\n}\n```\n\n比起原生的語法要額外寫 RGB 這三個參數，直接用 16 進位的表示法相對簡潔許多。Sass 會自動偵測是否要幫你轉換。\n\n##### `invert`\n\n將輸入的顏色反轉。\n\n##### `@at-root`\n\n在開發時，如果想要 access 到外層的 class，又希望保持模組化所以將 class 寫在 nested 內時，`@at-root` 就相當好用。\n\n```scss\n.tooltip {\n  //...\n  font-size: 20px;\n  @at-root body.active .tooltip-backdrop {\n    position: fixed;\n  }\n}\n\n// compiled\n.tooltip {\n  font-size: 20px;\n}\n\nbody.active .tooltip-backdrop {\n  position: fixed;\n}\n```\n\n加入 `@at-root` 之後，編譯後會將 class 搬移到最外層，而不是在 tooltip 裏面。這在保持模組化時、不想將 class 寫在外層、不想導致太深層的巢狀 class 時相當有用。\n\n#### mixin\n\nmixin 在 autoprefixer 還沒有發佈之前，一直都被用來當作加入前綴使用。不過除了前綴之外，我們還能夠利用 mixin 做到許多事。像是：\n\n- 管理字體大小\n- 設定常見的 media query\n- 簡化 class\n\n`mixin` 的撰寫方式是以 `@mixin` 作為開頭，呼叫時用 `@include`。\n\n##### 管理字體大小\n\n在 desktop 以及 mobile 上我們可能有不同的字體大小或字級想要管理，首先我們能夠用 map 宣告字體大小，再搭配 mixin 簡化流程。\n\n```scss\n$fontSizes: (\n  desktop: (\n  \t'x-large': 32px,\n    'large': 30px,\n    'medium': 26px,\n    'normal': 18px,\n    'small': 14px,\n    'x-small': 12px\n  ), \n  mobile: (\n    'x-large': 28px,\n    'large': 24px,\n    'medium': 20px,\n    'normal': 16px,\n    'small': 12px,\n    'x-small': 10px\n  )\n);\n\n@mixin font-size(size: \"normal\") {\n  @media screen and (min-width: 768px) {\n    $desktop: map-get($fontSizes, desktop);\n    font-size: map-get($desktop, size);\n  }\n  \n  @media screen and (max-width: 767px) {\n    $mobile: map-get($fontSizes, mobile);\n    font-size: map-get($mobile, size);\n  }\n\n}\n\n.article {\n  @include font-size(normal);\n  \n  &.large {\n    @include font-size(large);\n  }\n}\n```\n\n這樣一來可以很容易地在手機、桌面中切換不同的字級設定。\n\n##### 管理 `@media`\n\n在 class 寫一大堆 `@media` 是一件很頭痛的事，我們可以設定好 `$breakpoint` 的變數後，再利用 mixin 封裝。\n\n```scss\n$breakpoints: (\n  desktop: 960px\n  mobile: 568px,\n);\n\n@mixin for-mobile {\n  @media screen and (max-width: map-get($breakpoints, \"mobile\")) {\n    @content;\n  }\n}\n\n@mixin for-desktop {\n  @media screen and (min-width: map-get($breakpoints, \"desktop\")) {\n    @content;\n  }\n}\n```\n\n你也可以將所有的 `breakpoint` 統一封裝為一個 mixin，並且透過傳入參數的方式來決定，不過分開的寫法比較直覺一些。\n\n #### Function\n\n在 Sass 當中寫 function 非常簡單。宣告 function 時用 `@function` 表示：\n\n```scss\n@function return123 {\n  @return \"123\";\n}\n```\n\n或者加入參數：\n\n```scss\n@function returnString($string) {\n  @return $string;\n}\n\nreturnString(\"123\"); // \"123\"\n```\n\nSass 裡頭有迴圈、for-loop、while 等等的功能，所以你可以客製化自己想要的函數，幫助開發。\n\n#### Logging\n\n在 sass 當中，我們可以利用 `@warn` 、`@error`、`@debug` 這兩個函數做更好的開發體驗。\n\n ```scss\n@function getMessage($message, $type: \"error\") {\n  @if $type == \"error\" {\n    @error $message;\n  } @elseif $type == \"warn\" {\n    @warn $message;\n  } @else {\n    @debug $meesage;\n  }\n}\n ```\n\n如果你是使用原生的 Sass 編譯，則 error 會直接打斷編譯流程，並且印出錯誤在 stdout，使用 warn 的話不會打斷編譯，但會印出訊息在 stdout 上，而 debug 則是單純印出在 stdout 上。\n\n---\n\n搭配以上的功能，我們來實作一些在開發上常見的函數吧！\n\n#### BEM utils\n\n為了讓 CSS 保持命名空間，我們常常使用 BEM 來組織 CSS 代碼。不過卻常常出現 `__`、`-`之類不太好看的符號，一不小心就可能打錯，我們可以使用 `mixin` 封裝這個功能。\n\n```scss\n@mixin block($block_name) {\n  .#{$block_name} { @content; }\n}\n\n@mixin element($element_name) {\n  @at-root &__#{$element_name} { @content; }\n}\n\n@mixin modifier($modifier_name) {\n  @at-root &--#{$modifier_name} { @content; }\t\n}\n\n@include block(article-entry) {\n  padding: 20px;\n  @include element(content) {\n    font-size: 20px;\n  }\n  \n  @include element(footer) {\n    background-color: #fff;\n    @include modifier(larger) {\n      height: 500px;\n    }\n  }\n}\n\n//\n.article-entry { padding: 20px; }\n.article-entry__content { font-size: 20px; }\n.article-entry__footer { background-size: #fff; }\n.article-entry__footer--larger { height: 500px; }\n\n\n```\n\n注意到我們在 mixin 當中使用了 `@at-root`，所以編譯的 CSS 會一律放到最頂層，這可以解決 BEM 層數太深的問題，也可以在開發時保持良好的模組性。你也可以在 `mixin` 加上一些參數決定是否要套用 `@at-root` 來保持開發上的彈性。\n\n#### z-index 管理\n\n在上面的例子當中，我們利用 `map-get` 來取值，在實際開發上我們可能會想要再簡化一些，現在搭配 `@function` 做改善。\n\n```scss\n$zIndexs: (\n  'dropdown-backdrop',\n  'navbar',\n  'normal',\n  'dropdown',\n  'fixed',\n  'sticky',\n  'modal-backdrop',\n  'modal',\n  'popover',\n  'tooltip'\n);\n\n@function zindex($name: normal) {\n  $index: index($zIndexs, $name);\n  if (!$index) {\n    @error \"#{$name} doesn't exist! please checkout your `$zIndexs` variable.\";\n  }\n  \n  @return $index;\n}\n\n.dropdown {\n  z-index: zindex('dropdown') // 類似 indexOf\n}\n\n.dropdown-backdrop {\n  z-index: zindex('dropdown-backdrop');\n}\n// ...\n.tooltip {\n  z-index: zindex('tooltip');\n}\n```\n\n我們將 `$zIndexs` 包裝起來，並且如果傳入的參數並不存在於 `$zIndexs` 當中就會直接打斷編譯過程，並且顯示錯誤，也提供了相關的錯誤訊息給開發者參考。\n\n#### 引入 css variable\n\n目前比較新的瀏覽器都已經支援 css variable 了。我們可以將顏色等變數使用 css variable 重新撰寫，並且使用優雅降級來確保在其他瀏覽器也能正常工作。\n\n```scss\n$colors: (\n  main: #aaa,\n  font: #333,\n  danger: red\n);\n\n:root {\n  @each $key, $color in $colors {\n    --#{key}: $color;\n  }\n}\n\n@mixin css($prop, $key) {\n  #{$prop}: map-get($colors, $key);\n  @if (map-has-key($colors, $key) == false) {\n    @error \"Unknown key `#{$key}`. checkout your `$colors` variable\";\n  }\n  \n  @supports (--foo: \"bar\") {\n    #{$prop}: var(--#{$key});\n  }\n}\n.container {\n  @include css('background-color', \"main\");\n}\n\n// compiled\n:root {\n  --main: #aaa;\n  --font: #333;\n  --danger: red;\n}\n\n.container {\n  background-color: #aaa;\n  @supports (--foo: \"bar\") {\n    background-color: var(--main);\n  }\n}\n\n\n```\n\n這個 `@mixin` 寫得比較陽春一些，你可以加入更多參數或修改讓這個 `mixin` 能夠配合其他屬性。\n\n\n\n### 結論\n\nPostCSS, CSS in Javascript, styled-component，都是為了解決問題而發展出來的工具，不過 Sass 也有許多功能值得大家參考，這篇文章提出一些常見的開發問題，並使用 Sass 來解決。Sass 的函數並沒有想像中那麼複雜，而且功能強大，你甚至可以利用 Sass 的內建函數來建置 sin, cos 等三角函數幫助運算，撰寫排序演算法、使用遞迴（如果你想的話...）。\n\n使用 Sass 並不代表你需要拋棄 PostCSS 或其他工具帶來的便利性，像是 autoprefixer 以及 cssnano 等等，都是相當好用的插件。你甚至可以搭配使用帶來更快速及穩固的開發體驗。","slug":"Sass","published":1,"date":"2017-08-18T09:11:38.000Z","updated":"2017-08-21T19:04:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitq4000biw5t6n7qrnuv","content":"<p>我發現有許多前端工程師只把 sass 當作有變數、nested class 跟 <code>&amp;</code> 的 CSS 來撰寫。</p>\n<p>在 Sass 當中有許多好用的函式跟功能，如果不知道如何使用的話，對一個強大的預處理器來說，這是件相當可惜的事情。<code>Sass3.5</code> 的更新加強了對 css variable 的支持。</p>\n<p>在考慮使用 CSS in Javascript 或是引入 PostCSS 的 plugin 之前，先看看是否能夠用 Sass 達到同樣的目的吧！</p>\n<h4 id=\"變數宣告\"><a href=\"#變數宣告\" class=\"headerlink\" title=\"變數宣告\"></a>變數宣告</h4><p>我們可以透過變數宣告 !defualt, !global</p>\n<h4 id=\"資料型別-List-Map\"><a href=\"#資料型別-List-Map\" class=\"headerlink\" title=\"資料型別 List, Map\"></a>資料型別 List, Map</h4><p>除了一般的變數用 <code>$</code> 開頭宣告之外，其實在 Sass 當中還有兩種資料型別，List 和 Map。List 就像一般 array，而 Map 有點像是 Object。</p>\n<p>如果運用得好，我們可以收斂一下常見的變數，像是 color, font, size 等等。同時 List 與 Map 在 Sass 當中提供了一些函數來操作，像是 <code>map-get</code> <code>map-has-key</code> 等等，以下我們以常見的顏色管理做舉例。</p>\n<h5 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h5><p>Sass 的 Map 類似 Javascript 當中的 Object 的功能，提供了 key-value 的方式儲存變數，並且內建一些函式以供操作。</p>\n<p>在顏色宣告時，我們通常都會這樣寫：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$mainColor</span>: <span class=\"number\">#aaa</span>;</div><div class=\"line\"><span class=\"variable\">$fontColor</span>: <span class=\"number\">#333</span>;</div><div class=\"line\"><span class=\"variable\">$dangerColor</span>: red;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.word</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">$fontColor</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"variable\">$mainColor</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.btn</span><span class=\"selector-class\">.danger</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"variable\">$dangerColor</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果將原本的變數改寫為 Map 的形式：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#aaa</span>,</div><div class=\"line\">  font: <span class=\"number\">#333</span>,</div><div class=\"line\">  danger: red</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.word</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, font);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, main);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.btn</span><span class=\"selector-class\">.danger</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, danger);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>當然，這個函數還有一些優化的空間，我們下面會再做介紹。</p>\n<h5 id=\"其他-API\"><a href=\"#其他-API\" class=\"headerlink\" title=\"其他 API\"></a>其他 API</h5><ul>\n<li>map-get</li>\n<li>map-has-key</li>\n<li>merge-map</li>\n</ul>\n<h5 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h5><p>List 可以簡單的聯想為 array，Sass 內建了一些函數提供操作 List。List 的內容可以是顏色、字串、甚至塞入 Map 也可以。比如說我們想要對一連串的 content 賦值：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.danger</span>::before &#123;</div><div class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"danger\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.normal</span>::before &#123;</div><div class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"normal\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//...</span></div></pre></td></tr></table></figure>\n<p>當內容一多，寫這種重複的 CSS 是一件很痛苦的事，這時候就可以使用 List 簡化操作。使用 Map 或是 List，也可以用 <code>@each...in</code> 的迴圈來遍歷整個 Map 或是 List。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$contentList</span>: (<span class=\"string\">'danger'</span>, <span class=\"string\">'normal'</span>, <span class=\"string\">'suck'</span>);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">each</span> <span class=\"variable\">$content</span> in <span class=\"variable\">$contentList</span> &#123;</div><div class=\"line\">  <span class=\"selector-class\">.tag</span>.#&#123;<span class=\"variable\">$content</span>&#125;::before &#123;</div><div class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"variable\">$content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.danger</span> &#123;&#125;</div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.normal</span> &#123;&#125;</div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.suck</span> &#123;&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"管理-z-index\"><a href=\"#管理-z-index\" class=\"headerlink\" title=\"管理 z-index\"></a>管理 <code>z-index</code></h5><p>運用 List 當中的 API 來管理複雜的 <code>z-index</code>。</p>\n<p><code>z-index</code> 一直是每個前端工程師的心頭之痛，因為很容易就使用 magic number 來管理。一般的解決方法是用變數的方式來管理：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zindex-dropdown-backdrop</span>:  <span class=\"number\">990</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-navbar</span>:            <span class=\"number\">1000</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-dropdown</span>:          <span class=\"number\">1000</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-fixed</span>:             <span class=\"number\">1030</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-sticky</span>:            <span class=\"number\">1030</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-modal-backdrop</span>:    <span class=\"number\">1040</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-modal</span>:             <span class=\"number\">1050</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-popover</span>:           <span class=\"number\">1060</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-tooltip</span>:           <span class=\"number\">1070</span> !default;</div><div class=\"line\"><span class=\"comment\">// 取自 bootstrap 代碼</span></div></pre></td></tr></table></figure>\n<p>我們可以運用 <code>index</code> 這個 API 搭配 List 達到類似的效果：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zIndexs</span>: (</div><div class=\"line\">  <span class=\"string\">'dropdown-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'navbar'</span>,</div><div class=\"line\">  <span class=\"string\">'normal'</span>,</div><div class=\"line\">  <span class=\"string\">'dropdown'</span>,</div><div class=\"line\">  <span class=\"string\">'fixed'</span>,</div><div class=\"line\">  <span class=\"string\">'sticky'</span>,</div><div class=\"line\">  <span class=\"string\">'modal-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'modal'</span>,</div><div class=\"line\">  <span class=\"string\">'popover'</span>,</div><div class=\"line\">  <span class=\"string\">'tooltip'</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.dropdown</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'dropdown'</span>) // 類似 indexOf</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.dropdown-backdrop &#123;</div><div class=\"line\">  z-index: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'dropdown-backdrop'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// ...</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'tooltip'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來，我們除了可以減少變數前綴的麻煩，也可以避免用區間來防止 <code>z-index</code> 被其他元素時插入的困擾。（只要直接在 List 加入值就好，不用再修改其他值）。</p>\n<p>以上 Map 與 List 的介紹用實例讓大家了解在實際開發時的運用，當然使用場景不限於以上兩種而已。</p>\n<p>我們之後會再優化這些 function。</p>\n<h6 id=\"其他-list-函數\"><a href=\"#其他-list-函數\" class=\"headerlink\" title=\"其他 list 函數\"></a>其他 list 函數</h6><ul>\n<li><code>nth</code></li>\n<li><code>index</code></li>\n<li><code>join</code></li>\n<li><code>append</code></li>\n<li><code>zip</code></li>\n<li><code>length</code></li>\n</ul>\n<h4 id=\"內建函數\"><a href=\"#內建函數\" class=\"headerlink\" title=\"內建函數\"></a>內建函數</h4><p>在 Sass 當中有一些函數可以幫助簡化 CSS 檔案。</p>\n<h5 id=\"darken-lighten\"><a href=\"#darken-lighten\" class=\"headerlink\" title=\"darken lighten\"></a><code>darken</code> <code>lighten</code></h5><p>這兩個函數在操作 hover 狀態時非常好用，有時候我們收到的需求是：「hover 後的顏色變暗 10%」，通常設計師會直接給你顏色，不過透過 darken, lighten 這兩個函式操作的話能夠讓我們在實際開發上更有彈性。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.btn</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</div><div class=\"line\">  &amp;:hover &#123; <span class=\"attribute\">background-color</span>: <span class=\"number\">#333</span>; &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>搭配 <code>darken</code>, <code>lighten</code></p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.btn</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</div><div class=\"line\">  &amp;:hover &#123; <span class=\"attribute\">background-color</span>: lighten(<span class=\"number\">#000</span>, <span class=\"number\">30%</span>); &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"rgba-rgb\"><a href=\"#rgba-rgb\" class=\"headerlink\" title=\"rgba rgb\"></a><code>rgba</code> <code>rgb</code></h5><p>Sass 支援 rgba 與 hex 混合的語法，你可以直接這樣寫：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: rgba(<span class=\"number\">#000</span>, <span class=\"number\">0.3</span>);</div><div class=\"line\">  <span class=\"comment\">// compiled</span></div><div class=\"line\">  <span class=\"attribute\">background-color</span>: rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.3</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>比起原生的語法要額外寫 RGB 這三個參數，直接用 16 進位的表示法相對簡潔許多。Sass 會自動偵測是否要幫你轉換。</p>\n<h5 id=\"invert\"><a href=\"#invert\" class=\"headerlink\" title=\"invert\"></a><code>invert</code></h5><p>將輸入的顏色反轉。</p>\n<h5 id=\"at-root\"><a href=\"#at-root\" class=\"headerlink\" title=\"@at-root\"></a><code>@at-root</code></h5><p>在開發時，如果想要 access 到外層的 class，又希望保持模組化所以將 class 寫在 nested 內時，<code>@at-root</code> 就相當好用。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"comment\">//...</span></div><div class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  @at-root body.active .tooltip-backdrop &#123;</div><div class=\"line\">    <span class=\"attribute\">position</span>: fixed;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span><span class=\"selector-class\">.active</span> <span class=\"selector-class\">.tooltip-backdrop</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: fixed;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>加入 <code>@at-root</code> 之後，編譯後會將 class 搬移到最外層，而不是在 tooltip 裏面。這在保持模組化時、不想將 class 寫在外層、不想導致太深層的巢狀 class 時相當有用。</p>\n<h4 id=\"mixin\"><a href=\"#mixin\" class=\"headerlink\" title=\"mixin\"></a>mixin</h4><p>mixin 在 autoprefixer 還沒有發佈之前，一直都被用來當作加入前綴使用。不過除了前綴之外，我們還能夠利用 mixin 做到許多事。像是：</p>\n<ul>\n<li>管理字體大小</li>\n<li>設定常見的 media query</li>\n<li>簡化 class</li>\n</ul>\n<p><code>mixin</code> 的撰寫方式是以 <code>@mixin</code> 作為開頭，呼叫時用 <code>@include</code>。</p>\n<h5 id=\"管理字體大小\"><a href=\"#管理字體大小\" class=\"headerlink\" title=\"管理字體大小\"></a>管理字體大小</h5><p>在 desktop 以及 mobile 上我們可能有不同的字體大小或字級想要管理，首先我們能夠用 map 宣告字體大小，再搭配 mixin 簡化流程。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$fontSizes</span>: (</div><div class=\"line\">  desktop: (</div><div class=\"line\">  \t<span class=\"string\">'x-large'</span>: <span class=\"number\">32px</span>,</div><div class=\"line\">    <span class=\"string\">'large'</span>: <span class=\"number\">30px</span>,</div><div class=\"line\">    <span class=\"string\">'medium'</span>: <span class=\"number\">26px</span>,</div><div class=\"line\">    <span class=\"string\">'normal'</span>: <span class=\"number\">18px</span>,</div><div class=\"line\">    <span class=\"string\">'small'</span>: <span class=\"number\">14px</span>,</div><div class=\"line\">    <span class=\"string\">'x-small'</span>: <span class=\"number\">12px</span></div><div class=\"line\">  ), </div><div class=\"line\">  mobile: (</div><div class=\"line\">    <span class=\"string\">'x-large'</span>: <span class=\"number\">28px</span>,</div><div class=\"line\">    <span class=\"string\">'large'</span>: <span class=\"number\">24px</span>,</div><div class=\"line\">    <span class=\"string\">'medium'</span>: <span class=\"number\">20px</span>,</div><div class=\"line\">    <span class=\"string\">'normal'</span>: <span class=\"number\">16px</span>,</div><div class=\"line\">    <span class=\"string\">'small'</span>: <span class=\"number\">12px</span>,</div><div class=\"line\">    <span class=\"string\">'x-small'</span>: <span class=\"number\">10px</span></div><div class=\"line\">  )</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> font-size(size: <span class=\"string\">\"normal\"</span>) &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (min-width: 768px) &#123;</div><div class=\"line\">    <span class=\"variable\">$desktop</span>: map-get(<span class=\"variable\">$fontSizes</span>, desktop);</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: map-get(<span class=\"variable\">$desktop</span>, size);</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (max-width: 767px) &#123;</div><div class=\"line\">    <span class=\"variable\">$mobile</span>: map-get(<span class=\"variable\">$fontSizes</span>, mobile);</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: map-get(<span class=\"variable\">$mobile</span>, size);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.article</span> &#123;</div><div class=\"line\">  @<span class=\"keyword\">include</span> font-size(normal);</div><div class=\"line\">  </div><div class=\"line\">  &amp;<span class=\"selector-class\">.large</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">include</span> font-size(large);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來可以很容易地在手機、桌面中切換不同的字級設定。</p>\n<h5 id=\"管理-media\"><a href=\"#管理-media\" class=\"headerlink\" title=\"管理 @media\"></a>管理 <code>@media</code></h5><p>在 class 寫一大堆 <code>@media</code> 是一件很頭痛的事，我們可以設定好 <code>$breakpoint</code> 的變數後，再利用 mixin 封裝。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$breakpoints</span>: (</div><div class=\"line\">  desktop: <span class=\"number\">960px</span></div><div class=\"line\">  mobile: <span class=\"number\">568px</span>,</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> for-mobile &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (max-width: map-get(<span class=\"variable\">$breakpoints</span>, <span class=\"string\">\"mobile\"</span>)) &#123;</div><div class=\"line\">    @<span class=\"keyword\">content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> for-desktop &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (min-width: map-get(<span class=\"variable\">$breakpoints</span>, <span class=\"string\">\"desktop\"</span>)) &#123;</div><div class=\"line\">    @<span class=\"keyword\">content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>你也可以將所有的 <code>breakpoint</code> 統一封裝為一個 mixin，並且透過傳入參數的方式來決定，不過分開的寫法比較直覺一些。</p>\n<h4 id=\"Function\"><a href=\"#Function\" class=\"headerlink\" title=\"Function\"></a>Function</h4><p>在 Sass 當中寫 function 非常簡單。宣告 function 時用 <code>@function</code> 表示：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function return123 &#123;</div><div class=\"line\">  @return <span class=\"string\">\"123\"</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>或者加入參數：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function returnString(<span class=\"variable\">$string</span>) &#123;</div><div class=\"line\">  @return <span class=\"variable\">$string</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">returnString(\"123\"); <span class=\"comment\">// \"123\"</span></div></pre></td></tr></table></figure>\n<p>Sass 裡頭有迴圈、for-loop、while 等等的功能，所以你可以客製化自己想要的函數，幫助開發。</p>\n<h4 id=\"Logging\"><a href=\"#Logging\" class=\"headerlink\" title=\"Logging\"></a>Logging</h4><p>在 sass 當中，我們可以利用 <code>@warn</code> 、<code>@error</code>、<code>@debug</code> 這兩個函數做更好的開發體驗。</p>\n <figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function getMessage(<span class=\"variable\">$message</span>, <span class=\"variable\">$type</span>: <span class=\"string\">\"error\"</span>) &#123;</div><div class=\"line\">  @<span class=\"keyword\">if</span> <span class=\"variable\">$type</span> == <span class=\"string\">\"error\"</span> &#123;</div><div class=\"line\">    @error <span class=\"variable\">$message</span>;</div><div class=\"line\">  &#125; @elseif <span class=\"variable\">$type</span> == <span class=\"string\">\"warn\"</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">warn</span> <span class=\"variable\">$message</span>;</div><div class=\"line\">  &#125; @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">debug</span> <span class=\"variable\">$meesage</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果你是使用原生的 Sass 編譯，則 error 會直接打斷編譯流程，並且印出錯誤在 stdout，使用 warn 的話不會打斷編譯，但會印出訊息在 stdout 上，而 debug 則是單純印出在 stdout 上。</p>\n<hr>\n<p>搭配以上的功能，我們來實作一些在開發上常見的函數吧！</p>\n<h4 id=\"BEM-utils\"><a href=\"#BEM-utils\" class=\"headerlink\" title=\"BEM utils\"></a>BEM utils</h4><p>為了讓 CSS 保持命名空間，我們常常使用 BEM 來組織 CSS 代碼。不過卻常常出現 <code>__</code>、<code>-</code>之類不太好看的符號，一不小心就可能打錯，我們可以使用 <code>mixin</code> 封裝這個功能。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">@<span class=\"keyword\">mixin</span> block(<span class=\"variable\">$block_name</span>) &#123;</div><div class=\"line\">  .#&#123;<span class=\"variable\">$block_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> element(<span class=\"variable\">$element_name</span>) &#123;</div><div class=\"line\">  @at-root &amp;__#&#123;<span class=\"variable\">$element_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> modifier(<span class=\"variable\">$modifier_name</span>) &#123;</div><div class=\"line\">  @at-root &amp;--#&#123;<span class=\"variable\">$modifier_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;\t</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">include</span> block(article-entry) &#123;</div><div class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  @<span class=\"keyword\">include</span> element(<span class=\"keyword\">content</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @<span class=\"keyword\">include</span> element(footer) &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</div><div class=\"line\">    @<span class=\"keyword\">include</span> modifier(larger) &#123;</div><div class=\"line\">      <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"selector-class\">.article-entry</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__content</span> &#123; <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__footer</span> &#123; <span class=\"attribute\">background-size</span>: <span class=\"number\">#fff</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__footer--larger</span> &#123; <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>; &#125;</div></pre></td></tr></table></figure>\n<p>注意到我們在 mixin 當中使用了 <code>@at-root</code>，所以編譯的 CSS 會一律放到最頂層，這可以解決 BEM 層數太深的問題，也可以在開發時保持良好的模組性。你也可以在 <code>mixin</code> 加上一些參數決定是否要套用 <code>@at-root</code> 來保持開發上的彈性。</p>\n<h4 id=\"z-index-管理\"><a href=\"#z-index-管理\" class=\"headerlink\" title=\"z-index 管理\"></a>z-index 管理</h4><p>在上面的例子當中，我們利用 <code>map-get</code> 來取值，在實際開發上我們可能會想要再簡化一些，現在搭配 <code>@function</code> 做改善。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zIndexs</span>: (</div><div class=\"line\">  <span class=\"string\">'dropdown-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'navbar'</span>,</div><div class=\"line\">  <span class=\"string\">'normal'</span>,</div><div class=\"line\">  <span class=\"string\">'dropdown'</span>,</div><div class=\"line\">  <span class=\"string\">'fixed'</span>,</div><div class=\"line\">  <span class=\"string\">'sticky'</span>,</div><div class=\"line\">  <span class=\"string\">'modal-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'modal'</span>,</div><div class=\"line\">  <span class=\"string\">'popover'</span>,</div><div class=\"line\">  <span class=\"string\">'tooltip'</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@function zindex(<span class=\"variable\">$name</span>: normal) &#123;</div><div class=\"line\">  <span class=\"variable\">$index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"variable\">$name</span>);</div><div class=\"line\">  if (!<span class=\"variable\">$index</span>) &#123;</div><div class=\"line\">    @error <span class=\"string\">\"#&#123;$name&#125; doesn't exist! please checkout your `$zIndexs` variable.\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @return <span class=\"variable\">$index</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.dropdown</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: zindex(<span class=\"string\">'dropdown'</span>) // 類似 indexOf</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.dropdown-backdrop &#123;</div><div class=\"line\">  z-index: zindex(<span class=\"string\">'dropdown-backdrop'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// ...</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: zindex(<span class=\"string\">'tooltip'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我們將 <code>$zIndexs</code> 包裝起來，並且如果傳入的參數並不存在於 <code>$zIndexs</code> 當中就會直接打斷編譯過程，並且顯示錯誤，也提供了相關的錯誤訊息給開發者參考。</p>\n<h4 id=\"引入-css-variable\"><a href=\"#引入-css-variable\" class=\"headerlink\" title=\"引入 css variable\"></a>引入 css variable</h4><p>目前比較新的瀏覽器都已經支援 css variable 了。我們可以將顏色等變數使用 css variable 重新撰寫，並且使用優雅降級來確保在其他瀏覽器也能正常工作。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#aaa</span>,</div><div class=\"line\">  font: <span class=\"number\">#333</span>,</div><div class=\"line\">  danger: red</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">:root &#123;</div><div class=\"line\">  @<span class=\"keyword\">each</span> <span class=\"variable\">$key</span>, <span class=\"variable\">$color</span> in <span class=\"variable\">$colors</span> &#123;</div><div class=\"line\">    --#&#123;key&#125;: <span class=\"variable\">$color</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> css(<span class=\"variable\">$prop</span>, <span class=\"variable\">$key</span>) &#123;</div><div class=\"line\">  #&#123;<span class=\"variable\">$prop</span>&#125;: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>);</div><div class=\"line\">  @<span class=\"keyword\">if</span> (map-has-key(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>) == false) &#123;</div><div class=\"line\">    @error <span class=\"string\">\"Unknown key `#&#123;$key&#125;`. checkout your `$colors` variable\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @supports (--foo: <span class=\"string\">\"bar\"</span>) &#123;</div><div class=\"line\">    #&#123;<span class=\"variable\">$prop</span>&#125;: var(--#&#123;<span class=\"variable\">$key</span>&#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  @<span class=\"keyword\">include</span> css(<span class=\"string\">'background-color'</span>, <span class=\"string\">\"main\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\">:root &#123;</div><div class=\"line\">  --main: <span class=\"number\">#aaa</span>;</div><div class=\"line\">  --<span class=\"attribute\">font</span>: <span class=\"number\">#333</span>;</div><div class=\"line\">  --danger: red;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#aaa</span>;</div><div class=\"line\">  @supports (--foo: <span class=\"string\">\"bar\"</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: var(--main);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這個 <code>@mixin</code> 寫得比較陽春一些，你可以加入更多參數或修改讓這個 <code>mixin</code> 能夠配合其他屬性。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>PostCSS, CSS in Javascript, styled-component，都是為了解決問題而發展出來的工具，不過 Sass 也有許多功能值得大家參考，這篇文章提出一些常見的開發問題，並使用 Sass 來解決。Sass 的函數並沒有想像中那麼複雜，而且功能強大，你甚至可以利用 Sass 的內建函數來建置 sin, cos 等三角函數幫助運算，撰寫排序演算法、使用遞迴（如果你想的話…）。</p>\n<p>使用 Sass 並不代表你需要拋棄 PostCSS 或其他工具帶來的便利性，像是 autoprefixer 以及 cssnano 等等，都是相當好用的插件。你甚至可以搭配使用帶來更快速及穩固的開發體驗。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>我發現有許多前端工程師只把 sass 當作有變數、nested class 跟 <code>&amp;</code> 的 CSS 來撰寫。</p>\n<p>在 Sass 當中有許多好用的函式跟功能，如果不知道如何使用的話，對一個強大的預處理器來說，這是件相當可惜的事情。<code>Sass3.5</code> 的更新加強了對 css variable 的支持。</p>\n<p>在考慮使用 CSS in Javascript 或是引入 PostCSS 的 plugin 之前，先看看是否能夠用 Sass 達到同樣的目的吧！</p>\n<h4 id=\"變數宣告\"><a href=\"#變數宣告\" class=\"headerlink\" title=\"變數宣告\"></a>變數宣告</h4><p>我們可以透過變數宣告 !defualt, !global</p>\n<h4 id=\"資料型別-List-Map\"><a href=\"#資料型別-List-Map\" class=\"headerlink\" title=\"資料型別 List, Map\"></a>資料型別 List, Map</h4><p>除了一般的變數用 <code>$</code> 開頭宣告之外，其實在 Sass 當中還有兩種資料型別，List 和 Map。List 就像一般 array，而 Map 有點像是 Object。</p>\n<p>如果運用得好，我們可以收斂一下常見的變數，像是 color, font, size 等等。同時 List 與 Map 在 Sass 當中提供了一些函數來操作，像是 <code>map-get</code> <code>map-has-key</code> 等等，以下我們以常見的顏色管理做舉例。</p>\n<h5 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h5><p>Sass 的 Map 類似 Javascript 當中的 Object 的功能，提供了 key-value 的方式儲存變數，並且內建一些函式以供操作。</p>\n<p>在顏色宣告時，我們通常都會這樣寫：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$mainColor</span>: <span class=\"number\">#aaa</span>;</div><div class=\"line\"><span class=\"variable\">$fontColor</span>: <span class=\"number\">#333</span>;</div><div class=\"line\"><span class=\"variable\">$dangerColor</span>: red;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.word</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">$fontColor</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"variable\">$mainColor</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.btn</span><span class=\"selector-class\">.danger</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"variable\">$dangerColor</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果將原本的變數改寫為 Map 的形式：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#aaa</span>,</div><div class=\"line\">  font: <span class=\"number\">#333</span>,</div><div class=\"line\">  danger: red</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.word</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, font);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, main);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.btn</span><span class=\"selector-class\">.danger</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, danger);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>當然，這個函數還有一些優化的空間，我們下面會再做介紹。</p>\n<h5 id=\"其他-API\"><a href=\"#其他-API\" class=\"headerlink\" title=\"其他 API\"></a>其他 API</h5><ul>\n<li>map-get</li>\n<li>map-has-key</li>\n<li>merge-map</li>\n</ul>\n<h5 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h5><p>List 可以簡單的聯想為 array，Sass 內建了一些函數提供操作 List。List 的內容可以是顏色、字串、甚至塞入 Map 也可以。比如說我們想要對一連串的 content 賦值：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.danger</span>::before &#123;</div><div class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"danger\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.normal</span>::before &#123;</div><div class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"normal\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//...</span></div></pre></td></tr></table></figure>\n<p>當內容一多，寫這種重複的 CSS 是一件很痛苦的事，這時候就可以使用 List 簡化操作。使用 Map 或是 List，也可以用 <code>@each...in</code> 的迴圈來遍歷整個 Map 或是 List。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$contentList</span>: (<span class=\"string\">'danger'</span>, <span class=\"string\">'normal'</span>, <span class=\"string\">'suck'</span>);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">each</span> <span class=\"variable\">$content</span> in <span class=\"variable\">$contentList</span> &#123;</div><div class=\"line\">  <span class=\"selector-class\">.tag</span>.#&#123;<span class=\"variable\">$content</span>&#125;::before &#123;</div><div class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"variable\">$content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.danger</span> &#123;&#125;</div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.normal</span> &#123;&#125;</div><div class=\"line\"><span class=\"selector-class\">.tag</span><span class=\"selector-class\">.suck</span> &#123;&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"管理-z-index\"><a href=\"#管理-z-index\" class=\"headerlink\" title=\"管理 z-index\"></a>管理 <code>z-index</code></h5><p>運用 List 當中的 API 來管理複雜的 <code>z-index</code>。</p>\n<p><code>z-index</code> 一直是每個前端工程師的心頭之痛，因為很容易就使用 magic number 來管理。一般的解決方法是用變數的方式來管理：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zindex-dropdown-backdrop</span>:  <span class=\"number\">990</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-navbar</span>:            <span class=\"number\">1000</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-dropdown</span>:          <span class=\"number\">1000</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-fixed</span>:             <span class=\"number\">1030</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-sticky</span>:            <span class=\"number\">1030</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-modal-backdrop</span>:    <span class=\"number\">1040</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-modal</span>:             <span class=\"number\">1050</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-popover</span>:           <span class=\"number\">1060</span> !default;</div><div class=\"line\"><span class=\"variable\">$zindex-tooltip</span>:           <span class=\"number\">1070</span> !default;</div><div class=\"line\"><span class=\"comment\">// 取自 bootstrap 代碼</span></div></pre></td></tr></table></figure>\n<p>我們可以運用 <code>index</code> 這個 API 搭配 List 達到類似的效果：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zIndexs</span>: (</div><div class=\"line\">  <span class=\"string\">'dropdown-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'navbar'</span>,</div><div class=\"line\">  <span class=\"string\">'normal'</span>,</div><div class=\"line\">  <span class=\"string\">'dropdown'</span>,</div><div class=\"line\">  <span class=\"string\">'fixed'</span>,</div><div class=\"line\">  <span class=\"string\">'sticky'</span>,</div><div class=\"line\">  <span class=\"string\">'modal-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'modal'</span>,</div><div class=\"line\">  <span class=\"string\">'popover'</span>,</div><div class=\"line\">  <span class=\"string\">'tooltip'</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.dropdown</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'dropdown'</span>) // 類似 indexOf</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.dropdown-backdrop &#123;</div><div class=\"line\">  z-index: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'dropdown-backdrop'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// ...</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"string\">'tooltip'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來，我們除了可以減少變數前綴的麻煩，也可以避免用區間來防止 <code>z-index</code> 被其他元素時插入的困擾。（只要直接在 List 加入值就好，不用再修改其他值）。</p>\n<p>以上 Map 與 List 的介紹用實例讓大家了解在實際開發時的運用，當然使用場景不限於以上兩種而已。</p>\n<p>我們之後會再優化這些 function。</p>\n<h6 id=\"其他-list-函數\"><a href=\"#其他-list-函數\" class=\"headerlink\" title=\"其他 list 函數\"></a>其他 list 函數</h6><ul>\n<li><code>nth</code></li>\n<li><code>index</code></li>\n<li><code>join</code></li>\n<li><code>append</code></li>\n<li><code>zip</code></li>\n<li><code>length</code></li>\n</ul>\n<h4 id=\"內建函數\"><a href=\"#內建函數\" class=\"headerlink\" title=\"內建函數\"></a>內建函數</h4><p>在 Sass 當中有一些函數可以幫助簡化 CSS 檔案。</p>\n<h5 id=\"darken-lighten\"><a href=\"#darken-lighten\" class=\"headerlink\" title=\"darken lighten\"></a><code>darken</code> <code>lighten</code></h5><p>這兩個函數在操作 hover 狀態時非常好用，有時候我們收到的需求是：「hover 後的顏色變暗 10%」，通常設計師會直接給你顏色，不過透過 darken, lighten 這兩個函式操作的話能夠讓我們在實際開發上更有彈性。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.btn</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</div><div class=\"line\">  &amp;:hover &#123; <span class=\"attribute\">background-color</span>: <span class=\"number\">#333</span>; &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>搭配 <code>darken</code>, <code>lighten</code></p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.btn</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</div><div class=\"line\">  &amp;:hover &#123; <span class=\"attribute\">background-color</span>: lighten(<span class=\"number\">#000</span>, <span class=\"number\">30%</span>); &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"rgba-rgb\"><a href=\"#rgba-rgb\" class=\"headerlink\" title=\"rgba rgb\"></a><code>rgba</code> <code>rgb</code></h5><p>Sass 支援 rgba 與 hex 混合的語法，你可以直接這樣寫：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: rgba(<span class=\"number\">#000</span>, <span class=\"number\">0.3</span>);</div><div class=\"line\">  <span class=\"comment\">// compiled</span></div><div class=\"line\">  <span class=\"attribute\">background-color</span>: rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.3</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>比起原生的語法要額外寫 RGB 這三個參數，直接用 16 進位的表示法相對簡潔許多。Sass 會自動偵測是否要幫你轉換。</p>\n<h5 id=\"invert\"><a href=\"#invert\" class=\"headerlink\" title=\"invert\"></a><code>invert</code></h5><p>將輸入的顏色反轉。</p>\n<h5 id=\"at-root\"><a href=\"#at-root\" class=\"headerlink\" title=\"@at-root\"></a><code>@at-root</code></h5><p>在開發時，如果想要 access 到外層的 class，又希望保持模組化所以將 class 寫在 nested 內時，<code>@at-root</code> 就相當好用。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"comment\">//...</span></div><div class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  @at-root body.active .tooltip-backdrop &#123;</div><div class=\"line\">    <span class=\"attribute\">position</span>: fixed;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span><span class=\"selector-class\">.active</span> <span class=\"selector-class\">.tooltip-backdrop</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">position</span>: fixed;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>加入 <code>@at-root</code> 之後，編譯後會將 class 搬移到最外層，而不是在 tooltip 裏面。這在保持模組化時、不想將 class 寫在外層、不想導致太深層的巢狀 class 時相當有用。</p>\n<h4 id=\"mixin\"><a href=\"#mixin\" class=\"headerlink\" title=\"mixin\"></a>mixin</h4><p>mixin 在 autoprefixer 還沒有發佈之前，一直都被用來當作加入前綴使用。不過除了前綴之外，我們還能夠利用 mixin 做到許多事。像是：</p>\n<ul>\n<li>管理字體大小</li>\n<li>設定常見的 media query</li>\n<li>簡化 class</li>\n</ul>\n<p><code>mixin</code> 的撰寫方式是以 <code>@mixin</code> 作為開頭，呼叫時用 <code>@include</code>。</p>\n<h5 id=\"管理字體大小\"><a href=\"#管理字體大小\" class=\"headerlink\" title=\"管理字體大小\"></a>管理字體大小</h5><p>在 desktop 以及 mobile 上我們可能有不同的字體大小或字級想要管理，首先我們能夠用 map 宣告字體大小，再搭配 mixin 簡化流程。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$fontSizes</span>: (</div><div class=\"line\">  desktop: (</div><div class=\"line\">  \t<span class=\"string\">'x-large'</span>: <span class=\"number\">32px</span>,</div><div class=\"line\">    <span class=\"string\">'large'</span>: <span class=\"number\">30px</span>,</div><div class=\"line\">    <span class=\"string\">'medium'</span>: <span class=\"number\">26px</span>,</div><div class=\"line\">    <span class=\"string\">'normal'</span>: <span class=\"number\">18px</span>,</div><div class=\"line\">    <span class=\"string\">'small'</span>: <span class=\"number\">14px</span>,</div><div class=\"line\">    <span class=\"string\">'x-small'</span>: <span class=\"number\">12px</span></div><div class=\"line\">  ), </div><div class=\"line\">  mobile: (</div><div class=\"line\">    <span class=\"string\">'x-large'</span>: <span class=\"number\">28px</span>,</div><div class=\"line\">    <span class=\"string\">'large'</span>: <span class=\"number\">24px</span>,</div><div class=\"line\">    <span class=\"string\">'medium'</span>: <span class=\"number\">20px</span>,</div><div class=\"line\">    <span class=\"string\">'normal'</span>: <span class=\"number\">16px</span>,</div><div class=\"line\">    <span class=\"string\">'small'</span>: <span class=\"number\">12px</span>,</div><div class=\"line\">    <span class=\"string\">'x-small'</span>: <span class=\"number\">10px</span></div><div class=\"line\">  )</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> font-size(size: <span class=\"string\">\"normal\"</span>) &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (min-width: 768px) &#123;</div><div class=\"line\">    <span class=\"variable\">$desktop</span>: map-get(<span class=\"variable\">$fontSizes</span>, desktop);</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: map-get(<span class=\"variable\">$desktop</span>, size);</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (max-width: 767px) &#123;</div><div class=\"line\">    <span class=\"variable\">$mobile</span>: map-get(<span class=\"variable\">$fontSizes</span>, mobile);</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: map-get(<span class=\"variable\">$mobile</span>, size);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.article</span> &#123;</div><div class=\"line\">  @<span class=\"keyword\">include</span> font-size(normal);</div><div class=\"line\">  </div><div class=\"line\">  &amp;<span class=\"selector-class\">.large</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">include</span> font-size(large);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來可以很容易地在手機、桌面中切換不同的字級設定。</p>\n<h5 id=\"管理-media\"><a href=\"#管理-media\" class=\"headerlink\" title=\"管理 @media\"></a>管理 <code>@media</code></h5><p>在 class 寫一大堆 <code>@media</code> 是一件很頭痛的事，我們可以設定好 <code>$breakpoint</code> 的變數後，再利用 mixin 封裝。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$breakpoints</span>: (</div><div class=\"line\">  desktop: <span class=\"number\">960px</span></div><div class=\"line\">  mobile: <span class=\"number\">568px</span>,</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> for-mobile &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (max-width: map-get(<span class=\"variable\">$breakpoints</span>, <span class=\"string\">\"mobile\"</span>)) &#123;</div><div class=\"line\">    @<span class=\"keyword\">content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> for-desktop &#123;</div><div class=\"line\">  @<span class=\"keyword\">media</span> screen and (min-width: map-get(<span class=\"variable\">$breakpoints</span>, <span class=\"string\">\"desktop\"</span>)) &#123;</div><div class=\"line\">    @<span class=\"keyword\">content</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>你也可以將所有的 <code>breakpoint</code> 統一封裝為一個 mixin，並且透過傳入參數的方式來決定，不過分開的寫法比較直覺一些。</p>\n<h4 id=\"Function\"><a href=\"#Function\" class=\"headerlink\" title=\"Function\"></a>Function</h4><p>在 Sass 當中寫 function 非常簡單。宣告 function 時用 <code>@function</code> 表示：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function return123 &#123;</div><div class=\"line\">  @return <span class=\"string\">\"123\"</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>或者加入參數：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function returnString(<span class=\"variable\">$string</span>) &#123;</div><div class=\"line\">  @return <span class=\"variable\">$string</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">returnString(\"123\"); <span class=\"comment\">// \"123\"</span></div></pre></td></tr></table></figure>\n<p>Sass 裡頭有迴圈、for-loop、while 等等的功能，所以你可以客製化自己想要的函數，幫助開發。</p>\n<h4 id=\"Logging\"><a href=\"#Logging\" class=\"headerlink\" title=\"Logging\"></a>Logging</h4><p>在 sass 當中，我們可以利用 <code>@warn</code> 、<code>@error</code>、<code>@debug</code> 這兩個函數做更好的開發體驗。</p>\n <figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">@function getMessage(<span class=\"variable\">$message</span>, <span class=\"variable\">$type</span>: <span class=\"string\">\"error\"</span>) &#123;</div><div class=\"line\">  @<span class=\"keyword\">if</span> <span class=\"variable\">$type</span> == <span class=\"string\">\"error\"</span> &#123;</div><div class=\"line\">    @error <span class=\"variable\">$message</span>;</div><div class=\"line\">  &#125; @elseif <span class=\"variable\">$type</span> == <span class=\"string\">\"warn\"</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">warn</span> <span class=\"variable\">$message</span>;</div><div class=\"line\">  &#125; @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">debug</span> <span class=\"variable\">$meesage</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果你是使用原生的 Sass 編譯，則 error 會直接打斷編譯流程，並且印出錯誤在 stdout，使用 warn 的話不會打斷編譯，但會印出訊息在 stdout 上，而 debug 則是單純印出在 stdout 上。</p>\n<hr>\n<p>搭配以上的功能，我們來實作一些在開發上常見的函數吧！</p>\n<h4 id=\"BEM-utils\"><a href=\"#BEM-utils\" class=\"headerlink\" title=\"BEM utils\"></a>BEM utils</h4><p>為了讓 CSS 保持命名空間，我們常常使用 BEM 來組織 CSS 代碼。不過卻常常出現 <code>__</code>、<code>-</code>之類不太好看的符號，一不小心就可能打錯，我們可以使用 <code>mixin</code> 封裝這個功能。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">@<span class=\"keyword\">mixin</span> block(<span class=\"variable\">$block_name</span>) &#123;</div><div class=\"line\">  .#&#123;<span class=\"variable\">$block_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> element(<span class=\"variable\">$element_name</span>) &#123;</div><div class=\"line\">  @at-root &amp;__#&#123;<span class=\"variable\">$element_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> modifier(<span class=\"variable\">$modifier_name</span>) &#123;</div><div class=\"line\">  @at-root &amp;--#&#123;<span class=\"variable\">$modifier_name</span>&#125; &#123; @<span class=\"keyword\">content</span>; &#125;\t</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">include</span> block(article-entry) &#123;</div><div class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  @<span class=\"keyword\">include</span> element(<span class=\"keyword\">content</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @<span class=\"keyword\">include</span> element(footer) &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</div><div class=\"line\">    @<span class=\"keyword\">include</span> modifier(larger) &#123;</div><div class=\"line\">      <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"selector-class\">.article-entry</span> &#123; <span class=\"attribute\">padding</span>: <span class=\"number\">20px</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__content</span> &#123; <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__footer</span> &#123; <span class=\"attribute\">background-size</span>: <span class=\"number\">#fff</span>; &#125;</div><div class=\"line\"><span class=\"selector-class\">.article-entry__footer--larger</span> &#123; <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>; &#125;</div></pre></td></tr></table></figure>\n<p>注意到我們在 mixin 當中使用了 <code>@at-root</code>，所以編譯的 CSS 會一律放到最頂層，這可以解決 BEM 層數太深的問題，也可以在開發時保持良好的模組性。你也可以在 <code>mixin</code> 加上一些參數決定是否要套用 <code>@at-root</code> 來保持開發上的彈性。</p>\n<h4 id=\"z-index-管理\"><a href=\"#z-index-管理\" class=\"headerlink\" title=\"z-index 管理\"></a>z-index 管理</h4><p>在上面的例子當中，我們利用 <code>map-get</code> 來取值，在實際開發上我們可能會想要再簡化一些，現在搭配 <code>@function</code> 做改善。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$zIndexs</span>: (</div><div class=\"line\">  <span class=\"string\">'dropdown-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'navbar'</span>,</div><div class=\"line\">  <span class=\"string\">'normal'</span>,</div><div class=\"line\">  <span class=\"string\">'dropdown'</span>,</div><div class=\"line\">  <span class=\"string\">'fixed'</span>,</div><div class=\"line\">  <span class=\"string\">'sticky'</span>,</div><div class=\"line\">  <span class=\"string\">'modal-backdrop'</span>,</div><div class=\"line\">  <span class=\"string\">'modal'</span>,</div><div class=\"line\">  <span class=\"string\">'popover'</span>,</div><div class=\"line\">  <span class=\"string\">'tooltip'</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">@function zindex(<span class=\"variable\">$name</span>: normal) &#123;</div><div class=\"line\">  <span class=\"variable\">$index</span>: index(<span class=\"variable\">$zIndexs</span>, <span class=\"variable\">$name</span>);</div><div class=\"line\">  if (!<span class=\"variable\">$index</span>) &#123;</div><div class=\"line\">    @error <span class=\"string\">\"#&#123;$name&#125; doesn't exist! please checkout your `$zIndexs` variable.\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @return <span class=\"variable\">$index</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.dropdown</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: zindex(<span class=\"string\">'dropdown'</span>) // 類似 indexOf</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.dropdown-backdrop &#123;</div><div class=\"line\">  z-index: zindex(<span class=\"string\">'dropdown-backdrop'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// ...</span></div><div class=\"line\"><span class=\"selector-class\">.tooltip</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">z-index</span>: zindex(<span class=\"string\">'tooltip'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>我們將 <code>$zIndexs</code> 包裝起來，並且如果傳入的參數並不存在於 <code>$zIndexs</code> 當中就會直接打斷編譯過程，並且顯示錯誤，也提供了相關的錯誤訊息給開發者參考。</p>\n<h4 id=\"引入-css-variable\"><a href=\"#引入-css-variable\" class=\"headerlink\" title=\"引入 css variable\"></a>引入 css variable</h4><p>目前比較新的瀏覽器都已經支援 css variable 了。我們可以將顏色等變數使用 css variable 重新撰寫，並且使用優雅降級來確保在其他瀏覽器也能正常工作。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#aaa</span>,</div><div class=\"line\">  font: <span class=\"number\">#333</span>,</div><div class=\"line\">  danger: red</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">:root &#123;</div><div class=\"line\">  @<span class=\"keyword\">each</span> <span class=\"variable\">$key</span>, <span class=\"variable\">$color</span> in <span class=\"variable\">$colors</span> &#123;</div><div class=\"line\">    --#&#123;key&#125;: <span class=\"variable\">$color</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> css(<span class=\"variable\">$prop</span>, <span class=\"variable\">$key</span>) &#123;</div><div class=\"line\">  #&#123;<span class=\"variable\">$prop</span>&#125;: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>);</div><div class=\"line\">  @<span class=\"keyword\">if</span> (map-has-key(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>) == false) &#123;</div><div class=\"line\">    @error <span class=\"string\">\"Unknown key `#&#123;$key&#125;`. checkout your `$colors` variable\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  @supports (--foo: <span class=\"string\">\"bar\"</span>) &#123;</div><div class=\"line\">    #&#123;<span class=\"variable\">$prop</span>&#125;: var(--#&#123;<span class=\"variable\">$key</span>&#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  @<span class=\"keyword\">include</span> css(<span class=\"string\">'background-color'</span>, <span class=\"string\">\"main\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// compiled</span></div><div class=\"line\">:root &#123;</div><div class=\"line\">  --main: <span class=\"number\">#aaa</span>;</div><div class=\"line\">  --<span class=\"attribute\">font</span>: <span class=\"number\">#333</span>;</div><div class=\"line\">  --danger: red;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#aaa</span>;</div><div class=\"line\">  @supports (--foo: <span class=\"string\">\"bar\"</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: var(--main);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這個 <code>@mixin</code> 寫得比較陽春一些，你可以加入更多參數或修改讓這個 <code>mixin</code> 能夠配合其他屬性。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>PostCSS, CSS in Javascript, styled-component，都是為了解決問題而發展出來的工具，不過 Sass 也有許多功能值得大家參考，這篇文章提出一些常見的開發問題，並使用 Sass 來解決。Sass 的函數並沒有想像中那麼複雜，而且功能強大，你甚至可以利用 Sass 的內建函數來建置 sin, cos 等三角函數幫助運算，撰寫排序演算法、使用遞迴（如果你想的話…）。</p>\n<p>使用 Sass 並不代表你需要拋棄 PostCSS 或其他工具帶來的便利性，像是 autoprefixer 以及 cssnano 等等，都是相當好用的插件。你甚至可以搭配使用帶來更快速及穩固的開發體驗。</p>\n"},{"title":"飛機能飛嗎 — 天氣造成的空難","_content":"\n*我並不是機師或是受過訓練的專業人士，只是剛好家住在機場附近，喜歡看看飛機了解一下空難而已，以上言論難免有錯誤之處，盡請斧正。另外本篇文章可能會造成閱讀者的情緒不安或焦躁，在閱讀前請三思*\n\n![松山機場，飛機起飛](https://cdn-images-1.medium.com/max/2000/1*gHsRVWF0sgzs9OkDmN_7nQ.jpeg)\n\n最近這幾天長榮員工因尼莎颱風集體請天災假，除了引起廣大迴響跟在 PTT 上實況飛機降落情形外，好像也就這樣了。剛好天時地利，寫篇關於天氣造成的空難，希望能夠讓各位（以及自己）更了解天氣對飛機產生的影響。\n\n剛搬完新家兩個月，大約在行天宮靠近飛機巷的位置，從窗外的陽台就能聽見、看見 20 幾架飛機降落，當天的颱風夜也是。\n\n我對飛機跟機師一直以來都是抱持著景仰的心態，跟軟體開發不同，那是一個無法容忍 bug 的世界，任何一個失誤都會造成無法挽回的結果。同時，撰寫一個穩定的飛機內部程式，代碼數應該就超過 100 萬了吧？已經遠超出我目前寫過的代碼了。\n\n### 前言 — 你有勇氣嗎？\n\n**在閱讀本篇文章之前，請先確認自己對空難的接受度。**\n\n如果你是那種會在颱風夜的機場大呼小叫的乘客，希望你看完這篇文章後能夠學會閉嘴；如果你上飛機第一件事是睡覺而不是看一下逃生門在哪，希望你以後會記得。\n\n### 天氣對飛機造成的影響\n\n#### 風\n\n現代的飛機設計通常都可以應付天氣惡劣的狀況。即使如此，在**起飛**、**降落**這兩個程序當中，仍然會有許多突發狀況。\n\n起飛時，因為飛機在滿載燃油、乘客的狀況下起飛，又因為剛開始的速度不足，需要靠[襟翼](https://www.wikiwand.com/zh-tw/%E8%A5%9F%E7%BF%BC)、[縫翼](https://www.wikiwand.com/zh-tw/%E5%89%8D%E7%BC%98%E7%BC%9D%E7%BF%BC)這兩個機翼的幫忙來提昇受風面積、增加昇力，飛機才能夠順利起飛。\n\n如果這時風向突然改變，從逆風變為順風，就有可能因為空速不足而導致升力降低。通常會提高機鼻以及增加動力來獲得升力。\n\n但是在颱風這種極端天氣下，如果風速的變化相當劇烈，飛機很容易受到影響，如果來不及在風速改變時作出反應（飛機加速、減速都需要時間），很有可能來不及控制飛機就出事了。\n\n下降時也是一樣，如果突然由逆風變順風，導致降落速度增加，甚至是風切變等狀況，在颱風的影響下所有的風速都會對飛機產生巨大的影響。\n\n風切變簡單來說就是風速、風向在兩點之間的急劇變化。飛機這種龐然大物很容易受到風的影響，如果風速急劇變化，會導致飛機在短時間內有劇烈的速度、高度變化，這也是為什麼在颱風降落時會有大怒神的感覺。（相信我，你不會想要體驗的）\n\n降落速度太快，飛機就會衝出跑道；速度太慢，飛機有可能失速而垂直落地。\n\n> *我搭飛機那麼多次遇到颱風也沒事啊*\n\n當然，機長們受過專業的訓練，會盡量地往天氣最好的地方飛行，降落時也會無所不用其極地找出最佳的進場時機。但[中華航空642班機](https://www.wikiwand.com/zh/%E4%B8%AD%E8%8F%AF%E8%88%AA%E7%A9%BA642%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)就沒有那麼幸運了。\n\n這台飛往香港的班機中，因為當天的天氣不佳，側風在下降時甚至超出標準，但機長仍然選擇降落，最後因為被起降架無法承受負荷而斷裂，右機翼斷裂往右翻滾，最後再跑道的草皮上停止。\n\n看完你一定會想，WTF 都已經降落了還空難，怎麼那麼雖小？是的。\n\n除了天氣本身會直接影響飛行之外，這場空難的最主要原因是機長與副機長並未按照標準程序操作。\n\n蛤？不按照標準程序操作，機長跟副機長也太不專業了吧？在責怪機師不專業之前，我們先想想他們要承擔的責任有哪些。\n\n- 把乘客平安送到目的地\n- 聽命公司的要求起飛（而非出自專業判斷）\n- 若決定停飛，可能被公司檢討，可能會上明日報紙頭條，可能會被其他航空公司嘲笑\n- 若決定不降落，可能會被公司檢討，受到乘客指責，明日上頭條\n\n有沒有發現什麼不對勁了？機師的判斷竟不全然來自專業，而是受到多方面的影響，這是多麽不合理的一件事情。\n\n機師也是人，難免會夾雜情緒在裡頭。所以儘管天氣不允許，機師們還是得咬牙放手一搏。儘管現在現代飛機的設計已經相當進步，但我們真的能夠全身而退嗎？\n\n![松山機場，飛機降落](https://cdn-images-1.medium.com/max/1250/1*yUOg0sYd5bbnqpf-8gwrew.jpeg)\n\n### 霧、雨\n\n霧跟雨是相當常見的天氣因素。霧最直接的影響就是能見度。飛機目前可以靠儀器降落系統（ILS）完成降落。這個精密的儀器能夠告訴飛機跑道的中線，以及下滑的軌道，至於更詳細的原理可以[參考維基百科](https://www.wikiwand.com/zh-tw/%E4%BB%AA%E8%A1%A8%E7%9D%80%E9%99%86%E7%B3%BB%E7%BB%9F)。\n\n但是飛行員通常還是需要目視跑道，確認飛機飛在正確的路線上。關於目視跑道有一套規定，飛行員如果找不到跑道，最低能夠下降到某個標準高度。\n\n如果在這個標準高度內仍然沒有找到跑道就要執行迷失進場（missing approach）程序並且重飛（Go around），但有時候因為機師過於自信、受外力影響、天氣影響等等原因，可能就會不遵守此程序。\n\n像是[波蘭空軍圖-154墜機事件](https://www.wikiwand.com/zh-tw/2010%E5%B9%B4%E6%B3%A2%E5%85%B0%E7%A9%BA%E5%86%9B%E5%9B%BE-154%E5%9D%A0%E6%9C%BA%E4%BA%8B%E4%BB%B6#/.E4.BA.8B.E6.95.85.E8.B0.83.E6.9F.A5)就是一個相當經典的例子。\n\n這架載著波蘭總統[列赫·卡辛斯基](https://www.wikiwand.com/zh-tw/%E8%90%8A%E8%B5%AB%C2%B7%E5%8D%A1%E6%AC%BD%E6%96%AF%E5%9F%BA)以及多個高層長官的飛機，企圖在俄羅斯斯摩棱斯克降落時墜毀。當時因為機場起大霧，能見度只有 500 公尺左右，因此塔台建議飛行員直接飛往備降機場。\n\n但此建議被機長拒絕，並且嘗試到 100 公尺高度時若不能降落在使用自動駕駛儀重飛。\n\n結果導致機翼撞上樹梢墜落至地面解體，起火燃燒。機上乘客與機組人員 97 名全部遇難。\n\n當時調查人員的結果認為，當時飛行員承受了間接壓力。有波蘭外交部禮賓司長、波蘭空軍司令官在後頭盯著你，硬著頭皮也要開下去。結果就釀成悲劇了。\n\n前幾年發生的[復興航空222號班機空難](https://www.wikiwand.com/zh/%E5%BE%A9%E8%88%88%E8%88%AA%E7%A9%BA222%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3#/.E4.BA.8B.E6.95.85.E5.8E.9F.E5.9B.A0)也是因為能見度影響、飛行員未遵守盲降標準而讓飛機在高度過低的情況下撞上樹林。（當然除了未遵守標準降落還有其他因素綜合在一起才導致這場悲劇）。\n\n#### 其他因能見度導致的空難\n\n- [新加坡航空006號班機空難](https://www.wikiwand.com/zh/%E6%96%B0%E5%8A%A0%E5%9D%A1%E8%88%AA%E7%A9%BA006%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)\n\n![松山機場，飛機降落](https://cdn-images-1.medium.com/max/1250/1*bs5ghlNGIT6QyXHsuo6OFA.jpeg)\n\n### 冰雹\n\n冰雹對飛機來說是個相當可怕的夢魘，因為時速高達 800 ~ 900 公里的飛機，撞到冰雹可不是鬧著玩的。如果撞到擋風玻璃有可能會導致碎裂，被引擎吸入也可能導致引擎故障。[南方航空242號班機空難](https://www.wikiwand.com/zh-tw/%E5%8D%97%E6%96%B9%E8%88%AA%E7%A9%BA242%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)就是因為在暴風雨區被冰雹侵襲，導致兩具引擎熄火故障，最後因迫降失敗而墜毀在公路上。\n\n### 其他因天氣因素而觸發的空難\n\n如果你對因天氣引起的空難有興趣，可以參考[維基百科的連結](https://zh.wikipedia.org/wiki/Category:%E5%A4%A9%E6%B0%A3%E5%9B%A0%E7%B4%A0%E8%A7%B8%E7%99%BC%E7%9A%84%E8%88%AA%E7%A9%BA%E4%BA%8B%E6%95%85)，或許可以給你更多的啟發。\n\n事實上儘管是天氣因素影響，但仍然有 80% 的空難是因為人為錯誤而發生的。關於空難，很常見的心態是：**「這次不一樣」**\n\n因為科技進步，所以這次不會墜機；\n\n因為有XXX輔助，所以這次不會墜機；\n\n因為已經建立了標準程序，所以這次不會墜機；\n\n因為已經…，所以這次不會…。\n\n這次不一樣實在是個可怕的心態。\n\n### 如果不幸發生空難\n\n人生總是充滿著意外，僅管搭飛機的意外次數已經遠小於車禍（兩位受過正規訓練的機師、精密儀器輔助的飛機），要讓飛機墜毀是一件不容易的事。但我們還是要以防萬一。\n\n- 在每趟飛行前記得保旅行平安險及旅行不便險，確保飛機在任何狀況下延誤，或是不幸發生空難時，能夠獲得最大的保障。至於如何挑選保險就看各位的需求了。\n- 如果在飛機上發生空難，請先保護自己再去想辦法救別人。確定氧氣罩戴好能夠吸到氧氣，再來幫助別人。\n- **在起飛前靜下心來聽空服員解釋逃生設備以及使用方式，他們很有可能救你一命。**\n- 採取防撞姿勢，雙手抱頭向前彎曲，頭貼在前方的座椅上，將撞擊力道降到最低。（以上描述僅為示意，詳細的防撞姿勢以空服員指導為準）\n- 平時就當一位合格的旅客，不吵鬧、不喧嘩、不對空服員、地勤大呼小叫、多積點陰德。讓服務你的人心情舒適是確保整趟旅程品質的不二法門。\n\n### 接下來可以怎麼做？\n\n- 僅靠政府、民航局來監督航空公司已經不太可靠。但人民團結起來的力量不容忽視，為了自己的生命著想，希望你能多關注這方面的議題，適時發聲與撻伐（記得理性溝通），讓航空公司想要說幹話的時候先三思。\n- 嚴格遵守飛安標準。關於起飛與降落有一套標準規範（根據飛機與航空公司各有不同），必須要求航空公司嚴格遵守。\n- 建立配套措施，讓颱風天仍然得上班的行業有個安心工作的環境。\n\n### 結論\n\n#### 1. 尊重專業\n\n無論何時我們都應該尊重專業，不僅是機上的機師，各行各業皆如此。不過尊重專業的前提是對方要是位專業人士。\n\n#### 2. 讓錯誤被大家看見\n\n空難不應該是大家說聲 R.I.P 就了事了，如果幾十人甚至幾百人的生命只能換來 R.I.P 的話是很令人扼腕的結局。每場空難都是相當珍貴的經驗。\n\n#### 3. 創造讓機組人員能夠安心的環境\n\n這在現在的台灣或許還是天方夜譚。但對於不合理的工時、環境、要求的公司，我們應該要能夠抵制或是拒乘，讓雙方的談判籌碼對等，才有扭轉的空間。而機師能夠心無旁騖地，依照自己的專業而非高層壓力做判斷。做得好就鼓勵，不按照程序飛行的機師我們也要幹到爆，讓他們知道背後都是有雙眼睛在監督著的。\n\n#### 4.不要讓天氣控制了情緒\n\n大家都想搭飛機，前往目的地。但無論如何，安全仍然是最重要的事，我們能做的是緩和自己的情緒。\n\n------\n\n停飛不是兒戲，不管對機長、航空公司、乘客來講都是個耗時、花費金錢的決定。\n\n如果機師不需要再背負上層壓力；如果對於惡劣天氣的應對不是先試試看再說；如果公司講幹話、做蠢事能夠受到制裁，或許大家都可以過得輕鬆一點。\n\n好吧講太遠了。\n\n最後如果你對飛機、空難有興趣的話，可以搜尋看看 Discovery 的空中浩劫，你會發現空難的原因五花八門，遠超乎你的想像。有把飛機給小孩開結果墜機的；有兩台飛機在跑道上互撞直接罹難的；有在天空上沒有燃油最後滑翔到機場的；有起飛時踩著煞車硬要飛結果墜機的；有自動駕駛跟駕駛操作衝突而墜機的；有飛機不聽話結果墜機的；有因為貨艙放太多酒精結果燒起來而墜機的……，或許這些看似與我們無關的空難，能夠對你有些幫助。\n\n> 本篇文章無意對任何機師、機組人員提出批評，只是分享個人觀點以及整理因天氣因素發生的空難事件。\n\n------\n\n**最後，祝福每位機師跟乘客旅途愉快。**\n\n> Bon Vayage!\n","source":"_posts/aircrash-extreme-weather.md","raw":"---\ntitle: 飛機能飛嗎 — 天氣造成的空難\ncategories:\n  - 雜談\ntags:\n  - 飛機\n  - 空難\n  - 天氣\n---\n\n*我並不是機師或是受過訓練的專業人士，只是剛好家住在機場附近，喜歡看看飛機了解一下空難而已，以上言論難免有錯誤之處，盡請斧正。另外本篇文章可能會造成閱讀者的情緒不安或焦躁，在閱讀前請三思*\n\n![松山機場，飛機起飛](https://cdn-images-1.medium.com/max/2000/1*gHsRVWF0sgzs9OkDmN_7nQ.jpeg)\n\n最近這幾天長榮員工因尼莎颱風集體請天災假，除了引起廣大迴響跟在 PTT 上實況飛機降落情形外，好像也就這樣了。剛好天時地利，寫篇關於天氣造成的空難，希望能夠讓各位（以及自己）更了解天氣對飛機產生的影響。\n\n剛搬完新家兩個月，大約在行天宮靠近飛機巷的位置，從窗外的陽台就能聽見、看見 20 幾架飛機降落，當天的颱風夜也是。\n\n我對飛機跟機師一直以來都是抱持著景仰的心態，跟軟體開發不同，那是一個無法容忍 bug 的世界，任何一個失誤都會造成無法挽回的結果。同時，撰寫一個穩定的飛機內部程式，代碼數應該就超過 100 萬了吧？已經遠超出我目前寫過的代碼了。\n\n### 前言 — 你有勇氣嗎？\n\n**在閱讀本篇文章之前，請先確認自己對空難的接受度。**\n\n如果你是那種會在颱風夜的機場大呼小叫的乘客，希望你看完這篇文章後能夠學會閉嘴；如果你上飛機第一件事是睡覺而不是看一下逃生門在哪，希望你以後會記得。\n\n### 天氣對飛機造成的影響\n\n#### 風\n\n現代的飛機設計通常都可以應付天氣惡劣的狀況。即使如此，在**起飛**、**降落**這兩個程序當中，仍然會有許多突發狀況。\n\n起飛時，因為飛機在滿載燃油、乘客的狀況下起飛，又因為剛開始的速度不足，需要靠[襟翼](https://www.wikiwand.com/zh-tw/%E8%A5%9F%E7%BF%BC)、[縫翼](https://www.wikiwand.com/zh-tw/%E5%89%8D%E7%BC%98%E7%BC%9D%E7%BF%BC)這兩個機翼的幫忙來提昇受風面積、增加昇力，飛機才能夠順利起飛。\n\n如果這時風向突然改變，從逆風變為順風，就有可能因為空速不足而導致升力降低。通常會提高機鼻以及增加動力來獲得升力。\n\n但是在颱風這種極端天氣下，如果風速的變化相當劇烈，飛機很容易受到影響，如果來不及在風速改變時作出反應（飛機加速、減速都需要時間），很有可能來不及控制飛機就出事了。\n\n下降時也是一樣，如果突然由逆風變順風，導致降落速度增加，甚至是風切變等狀況，在颱風的影響下所有的風速都會對飛機產生巨大的影響。\n\n風切變簡單來說就是風速、風向在兩點之間的急劇變化。飛機這種龐然大物很容易受到風的影響，如果風速急劇變化，會導致飛機在短時間內有劇烈的速度、高度變化，這也是為什麼在颱風降落時會有大怒神的感覺。（相信我，你不會想要體驗的）\n\n降落速度太快，飛機就會衝出跑道；速度太慢，飛機有可能失速而垂直落地。\n\n> *我搭飛機那麼多次遇到颱風也沒事啊*\n\n當然，機長們受過專業的訓練，會盡量地往天氣最好的地方飛行，降落時也會無所不用其極地找出最佳的進場時機。但[中華航空642班機](https://www.wikiwand.com/zh/%E4%B8%AD%E8%8F%AF%E8%88%AA%E7%A9%BA642%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)就沒有那麼幸運了。\n\n這台飛往香港的班機中，因為當天的天氣不佳，側風在下降時甚至超出標準，但機長仍然選擇降落，最後因為被起降架無法承受負荷而斷裂，右機翼斷裂往右翻滾，最後再跑道的草皮上停止。\n\n看完你一定會想，WTF 都已經降落了還空難，怎麼那麼雖小？是的。\n\n除了天氣本身會直接影響飛行之外，這場空難的最主要原因是機長與副機長並未按照標準程序操作。\n\n蛤？不按照標準程序操作，機長跟副機長也太不專業了吧？在責怪機師不專業之前，我們先想想他們要承擔的責任有哪些。\n\n- 把乘客平安送到目的地\n- 聽命公司的要求起飛（而非出自專業判斷）\n- 若決定停飛，可能被公司檢討，可能會上明日報紙頭條，可能會被其他航空公司嘲笑\n- 若決定不降落，可能會被公司檢討，受到乘客指責，明日上頭條\n\n有沒有發現什麼不對勁了？機師的判斷竟不全然來自專業，而是受到多方面的影響，這是多麽不合理的一件事情。\n\n機師也是人，難免會夾雜情緒在裡頭。所以儘管天氣不允許，機師們還是得咬牙放手一搏。儘管現在現代飛機的設計已經相當進步，但我們真的能夠全身而退嗎？\n\n![松山機場，飛機降落](https://cdn-images-1.medium.com/max/1250/1*yUOg0sYd5bbnqpf-8gwrew.jpeg)\n\n### 霧、雨\n\n霧跟雨是相當常見的天氣因素。霧最直接的影響就是能見度。飛機目前可以靠儀器降落系統（ILS）完成降落。這個精密的儀器能夠告訴飛機跑道的中線，以及下滑的軌道，至於更詳細的原理可以[參考維基百科](https://www.wikiwand.com/zh-tw/%E4%BB%AA%E8%A1%A8%E7%9D%80%E9%99%86%E7%B3%BB%E7%BB%9F)。\n\n但是飛行員通常還是需要目視跑道，確認飛機飛在正確的路線上。關於目視跑道有一套規定，飛行員如果找不到跑道，最低能夠下降到某個標準高度。\n\n如果在這個標準高度內仍然沒有找到跑道就要執行迷失進場（missing approach）程序並且重飛（Go around），但有時候因為機師過於自信、受外力影響、天氣影響等等原因，可能就會不遵守此程序。\n\n像是[波蘭空軍圖-154墜機事件](https://www.wikiwand.com/zh-tw/2010%E5%B9%B4%E6%B3%A2%E5%85%B0%E7%A9%BA%E5%86%9B%E5%9B%BE-154%E5%9D%A0%E6%9C%BA%E4%BA%8B%E4%BB%B6#/.E4.BA.8B.E6.95.85.E8.B0.83.E6.9F.A5)就是一個相當經典的例子。\n\n這架載著波蘭總統[列赫·卡辛斯基](https://www.wikiwand.com/zh-tw/%E8%90%8A%E8%B5%AB%C2%B7%E5%8D%A1%E6%AC%BD%E6%96%AF%E5%9F%BA)以及多個高層長官的飛機，企圖在俄羅斯斯摩棱斯克降落時墜毀。當時因為機場起大霧，能見度只有 500 公尺左右，因此塔台建議飛行員直接飛往備降機場。\n\n但此建議被機長拒絕，並且嘗試到 100 公尺高度時若不能降落在使用自動駕駛儀重飛。\n\n結果導致機翼撞上樹梢墜落至地面解體，起火燃燒。機上乘客與機組人員 97 名全部遇難。\n\n當時調查人員的結果認為，當時飛行員承受了間接壓力。有波蘭外交部禮賓司長、波蘭空軍司令官在後頭盯著你，硬著頭皮也要開下去。結果就釀成悲劇了。\n\n前幾年發生的[復興航空222號班機空難](https://www.wikiwand.com/zh/%E5%BE%A9%E8%88%88%E8%88%AA%E7%A9%BA222%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3#/.E4.BA.8B.E6.95.85.E5.8E.9F.E5.9B.A0)也是因為能見度影響、飛行員未遵守盲降標準而讓飛機在高度過低的情況下撞上樹林。（當然除了未遵守標準降落還有其他因素綜合在一起才導致這場悲劇）。\n\n#### 其他因能見度導致的空難\n\n- [新加坡航空006號班機空難](https://www.wikiwand.com/zh/%E6%96%B0%E5%8A%A0%E5%9D%A1%E8%88%AA%E7%A9%BA006%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)\n\n![松山機場，飛機降落](https://cdn-images-1.medium.com/max/1250/1*bs5ghlNGIT6QyXHsuo6OFA.jpeg)\n\n### 冰雹\n\n冰雹對飛機來說是個相當可怕的夢魘，因為時速高達 800 ~ 900 公里的飛機，撞到冰雹可不是鬧著玩的。如果撞到擋風玻璃有可能會導致碎裂，被引擎吸入也可能導致引擎故障。[南方航空242號班機空難](https://www.wikiwand.com/zh-tw/%E5%8D%97%E6%96%B9%E8%88%AA%E7%A9%BA242%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3)就是因為在暴風雨區被冰雹侵襲，導致兩具引擎熄火故障，最後因迫降失敗而墜毀在公路上。\n\n### 其他因天氣因素而觸發的空難\n\n如果你對因天氣引起的空難有興趣，可以參考[維基百科的連結](https://zh.wikipedia.org/wiki/Category:%E5%A4%A9%E6%B0%A3%E5%9B%A0%E7%B4%A0%E8%A7%B8%E7%99%BC%E7%9A%84%E8%88%AA%E7%A9%BA%E4%BA%8B%E6%95%85)，或許可以給你更多的啟發。\n\n事實上儘管是天氣因素影響，但仍然有 80% 的空難是因為人為錯誤而發生的。關於空難，很常見的心態是：**「這次不一樣」**\n\n因為科技進步，所以這次不會墜機；\n\n因為有XXX輔助，所以這次不會墜機；\n\n因為已經建立了標準程序，所以這次不會墜機；\n\n因為已經…，所以這次不會…。\n\n這次不一樣實在是個可怕的心態。\n\n### 如果不幸發生空難\n\n人生總是充滿著意外，僅管搭飛機的意外次數已經遠小於車禍（兩位受過正規訓練的機師、精密儀器輔助的飛機），要讓飛機墜毀是一件不容易的事。但我們還是要以防萬一。\n\n- 在每趟飛行前記得保旅行平安險及旅行不便險，確保飛機在任何狀況下延誤，或是不幸發生空難時，能夠獲得最大的保障。至於如何挑選保險就看各位的需求了。\n- 如果在飛機上發生空難，請先保護自己再去想辦法救別人。確定氧氣罩戴好能夠吸到氧氣，再來幫助別人。\n- **在起飛前靜下心來聽空服員解釋逃生設備以及使用方式，他們很有可能救你一命。**\n- 採取防撞姿勢，雙手抱頭向前彎曲，頭貼在前方的座椅上，將撞擊力道降到最低。（以上描述僅為示意，詳細的防撞姿勢以空服員指導為準）\n- 平時就當一位合格的旅客，不吵鬧、不喧嘩、不對空服員、地勤大呼小叫、多積點陰德。讓服務你的人心情舒適是確保整趟旅程品質的不二法門。\n\n### 接下來可以怎麼做？\n\n- 僅靠政府、民航局來監督航空公司已經不太可靠。但人民團結起來的力量不容忽視，為了自己的生命著想，希望你能多關注這方面的議題，適時發聲與撻伐（記得理性溝通），讓航空公司想要說幹話的時候先三思。\n- 嚴格遵守飛安標準。關於起飛與降落有一套標準規範（根據飛機與航空公司各有不同），必須要求航空公司嚴格遵守。\n- 建立配套措施，讓颱風天仍然得上班的行業有個安心工作的環境。\n\n### 結論\n\n#### 1. 尊重專業\n\n無論何時我們都應該尊重專業，不僅是機上的機師，各行各業皆如此。不過尊重專業的前提是對方要是位專業人士。\n\n#### 2. 讓錯誤被大家看見\n\n空難不應該是大家說聲 R.I.P 就了事了，如果幾十人甚至幾百人的生命只能換來 R.I.P 的話是很令人扼腕的結局。每場空難都是相當珍貴的經驗。\n\n#### 3. 創造讓機組人員能夠安心的環境\n\n這在現在的台灣或許還是天方夜譚。但對於不合理的工時、環境、要求的公司，我們應該要能夠抵制或是拒乘，讓雙方的談判籌碼對等，才有扭轉的空間。而機師能夠心無旁騖地，依照自己的專業而非高層壓力做判斷。做得好就鼓勵，不按照程序飛行的機師我們也要幹到爆，讓他們知道背後都是有雙眼睛在監督著的。\n\n#### 4.不要讓天氣控制了情緒\n\n大家都想搭飛機，前往目的地。但無論如何，安全仍然是最重要的事，我們能做的是緩和自己的情緒。\n\n------\n\n停飛不是兒戲，不管對機長、航空公司、乘客來講都是個耗時、花費金錢的決定。\n\n如果機師不需要再背負上層壓力；如果對於惡劣天氣的應對不是先試試看再說；如果公司講幹話、做蠢事能夠受到制裁，或許大家都可以過得輕鬆一點。\n\n好吧講太遠了。\n\n最後如果你對飛機、空難有興趣的話，可以搜尋看看 Discovery 的空中浩劫，你會發現空難的原因五花八門，遠超乎你的想像。有把飛機給小孩開結果墜機的；有兩台飛機在跑道上互撞直接罹難的；有在天空上沒有燃油最後滑翔到機場的；有起飛時踩著煞車硬要飛結果墜機的；有自動駕駛跟駕駛操作衝突而墜機的；有飛機不聽話結果墜機的；有因為貨艙放太多酒精結果燒起來而墜機的……，或許這些看似與我們無關的空難，能夠對你有些幫助。\n\n> 本篇文章無意對任何機師、機組人員提出批評，只是分享個人觀點以及整理因天氣因素發生的空難事件。\n\n------\n\n**最後，祝福每位機師跟乘客旅途愉快。**\n\n> Bon Vayage!\n","slug":"aircrash-extreme-weather","published":1,"date":"2017-08-05T12:00:07.000Z","updated":"2017-08-05T12:17:34.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitq5000fiw5t09af7epn","content":"<p><em>我並不是機師或是受過訓練的專業人士，只是剛好家住在機場附近，喜歡看看飛機了解一下空難而已，以上言論難免有錯誤之處，盡請斧正。另外本篇文章可能會造成閱讀者的情緒不安或焦躁，在閱讀前請三思</em></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*gHsRVWF0sgzs9OkDmN_7nQ.jpeg\" alt=\"松山機場，飛機起飛\"></p>\n<p>最近這幾天長榮員工因尼莎颱風集體請天災假，除了引起廣大迴響跟在 PTT 上實況飛機降落情形外，好像也就這樣了。剛好天時地利，寫篇關於天氣造成的空難，希望能夠讓各位（以及自己）更了解天氣對飛機產生的影響。</p>\n<p>剛搬完新家兩個月，大約在行天宮靠近飛機巷的位置，從窗外的陽台就能聽見、看見 20 幾架飛機降落，當天的颱風夜也是。</p>\n<p>我對飛機跟機師一直以來都是抱持著景仰的心態，跟軟體開發不同，那是一個無法容忍 bug 的世界，任何一個失誤都會造成無法挽回的結果。同時，撰寫一個穩定的飛機內部程式，代碼數應該就超過 100 萬了吧？已經遠超出我目前寫過的代碼了。</p>\n<h3 id=\"前言-—-你有勇氣嗎？\"><a href=\"#前言-—-你有勇氣嗎？\" class=\"headerlink\" title=\"前言 — 你有勇氣嗎？\"></a>前言 — 你有勇氣嗎？</h3><p><strong>在閱讀本篇文章之前，請先確認自己對空難的接受度。</strong></p>\n<p>如果你是那種會在颱風夜的機場大呼小叫的乘客，希望你看完這篇文章後能夠學會閉嘴；如果你上飛機第一件事是睡覺而不是看一下逃生門在哪，希望你以後會記得。</p>\n<h3 id=\"天氣對飛機造成的影響\"><a href=\"#天氣對飛機造成的影響\" class=\"headerlink\" title=\"天氣對飛機造成的影響\"></a>天氣對飛機造成的影響</h3><h4 id=\"風\"><a href=\"#風\" class=\"headerlink\" title=\"風\"></a>風</h4><p>現代的飛機設計通常都可以應付天氣惡劣的狀況。即使如此，在<strong>起飛</strong>、<strong>降落</strong>這兩個程序當中，仍然會有許多突發狀況。</p>\n<p>起飛時，因為飛機在滿載燃油、乘客的狀況下起飛，又因為剛開始的速度不足，需要靠<a href=\"https://www.wikiwand.com/zh-tw/%E8%A5%9F%E7%BF%BC\" target=\"_blank\" rel=\"external\">襟翼</a>、<a href=\"https://www.wikiwand.com/zh-tw/%E5%89%8D%E7%BC%98%E7%BC%9D%E7%BF%BC\" target=\"_blank\" rel=\"external\">縫翼</a>這兩個機翼的幫忙來提昇受風面積、增加昇力，飛機才能夠順利起飛。</p>\n<p>如果這時風向突然改變，從逆風變為順風，就有可能因為空速不足而導致升力降低。通常會提高機鼻以及增加動力來獲得升力。</p>\n<p>但是在颱風這種極端天氣下，如果風速的變化相當劇烈，飛機很容易受到影響，如果來不及在風速改變時作出反應（飛機加速、減速都需要時間），很有可能來不及控制飛機就出事了。</p>\n<p>下降時也是一樣，如果突然由逆風變順風，導致降落速度增加，甚至是風切變等狀況，在颱風的影響下所有的風速都會對飛機產生巨大的影響。</p>\n<p>風切變簡單來說就是風速、風向在兩點之間的急劇變化。飛機這種龐然大物很容易受到風的影響，如果風速急劇變化，會導致飛機在短時間內有劇烈的速度、高度變化，這也是為什麼在颱風降落時會有大怒神的感覺。（相信我，你不會想要體驗的）</p>\n<p>降落速度太快，飛機就會衝出跑道；速度太慢，飛機有可能失速而垂直落地。</p>\n<blockquote>\n<p><em>我搭飛機那麼多次遇到颱風也沒事啊</em></p>\n</blockquote>\n<p>當然，機長們受過專業的訓練，會盡量地往天氣最好的地方飛行，降落時也會無所不用其極地找出最佳的進場時機。但<a href=\"https://www.wikiwand.com/zh/%E4%B8%AD%E8%8F%AF%E8%88%AA%E7%A9%BA642%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">中華航空642班機</a>就沒有那麼幸運了。</p>\n<p>這台飛往香港的班機中，因為當天的天氣不佳，側風在下降時甚至超出標準，但機長仍然選擇降落，最後因為被起降架無法承受負荷而斷裂，右機翼斷裂往右翻滾，最後再跑道的草皮上停止。</p>\n<p>看完你一定會想，WTF 都已經降落了還空難，怎麼那麼雖小？是的。</p>\n<p>除了天氣本身會直接影響飛行之外，這場空難的最主要原因是機長與副機長並未按照標準程序操作。</p>\n<p>蛤？不按照標準程序操作，機長跟副機長也太不專業了吧？在責怪機師不專業之前，我們先想想他們要承擔的責任有哪些。</p>\n<ul>\n<li>把乘客平安送到目的地</li>\n<li>聽命公司的要求起飛（而非出自專業判斷）</li>\n<li>若決定停飛，可能被公司檢討，可能會上明日報紙頭條，可能會被其他航空公司嘲笑</li>\n<li>若決定不降落，可能會被公司檢討，受到乘客指責，明日上頭條</li>\n</ul>\n<p>有沒有發現什麼不對勁了？機師的判斷竟不全然來自專業，而是受到多方面的影響，這是多麽不合理的一件事情。</p>\n<p>機師也是人，難免會夾雜情緒在裡頭。所以儘管天氣不允許，機師們還是得咬牙放手一搏。儘管現在現代飛機的設計已經相當進步，但我們真的能夠全身而退嗎？</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*yUOg0sYd5bbnqpf-8gwrew.jpeg\" alt=\"松山機場，飛機降落\"></p>\n<h3 id=\"霧、雨\"><a href=\"#霧、雨\" class=\"headerlink\" title=\"霧、雨\"></a>霧、雨</h3><p>霧跟雨是相當常見的天氣因素。霧最直接的影響就是能見度。飛機目前可以靠儀器降落系統（ILS）完成降落。這個精密的儀器能夠告訴飛機跑道的中線，以及下滑的軌道，至於更詳細的原理可以<a href=\"https://www.wikiwand.com/zh-tw/%E4%BB%AA%E8%A1%A8%E7%9D%80%E9%99%86%E7%B3%BB%E7%BB%9F\" target=\"_blank\" rel=\"external\">參考維基百科</a>。</p>\n<p>但是飛行員通常還是需要目視跑道，確認飛機飛在正確的路線上。關於目視跑道有一套規定，飛行員如果找不到跑道，最低能夠下降到某個標準高度。</p>\n<p>如果在這個標準高度內仍然沒有找到跑道就要執行迷失進場（missing approach）程序並且重飛（Go around），但有時候因為機師過於自信、受外力影響、天氣影響等等原因，可能就會不遵守此程序。</p>\n<p>像是<a href=\"https://www.wikiwand.com/zh-tw/2010%E5%B9%B4%E6%B3%A2%E5%85%B0%E7%A9%BA%E5%86%9B%E5%9B%BE-154%E5%9D%A0%E6%9C%BA%E4%BA%8B%E4%BB%B6#/.E4.BA.8B.E6.95.85.E8.B0.83.E6.9F.A5\" target=\"_blank\" rel=\"external\">波蘭空軍圖-154墜機事件</a>就是一個相當經典的例子。</p>\n<p>這架載著波蘭總統<a href=\"https://www.wikiwand.com/zh-tw/%E8%90%8A%E8%B5%AB%C2%B7%E5%8D%A1%E6%AC%BD%E6%96%AF%E5%9F%BA\" target=\"_blank\" rel=\"external\">列赫·卡辛斯基</a>以及多個高層長官的飛機，企圖在俄羅斯斯摩棱斯克降落時墜毀。當時因為機場起大霧，能見度只有 500 公尺左右，因此塔台建議飛行員直接飛往備降機場。</p>\n<p>但此建議被機長拒絕，並且嘗試到 100 公尺高度時若不能降落在使用自動駕駛儀重飛。</p>\n<p>結果導致機翼撞上樹梢墜落至地面解體，起火燃燒。機上乘客與機組人員 97 名全部遇難。</p>\n<p>當時調查人員的結果認為，當時飛行員承受了間接壓力。有波蘭外交部禮賓司長、波蘭空軍司令官在後頭盯著你，硬著頭皮也要開下去。結果就釀成悲劇了。</p>\n<p>前幾年發生的<a href=\"https://www.wikiwand.com/zh/%E5%BE%A9%E8%88%88%E8%88%AA%E7%A9%BA222%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3#/.E4.BA.8B.E6.95.85.E5.8E.9F.E5.9B.A0\" target=\"_blank\" rel=\"external\">復興航空222號班機空難</a>也是因為能見度影響、飛行員未遵守盲降標準而讓飛機在高度過低的情況下撞上樹林。（當然除了未遵守標準降落還有其他因素綜合在一起才導致這場悲劇）。</p>\n<h4 id=\"其他因能見度導致的空難\"><a href=\"#其他因能見度導致的空難\" class=\"headerlink\" title=\"其他因能見度導致的空難\"></a>其他因能見度導致的空難</h4><ul>\n<li><a href=\"https://www.wikiwand.com/zh/%E6%96%B0%E5%8A%A0%E5%9D%A1%E8%88%AA%E7%A9%BA006%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">新加坡航空006號班機空難</a></li>\n</ul>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*bs5ghlNGIT6QyXHsuo6OFA.jpeg\" alt=\"松山機場，飛機降落\"></p>\n<h3 id=\"冰雹\"><a href=\"#冰雹\" class=\"headerlink\" title=\"冰雹\"></a>冰雹</h3><p>冰雹對飛機來說是個相當可怕的夢魘，因為時速高達 800 ~ 900 公里的飛機，撞到冰雹可不是鬧著玩的。如果撞到擋風玻璃有可能會導致碎裂，被引擎吸入也可能導致引擎故障。<a href=\"https://www.wikiwand.com/zh-tw/%E5%8D%97%E6%96%B9%E8%88%AA%E7%A9%BA242%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">南方航空242號班機空難</a>就是因為在暴風雨區被冰雹侵襲，導致兩具引擎熄火故障，最後因迫降失敗而墜毀在公路上。</p>\n<h3 id=\"其他因天氣因素而觸發的空難\"><a href=\"#其他因天氣因素而觸發的空難\" class=\"headerlink\" title=\"其他因天氣因素而觸發的空難\"></a>其他因天氣因素而觸發的空難</h3><p>如果你對因天氣引起的空難有興趣，可以參考<a href=\"https://zh.wikipedia.org/wiki/Category:%E5%A4%A9%E6%B0%A3%E5%9B%A0%E7%B4%A0%E8%A7%B8%E7%99%BC%E7%9A%84%E8%88%AA%E7%A9%BA%E4%BA%8B%E6%95%85\" target=\"_blank\" rel=\"external\">維基百科的連結</a>，或許可以給你更多的啟發。</p>\n<p>事實上儘管是天氣因素影響，但仍然有 80% 的空難是因為人為錯誤而發生的。關於空難，很常見的心態是：<strong>「這次不一樣」</strong></p>\n<p>因為科技進步，所以這次不會墜機；</p>\n<p>因為有XXX輔助，所以這次不會墜機；</p>\n<p>因為已經建立了標準程序，所以這次不會墜機；</p>\n<p>因為已經…，所以這次不會…。</p>\n<p>這次不一樣實在是個可怕的心態。</p>\n<h3 id=\"如果不幸發生空難\"><a href=\"#如果不幸發生空難\" class=\"headerlink\" title=\"如果不幸發生空難\"></a>如果不幸發生空難</h3><p>人生總是充滿著意外，僅管搭飛機的意外次數已經遠小於車禍（兩位受過正規訓練的機師、精密儀器輔助的飛機），要讓飛機墜毀是一件不容易的事。但我們還是要以防萬一。</p>\n<ul>\n<li>在每趟飛行前記得保旅行平安險及旅行不便險，確保飛機在任何狀況下延誤，或是不幸發生空難時，能夠獲得最大的保障。至於如何挑選保險就看各位的需求了。</li>\n<li>如果在飛機上發生空難，請先保護自己再去想辦法救別人。確定氧氣罩戴好能夠吸到氧氣，再來幫助別人。</li>\n<li><strong>在起飛前靜下心來聽空服員解釋逃生設備以及使用方式，他們很有可能救你一命。</strong></li>\n<li>採取防撞姿勢，雙手抱頭向前彎曲，頭貼在前方的座椅上，將撞擊力道降到最低。（以上描述僅為示意，詳細的防撞姿勢以空服員指導為準）</li>\n<li>平時就當一位合格的旅客，不吵鬧、不喧嘩、不對空服員、地勤大呼小叫、多積點陰德。讓服務你的人心情舒適是確保整趟旅程品質的不二法門。</li>\n</ul>\n<h3 id=\"接下來可以怎麼做？\"><a href=\"#接下來可以怎麼做？\" class=\"headerlink\" title=\"接下來可以怎麼做？\"></a>接下來可以怎麼做？</h3><ul>\n<li>僅靠政府、民航局來監督航空公司已經不太可靠。但人民團結起來的力量不容忽視，為了自己的生命著想，希望你能多關注這方面的議題，適時發聲與撻伐（記得理性溝通），讓航空公司想要說幹話的時候先三思。</li>\n<li>嚴格遵守飛安標準。關於起飛與降落有一套標準規範（根據飛機與航空公司各有不同），必須要求航空公司嚴格遵守。</li>\n<li>建立配套措施，讓颱風天仍然得上班的行業有個安心工作的環境。</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><h4 id=\"1-尊重專業\"><a href=\"#1-尊重專業\" class=\"headerlink\" title=\"1. 尊重專業\"></a>1. 尊重專業</h4><p>無論何時我們都應該尊重專業，不僅是機上的機師，各行各業皆如此。不過尊重專業的前提是對方要是位專業人士。</p>\n<h4 id=\"2-讓錯誤被大家看見\"><a href=\"#2-讓錯誤被大家看見\" class=\"headerlink\" title=\"2. 讓錯誤被大家看見\"></a>2. 讓錯誤被大家看見</h4><p>空難不應該是大家說聲 R.I.P 就了事了，如果幾十人甚至幾百人的生命只能換來 R.I.P 的話是很令人扼腕的結局。每場空難都是相當珍貴的經驗。</p>\n<h4 id=\"3-創造讓機組人員能夠安心的環境\"><a href=\"#3-創造讓機組人員能夠安心的環境\" class=\"headerlink\" title=\"3. 創造讓機組人員能夠安心的環境\"></a>3. 創造讓機組人員能夠安心的環境</h4><p>這在現在的台灣或許還是天方夜譚。但對於不合理的工時、環境、要求的公司，我們應該要能夠抵制或是拒乘，讓雙方的談判籌碼對等，才有扭轉的空間。而機師能夠心無旁騖地，依照自己的專業而非高層壓力做判斷。做得好就鼓勵，不按照程序飛行的機師我們也要幹到爆，讓他們知道背後都是有雙眼睛在監督著的。</p>\n<h4 id=\"4-不要讓天氣控制了情緒\"><a href=\"#4-不要讓天氣控制了情緒\" class=\"headerlink\" title=\"4.不要讓天氣控制了情緒\"></a>4.不要讓天氣控制了情緒</h4><p>大家都想搭飛機，前往目的地。但無論如何，安全仍然是最重要的事，我們能做的是緩和自己的情緒。</p>\n<hr>\n<p>停飛不是兒戲，不管對機長、航空公司、乘客來講都是個耗時、花費金錢的決定。</p>\n<p>如果機師不需要再背負上層壓力；如果對於惡劣天氣的應對不是先試試看再說；如果公司講幹話、做蠢事能夠受到制裁，或許大家都可以過得輕鬆一點。</p>\n<p>好吧講太遠了。</p>\n<p>最後如果你對飛機、空難有興趣的話，可以搜尋看看 Discovery 的空中浩劫，你會發現空難的原因五花八門，遠超乎你的想像。有把飛機給小孩開結果墜機的；有兩台飛機在跑道上互撞直接罹難的；有在天空上沒有燃油最後滑翔到機場的；有起飛時踩著煞車硬要飛結果墜機的；有自動駕駛跟駕駛操作衝突而墜機的；有飛機不聽話結果墜機的；有因為貨艙放太多酒精結果燒起來而墜機的……，或許這些看似與我們無關的空難，能夠對你有些幫助。</p>\n<blockquote>\n<p>本篇文章無意對任何機師、機組人員提出批評，只是分享個人觀點以及整理因天氣因素發生的空難事件。</p>\n</blockquote>\n<hr>\n<p><strong>最後，祝福每位機師跟乘客旅途愉快。</strong></p>\n<blockquote>\n<p>Bon Vayage!</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><em>我並不是機師或是受過訓練的專業人士，只是剛好家住在機場附近，喜歡看看飛機了解一下空難而已，以上言論難免有錯誤之處，盡請斧正。另外本篇文章可能會造成閱讀者的情緒不安或焦躁，在閱讀前請三思</em></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*gHsRVWF0sgzs9OkDmN_7nQ.jpeg\" alt=\"松山機場，飛機起飛\"></p>\n<p>最近這幾天長榮員工因尼莎颱風集體請天災假，除了引起廣大迴響跟在 PTT 上實況飛機降落情形外，好像也就這樣了。剛好天時地利，寫篇關於天氣造成的空難，希望能夠讓各位（以及自己）更了解天氣對飛機產生的影響。</p>\n<p>剛搬完新家兩個月，大約在行天宮靠近飛機巷的位置，從窗外的陽台就能聽見、看見 20 幾架飛機降落，當天的颱風夜也是。</p>\n<p>我對飛機跟機師一直以來都是抱持著景仰的心態，跟軟體開發不同，那是一個無法容忍 bug 的世界，任何一個失誤都會造成無法挽回的結果。同時，撰寫一個穩定的飛機內部程式，代碼數應該就超過 100 萬了吧？已經遠超出我目前寫過的代碼了。</p>\n<h3 id=\"前言-—-你有勇氣嗎？\"><a href=\"#前言-—-你有勇氣嗎？\" class=\"headerlink\" title=\"前言 — 你有勇氣嗎？\"></a>前言 — 你有勇氣嗎？</h3><p><strong>在閱讀本篇文章之前，請先確認自己對空難的接受度。</strong></p>\n<p>如果你是那種會在颱風夜的機場大呼小叫的乘客，希望你看完這篇文章後能夠學會閉嘴；如果你上飛機第一件事是睡覺而不是看一下逃生門在哪，希望你以後會記得。</p>\n<h3 id=\"天氣對飛機造成的影響\"><a href=\"#天氣對飛機造成的影響\" class=\"headerlink\" title=\"天氣對飛機造成的影響\"></a>天氣對飛機造成的影響</h3><h4 id=\"風\"><a href=\"#風\" class=\"headerlink\" title=\"風\"></a>風</h4><p>現代的飛機設計通常都可以應付天氣惡劣的狀況。即使如此，在<strong>起飛</strong>、<strong>降落</strong>這兩個程序當中，仍然會有許多突發狀況。</p>\n<p>起飛時，因為飛機在滿載燃油、乘客的狀況下起飛，又因為剛開始的速度不足，需要靠<a href=\"https://www.wikiwand.com/zh-tw/%E8%A5%9F%E7%BF%BC\" target=\"_blank\" rel=\"external\">襟翼</a>、<a href=\"https://www.wikiwand.com/zh-tw/%E5%89%8D%E7%BC%98%E7%BC%9D%E7%BF%BC\" target=\"_blank\" rel=\"external\">縫翼</a>這兩個機翼的幫忙來提昇受風面積、增加昇力，飛機才能夠順利起飛。</p>\n<p>如果這時風向突然改變，從逆風變為順風，就有可能因為空速不足而導致升力降低。通常會提高機鼻以及增加動力來獲得升力。</p>\n<p>但是在颱風這種極端天氣下，如果風速的變化相當劇烈，飛機很容易受到影響，如果來不及在風速改變時作出反應（飛機加速、減速都需要時間），很有可能來不及控制飛機就出事了。</p>\n<p>下降時也是一樣，如果突然由逆風變順風，導致降落速度增加，甚至是風切變等狀況，在颱風的影響下所有的風速都會對飛機產生巨大的影響。</p>\n<p>風切變簡單來說就是風速、風向在兩點之間的急劇變化。飛機這種龐然大物很容易受到風的影響，如果風速急劇變化，會導致飛機在短時間內有劇烈的速度、高度變化，這也是為什麼在颱風降落時會有大怒神的感覺。（相信我，你不會想要體驗的）</p>\n<p>降落速度太快，飛機就會衝出跑道；速度太慢，飛機有可能失速而垂直落地。</p>\n<blockquote>\n<p><em>我搭飛機那麼多次遇到颱風也沒事啊</em></p>\n</blockquote>\n<p>當然，機長們受過專業的訓練，會盡量地往天氣最好的地方飛行，降落時也會無所不用其極地找出最佳的進場時機。但<a href=\"https://www.wikiwand.com/zh/%E4%B8%AD%E8%8F%AF%E8%88%AA%E7%A9%BA642%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">中華航空642班機</a>就沒有那麼幸運了。</p>\n<p>這台飛往香港的班機中，因為當天的天氣不佳，側風在下降時甚至超出標準，但機長仍然選擇降落，最後因為被起降架無法承受負荷而斷裂，右機翼斷裂往右翻滾，最後再跑道的草皮上停止。</p>\n<p>看完你一定會想，WTF 都已經降落了還空難，怎麼那麼雖小？是的。</p>\n<p>除了天氣本身會直接影響飛行之外，這場空難的最主要原因是機長與副機長並未按照標準程序操作。</p>\n<p>蛤？不按照標準程序操作，機長跟副機長也太不專業了吧？在責怪機師不專業之前，我們先想想他們要承擔的責任有哪些。</p>\n<ul>\n<li>把乘客平安送到目的地</li>\n<li>聽命公司的要求起飛（而非出自專業判斷）</li>\n<li>若決定停飛，可能被公司檢討，可能會上明日報紙頭條，可能會被其他航空公司嘲笑</li>\n<li>若決定不降落，可能會被公司檢討，受到乘客指責，明日上頭條</li>\n</ul>\n<p>有沒有發現什麼不對勁了？機師的判斷竟不全然來自專業，而是受到多方面的影響，這是多麽不合理的一件事情。</p>\n<p>機師也是人，難免會夾雜情緒在裡頭。所以儘管天氣不允許，機師們還是得咬牙放手一搏。儘管現在現代飛機的設計已經相當進步，但我們真的能夠全身而退嗎？</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*yUOg0sYd5bbnqpf-8gwrew.jpeg\" alt=\"松山機場，飛機降落\"></p>\n<h3 id=\"霧、雨\"><a href=\"#霧、雨\" class=\"headerlink\" title=\"霧、雨\"></a>霧、雨</h3><p>霧跟雨是相當常見的天氣因素。霧最直接的影響就是能見度。飛機目前可以靠儀器降落系統（ILS）完成降落。這個精密的儀器能夠告訴飛機跑道的中線，以及下滑的軌道，至於更詳細的原理可以<a href=\"https://www.wikiwand.com/zh-tw/%E4%BB%AA%E8%A1%A8%E7%9D%80%E9%99%86%E7%B3%BB%E7%BB%9F\" target=\"_blank\" rel=\"external\">參考維基百科</a>。</p>\n<p>但是飛行員通常還是需要目視跑道，確認飛機飛在正確的路線上。關於目視跑道有一套規定，飛行員如果找不到跑道，最低能夠下降到某個標準高度。</p>\n<p>如果在這個標準高度內仍然沒有找到跑道就要執行迷失進場（missing approach）程序並且重飛（Go around），但有時候因為機師過於自信、受外力影響、天氣影響等等原因，可能就會不遵守此程序。</p>\n<p>像是<a href=\"https://www.wikiwand.com/zh-tw/2010%E5%B9%B4%E6%B3%A2%E5%85%B0%E7%A9%BA%E5%86%9B%E5%9B%BE-154%E5%9D%A0%E6%9C%BA%E4%BA%8B%E4%BB%B6#/.E4.BA.8B.E6.95.85.E8.B0.83.E6.9F.A5\" target=\"_blank\" rel=\"external\">波蘭空軍圖-154墜機事件</a>就是一個相當經典的例子。</p>\n<p>這架載著波蘭總統<a href=\"https://www.wikiwand.com/zh-tw/%E8%90%8A%E8%B5%AB%C2%B7%E5%8D%A1%E6%AC%BD%E6%96%AF%E5%9F%BA\" target=\"_blank\" rel=\"external\">列赫·卡辛斯基</a>以及多個高層長官的飛機，企圖在俄羅斯斯摩棱斯克降落時墜毀。當時因為機場起大霧，能見度只有 500 公尺左右，因此塔台建議飛行員直接飛往備降機場。</p>\n<p>但此建議被機長拒絕，並且嘗試到 100 公尺高度時若不能降落在使用自動駕駛儀重飛。</p>\n<p>結果導致機翼撞上樹梢墜落至地面解體，起火燃燒。機上乘客與機組人員 97 名全部遇難。</p>\n<p>當時調查人員的結果認為，當時飛行員承受了間接壓力。有波蘭外交部禮賓司長、波蘭空軍司令官在後頭盯著你，硬著頭皮也要開下去。結果就釀成悲劇了。</p>\n<p>前幾年發生的<a href=\"https://www.wikiwand.com/zh/%E5%BE%A9%E8%88%88%E8%88%AA%E7%A9%BA222%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3#/.E4.BA.8B.E6.95.85.E5.8E.9F.E5.9B.A0\" target=\"_blank\" rel=\"external\">復興航空222號班機空難</a>也是因為能見度影響、飛行員未遵守盲降標準而讓飛機在高度過低的情況下撞上樹林。（當然除了未遵守標準降落還有其他因素綜合在一起才導致這場悲劇）。</p>\n<h4 id=\"其他因能見度導致的空難\"><a href=\"#其他因能見度導致的空難\" class=\"headerlink\" title=\"其他因能見度導致的空難\"></a>其他因能見度導致的空難</h4><ul>\n<li><a href=\"https://www.wikiwand.com/zh/%E6%96%B0%E5%8A%A0%E5%9D%A1%E8%88%AA%E7%A9%BA006%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">新加坡航空006號班機空難</a></li>\n</ul>\n<p><img src=\"https://cdn-images-1.medium.com/max/1250/1*bs5ghlNGIT6QyXHsuo6OFA.jpeg\" alt=\"松山機場，飛機降落\"></p>\n<h3 id=\"冰雹\"><a href=\"#冰雹\" class=\"headerlink\" title=\"冰雹\"></a>冰雹</h3><p>冰雹對飛機來說是個相當可怕的夢魘，因為時速高達 800 ~ 900 公里的飛機，撞到冰雹可不是鬧著玩的。如果撞到擋風玻璃有可能會導致碎裂，被引擎吸入也可能導致引擎故障。<a href=\"https://www.wikiwand.com/zh-tw/%E5%8D%97%E6%96%B9%E8%88%AA%E7%A9%BA242%E8%99%9F%E7%8F%AD%E6%A9%9F%E7%A9%BA%E9%9B%A3\" target=\"_blank\" rel=\"external\">南方航空242號班機空難</a>就是因為在暴風雨區被冰雹侵襲，導致兩具引擎熄火故障，最後因迫降失敗而墜毀在公路上。</p>\n<h3 id=\"其他因天氣因素而觸發的空難\"><a href=\"#其他因天氣因素而觸發的空難\" class=\"headerlink\" title=\"其他因天氣因素而觸發的空難\"></a>其他因天氣因素而觸發的空難</h3><p>如果你對因天氣引起的空難有興趣，可以參考<a href=\"https://zh.wikipedia.org/wiki/Category:%E5%A4%A9%E6%B0%A3%E5%9B%A0%E7%B4%A0%E8%A7%B8%E7%99%BC%E7%9A%84%E8%88%AA%E7%A9%BA%E4%BA%8B%E6%95%85\" target=\"_blank\" rel=\"external\">維基百科的連結</a>，或許可以給你更多的啟發。</p>\n<p>事實上儘管是天氣因素影響，但仍然有 80% 的空難是因為人為錯誤而發生的。關於空難，很常見的心態是：<strong>「這次不一樣」</strong></p>\n<p>因為科技進步，所以這次不會墜機；</p>\n<p>因為有XXX輔助，所以這次不會墜機；</p>\n<p>因為已經建立了標準程序，所以這次不會墜機；</p>\n<p>因為已經…，所以這次不會…。</p>\n<p>這次不一樣實在是個可怕的心態。</p>\n<h3 id=\"如果不幸發生空難\"><a href=\"#如果不幸發生空難\" class=\"headerlink\" title=\"如果不幸發生空難\"></a>如果不幸發生空難</h3><p>人生總是充滿著意外，僅管搭飛機的意外次數已經遠小於車禍（兩位受過正規訓練的機師、精密儀器輔助的飛機），要讓飛機墜毀是一件不容易的事。但我們還是要以防萬一。</p>\n<ul>\n<li>在每趟飛行前記得保旅行平安險及旅行不便險，確保飛機在任何狀況下延誤，或是不幸發生空難時，能夠獲得最大的保障。至於如何挑選保險就看各位的需求了。</li>\n<li>如果在飛機上發生空難，請先保護自己再去想辦法救別人。確定氧氣罩戴好能夠吸到氧氣，再來幫助別人。</li>\n<li><strong>在起飛前靜下心來聽空服員解釋逃生設備以及使用方式，他們很有可能救你一命。</strong></li>\n<li>採取防撞姿勢，雙手抱頭向前彎曲，頭貼在前方的座椅上，將撞擊力道降到最低。（以上描述僅為示意，詳細的防撞姿勢以空服員指導為準）</li>\n<li>平時就當一位合格的旅客，不吵鬧、不喧嘩、不對空服員、地勤大呼小叫、多積點陰德。讓服務你的人心情舒適是確保整趟旅程品質的不二法門。</li>\n</ul>\n<h3 id=\"接下來可以怎麼做？\"><a href=\"#接下來可以怎麼做？\" class=\"headerlink\" title=\"接下來可以怎麼做？\"></a>接下來可以怎麼做？</h3><ul>\n<li>僅靠政府、民航局來監督航空公司已經不太可靠。但人民團結起來的力量不容忽視，為了自己的生命著想，希望你能多關注這方面的議題，適時發聲與撻伐（記得理性溝通），讓航空公司想要說幹話的時候先三思。</li>\n<li>嚴格遵守飛安標準。關於起飛與降落有一套標準規範（根據飛機與航空公司各有不同），必須要求航空公司嚴格遵守。</li>\n<li>建立配套措施，讓颱風天仍然得上班的行業有個安心工作的環境。</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><h4 id=\"1-尊重專業\"><a href=\"#1-尊重專業\" class=\"headerlink\" title=\"1. 尊重專業\"></a>1. 尊重專業</h4><p>無論何時我們都應該尊重專業，不僅是機上的機師，各行各業皆如此。不過尊重專業的前提是對方要是位專業人士。</p>\n<h4 id=\"2-讓錯誤被大家看見\"><a href=\"#2-讓錯誤被大家看見\" class=\"headerlink\" title=\"2. 讓錯誤被大家看見\"></a>2. 讓錯誤被大家看見</h4><p>空難不應該是大家說聲 R.I.P 就了事了，如果幾十人甚至幾百人的生命只能換來 R.I.P 的話是很令人扼腕的結局。每場空難都是相當珍貴的經驗。</p>\n<h4 id=\"3-創造讓機組人員能夠安心的環境\"><a href=\"#3-創造讓機組人員能夠安心的環境\" class=\"headerlink\" title=\"3. 創造讓機組人員能夠安心的環境\"></a>3. 創造讓機組人員能夠安心的環境</h4><p>這在現在的台灣或許還是天方夜譚。但對於不合理的工時、環境、要求的公司，我們應該要能夠抵制或是拒乘，讓雙方的談判籌碼對等，才有扭轉的空間。而機師能夠心無旁騖地，依照自己的專業而非高層壓力做判斷。做得好就鼓勵，不按照程序飛行的機師我們也要幹到爆，讓他們知道背後都是有雙眼睛在監督著的。</p>\n<h4 id=\"4-不要讓天氣控制了情緒\"><a href=\"#4-不要讓天氣控制了情緒\" class=\"headerlink\" title=\"4.不要讓天氣控制了情緒\"></a>4.不要讓天氣控制了情緒</h4><p>大家都想搭飛機，前往目的地。但無論如何，安全仍然是最重要的事，我們能做的是緩和自己的情緒。</p>\n<hr>\n<p>停飛不是兒戲，不管對機長、航空公司、乘客來講都是個耗時、花費金錢的決定。</p>\n<p>如果機師不需要再背負上層壓力；如果對於惡劣天氣的應對不是先試試看再說；如果公司講幹話、做蠢事能夠受到制裁，或許大家都可以過得輕鬆一點。</p>\n<p>好吧講太遠了。</p>\n<p>最後如果你對飛機、空難有興趣的話，可以搜尋看看 Discovery 的空中浩劫，你會發現空難的原因五花八門，遠超乎你的想像。有把飛機給小孩開結果墜機的；有兩台飛機在跑道上互撞直接罹難的；有在天空上沒有燃油最後滑翔到機場的；有起飛時踩著煞車硬要飛結果墜機的；有自動駕駛跟駕駛操作衝突而墜機的；有飛機不聽話結果墜機的；有因為貨艙放太多酒精結果燒起來而墜機的……，或許這些看似與我們無關的空難，能夠對你有些幫助。</p>\n<blockquote>\n<p>本篇文章無意對任何機師、機組人員提出批評，只是分享個人觀點以及整理因天氣因素發生的空難事件。</p>\n</blockquote>\n<hr>\n<p><strong>最後，祝福每位機師跟乘客旅途愉快。</strong></p>\n<blockquote>\n<p>Bon Vayage!</p>\n</blockquote>\n"},{"title":"Array.sort 淺析","date":"2017-12-14T16:00:00.000Z","_content":"\n# Array.sort 淺析\n\n這篇文章不是談論在 Javascript 原生的 sort 要注意的事項。例如：\n\n```javascript\n[1, 2, 3, 8, 20, 30, 11].sort()\n// [1, 11, 2, 20, 3, 30, 8]\n```\n\n因為預設的 sort 方法會把值轉為 String，並按照 char code 做排序，所以才會出現上面的結果。\n\n今天要來探討 Javascript 的 sort 背後的實作方式。\n\n從 [V8 的實作](https://github.com/v8/v8/blob/master/src/js/array.js#L757)當中，我們可以看到幾個事實：\n\n- Array 的 sort 是用 quick sort 排序\n- 在陣列數量小於等於 10 的時候，使用插入排序。\n\n為了簡化 V8 中的代碼，這邊撰寫一個簡單的快速排序代碼：（僅供參考）\n\n```javascript\nfunction quickSort(arr, p, r) {\n  if (p < r) {\n    var q = partition(arr, p, r)\n    quickSort(arr, q - 1, p)\n    quickSort(arr, q + 1, r)\n  }\n}\n\nfunction partition(arr, p, r) {\n  var x = arr[r];\n  var i = p - 1;\n  for (var j = p; j < r - 1; j++) {\n    if (arr[j] <= x) {\n      i += 1;\n      var tmp = a[j];\n      arr[j] = a[i];\n      arr[i] = tmp;\n    }\n  }\n  var tmp = arr[r];\n  arr[r] = a[i + 1]\n  arr[i + 1] = tmp;\n}\n```\n\n\n\n## 深入探討：為什麼是快速排序？\n\n快速排序法的實現重點在於如何選擇一個相對好的 pivot，來避免最壞情況的發生。在實際的情況當中，輸入的資料並不一定是隨機的，所以在實務上都會使用 random 的方式來選擇 pivot。\n\n第一個問題是，**為什麼 V8 使用快速排序？**雖然快速排序的平均時間複雜度可以達到 $O(nlogn)$，但是最壞情況也有可能達到$O(n^2)$。同時，快速排序並不是一個穩定的演算法，也就是兩個同樣值的資料，在排序之後位置可能會不同。\n\n### 為什麼不用合併排序？\n\n合併排序簡單可以分為兩大步驟，先把 array 分解後再調用 merge 不斷合併。不僅平均、最壞、最好時間複雜度都可以達到$O(nlogn)$，演算法本身也是穩定的，為什麼不採用呢？\n\n### In-place\n\n我們在 quick sort 當中，並不需要對 array 做合併的動作，也就是整個演算法可以不另外耗費空間完成，而 merge sort 需要 $O(n)$ 的空間。因此儘管快速排序有上述的情況發生，但在實務上他仍然是一個相當好的選擇。\n\n我們可以透過 randomize 的方式（關於如何隨機選取 pivot，實際上還能夠寫一大篇文章來解釋），來避免 $O(n^2)$ 的情形發生。\n\n### Stable\n\n不過儘管如此，我們還是沒辦法解決 stable 的問題，雖然在大部分的場景當中可能並不重要（畢竟資料排序通常都是由後端實作），不過如果真的碰到時，這就是非常重要的考量了。\n\n**並不是每個瀏覽器的實作都是用 Quicksort**\n\n## 插入排序\n\n如果仔細看一下 [V8 的原始碼](https://github.com/v8/v8/blob/master/src/js/array.js#L723)，會發現這一段：\n\n```javascript\n while (true) {\n  // Insertion sort is faster for short arrays.\n  if (to - from <= 10) {\n    InsertionSort(a, from, to);\n    return;\n  }\n```\n\n咦，為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？\n\n要理解原因，我們先回想一下插入排序的原理。插入排序跟撲克牌整理牌的方式很像，每次拿起一張牌，找到一個最適當位置放入，每次的要插入的牌組都是已經整理好的，可以達到原址排序。\n\n```javascript\nfunction insertionSort(arr) {\n  for (var j = 1; j < arr.length; j++) {\n  \tvar key = arr[j];\n    var i = j - 1;\n    while(i >= 0 && arr[i] > key) {\n      arr[i + 1] = arr[i]\n      i = i - 1;\n    }\n    arr[i + 1] = key;\n  }\n  return arr;\n}\n```\n\n插入排序雖然跟氣泡排序擁有相同的時間複雜度，不過在交換次數上有很大的不同，氣泡排序有$O(n^2)$的交換次數，而插入排序最多只需要$O(n)$。\n\n回到最剛開始的問題，**為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？**\n\n對於小數量的陣列而言，如果已經排序好，或是相當接近有序的陣列，插入排序法是唯一可以達到時間複雜度$O(n)$的演算法。這是相當有效率的一件事。\n\n## 結論\n\n因為在工作上需要排序，因此開始深入理解了原生的 sort 在背後做了哪些事情。除了要注意 js 會預設轉為字串比較之外，在處理資料量大的陣列時，理解背後的實作方式就顯得相當重要。\n\n同時我們也了解到，不同的排序演算法都有其適合的場景，在使用 sort 的時候要記得：\n\n- Quick sort 在實務上通常有最好的結果，但要注意 quick sort 並不是穩定的演算法\n- Merge sort 雖然能夠達到 $O(nlogn)$ 的時間複雜度，但是需要額外 $O(n)$ 的空間做 merge\n- Insertion sort 在小數量的陣列排序上有不錯的效果，最好情形可以在$O(n)$ 比較完成。\n","source":"_posts/array-sort.md","raw":"---\ntitle: Array.sort 淺析\ndate: 2017-12-15\ncategories:\n  - 演算法\ntags:\n  - algorithm\n  - sorting\n---\n\n# Array.sort 淺析\n\n這篇文章不是談論在 Javascript 原生的 sort 要注意的事項。例如：\n\n```javascript\n[1, 2, 3, 8, 20, 30, 11].sort()\n// [1, 11, 2, 20, 3, 30, 8]\n```\n\n因為預設的 sort 方法會把值轉為 String，並按照 char code 做排序，所以才會出現上面的結果。\n\n今天要來探討 Javascript 的 sort 背後的實作方式。\n\n從 [V8 的實作](https://github.com/v8/v8/blob/master/src/js/array.js#L757)當中，我們可以看到幾個事實：\n\n- Array 的 sort 是用 quick sort 排序\n- 在陣列數量小於等於 10 的時候，使用插入排序。\n\n為了簡化 V8 中的代碼，這邊撰寫一個簡單的快速排序代碼：（僅供參考）\n\n```javascript\nfunction quickSort(arr, p, r) {\n  if (p < r) {\n    var q = partition(arr, p, r)\n    quickSort(arr, q - 1, p)\n    quickSort(arr, q + 1, r)\n  }\n}\n\nfunction partition(arr, p, r) {\n  var x = arr[r];\n  var i = p - 1;\n  for (var j = p; j < r - 1; j++) {\n    if (arr[j] <= x) {\n      i += 1;\n      var tmp = a[j];\n      arr[j] = a[i];\n      arr[i] = tmp;\n    }\n  }\n  var tmp = arr[r];\n  arr[r] = a[i + 1]\n  arr[i + 1] = tmp;\n}\n```\n\n\n\n## 深入探討：為什麼是快速排序？\n\n快速排序法的實現重點在於如何選擇一個相對好的 pivot，來避免最壞情況的發生。在實際的情況當中，輸入的資料並不一定是隨機的，所以在實務上都會使用 random 的方式來選擇 pivot。\n\n第一個問題是，**為什麼 V8 使用快速排序？**雖然快速排序的平均時間複雜度可以達到 $O(nlogn)$，但是最壞情況也有可能達到$O(n^2)$。同時，快速排序並不是一個穩定的演算法，也就是兩個同樣值的資料，在排序之後位置可能會不同。\n\n### 為什麼不用合併排序？\n\n合併排序簡單可以分為兩大步驟，先把 array 分解後再調用 merge 不斷合併。不僅平均、最壞、最好時間複雜度都可以達到$O(nlogn)$，演算法本身也是穩定的，為什麼不採用呢？\n\n### In-place\n\n我們在 quick sort 當中，並不需要對 array 做合併的動作，也就是整個演算法可以不另外耗費空間完成，而 merge sort 需要 $O(n)$ 的空間。因此儘管快速排序有上述的情況發生，但在實務上他仍然是一個相當好的選擇。\n\n我們可以透過 randomize 的方式（關於如何隨機選取 pivot，實際上還能夠寫一大篇文章來解釋），來避免 $O(n^2)$ 的情形發生。\n\n### Stable\n\n不過儘管如此，我們還是沒辦法解決 stable 的問題，雖然在大部分的場景當中可能並不重要（畢竟資料排序通常都是由後端實作），不過如果真的碰到時，這就是非常重要的考量了。\n\n**並不是每個瀏覽器的實作都是用 Quicksort**\n\n## 插入排序\n\n如果仔細看一下 [V8 的原始碼](https://github.com/v8/v8/blob/master/src/js/array.js#L723)，會發現這一段：\n\n```javascript\n while (true) {\n  // Insertion sort is faster for short arrays.\n  if (to - from <= 10) {\n    InsertionSort(a, from, to);\n    return;\n  }\n```\n\n咦，為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？\n\n要理解原因，我們先回想一下插入排序的原理。插入排序跟撲克牌整理牌的方式很像，每次拿起一張牌，找到一個最適當位置放入，每次的要插入的牌組都是已經整理好的，可以達到原址排序。\n\n```javascript\nfunction insertionSort(arr) {\n  for (var j = 1; j < arr.length; j++) {\n  \tvar key = arr[j];\n    var i = j - 1;\n    while(i >= 0 && arr[i] > key) {\n      arr[i + 1] = arr[i]\n      i = i - 1;\n    }\n    arr[i + 1] = key;\n  }\n  return arr;\n}\n```\n\n插入排序雖然跟氣泡排序擁有相同的時間複雜度，不過在交換次數上有很大的不同，氣泡排序有$O(n^2)$的交換次數，而插入排序最多只需要$O(n)$。\n\n回到最剛開始的問題，**為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？**\n\n對於小數量的陣列而言，如果已經排序好，或是相當接近有序的陣列，插入排序法是唯一可以達到時間複雜度$O(n)$的演算法。這是相當有效率的一件事。\n\n## 結論\n\n因為在工作上需要排序，因此開始深入理解了原生的 sort 在背後做了哪些事情。除了要注意 js 會預設轉為字串比較之外，在處理資料量大的陣列時，理解背後的實作方式就顯得相當重要。\n\n同時我們也了解到，不同的排序演算法都有其適合的場景，在使用 sort 的時候要記得：\n\n- Quick sort 在實務上通常有最好的結果，但要注意 quick sort 並不是穩定的演算法\n- Merge sort 雖然能夠達到 $O(nlogn)$ 的時間複雜度，但是需要額外 $O(n)$ 的空間做 merge\n- Insertion sort 在小數量的陣列排序上有不錯的效果，最好情形可以在$O(n)$ 比較完成。\n","slug":"array-sort","published":1,"updated":"2017-12-17T06:22:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitq8000giw5tlwq8sv1g","content":"<h1 id=\"Array-sort-淺析\"><a href=\"#Array-sort-淺析\" class=\"headerlink\" title=\"Array.sort 淺析\"></a>Array.sort 淺析</h1><p>這篇文章不是談論在 Javascript 原生的 sort 要注意的事項。例如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">8</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">11</span>].sort()</div><div class=\"line\"><span class=\"comment\">// [1, 11, 2, 20, 3, 30, 8]</span></div></pre></td></tr></table></figure>\n<p>因為預設的 sort 方法會把值轉為 String，並按照 char code 做排序，所以才會出現上面的結果。</p>\n<p>今天要來探討 Javascript 的 sort 背後的實作方式。</p>\n<p>從 <a href=\"https://github.com/v8/v8/blob/master/src/js/array.js#L757\" target=\"_blank\" rel=\"external\">V8 的實作</a>當中，我們可以看到幾個事實：</p>\n<ul>\n<li>Array 的 sort 是用 quick sort 排序</li>\n<li>在陣列數量小於等於 10 的時候，使用插入排序。</li>\n</ul>\n<p>為了簡化 V8 中的代碼，這邊撰寫一個簡單的快速排序代碼：（僅供參考）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">quickSort</span>(<span class=\"params\">arr, p, r</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (p &lt; r) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> q = partition(arr, p, r)</div><div class=\"line\">    quickSort(arr, q - <span class=\"number\">1</span>, p)</div><div class=\"line\">    quickSort(arr, q + <span class=\"number\">1</span>, r)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">partition</span>(<span class=\"params\">arr, p, r</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = arr[r];</div><div class=\"line\">  <span class=\"keyword\">var</span> i = p - <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = p; j &lt; r - <span class=\"number\">1</span>; j++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[j] &lt;= x) &#123;</div><div class=\"line\">      i += <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">var</span> tmp = a[j];</div><div class=\"line\">      arr[j] = a[i];</div><div class=\"line\">      arr[i] = tmp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">var</span> tmp = arr[r];</div><div class=\"line\">  arr[r] = a[i + <span class=\"number\">1</span>]</div><div class=\"line\">  arr[i + <span class=\"number\">1</span>] = tmp;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"深入探討：為什麼是快速排序？\"><a href=\"#深入探討：為什麼是快速排序？\" class=\"headerlink\" title=\"深入探討：為什麼是快速排序？\"></a>深入探討：為什麼是快速排序？</h2><p>快速排序法的實現重點在於如何選擇一個相對好的 pivot，來避免最壞情況的發生。在實際的情況當中，輸入的資料並不一定是隨機的，所以在實務上都會使用 random 的方式來選擇 pivot。</p>\n<p>第一個問題是，<strong>為什麼 V8 使用快速排序？</strong>雖然快速排序的平均時間複雜度可以達到 $O(nlogn)$，但是最壞情況也有可能達到$O(n^2)$。同時，快速排序並不是一個穩定的演算法，也就是兩個同樣值的資料，在排序之後位置可能會不同。</p>\n<h3 id=\"為什麼不用合併排序？\"><a href=\"#為什麼不用合併排序？\" class=\"headerlink\" title=\"為什麼不用合併排序？\"></a>為什麼不用合併排序？</h3><p>合併排序簡單可以分為兩大步驟，先把 array 分解後再調用 merge 不斷合併。不僅平均、最壞、最好時間複雜度都可以達到$O(nlogn)$，演算法本身也是穩定的，為什麼不採用呢？</p>\n<h3 id=\"In-place\"><a href=\"#In-place\" class=\"headerlink\" title=\"In-place\"></a>In-place</h3><p>我們在 quick sort 當中，並不需要對 array 做合併的動作，也就是整個演算法可以不另外耗費空間完成，而 merge sort 需要 $O(n)$ 的空間。因此儘管快速排序有上述的情況發生，但在實務上他仍然是一個相當好的選擇。</p>\n<p>我們可以透過 randomize 的方式（關於如何隨機選取 pivot，實際上還能夠寫一大篇文章來解釋），來避免 $O(n^2)$ 的情形發生。</p>\n<h3 id=\"Stable\"><a href=\"#Stable\" class=\"headerlink\" title=\"Stable\"></a>Stable</h3><p>不過儘管如此，我們還是沒辦法解決 stable 的問題，雖然在大部分的場景當中可能並不重要（畢竟資料排序通常都是由後端實作），不過如果真的碰到時，這就是非常重要的考量了。</p>\n<p><strong>並不是每個瀏覽器的實作都是用 Quicksort</strong></p>\n<h2 id=\"插入排序\"><a href=\"#插入排序\" class=\"headerlink\" title=\"插入排序\"></a>插入排序</h2><p>如果仔細看一下 <a href=\"https://github.com/v8/v8/blob/master/src/js/array.js#L723\" target=\"_blank\" rel=\"external\">V8 的原始碼</a>，會發現這一段：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\"> <span class=\"comment\">// Insertion sort is faster for short arrays.</span></div><div class=\"line\"> <span class=\"keyword\">if</span> (to - <span class=\"keyword\">from</span> &lt;= <span class=\"number\">10</span>) &#123;</div><div class=\"line\">   InsertionSort(a, <span class=\"keyword\">from</span>, to);</div><div class=\"line\">   <span class=\"keyword\">return</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>咦，為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？</p>\n<p>要理解原因，我們先回想一下插入排序的原理。插入排序跟撲克牌整理牌的方式很像，每次拿起一張牌，找到一個最適當位置放入，每次的要插入的牌組都是已經整理好的，可以達到原址排序。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertionSort</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; arr.length; j++) &#123;</div><div class=\"line\">  \t<span class=\"keyword\">var</span> key = arr[j];</div><div class=\"line\">    <span class=\"keyword\">var</span> i = j - <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span>(i &gt;= <span class=\"number\">0</span> &amp;&amp; arr[i] &gt; key) &#123;</div><div class=\"line\">      arr[i + <span class=\"number\">1</span>] = arr[i]</div><div class=\"line\">      i = i - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    arr[i + <span class=\"number\">1</span>] = key;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> arr;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>插入排序雖然跟氣泡排序擁有相同的時間複雜度，不過在交換次數上有很大的不同，氣泡排序有$O(n^2)$的交換次數，而插入排序最多只需要$O(n)$。</p>\n<p>回到最剛開始的問題，<strong>為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？</strong></p>\n<p>對於小數量的陣列而言，如果已經排序好，或是相當接近有序的陣列，插入排序法是唯一可以達到時間複雜度$O(n)$的演算法。這是相當有效率的一件事。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>因為在工作上需要排序，因此開始深入理解了原生的 sort 在背後做了哪些事情。除了要注意 js 會預設轉為字串比較之外，在處理資料量大的陣列時，理解背後的實作方式就顯得相當重要。</p>\n<p>同時我們也了解到，不同的排序演算法都有其適合的場景，在使用 sort 的時候要記得：</p>\n<ul>\n<li>Quick sort 在實務上通常有最好的結果，但要注意 quick sort 並不是穩定的演算法</li>\n<li>Merge sort 雖然能夠達到 $O(nlogn)$ 的時間複雜度，但是需要額外 $O(n)$ 的空間做 merge</li>\n<li>Insertion sort 在小數量的陣列排序上有不錯的效果，最好情形可以在$O(n)$ 比較完成。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Array-sort-淺析\"><a href=\"#Array-sort-淺析\" class=\"headerlink\" title=\"Array.sort 淺析\"></a>Array.sort 淺析</h1><p>這篇文章不是談論在 Javascript 原生的 sort 要注意的事項。例如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">8</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">11</span>].sort()</div><div class=\"line\"><span class=\"comment\">// [1, 11, 2, 20, 3, 30, 8]</span></div></pre></td></tr></table></figure>\n<p>因為預設的 sort 方法會把值轉為 String，並按照 char code 做排序，所以才會出現上面的結果。</p>\n<p>今天要來探討 Javascript 的 sort 背後的實作方式。</p>\n<p>從 <a href=\"https://github.com/v8/v8/blob/master/src/js/array.js#L757\" target=\"_blank\" rel=\"external\">V8 的實作</a>當中，我們可以看到幾個事實：</p>\n<ul>\n<li>Array 的 sort 是用 quick sort 排序</li>\n<li>在陣列數量小於等於 10 的時候，使用插入排序。</li>\n</ul>\n<p>為了簡化 V8 中的代碼，這邊撰寫一個簡單的快速排序代碼：（僅供參考）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">quickSort</span>(<span class=\"params\">arr, p, r</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (p &lt; r) &#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> q = partition(arr, p, r)</div><div class=\"line\">    quickSort(arr, q - <span class=\"number\">1</span>, p)</div><div class=\"line\">    quickSort(arr, q + <span class=\"number\">1</span>, r)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">partition</span>(<span class=\"params\">arr, p, r</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> x = arr[r];</div><div class=\"line\">  <span class=\"keyword\">var</span> i = p - <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = p; j &lt; r - <span class=\"number\">1</span>; j++) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[j] &lt;= x) &#123;</div><div class=\"line\">      i += <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">var</span> tmp = a[j];</div><div class=\"line\">      arr[j] = a[i];</div><div class=\"line\">      arr[i] = tmp;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">var</span> tmp = arr[r];</div><div class=\"line\">  arr[r] = a[i + <span class=\"number\">1</span>]</div><div class=\"line\">  arr[i + <span class=\"number\">1</span>] = tmp;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"深入探討：為什麼是快速排序？\"><a href=\"#深入探討：為什麼是快速排序？\" class=\"headerlink\" title=\"深入探討：為什麼是快速排序？\"></a>深入探討：為什麼是快速排序？</h2><p>快速排序法的實現重點在於如何選擇一個相對好的 pivot，來避免最壞情況的發生。在實際的情況當中，輸入的資料並不一定是隨機的，所以在實務上都會使用 random 的方式來選擇 pivot。</p>\n<p>第一個問題是，<strong>為什麼 V8 使用快速排序？</strong>雖然快速排序的平均時間複雜度可以達到 $O(nlogn)$，但是最壞情況也有可能達到$O(n^2)$。同時，快速排序並不是一個穩定的演算法，也就是兩個同樣值的資料，在排序之後位置可能會不同。</p>\n<h3 id=\"為什麼不用合併排序？\"><a href=\"#為什麼不用合併排序？\" class=\"headerlink\" title=\"為什麼不用合併排序？\"></a>為什麼不用合併排序？</h3><p>合併排序簡單可以分為兩大步驟，先把 array 分解後再調用 merge 不斷合併。不僅平均、最壞、最好時間複雜度都可以達到$O(nlogn)$，演算法本身也是穩定的，為什麼不採用呢？</p>\n<h3 id=\"In-place\"><a href=\"#In-place\" class=\"headerlink\" title=\"In-place\"></a>In-place</h3><p>我們在 quick sort 當中，並不需要對 array 做合併的動作，也就是整個演算法可以不另外耗費空間完成，而 merge sort 需要 $O(n)$ 的空間。因此儘管快速排序有上述的情況發生，但在實務上他仍然是一個相當好的選擇。</p>\n<p>我們可以透過 randomize 的方式（關於如何隨機選取 pivot，實際上還能夠寫一大篇文章來解釋），來避免 $O(n^2)$ 的情形發生。</p>\n<h3 id=\"Stable\"><a href=\"#Stable\" class=\"headerlink\" title=\"Stable\"></a>Stable</h3><p>不過儘管如此，我們還是沒辦法解決 stable 的問題，雖然在大部分的場景當中可能並不重要（畢竟資料排序通常都是由後端實作），不過如果真的碰到時，這就是非常重要的考量了。</p>\n<p><strong>並不是每個瀏覽器的實作都是用 Quicksort</strong></p>\n<h2 id=\"插入排序\"><a href=\"#插入排序\" class=\"headerlink\" title=\"插入排序\"></a>插入排序</h2><p>如果仔細看一下 <a href=\"https://github.com/v8/v8/blob/master/src/js/array.js#L723\" target=\"_blank\" rel=\"external\">V8 的原始碼</a>，會發現這一段：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\"> <span class=\"comment\">// Insertion sort is faster for short arrays.</span></div><div class=\"line\"> <span class=\"keyword\">if</span> (to - <span class=\"keyword\">from</span> &lt;= <span class=\"number\">10</span>) &#123;</div><div class=\"line\">   InsertionSort(a, <span class=\"keyword\">from</span>, to);</div><div class=\"line\">   <span class=\"keyword\">return</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>咦，為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？</p>\n<p>要理解原因，我們先回想一下插入排序的原理。插入排序跟撲克牌整理牌的方式很像，每次拿起一張牌，找到一個最適當位置放入，每次的要插入的牌組都是已經整理好的，可以達到原址排序。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertionSort</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; arr.length; j++) &#123;</div><div class=\"line\">  \t<span class=\"keyword\">var</span> key = arr[j];</div><div class=\"line\">    <span class=\"keyword\">var</span> i = j - <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">while</span>(i &gt;= <span class=\"number\">0</span> &amp;&amp; arr[i] &gt; key) &#123;</div><div class=\"line\">      arr[i + <span class=\"number\">1</span>] = arr[i]</div><div class=\"line\">      i = i - <span class=\"number\">1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    arr[i + <span class=\"number\">1</span>] = key;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">return</span> arr;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>插入排序雖然跟氣泡排序擁有相同的時間複雜度，不過在交換次數上有很大的不同，氣泡排序有$O(n^2)$的交換次數，而插入排序最多只需要$O(n)$。</p>\n<p>回到最剛開始的問題，<strong>為什麼在陣列數量小於等於 10 的時候要用插入排序法呢？</strong></p>\n<p>對於小數量的陣列而言，如果已經排序好，或是相當接近有序的陣列，插入排序法是唯一可以達到時間複雜度$O(n)$的演算法。這是相當有效率的一件事。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>因為在工作上需要排序，因此開始深入理解了原生的 sort 在背後做了哪些事情。除了要注意 js 會預設轉為字串比較之外，在處理資料量大的陣列時，理解背後的實作方式就顯得相當重要。</p>\n<p>同時我們也了解到，不同的排序演算法都有其適合的場景，在使用 sort 的時候要記得：</p>\n<ul>\n<li>Quick sort 在實務上通常有最好的結果，但要注意 quick sort 並不是穩定的演算法</li>\n<li>Merge sort 雖然能夠達到 $O(nlogn)$ 的時間複雜度，但是需要額外 $O(n)$ 的空間做 merge</li>\n<li>Insertion sort 在小數量的陣列排序上有不錯的效果，最好情形可以在$O(n)$ 比較完成。</li>\n</ul>\n"},{"title":"Better Express error","_content":"## Better-express-error\n\n在 express 開發時，如果遇到錯誤，通常是直接印在 error page 上，或者在 production 端直接導到 404, 500 page。\n\n這雖然沒有什麼值得一提的是，不過說真的，看到這種頁面，你會覺得開心嗎？\n\n![default error](https://cdn-images-1.medium.com/max/2000/0*X2Aflg99Mnj0J6cO.png)\n\n熟悉 Ruby On Rails 開發的工程師，應該多少都用過 [better_errors](https://github.com/charliesome/better_errors)，或者 rails 本身內建的 error trace page 來 debug。\n\n不過在 express 上，還沒有看到一個功能類似 better error 的 package，常常只能看這種醜不拉嘰的 error message 仰天長嘯。\n\n於是，自己做了一個簡單的 middleware 處理這件事。其實本質上就是 bettor errors 的 express 實作啦\n\n### 分析錯誤訊息\n\n```\nTypeError: range out of bound. Please check http://kjj6198.github.io for more information.\nat app.get (/Users/kalan/code/express-error/server/app.js:17:9)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\nat next (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:137:13)\nat Route.dispatch (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:112:3)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\nat /Users/kalan/code/express-error/node_modules/express/lib/router/index.js:281:22\nat Function.process_params (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:335:12)\nat next (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:275:10)\nat jsonParser (/Users/kalan/code/express-error/node_modules/body-parser/lib/types/json.js:109:7)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\n```\n\n仔細觀察後可以發現，錯誤訊息的格式是相當整齊規律的。首先，第一行為錯誤名稱與訊息，這通常是最重要的資訊。第二行以後則是調用 stack。at … 是某個函數的呼叫，括號內則是檔名與行數、row 的訊息。\n\n簡單分析完錯誤訊息後，我們可以把純文字轉為比較有用的資訊。因此透過 `split('\\n')`，再根據字串做簡單的正規表達式匹配，就能分成檔名與行數資訊了。\n\n## 顯示 Error \n\n對於第一行的錯誤訊息，通常是最重要的資訊，因為程式碼就是在那邊噴錯的，因此對於第一行錯誤訊息，我們將他放在最顯眼的地方並且 highlight。\n\n![better error(1)](https://cdn-images-1.medium.com/max/2000/0*T2X0Nqo4PGzGvEhf.png)\n\n而第二行之後的錯誤訊息，用顏色及大小來標示檔案名稱、行數以及調用的函式名稱。\n\n![better error(2)](https://cdn-images-1.medium.com/max/2000/0*-_wnYW14Jo-ue8fd.png)\n\n比起前面一坨黑黑的文字，這樣簡單的整理已經可以讓開發者可以一目了然到底發生了什麼事。\n\n## 顯示檔案內容\n\n不過，除了顯示錯誤訊息之外，我們也希望能夠同時顯示對應的檔案內容，以及上下文有哪些。因此右半邊可以利用錯誤訊息中提供的檔案名稱與行數，顯示對應的檔案內容。\n\n對於 nodejs 來說，只要透過 `fs.readFileSync` 就夠了。\n\n```javascript\nfunction(filename, line, row) {\n  const content = fs.readFileSync(filename);\n  content.toString()\n  \t.split('\\n')\n  \t.slice(line - 5, line + 5)\n  \t.map(content => `<span>${content}</span>`)\n  \t.join('\\n');\n}\n```\n\n這邊是透過很簡單的方式，直接印出前五行及後五行，更聰明的方式是透過像是 AST 之類的技巧，只印出對應到的 function 內容。不過現在我們直接印出前後五行的程式碼即可。\n\n做一些調整與修改，大概長這樣：\n\n![better error(3)](https://cdn-images-1.medium.com/max/2000/0*PUiGswh8G584aPli.png)\n\n透過簡單的 highlight，讓開發者馬上知道出錯的地方在哪邊。\n\n## REPL\n\n除了顯示 error 外，我們還希望這個頁面可以輸入一些簡單的程式，確認問題點後，再實際修改程式碼。\n\n在 nodejs 當中，有個 VM 的模組，能夠讓你使用 V8 的 Virtual Machine contexts 執行給定的 code。透過這個模組，我們就能夠實現類似 REPL 的功能了！\n\n```javascript\nconst debugContext = vm.createContext({\n  request: req,\n  response: res,\n  util: require('util'),\n  Buffer: require('buffer').Buffer,\n  stream: require('stream'),\n  console: {\n    log: util.format\n  },\n  clear: ''\n});\n```\n\n把想要暴露的變數傳入 context 當中，在透過 POST 的方式讀取前端的 code，就可以很方便地達到 debug 的效果。\n\n![better error(4)](https://cdn-images-1.medium.com/max/2000/0*j9Xv7cHFRKhIB0qT.png)\n\n（以上還需要做一些調整）\n\n## 全部整合！\n\n![better error(5)](https://cdn-images-1.medium.com/max/2000/0*9tlC_sW6UAyDeHgv.png)\n\n全部整合起來後，頁面大概會長這樣。\n\n比起原本的純文字，雖然花了一些功調整頁面 style 與實現 REPL 的功能，不過讓 debug 的流程變得更加流暢了。\n\n## 結論\n\n[express-error](https://github.com/kjj6198/express-error)\n\n詳細的實作在這個 repo 裏頭，最近如果比較有空會在將實作抽換為 middleware 的形式方便大家使用。也會逐漸優化整個 layout 與 code highlight 的部分，並且讓整個流程跟畫面更加流暢一些。雖然不知道會過多久就是了 XD\n\n如果有各種建議也歡迎提出 issue。\n\n","source":"_posts/better-express-error.md","raw":"---\ntitle: Better Express error\ncategories: nodejs\ntags:\n  - nodejs\n  - express\n---\n## Better-express-error\n\n在 express 開發時，如果遇到錯誤，通常是直接印在 error page 上，或者在 production 端直接導到 404, 500 page。\n\n這雖然沒有什麼值得一提的是，不過說真的，看到這種頁面，你會覺得開心嗎？\n\n![default error](https://cdn-images-1.medium.com/max/2000/0*X2Aflg99Mnj0J6cO.png)\n\n熟悉 Ruby On Rails 開發的工程師，應該多少都用過 [better_errors](https://github.com/charliesome/better_errors)，或者 rails 本身內建的 error trace page 來 debug。\n\n不過在 express 上，還沒有看到一個功能類似 better error 的 package，常常只能看這種醜不拉嘰的 error message 仰天長嘯。\n\n於是，自己做了一個簡單的 middleware 處理這件事。其實本質上就是 bettor errors 的 express 實作啦\n\n### 分析錯誤訊息\n\n```\nTypeError: range out of bound. Please check http://kjj6198.github.io for more information.\nat app.get (/Users/kalan/code/express-error/server/app.js:17:9)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\nat next (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:137:13)\nat Route.dispatch (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:112:3)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\nat /Users/kalan/code/express-error/node_modules/express/lib/router/index.js:281:22\nat Function.process_params (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:335:12)\nat next (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:275:10)\nat jsonParser (/Users/kalan/code/express-error/node_modules/body-parser/lib/types/json.js:109:7)\nat Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)\n```\n\n仔細觀察後可以發現，錯誤訊息的格式是相當整齊規律的。首先，第一行為錯誤名稱與訊息，這通常是最重要的資訊。第二行以後則是調用 stack。at … 是某個函數的呼叫，括號內則是檔名與行數、row 的訊息。\n\n簡單分析完錯誤訊息後，我們可以把純文字轉為比較有用的資訊。因此透過 `split('\\n')`，再根據字串做簡單的正規表達式匹配，就能分成檔名與行數資訊了。\n\n## 顯示 Error \n\n對於第一行的錯誤訊息，通常是最重要的資訊，因為程式碼就是在那邊噴錯的，因此對於第一行錯誤訊息，我們將他放在最顯眼的地方並且 highlight。\n\n![better error(1)](https://cdn-images-1.medium.com/max/2000/0*T2X0Nqo4PGzGvEhf.png)\n\n而第二行之後的錯誤訊息，用顏色及大小來標示檔案名稱、行數以及調用的函式名稱。\n\n![better error(2)](https://cdn-images-1.medium.com/max/2000/0*-_wnYW14Jo-ue8fd.png)\n\n比起前面一坨黑黑的文字，這樣簡單的整理已經可以讓開發者可以一目了然到底發生了什麼事。\n\n## 顯示檔案內容\n\n不過，除了顯示錯誤訊息之外，我們也希望能夠同時顯示對應的檔案內容，以及上下文有哪些。因此右半邊可以利用錯誤訊息中提供的檔案名稱與行數，顯示對應的檔案內容。\n\n對於 nodejs 來說，只要透過 `fs.readFileSync` 就夠了。\n\n```javascript\nfunction(filename, line, row) {\n  const content = fs.readFileSync(filename);\n  content.toString()\n  \t.split('\\n')\n  \t.slice(line - 5, line + 5)\n  \t.map(content => `<span>${content}</span>`)\n  \t.join('\\n');\n}\n```\n\n這邊是透過很簡單的方式，直接印出前五行及後五行，更聰明的方式是透過像是 AST 之類的技巧，只印出對應到的 function 內容。不過現在我們直接印出前後五行的程式碼即可。\n\n做一些調整與修改，大概長這樣：\n\n![better error(3)](https://cdn-images-1.medium.com/max/2000/0*PUiGswh8G584aPli.png)\n\n透過簡單的 highlight，讓開發者馬上知道出錯的地方在哪邊。\n\n## REPL\n\n除了顯示 error 外，我們還希望這個頁面可以輸入一些簡單的程式，確認問題點後，再實際修改程式碼。\n\n在 nodejs 當中，有個 VM 的模組，能夠讓你使用 V8 的 Virtual Machine contexts 執行給定的 code。透過這個模組，我們就能夠實現類似 REPL 的功能了！\n\n```javascript\nconst debugContext = vm.createContext({\n  request: req,\n  response: res,\n  util: require('util'),\n  Buffer: require('buffer').Buffer,\n  stream: require('stream'),\n  console: {\n    log: util.format\n  },\n  clear: ''\n});\n```\n\n把想要暴露的變數傳入 context 當中，在透過 POST 的方式讀取前端的 code，就可以很方便地達到 debug 的效果。\n\n![better error(4)](https://cdn-images-1.medium.com/max/2000/0*j9Xv7cHFRKhIB0qT.png)\n\n（以上還需要做一些調整）\n\n## 全部整合！\n\n![better error(5)](https://cdn-images-1.medium.com/max/2000/0*9tlC_sW6UAyDeHgv.png)\n\n全部整合起來後，頁面大概會長這樣。\n\n比起原本的純文字，雖然花了一些功調整頁面 style 與實現 REPL 的功能，不過讓 debug 的流程變得更加流暢了。\n\n## 結論\n\n[express-error](https://github.com/kjj6198/express-error)\n\n詳細的實作在這個 repo 裏頭，最近如果比較有空會在將實作抽換為 middleware 的形式方便大家使用。也會逐漸優化整個 layout 與 code highlight 的部分，並且讓整個流程跟畫面更加流暢一些。雖然不知道會過多久就是了 XD\n\n如果有各種建議也歡迎提出 issue。\n\n","slug":"better-express-error","published":1,"date":"2017-11-09T16:48:23.000Z","updated":"2017-11-09T16:52:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqc000kiw5thd1z29j0","content":"<h2 id=\"Better-express-error\"><a href=\"#Better-express-error\" class=\"headerlink\" title=\"Better-express-error\"></a>Better-express-error</h2><p>在 express 開發時，如果遇到錯誤，通常是直接印在 error page 上，或者在 production 端直接導到 404, 500 page。</p>\n<p>這雖然沒有什麼值得一提的是，不過說真的，看到這種頁面，你會覺得開心嗎？</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*X2Aflg99Mnj0J6cO.png\" alt=\"default error\"></p>\n<p>熟悉 Ruby On Rails 開發的工程師，應該多少都用過 <a href=\"https://github.com/charliesome/better_errors\" target=\"_blank\" rel=\"external\">better_errors</a>，或者 rails 本身內建的 error trace page 來 debug。</p>\n<p>不過在 express 上，還沒有看到一個功能類似 better error 的 package，常常只能看這種醜不拉嘰的 error message 仰天長嘯。</p>\n<p>於是，自己做了一個簡單的 middleware 處理這件事。其實本質上就是 bettor errors 的 express 實作啦</p>\n<h3 id=\"分析錯誤訊息\"><a href=\"#分析錯誤訊息\" class=\"headerlink\" title=\"分析錯誤訊息\"></a>分析錯誤訊息</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">TypeError: range out of bound. Please check http://kjj6198.github.io for more information.</div><div class=\"line\">at app.get (/Users/kalan/code/express-error/server/app.js:17:9)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div><div class=\"line\">at next (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:137:13)</div><div class=\"line\">at Route.dispatch (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:112:3)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div><div class=\"line\">at /Users/kalan/code/express-error/node_modules/express/lib/router/index.js:281:22</div><div class=\"line\">at Function.process_params (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:335:12)</div><div class=\"line\">at next (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:275:10)</div><div class=\"line\">at jsonParser (/Users/kalan/code/express-error/node_modules/body-parser/lib/types/json.js:109:7)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div></pre></td></tr></table></figure>\n<p>仔細觀察後可以發現，錯誤訊息的格式是相當整齊規律的。首先，第一行為錯誤名稱與訊息，這通常是最重要的資訊。第二行以後則是調用 stack。at … 是某個函數的呼叫，括號內則是檔名與行數、row 的訊息。</p>\n<p>簡單分析完錯誤訊息後，我們可以把純文字轉為比較有用的資訊。因此透過 <code>split(&#39;\\n&#39;)</code>，再根據字串做簡單的正規表達式匹配，就能分成檔名與行數資訊了。</p>\n<h2 id=\"顯示-Error\"><a href=\"#顯示-Error\" class=\"headerlink\" title=\"顯示 Error\"></a>顯示 Error</h2><p>對於第一行的錯誤訊息，通常是最重要的資訊，因為程式碼就是在那邊噴錯的，因此對於第一行錯誤訊息，我們將他放在最顯眼的地方並且 highlight。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*T2X0Nqo4PGzGvEhf.png\" alt=\"better error(1)\"></p>\n<p>而第二行之後的錯誤訊息，用顏色及大小來標示檔案名稱、行數以及調用的函式名稱。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*-_wnYW14Jo-ue8fd.png\" alt=\"better error(2)\"></p>\n<p>比起前面一坨黑黑的文字，這樣簡單的整理已經可以讓開發者可以一目了然到底發生了什麼事。</p>\n<h2 id=\"顯示檔案內容\"><a href=\"#顯示檔案內容\" class=\"headerlink\" title=\"顯示檔案內容\"></a>顯示檔案內容</h2><p>不過，除了顯示錯誤訊息之外，我們也希望能夠同時顯示對應的檔案內容，以及上下文有哪些。因此右半邊可以利用錯誤訊息中提供的檔案名稱與行數，顯示對應的檔案內容。</p>\n<p>對於 nodejs 來說，只要透過 <code>fs.readFileSync</code> 就夠了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">filename, line, row</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> content = fs.readFileSync(filename);</div><div class=\"line\">  content.toString()</div><div class=\"line\">  \t.split(<span class=\"string\">'\\n'</span>)</div><div class=\"line\">  \t.slice(line - <span class=\"number\">5</span>, line + <span class=\"number\">5</span>)</div><div class=\"line\">  \t.map(<span class=\"function\"><span class=\"params\">content</span> =&gt;</span> <span class=\"string\">`&lt;span&gt;<span class=\"subst\">$&#123;content&#125;</span>&lt;/span&gt;`</span>)</div><div class=\"line\">  \t.join(<span class=\"string\">'\\n'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊是透過很簡單的方式，直接印出前五行及後五行，更聰明的方式是透過像是 AST 之類的技巧，只印出對應到的 function 內容。不過現在我們直接印出前後五行的程式碼即可。</p>\n<p>做一些調整與修改，大概長這樣：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*PUiGswh8G584aPli.png\" alt=\"better error(3)\"></p>\n<p>透過簡單的 highlight，讓開發者馬上知道出錯的地方在哪邊。</p>\n<h2 id=\"REPL\"><a href=\"#REPL\" class=\"headerlink\" title=\"REPL\"></a>REPL</h2><p>除了顯示 error 外，我們還希望這個頁面可以輸入一些簡單的程式，確認問題點後，再實際修改程式碼。</p>\n<p>在 nodejs 當中，有個 VM 的模組，能夠讓你使用 V8 的 Virtual Machine contexts 執行給定的 code。透過這個模組，我們就能夠實現類似 REPL 的功能了！</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> debugContext = vm.createContext(&#123;</div><div class=\"line\">  <span class=\"attr\">request</span>: req,</div><div class=\"line\">  <span class=\"attr\">response</span>: res,</div><div class=\"line\">  <span class=\"attr\">util</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>),</div><div class=\"line\">  <span class=\"attr\">Buffer</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'buffer'</span>).Buffer,</div><div class=\"line\">  <span class=\"attr\">stream</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>),</div><div class=\"line\">  <span class=\"attr\">console</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">log</span>: util.format</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">clear</span>: <span class=\"string\">''</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>把想要暴露的變數傳入 context 當中，在透過 POST 的方式讀取前端的 code，就可以很方便地達到 debug 的效果。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*j9Xv7cHFRKhIB0qT.png\" alt=\"better error(4)\"></p>\n<p>（以上還需要做一些調整）</p>\n<h2 id=\"全部整合！\"><a href=\"#全部整合！\" class=\"headerlink\" title=\"全部整合！\"></a>全部整合！</h2><p><img src=\"https://cdn-images-1.medium.com/max/2000/0*9tlC_sW6UAyDeHgv.png\" alt=\"better error(5)\"></p>\n<p>全部整合起來後，頁面大概會長這樣。</p>\n<p>比起原本的純文字，雖然花了一些功調整頁面 style 與實現 REPL 的功能，不過讓 debug 的流程變得更加流暢了。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p><a href=\"https://github.com/kjj6198/express-error\" target=\"_blank\" rel=\"external\">express-error</a></p>\n<p>詳細的實作在這個 repo 裏頭，最近如果比較有空會在將實作抽換為 middleware 的形式方便大家使用。也會逐漸優化整個 layout 與 code highlight 的部分，並且讓整個流程跟畫面更加流暢一些。雖然不知道會過多久就是了 XD</p>\n<p>如果有各種建議也歡迎提出 issue。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Better-express-error\"><a href=\"#Better-express-error\" class=\"headerlink\" title=\"Better-express-error\"></a>Better-express-error</h2><p>在 express 開發時，如果遇到錯誤，通常是直接印在 error page 上，或者在 production 端直接導到 404, 500 page。</p>\n<p>這雖然沒有什麼值得一提的是，不過說真的，看到這種頁面，你會覺得開心嗎？</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*X2Aflg99Mnj0J6cO.png\" alt=\"default error\"></p>\n<p>熟悉 Ruby On Rails 開發的工程師，應該多少都用過 <a href=\"https://github.com/charliesome/better_errors\" target=\"_blank\" rel=\"external\">better_errors</a>，或者 rails 本身內建的 error trace page 來 debug。</p>\n<p>不過在 express 上，還沒有看到一個功能類似 better error 的 package，常常只能看這種醜不拉嘰的 error message 仰天長嘯。</p>\n<p>於是，自己做了一個簡單的 middleware 處理這件事。其實本質上就是 bettor errors 的 express 實作啦</p>\n<h3 id=\"分析錯誤訊息\"><a href=\"#分析錯誤訊息\" class=\"headerlink\" title=\"分析錯誤訊息\"></a>分析錯誤訊息</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">TypeError: range out of bound. Please check http://kjj6198.github.io for more information.</div><div class=\"line\">at app.get (/Users/kalan/code/express-error/server/app.js:17:9)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div><div class=\"line\">at next (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:137:13)</div><div class=\"line\">at Route.dispatch (/Users/kalan/code/express-error/node_modules/express/lib/router/route.js:112:3)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div><div class=\"line\">at /Users/kalan/code/express-error/node_modules/express/lib/router/index.js:281:22</div><div class=\"line\">at Function.process_params (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:335:12)</div><div class=\"line\">at next (/Users/kalan/code/express-error/node_modules/express/lib/router/index.js:275:10)</div><div class=\"line\">at jsonParser (/Users/kalan/code/express-error/node_modules/body-parser/lib/types/json.js:109:7)</div><div class=\"line\">at Layer.handle [as handle_request] (/Users/kalan/code/express-error/node_modules/express/lib/router/layer.js:95:5)</div></pre></td></tr></table></figure>\n<p>仔細觀察後可以發現，錯誤訊息的格式是相當整齊規律的。首先，第一行為錯誤名稱與訊息，這通常是最重要的資訊。第二行以後則是調用 stack。at … 是某個函數的呼叫，括號內則是檔名與行數、row 的訊息。</p>\n<p>簡單分析完錯誤訊息後，我們可以把純文字轉為比較有用的資訊。因此透過 <code>split(&#39;\\n&#39;)</code>，再根據字串做簡單的正規表達式匹配，就能分成檔名與行數資訊了。</p>\n<h2 id=\"顯示-Error\"><a href=\"#顯示-Error\" class=\"headerlink\" title=\"顯示 Error\"></a>顯示 Error</h2><p>對於第一行的錯誤訊息，通常是最重要的資訊，因為程式碼就是在那邊噴錯的，因此對於第一行錯誤訊息，我們將他放在最顯眼的地方並且 highlight。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*T2X0Nqo4PGzGvEhf.png\" alt=\"better error(1)\"></p>\n<p>而第二行之後的錯誤訊息，用顏色及大小來標示檔案名稱、行數以及調用的函式名稱。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*-_wnYW14Jo-ue8fd.png\" alt=\"better error(2)\"></p>\n<p>比起前面一坨黑黑的文字，這樣簡單的整理已經可以讓開發者可以一目了然到底發生了什麼事。</p>\n<h2 id=\"顯示檔案內容\"><a href=\"#顯示檔案內容\" class=\"headerlink\" title=\"顯示檔案內容\"></a>顯示檔案內容</h2><p>不過，除了顯示錯誤訊息之外，我們也希望能夠同時顯示對應的檔案內容，以及上下文有哪些。因此右半邊可以利用錯誤訊息中提供的檔案名稱與行數，顯示對應的檔案內容。</p>\n<p>對於 nodejs 來說，只要透過 <code>fs.readFileSync</code> 就夠了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">filename, line, row</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> content = fs.readFileSync(filename);</div><div class=\"line\">  content.toString()</div><div class=\"line\">  \t.split(<span class=\"string\">'\\n'</span>)</div><div class=\"line\">  \t.slice(line - <span class=\"number\">5</span>, line + <span class=\"number\">5</span>)</div><div class=\"line\">  \t.map(<span class=\"function\"><span class=\"params\">content</span> =&gt;</span> <span class=\"string\">`&lt;span&gt;<span class=\"subst\">$&#123;content&#125;</span>&lt;/span&gt;`</span>)</div><div class=\"line\">  \t.join(<span class=\"string\">'\\n'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊是透過很簡單的方式，直接印出前五行及後五行，更聰明的方式是透過像是 AST 之類的技巧，只印出對應到的 function 內容。不過現在我們直接印出前後五行的程式碼即可。</p>\n<p>做一些調整與修改，大概長這樣：</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*PUiGswh8G584aPli.png\" alt=\"better error(3)\"></p>\n<p>透過簡單的 highlight，讓開發者馬上知道出錯的地方在哪邊。</p>\n<h2 id=\"REPL\"><a href=\"#REPL\" class=\"headerlink\" title=\"REPL\"></a>REPL</h2><p>除了顯示 error 外，我們還希望這個頁面可以輸入一些簡單的程式，確認問題點後，再實際修改程式碼。</p>\n<p>在 nodejs 當中，有個 VM 的模組，能夠讓你使用 V8 的 Virtual Machine contexts 執行給定的 code。透過這個模組，我們就能夠實現類似 REPL 的功能了！</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> debugContext = vm.createContext(&#123;</div><div class=\"line\">  <span class=\"attr\">request</span>: req,</div><div class=\"line\">  <span class=\"attr\">response</span>: res,</div><div class=\"line\">  <span class=\"attr\">util</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>),</div><div class=\"line\">  <span class=\"attr\">Buffer</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'buffer'</span>).Buffer,</div><div class=\"line\">  <span class=\"attr\">stream</span>: <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>),</div><div class=\"line\">  <span class=\"attr\">console</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">log</span>: util.format</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">clear</span>: <span class=\"string\">''</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>把想要暴露的變數傳入 context 當中，在透過 POST 的方式讀取前端的 code，就可以很方便地達到 debug 的效果。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*j9Xv7cHFRKhIB0qT.png\" alt=\"better error(4)\"></p>\n<p>（以上還需要做一些調整）</p>\n<h2 id=\"全部整合！\"><a href=\"#全部整合！\" class=\"headerlink\" title=\"全部整合！\"></a>全部整合！</h2><p><img src=\"https://cdn-images-1.medium.com/max/2000/0*9tlC_sW6UAyDeHgv.png\" alt=\"better error(5)\"></p>\n<p>全部整合起來後，頁面大概會長這樣。</p>\n<p>比起原本的純文字，雖然花了一些功調整頁面 style 與實現 REPL 的功能，不過讓 debug 的流程變得更加流暢了。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p><a href=\"https://github.com/kjj6198/express-error\" target=\"_blank\" rel=\"external\">express-error</a></p>\n<p>詳細的實作在這個 repo 裏頭，最近如果比較有空會在將實作抽換為 middleware 的形式方便大家使用。也會逐漸優化整個 layout 與 code highlight 的部分，並且讓整個流程跟畫面更加流暢一些。雖然不知道會過多久就是了 XD</p>\n<p>如果有各種建議也歡迎提出 issue。</p>\n"},{"title":"code-review-101","date":"2016-12-31T16:00:00.000Z","_content":"\n## 前言\n\n身為前端工程師，通常在整個團隊裡面會是最常發送 pull request 的人。為了讓自己的 PR 更容易被測試，以及讓 reviewer 更容易的 review，總結了一些注意事項。\n\n### pull request 的描述\n\n- 這個 pull request 的目的。例如：修正 layout、新增 feature、某個畫面的 style 等等\n- 記住每個公司的成員都可以看見 pull request ，所以確保 pull request 的敘述提供夠完整的資訊。\n- 明確地說明你想要怎樣的 feedback。\n- 使用 prefix 來說明你的 pull request 狀態\n- 將需要看這個 code 的成員加入進來（可以使用 github 的 assign 功能）\n\n### 提供 feedback\n\n- 如果你不同意 pull request 內的寫法，先停下來思考一下，為什麼你不同意。想清楚了再留下 comment\n- 用詢問代替命令。「為什麼你不採用這樣的寫法呢？」優於「不要這樣寫！」，先問問看對方的想法或是意見，說不定他們不那樣寫是有理由的，這時候就可以做適當的溝通與交流。\n- 解釋為什麼你覺得這些 code 需要被修改（不符合 style guide？不符合公司命名規範？沒有寫 test case？）\n- 提供更好的方法來改善目前的 code\n- 盡量避免具有攻擊性的評論。（ex:這樣寫很白痴。）\n- 保持謙虛。\n- 盡量避免斷定。（別這樣子寫 code！）\n- 在線上溝通的時候，難免會有某些誤解產生。這個時候可以考慮面對面溝通。\n- 用個 emoji 來加強你的語氣，例如：good job 👋 👍。 需要修正哦👻（這好像有點嘲諷？\n\n### 回應 feedback\n\n- 感謝那些願意幫你 code review 的人。\n- 對於任何不清楚的地方，發問就對了。\n- 如果這個 feedback 有被實作或是在某個 commit 裡面，提供連結給他。\n- 如果討論越來越複雜而且一直得不到結論，試著當面跟他溝通。\n\n### 每個人\n\n- 必須理解大家都有不同的 coding 風格，而且寫程式總會有許多解法跟選擇，所以在討論的時候應該適當做權衡，並且充分解釋為什麼你覺得這樣比較好。\n- 用問的，不要用命令的。\n- 不要劃分責任（這是你寫的不關我的事、這部分是你要處理的）\n- 試著去理解一下作者的觀點和想法。\n- 如果有一個 pull request 被 merge 了，記得留言並且感謝發送 pull request 的人。（optional）\n\n### 結論\n\n雖然以上總結了那麼多點，不過我覺得圍繞的點還是在於**是否為對方著想吧！**身為一位 deployer，或是 code reviewer，你會希望看到怎樣的 pull request，從這個角度切入，或許會更有感觸也說不定。畢竟如果出錯了，甚至是因為自己的疏忽，把 code 部署到 production 上了，還要再浪費整個團隊的時間重新找 bug，再重新部署一次。\n\n","source":"_posts/code-review-101.md","raw":"---\ntitle: code-review-101\ncategories: 前端\ndate: 2017-1-1\n---\n\n## 前言\n\n身為前端工程師，通常在整個團隊裡面會是最常發送 pull request 的人。為了讓自己的 PR 更容易被測試，以及讓 reviewer 更容易的 review，總結了一些注意事項。\n\n### pull request 的描述\n\n- 這個 pull request 的目的。例如：修正 layout、新增 feature、某個畫面的 style 等等\n- 記住每個公司的成員都可以看見 pull request ，所以確保 pull request 的敘述提供夠完整的資訊。\n- 明確地說明你想要怎樣的 feedback。\n- 使用 prefix 來說明你的 pull request 狀態\n- 將需要看這個 code 的成員加入進來（可以使用 github 的 assign 功能）\n\n### 提供 feedback\n\n- 如果你不同意 pull request 內的寫法，先停下來思考一下，為什麼你不同意。想清楚了再留下 comment\n- 用詢問代替命令。「為什麼你不採用這樣的寫法呢？」優於「不要這樣寫！」，先問問看對方的想法或是意見，說不定他們不那樣寫是有理由的，這時候就可以做適當的溝通與交流。\n- 解釋為什麼你覺得這些 code 需要被修改（不符合 style guide？不符合公司命名規範？沒有寫 test case？）\n- 提供更好的方法來改善目前的 code\n- 盡量避免具有攻擊性的評論。（ex:這樣寫很白痴。）\n- 保持謙虛。\n- 盡量避免斷定。（別這樣子寫 code！）\n- 在線上溝通的時候，難免會有某些誤解產生。這個時候可以考慮面對面溝通。\n- 用個 emoji 來加強你的語氣，例如：good job 👋 👍。 需要修正哦👻（這好像有點嘲諷？\n\n### 回應 feedback\n\n- 感謝那些願意幫你 code review 的人。\n- 對於任何不清楚的地方，發問就對了。\n- 如果這個 feedback 有被實作或是在某個 commit 裡面，提供連結給他。\n- 如果討論越來越複雜而且一直得不到結論，試著當面跟他溝通。\n\n### 每個人\n\n- 必須理解大家都有不同的 coding 風格，而且寫程式總會有許多解法跟選擇，所以在討論的時候應該適當做權衡，並且充分解釋為什麼你覺得這樣比較好。\n- 用問的，不要用命令的。\n- 不要劃分責任（這是你寫的不關我的事、這部分是你要處理的）\n- 試著去理解一下作者的觀點和想法。\n- 如果有一個 pull request 被 merge 了，記得留言並且感謝發送 pull request 的人。（optional）\n\n### 結論\n\n雖然以上總結了那麼多點，不過我覺得圍繞的點還是在於**是否為對方著想吧！**身為一位 deployer，或是 code reviewer，你會希望看到怎樣的 pull request，從這個角度切入，或許會更有感觸也說不定。畢竟如果出錯了，甚至是因為自己的疏忽，把 code 部署到 production 上了，還要再浪費整個團隊的時間重新找 bug，再重新部署一次。\n\n","slug":"code-review-101","published":1,"updated":"2017-02-28T16:19:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqe000niw5twr44t5po","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>身為前端工程師，通常在整個團隊裡面會是最常發送 pull request 的人。為了讓自己的 PR 更容易被測試，以及讓 reviewer 更容易的 review，總結了一些注意事項。</p>\n<h3 id=\"pull-request-的描述\"><a href=\"#pull-request-的描述\" class=\"headerlink\" title=\"pull request 的描述\"></a>pull request 的描述</h3><ul>\n<li>這個 pull request 的目的。例如：修正 layout、新增 feature、某個畫面的 style 等等</li>\n<li>記住每個公司的成員都可以看見 pull request ，所以確保 pull request 的敘述提供夠完整的資訊。</li>\n<li>明確地說明你想要怎樣的 feedback。</li>\n<li>使用 prefix 來說明你的 pull request 狀態</li>\n<li>將需要看這個 code 的成員加入進來（可以使用 github 的 assign 功能）</li>\n</ul>\n<h3 id=\"提供-feedback\"><a href=\"#提供-feedback\" class=\"headerlink\" title=\"提供 feedback\"></a>提供 feedback</h3><ul>\n<li>如果你不同意 pull request 內的寫法，先停下來思考一下，為什麼你不同意。想清楚了再留下 comment</li>\n<li>用詢問代替命令。「為什麼你不採用這樣的寫法呢？」優於「不要這樣寫！」，先問問看對方的想法或是意見，說不定他們不那樣寫是有理由的，這時候就可以做適當的溝通與交流。</li>\n<li>解釋為什麼你覺得這些 code 需要被修改（不符合 style guide？不符合公司命名規範？沒有寫 test case？）</li>\n<li>提供更好的方法來改善目前的 code</li>\n<li>盡量避免具有攻擊性的評論。（ex:這樣寫很白痴。）</li>\n<li>保持謙虛。</li>\n<li>盡量避免斷定。（別這樣子寫 code！）</li>\n<li>在線上溝通的時候，難免會有某些誤解產生。這個時候可以考慮面對面溝通。</li>\n<li>用個 emoji 來加強你的語氣，例如：good job 👋 👍。 需要修正哦👻（這好像有點嘲諷？</li>\n</ul>\n<h3 id=\"回應-feedback\"><a href=\"#回應-feedback\" class=\"headerlink\" title=\"回應 feedback\"></a>回應 feedback</h3><ul>\n<li>感謝那些願意幫你 code review 的人。</li>\n<li>對於任何不清楚的地方，發問就對了。</li>\n<li>如果這個 feedback 有被實作或是在某個 commit 裡面，提供連結給他。</li>\n<li>如果討論越來越複雜而且一直得不到結論，試著當面跟他溝通。</li>\n</ul>\n<h3 id=\"每個人\"><a href=\"#每個人\" class=\"headerlink\" title=\"每個人\"></a>每個人</h3><ul>\n<li>必須理解大家都有不同的 coding 風格，而且寫程式總會有許多解法跟選擇，所以在討論的時候應該適當做權衡，並且充分解釋為什麼你覺得這樣比較好。</li>\n<li>用問的，不要用命令的。</li>\n<li>不要劃分責任（這是你寫的不關我的事、這部分是你要處理的）</li>\n<li>試著去理解一下作者的觀點和想法。</li>\n<li>如果有一個 pull request 被 merge 了，記得留言並且感謝發送 pull request 的人。（optional）</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>雖然以上總結了那麼多點，不過我覺得圍繞的點還是在於<strong>是否為對方著想吧！</strong>身為一位 deployer，或是 code reviewer，你會希望看到怎樣的 pull request，從這個角度切入，或許會更有感觸也說不定。畢竟如果出錯了，甚至是因為自己的疏忽，把 code 部署到 production 上了，還要再浪費整個團隊的時間重新找 bug，再重新部署一次。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>身為前端工程師，通常在整個團隊裡面會是最常發送 pull request 的人。為了讓自己的 PR 更容易被測試，以及讓 reviewer 更容易的 review，總結了一些注意事項。</p>\n<h3 id=\"pull-request-的描述\"><a href=\"#pull-request-的描述\" class=\"headerlink\" title=\"pull request 的描述\"></a>pull request 的描述</h3><ul>\n<li>這個 pull request 的目的。例如：修正 layout、新增 feature、某個畫面的 style 等等</li>\n<li>記住每個公司的成員都可以看見 pull request ，所以確保 pull request 的敘述提供夠完整的資訊。</li>\n<li>明確地說明你想要怎樣的 feedback。</li>\n<li>使用 prefix 來說明你的 pull request 狀態</li>\n<li>將需要看這個 code 的成員加入進來（可以使用 github 的 assign 功能）</li>\n</ul>\n<h3 id=\"提供-feedback\"><a href=\"#提供-feedback\" class=\"headerlink\" title=\"提供 feedback\"></a>提供 feedback</h3><ul>\n<li>如果你不同意 pull request 內的寫法，先停下來思考一下，為什麼你不同意。想清楚了再留下 comment</li>\n<li>用詢問代替命令。「為什麼你不採用這樣的寫法呢？」優於「不要這樣寫！」，先問問看對方的想法或是意見，說不定他們不那樣寫是有理由的，這時候就可以做適當的溝通與交流。</li>\n<li>解釋為什麼你覺得這些 code 需要被修改（不符合 style guide？不符合公司命名規範？沒有寫 test case？）</li>\n<li>提供更好的方法來改善目前的 code</li>\n<li>盡量避免具有攻擊性的評論。（ex:這樣寫很白痴。）</li>\n<li>保持謙虛。</li>\n<li>盡量避免斷定。（別這樣子寫 code！）</li>\n<li>在線上溝通的時候，難免會有某些誤解產生。這個時候可以考慮面對面溝通。</li>\n<li>用個 emoji 來加強你的語氣，例如：good job 👋 👍。 需要修正哦👻（這好像有點嘲諷？</li>\n</ul>\n<h3 id=\"回應-feedback\"><a href=\"#回應-feedback\" class=\"headerlink\" title=\"回應 feedback\"></a>回應 feedback</h3><ul>\n<li>感謝那些願意幫你 code review 的人。</li>\n<li>對於任何不清楚的地方，發問就對了。</li>\n<li>如果這個 feedback 有被實作或是在某個 commit 裡面，提供連結給他。</li>\n<li>如果討論越來越複雜而且一直得不到結論，試著當面跟他溝通。</li>\n</ul>\n<h3 id=\"每個人\"><a href=\"#每個人\" class=\"headerlink\" title=\"每個人\"></a>每個人</h3><ul>\n<li>必須理解大家都有不同的 coding 風格，而且寫程式總會有許多解法跟選擇，所以在討論的時候應該適當做權衡，並且充分解釋為什麼你覺得這樣比較好。</li>\n<li>用問的，不要用命令的。</li>\n<li>不要劃分責任（這是你寫的不關我的事、這部分是你要處理的）</li>\n<li>試著去理解一下作者的觀點和想法。</li>\n<li>如果有一個 pull request 被 merge 了，記得留言並且感謝發送 pull request 的人。（optional）</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>雖然以上總結了那麼多點，不過我覺得圍繞的點還是在於<strong>是否為對方著想吧！</strong>身為一位 deployer，或是 code reviewer，你會希望看到怎樣的 pull request，從這個角度切入，或許會更有感觸也說不定。畢竟如果出錯了，甚至是因為自己的疏忽，把 code 部署到 production 上了，還要再浪費整個團隊的時間重新找 bug，再重新部署一次。</p>\n"},{"title":"Rails app 自動化部屬 - hubot 與 heaven","_content":"\n\n\n### 前言\n\n目前所在的公司裡頭是直接在本地端的 terminal 跑 `cap staging deploy` 指令。 [capistrano](https://github.com/capistrano/capistrano) 作為自動部署化的工具非常方便，但難免會遇到幾個問題：\n\n- 不是團隊中的每個人都有相同的環境\n- 大家都在部署，結果 staging 上現在到底是哪個 branch，完全一頭霧水。\n- deploy 這件事情卡在本地端。\n\n對一家新創來說，越穩定的開發效率和流程，就越能夠專注在產品當中。所以我們希望做到幾件事：\n\n- 開發團隊都可以輕鬆的部署\n- 不用在本地端下指令部署，還要多設定 ssh。\n- 就算沒有開著電腦，也可以輕鬆地部署\n- 能夠記錄部署的狀況\n- 如果出問題了，可以快速 rollback 回上一個版本\n\n逐漸厭倦了在 terminal 打指令，ssh key 手動加的日子。於是打算自己研究有沒有更流暢的部署流程。\n\n之前在 Sudo 裡頭，幸好有 [@ocowchun](https://twitter.com/ocowchun) 跟 [@henry](https://twitter.com/henry40408) 兩位懶工，devops 做得非常完整，才能夠專注在開發功能，而不是一堆繁複的設定當中。（雖然才剛開發完就關閉服務了...）\n\n目前覺得最合適的解決方案是搭配 `hubot-deploy` 以及 `heaven` 來幫助部署。\n\n但 heaven 的文件實在寫的有夠爛。\n\n看了老半天，甚至看了一下 source code 才知道到底該怎麼設定。於是決定將整個設定流程分享給大家，希望能夠減少其他 devops 們走歪路的時間。\n\n## 主要流程\n\n{% asset_img \"process.png\" \"Github deployment process\" %}\n\nhubot 接收到部署指令後，會發送 [github deployment](https://developer.github.com/v3/repos/deployments)，同時會觸發 `deployment` 這個事件，這時 github 就會發送 POST 給在 webhook 設置的 url（這邊接收者為 `heaven`），heaven 接收到請求之後，就會開始部署，再一一回傳我們想要知道的部數狀況。\n\n### hubot-deploy\n\nhubot-deploy 能夠用 slack 對 slack-bot 下指令的方式建立 github 的 [deployment](https://developer.github.com/v3/repos/deployments) event。\n\n### heaven\n\n是一個 Rails 的 application。主要有一個 `/events` 負責接收從 github deployment 傳來的 deployment 與 payload。\n\n## 設定步驟\n\n`heaven` 的文件寫得不明所以`hubot-deploy` 也是草草帶過。幾乎只能靠著他們提供的流程圖，不斷的試錯與通靈。\n\n### 設定 hubot-deploy\n\n- [getting started with hubot](https://hubot.github.com/docs/)\n\n1. 利用 yeoman 產生 hubot，並且選擇 `adapter` 為 `slack`。\n\n2. 在 `package.json` 中加入 `hubot-deploy`，或者 run `npm install hubot-deploy --save-dev`\n\n3. 在 `external-scripts.json` 裡頭加入 `hubot-deploy`。\n\n4. 到  `apps.json` 中設定想要部署的 repos 有哪些：\n\n   ```\n   {\n     \"repo_name\": {\n       \"provider\": \"capistrano\",\n       \"auto_merge\": false,\n       \"repository\": \"kjj6198/deploy101\",\n       \"environments\": [\"production\", \"staging\"]\n     }\n   }\n\n   ```\n\n   這些資料在 hubot 送出 deployment 時會一併塞入 payload 當中。像是這樣：\n   ```\n       payload: {\n         \"name\": \"repo_name\",\n         \"robotName\": \"yourrobot\",\n         \"hosts\": \"\",\n         \"notify\": {\n           \"adapter\": \"slack\",\n           \"room\": \"123456789\",\n           \"user\": \"123456789\",\n           \"user_name\": \"kjj6198\"\n         },\n         \"config\": {\n           \"provider\": \"capistrano\",\n           \"auto_merge\": false,\n           \"repository\": \"kjj6198/deploy101\",\n           \"environments\": [\n             \"production\",\n             \"staging\"\n           ]\n         }\n       }\n    ```\n\n特別要注意的是，provider 的欄位之後會送給 heaven，所以 provider 的值必須是 heaven 有的（之後會提到），或是自己實作 Provider。\n\n這樣子我們的 hubot 就算設定完成了。先部署到 heroku 上測試看看，部署到 heroku 很簡單：\n\n```\nheroku login\ngit init\ngit add .\ngit commit \"init\"\nheroku create\ngit push heroku master\n```\n\n部署成功後，比較重要的變數有幾個：\n\n| 變數名稱                        | 用途                                       |\n| --------------------------- | ---------------------------------------- |\n| HUBOT_GITHUB_TOKEN          | GITHUB_TOKEN，到**個人帳號** > settings > personal access tokens 設定。設定好權限，因為 hubot 只是用來建立 repo 的 deployment，勾選 repo 即可。 |\n| HUBOT_SLACK_TOKEN           | 你的 slack-bot token。可以到[這裡](https://slack.com/apps/A0F7XDU93-hubot)設定 |\n\n全域變數可以到 heroku 的 dashboard 或是直接用 command line 設定：\n\n```\nheroku config:set HUBOT_GITHUB_TOKEN=abcccc\nheroku config:set HUBOT_SLACK_TOKEN=abcccc\n```\n\n測試一下是否成功。在你設定的頻道中輸入 `hubot deploy:version`\n\n{% asset_img \"success.png\" \"success\" %}\n\n其中的 `hubot` 要跟你的機器人名稱相同，例如機器人的名稱為 tripmomo，那麼我就要輸入 `tripmomo deploy:version`。\n\n成功的話 hubot 會回應你目前的版本訊息。\n\n5. 確認 hubot 有送出 deployment 事件。輸入 `hubot deploy app to statging`\n\n6. 輸入  `curl -H \"Authorization: token YOUR_GITHUB_TOKEN\" https://api.github.com/repos/my-github/my-repo/deployments` 看看 deployment 是否建立成功。如果成功會回傳：\n\n   ```javascript\n   {\n       \"url\": \"https://api.github.com/repos/my-github/my-repo/deployments/28301325\",\n       \"id\": 123456,\n       \"sha\": \"2e3xxxxxxxaaaaaaabbbbbbb\",\n       \"ref\": \"develop\",\n       \"task\": \"deploy\",\n       \"payload\": { // from apps.json\n         \"name\": \"my-app\",\n         \"robotName\": \"tripmomo\",\n         \"hosts\": \"\",\n         \"notify\": {\n           \"adapter\": \"slack\",\n           \"room\": \"aabbccdd\",\n           \"user\": \"aabbccdd\",\n           \"user_name\": \"kalan.chen\"\n         },\n         \"config\": { \n           \"provider\": \"capistrano\",\n           \"auto_merge\": false,\n           \"repository\": \"my-github/my-repo\",\n           \"environments\": [\n             \"production\",\n             \"staging\"\n           ]\n         }\n       },\n       \"environment\": \"staging\",\n       \"description\": \"deploy on staging from hubot-deploy-v0.13.27\",\n       \"creator\": {\n         \"login\": \"kjj6198\",\n         \"id\": 123456,\n         \"avatar_url\": \"https://avatars2.githubusercontent.com/u/123456?v=3\",\n         \"gravatar_id\": \"\",\n         \"url\": \"https://api.github.com/users/kjj6198\",\n         \"html_url\": \"https://github.com/kjj6198\",\n         \"followers_url\": \"https://api.github.com/users/kjj6198/followers\",\n         \"following_url\": \"https://api.github.com/users/kjj6198/following{/other_user}\",\n         \"gists_url\": \"https://api.github.com/users/kjj6198/gists{/gist_id}\",\n         \"starred_url\": \"https://api.github.com/users/kjj6198/starred{/owner}{/repo}\",\n         \"subscriptions_url\": \"https://api.github.com/users/kjj6198/subscriptions\",\n         \"organizations_url\": \"https://api.github.com/users/kjj6198/orgs\",\n         \"repos_url\": \"https://api.github.com/users/kalanchen/repos\",\n         \"events_url\": \"https://api.github.com/users/kjj6198/events{/privacy}\",\n         \"received_events_url\":\"https://api.github.com/users/kjj6198/received_events\",\n         \"type\": \"User\",\n         \"site_admin\": false\n       },\n       \"created_at\": \"2017-03-01T12:24:20Z\",\n       \"updated_at\": \"2017-03-01T12:24:20Z\",\n       \"statuses_url\": \"https://api.github.com/repos/my-github/my-repo/deployments/12345667/statuses\",\n       \"repository_url\": \"https://api.github.com/repos/my-github/my-repo\"\n     }\n   ```\n\n   更多 deployment API 可以到 [github deployment API](https://developer.github.com/v3/repos/deployments/) 看看。\n\n### 設定 heaven\n\n- 到 [heaven](https://github.com/atmos/heaven) 將 repo clone 下來。\n- 設定全域變數\n\n| 變數名稱                   | 用途                                       |\n| ---------------------- | ---------------------------------------- |\n| DEPLOYMENT_PRIVATE_KEY | 因為 heaven 是用 ssh 登入，需要 private key。如果 server 在 ec2 上，也可以用 pem 的方式來設定。 |\n| GITHUB_CLIENT_ID       | 到個人設定頁面 > OAuth application 產生 |\n| GITHUB_CLIENT_SECRET   | 到個人設定頁面 > OAuth application 產生 |\n| DATABASE_URL           | heaven 會建立資料庫紀錄 deployment               |\n| GITHUB_TOKEN           | heaven 會使用 gist 來當作 stdout stderr。所以在設定 token 時記得把 `gist` 打勾勾。 |\n\n其他的變數可以到 [這裡](https://github.com/atmos/heaven/blob/master/doc/installation.md) 查看。\n\n補充說明 `DEPLOYMENT_PRIVATE_KEY`：原始檔案長這樣\n\n```\n-----BEGIN RSA PRIVATE KEY-----\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\nhQ77NMpQlmIC+TCJsLoADqwmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\n-----END RSA PRIVATE KEY-----\n```\n\n要修改成：\n\n```\n-----BEGIN RSA PRIVATE KEY-----\\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\\nhQ77NMpQlmIC+TCJsLohtJEmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\\n-----END RSA PRIVATE KEY-----\n```\n\n*既然公開，這組 private key 當然報廢了*\n\n#### 設定 Gemfile\n\n因為 heaven 的動作會是拉下最新的 repo 後，執行 `cap ... deploy` 的指令，所以capistrano 的版本必須跟要部署的那個版本相同。同時，也要注意任何 asset 相關的 gem 也要一併放入 heaven。舉例來說，如果我的 Capfile 有用到\n\n```ruby\ngem 'capistrano', '3.4.0'\ngem 'capistrano3-unicorn'\ngem 'capistrano-rails'\ngem 'sitemap_generator'\ngem 'capistrano-rvm'\n```\n\n那麼**就要將這些 gem 加入 heaven 的 Gemfile 當中**。因為 heaven 會將要部署的 repo 抓下來之後，進去資料夾輸入 `cap staging ... deploy` 的指令，所以如果沒有安裝相對應的 gem，heaven 就沒辦法部署了。\n\n### 串接 github deployment\n\n- 先到 repo 的 settings > deploy key 加入 ssh-key。\n- 到 repo 的 settings > webhooks > add webhook\n- Payload URL 填入你的 heaven 部署 host 的網址，例如：https://yourapp.com.tw/events。如果想要修改，可以到 heaven repo 的 `routes.rb` 中修改\n- Content Type 選擇 `application/json`\n- Secret 依需求選填\n- 下面問你這個 webhook 要監聽哪些事件，我們是用 deployment 來做部署的，所以選擇 deployment 以及 deployment status。\n\n#### 部署\n\n如果是部署到 heroku 的話，因為 heaven 要開 redis 跟 resque。記得加入相對應的 add-on 以及 `REDIS_URL` 。\n\n同時別忘記了要建立資料庫 `heroku run rake db:migrate`。\n\n## hubot-deploy 常用指令\n\n- `hubot deploy:version` 目前版本\n- `hubot deploy repo`： 根據 `apps.json` deploy 指定的 repo name。\n- `hubot deploy repo/branch`：將指定 repo 的某一個 branch 部署到預設的 environment 中。可設定 `HUBOT_DEPLOY_DEFAULT_ENVIRONMENT` 來決定\n- `hubot deploy repo/branch to staging`：將指定 repo 中的 branch 部署到 `staging`\n\n## 筆記\n\n- heaven 的文件雖然不明所以，但是程式碼跟測試寫得蠻完整的，熟悉 ruby 的開發者甚至可以將整個 heaven 架設好，修改一下程式碼，加上 routes，直接建立 UI 一鍵部署。\n\n- `OptionParser::AmbiguousOption: ambiguous option: -s`：不確定是不是 Capistrano 更新之後指令有變動。解決方法是到 `lib/heaven/provider/capistrano.rb` 修改 `deploy_command`\n\n  ```ruby\n  module Heaven\n    # Top-level module for providers.\n    module Provider\n      # The capistrano provider.\n      class Capistrano < DefaultProvider\n   \t.....\n        def execute\n          return execute_and_log([\"/usr/bin/true\"]) if Rails.env.test?\n\n          unless File.exist?(checkout_directory)\n            log \"Cloning #{repository_url} into #{checkout_directory}\"\n            execute_and_log([\"git\", \"clone\", clone_url, checkout_directory])\n          end\n\n          Dir.chdir(checkout_directory) do\n            log \"Fetching the latest code\"\n            execute_and_log(%w{git fetch})\n            execute_and_log([\"git\", \"reset\", \"--hard\", sha])\n            deploy_command = [cap_path, environment, \"部署的 cap 指令\"]\n            log \"Executing capistrano: #{deploy_command.join(\" \")}\"\n            execute_and_log(deploy_command)\n          end\n        end\n      end\n    end\n  end\n  ```\n\n- 因為 heaven 在部署時會使用 gist 當作 stdout 跟 stderr，在設定 GITHUB_TOKEN 的時候一定要記得把 gist 的 scope 打勾\n\n- `Net::SSH::AuthenticationFailed: Authentication failed for user apps@staging.tripmoment.com` ：SSH private_key 設定有誤。先確定這組 ssh key 是否已經加入 github，再來確定將 `passphrase` 拿掉，並且將 ssh private key 變成一行加上 \\n。\n\n- `ArgumentError: Could not parse PKey: no start line` 沒有將 SSH private key 的 passphrase 移除\n\n## 後記\n\n通常在公司裡頭，開發團隊人數不多的話，devops 都是由後端兼任的，前端比較少接觸。不過用「我是前端，我不需要管 devops」這種藉口搪塞自己不去學習好像也說不太過去，畢竟開發一個健全的系統絕對不可能只有前端而已。\n\n這篇文章試著將文件中沒有提到或是省略的步驟整合起來，heaven 跟 hubot-deploy 的文件中有太多沒有提到的細節，導致整合起來時需要花不少時間試錯。希望能夠節省大家踩雷跟翻原始碼的時間。\n\n這篇文章還有許多 devops 的細節沒有詳述，畢竟建立一套完整的 devops pipeline 需要時間，自己對於 CI/CD 的設定也還不夠熟悉。\n\n### 參考資源：\n\n- [顆顆 devops 筆記](https://github.com/ocowchun/many101/blob/master/devops/chatops.md)\n- [chatops](http://lazier.cwchang.me/2015/01/24/ChatOps-Hubot-Capistrano-Heaven/)\n\n\n\n","source":"_posts/chatops.md","raw":"---\ntitle: Rails app 自動化部屬 - hubot 與 heaven\ncategories: rails\ntags:\n  - devops\n  - chatops\n  - capistrano\n---\n\n\n\n### 前言\n\n目前所在的公司裡頭是直接在本地端的 terminal 跑 `cap staging deploy` 指令。 [capistrano](https://github.com/capistrano/capistrano) 作為自動部署化的工具非常方便，但難免會遇到幾個問題：\n\n- 不是團隊中的每個人都有相同的環境\n- 大家都在部署，結果 staging 上現在到底是哪個 branch，完全一頭霧水。\n- deploy 這件事情卡在本地端。\n\n對一家新創來說，越穩定的開發效率和流程，就越能夠專注在產品當中。所以我們希望做到幾件事：\n\n- 開發團隊都可以輕鬆的部署\n- 不用在本地端下指令部署，還要多設定 ssh。\n- 就算沒有開著電腦，也可以輕鬆地部署\n- 能夠記錄部署的狀況\n- 如果出問題了，可以快速 rollback 回上一個版本\n\n逐漸厭倦了在 terminal 打指令，ssh key 手動加的日子。於是打算自己研究有沒有更流暢的部署流程。\n\n之前在 Sudo 裡頭，幸好有 [@ocowchun](https://twitter.com/ocowchun) 跟 [@henry](https://twitter.com/henry40408) 兩位懶工，devops 做得非常完整，才能夠專注在開發功能，而不是一堆繁複的設定當中。（雖然才剛開發完就關閉服務了...）\n\n目前覺得最合適的解決方案是搭配 `hubot-deploy` 以及 `heaven` 來幫助部署。\n\n但 heaven 的文件實在寫的有夠爛。\n\n看了老半天，甚至看了一下 source code 才知道到底該怎麼設定。於是決定將整個設定流程分享給大家，希望能夠減少其他 devops 們走歪路的時間。\n\n## 主要流程\n\n{% asset_img \"process.png\" \"Github deployment process\" %}\n\nhubot 接收到部署指令後，會發送 [github deployment](https://developer.github.com/v3/repos/deployments)，同時會觸發 `deployment` 這個事件，這時 github 就會發送 POST 給在 webhook 設置的 url（這邊接收者為 `heaven`），heaven 接收到請求之後，就會開始部署，再一一回傳我們想要知道的部數狀況。\n\n### hubot-deploy\n\nhubot-deploy 能夠用 slack 對 slack-bot 下指令的方式建立 github 的 [deployment](https://developer.github.com/v3/repos/deployments) event。\n\n### heaven\n\n是一個 Rails 的 application。主要有一個 `/events` 負責接收從 github deployment 傳來的 deployment 與 payload。\n\n## 設定步驟\n\n`heaven` 的文件寫得不明所以`hubot-deploy` 也是草草帶過。幾乎只能靠著他們提供的流程圖，不斷的試錯與通靈。\n\n### 設定 hubot-deploy\n\n- [getting started with hubot](https://hubot.github.com/docs/)\n\n1. 利用 yeoman 產生 hubot，並且選擇 `adapter` 為 `slack`。\n\n2. 在 `package.json` 中加入 `hubot-deploy`，或者 run `npm install hubot-deploy --save-dev`\n\n3. 在 `external-scripts.json` 裡頭加入 `hubot-deploy`。\n\n4. 到  `apps.json` 中設定想要部署的 repos 有哪些：\n\n   ```\n   {\n     \"repo_name\": {\n       \"provider\": \"capistrano\",\n       \"auto_merge\": false,\n       \"repository\": \"kjj6198/deploy101\",\n       \"environments\": [\"production\", \"staging\"]\n     }\n   }\n\n   ```\n\n   這些資料在 hubot 送出 deployment 時會一併塞入 payload 當中。像是這樣：\n   ```\n       payload: {\n         \"name\": \"repo_name\",\n         \"robotName\": \"yourrobot\",\n         \"hosts\": \"\",\n         \"notify\": {\n           \"adapter\": \"slack\",\n           \"room\": \"123456789\",\n           \"user\": \"123456789\",\n           \"user_name\": \"kjj6198\"\n         },\n         \"config\": {\n           \"provider\": \"capistrano\",\n           \"auto_merge\": false,\n           \"repository\": \"kjj6198/deploy101\",\n           \"environments\": [\n             \"production\",\n             \"staging\"\n           ]\n         }\n       }\n    ```\n\n特別要注意的是，provider 的欄位之後會送給 heaven，所以 provider 的值必須是 heaven 有的（之後會提到），或是自己實作 Provider。\n\n這樣子我們的 hubot 就算設定完成了。先部署到 heroku 上測試看看，部署到 heroku 很簡單：\n\n```\nheroku login\ngit init\ngit add .\ngit commit \"init\"\nheroku create\ngit push heroku master\n```\n\n部署成功後，比較重要的變數有幾個：\n\n| 變數名稱                        | 用途                                       |\n| --------------------------- | ---------------------------------------- |\n| HUBOT_GITHUB_TOKEN          | GITHUB_TOKEN，到**個人帳號** > settings > personal access tokens 設定。設定好權限，因為 hubot 只是用來建立 repo 的 deployment，勾選 repo 即可。 |\n| HUBOT_SLACK_TOKEN           | 你的 slack-bot token。可以到[這裡](https://slack.com/apps/A0F7XDU93-hubot)設定 |\n\n全域變數可以到 heroku 的 dashboard 或是直接用 command line 設定：\n\n```\nheroku config:set HUBOT_GITHUB_TOKEN=abcccc\nheroku config:set HUBOT_SLACK_TOKEN=abcccc\n```\n\n測試一下是否成功。在你設定的頻道中輸入 `hubot deploy:version`\n\n{% asset_img \"success.png\" \"success\" %}\n\n其中的 `hubot` 要跟你的機器人名稱相同，例如機器人的名稱為 tripmomo，那麼我就要輸入 `tripmomo deploy:version`。\n\n成功的話 hubot 會回應你目前的版本訊息。\n\n5. 確認 hubot 有送出 deployment 事件。輸入 `hubot deploy app to statging`\n\n6. 輸入  `curl -H \"Authorization: token YOUR_GITHUB_TOKEN\" https://api.github.com/repos/my-github/my-repo/deployments` 看看 deployment 是否建立成功。如果成功會回傳：\n\n   ```javascript\n   {\n       \"url\": \"https://api.github.com/repos/my-github/my-repo/deployments/28301325\",\n       \"id\": 123456,\n       \"sha\": \"2e3xxxxxxxaaaaaaabbbbbbb\",\n       \"ref\": \"develop\",\n       \"task\": \"deploy\",\n       \"payload\": { // from apps.json\n         \"name\": \"my-app\",\n         \"robotName\": \"tripmomo\",\n         \"hosts\": \"\",\n         \"notify\": {\n           \"adapter\": \"slack\",\n           \"room\": \"aabbccdd\",\n           \"user\": \"aabbccdd\",\n           \"user_name\": \"kalan.chen\"\n         },\n         \"config\": { \n           \"provider\": \"capistrano\",\n           \"auto_merge\": false,\n           \"repository\": \"my-github/my-repo\",\n           \"environments\": [\n             \"production\",\n             \"staging\"\n           ]\n         }\n       },\n       \"environment\": \"staging\",\n       \"description\": \"deploy on staging from hubot-deploy-v0.13.27\",\n       \"creator\": {\n         \"login\": \"kjj6198\",\n         \"id\": 123456,\n         \"avatar_url\": \"https://avatars2.githubusercontent.com/u/123456?v=3\",\n         \"gravatar_id\": \"\",\n         \"url\": \"https://api.github.com/users/kjj6198\",\n         \"html_url\": \"https://github.com/kjj6198\",\n         \"followers_url\": \"https://api.github.com/users/kjj6198/followers\",\n         \"following_url\": \"https://api.github.com/users/kjj6198/following{/other_user}\",\n         \"gists_url\": \"https://api.github.com/users/kjj6198/gists{/gist_id}\",\n         \"starred_url\": \"https://api.github.com/users/kjj6198/starred{/owner}{/repo}\",\n         \"subscriptions_url\": \"https://api.github.com/users/kjj6198/subscriptions\",\n         \"organizations_url\": \"https://api.github.com/users/kjj6198/orgs\",\n         \"repos_url\": \"https://api.github.com/users/kalanchen/repos\",\n         \"events_url\": \"https://api.github.com/users/kjj6198/events{/privacy}\",\n         \"received_events_url\":\"https://api.github.com/users/kjj6198/received_events\",\n         \"type\": \"User\",\n         \"site_admin\": false\n       },\n       \"created_at\": \"2017-03-01T12:24:20Z\",\n       \"updated_at\": \"2017-03-01T12:24:20Z\",\n       \"statuses_url\": \"https://api.github.com/repos/my-github/my-repo/deployments/12345667/statuses\",\n       \"repository_url\": \"https://api.github.com/repos/my-github/my-repo\"\n     }\n   ```\n\n   更多 deployment API 可以到 [github deployment API](https://developer.github.com/v3/repos/deployments/) 看看。\n\n### 設定 heaven\n\n- 到 [heaven](https://github.com/atmos/heaven) 將 repo clone 下來。\n- 設定全域變數\n\n| 變數名稱                   | 用途                                       |\n| ---------------------- | ---------------------------------------- |\n| DEPLOYMENT_PRIVATE_KEY | 因為 heaven 是用 ssh 登入，需要 private key。如果 server 在 ec2 上，也可以用 pem 的方式來設定。 |\n| GITHUB_CLIENT_ID       | 到個人設定頁面 > OAuth application 產生 |\n| GITHUB_CLIENT_SECRET   | 到個人設定頁面 > OAuth application 產生 |\n| DATABASE_URL           | heaven 會建立資料庫紀錄 deployment               |\n| GITHUB_TOKEN           | heaven 會使用 gist 來當作 stdout stderr。所以在設定 token 時記得把 `gist` 打勾勾。 |\n\n其他的變數可以到 [這裡](https://github.com/atmos/heaven/blob/master/doc/installation.md) 查看。\n\n補充說明 `DEPLOYMENT_PRIVATE_KEY`：原始檔案長這樣\n\n```\n-----BEGIN RSA PRIVATE KEY-----\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\nhQ77NMpQlmIC+TCJsLoADqwmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\n-----END RSA PRIVATE KEY-----\n```\n\n要修改成：\n\n```\n-----BEGIN RSA PRIVATE KEY-----\\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\\nhQ77NMpQlmIC+TCJsLohtJEmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\\n-----END RSA PRIVATE KEY-----\n```\n\n*既然公開，這組 private key 當然報廢了*\n\n#### 設定 Gemfile\n\n因為 heaven 的動作會是拉下最新的 repo 後，執行 `cap ... deploy` 的指令，所以capistrano 的版本必須跟要部署的那個版本相同。同時，也要注意任何 asset 相關的 gem 也要一併放入 heaven。舉例來說，如果我的 Capfile 有用到\n\n```ruby\ngem 'capistrano', '3.4.0'\ngem 'capistrano3-unicorn'\ngem 'capistrano-rails'\ngem 'sitemap_generator'\ngem 'capistrano-rvm'\n```\n\n那麼**就要將這些 gem 加入 heaven 的 Gemfile 當中**。因為 heaven 會將要部署的 repo 抓下來之後，進去資料夾輸入 `cap staging ... deploy` 的指令，所以如果沒有安裝相對應的 gem，heaven 就沒辦法部署了。\n\n### 串接 github deployment\n\n- 先到 repo 的 settings > deploy key 加入 ssh-key。\n- 到 repo 的 settings > webhooks > add webhook\n- Payload URL 填入你的 heaven 部署 host 的網址，例如：https://yourapp.com.tw/events。如果想要修改，可以到 heaven repo 的 `routes.rb` 中修改\n- Content Type 選擇 `application/json`\n- Secret 依需求選填\n- 下面問你這個 webhook 要監聽哪些事件，我們是用 deployment 來做部署的，所以選擇 deployment 以及 deployment status。\n\n#### 部署\n\n如果是部署到 heroku 的話，因為 heaven 要開 redis 跟 resque。記得加入相對應的 add-on 以及 `REDIS_URL` 。\n\n同時別忘記了要建立資料庫 `heroku run rake db:migrate`。\n\n## hubot-deploy 常用指令\n\n- `hubot deploy:version` 目前版本\n- `hubot deploy repo`： 根據 `apps.json` deploy 指定的 repo name。\n- `hubot deploy repo/branch`：將指定 repo 的某一個 branch 部署到預設的 environment 中。可設定 `HUBOT_DEPLOY_DEFAULT_ENVIRONMENT` 來決定\n- `hubot deploy repo/branch to staging`：將指定 repo 中的 branch 部署到 `staging`\n\n## 筆記\n\n- heaven 的文件雖然不明所以，但是程式碼跟測試寫得蠻完整的，熟悉 ruby 的開發者甚至可以將整個 heaven 架設好，修改一下程式碼，加上 routes，直接建立 UI 一鍵部署。\n\n- `OptionParser::AmbiguousOption: ambiguous option: -s`：不確定是不是 Capistrano 更新之後指令有變動。解決方法是到 `lib/heaven/provider/capistrano.rb` 修改 `deploy_command`\n\n  ```ruby\n  module Heaven\n    # Top-level module for providers.\n    module Provider\n      # The capistrano provider.\n      class Capistrano < DefaultProvider\n   \t.....\n        def execute\n          return execute_and_log([\"/usr/bin/true\"]) if Rails.env.test?\n\n          unless File.exist?(checkout_directory)\n            log \"Cloning #{repository_url} into #{checkout_directory}\"\n            execute_and_log([\"git\", \"clone\", clone_url, checkout_directory])\n          end\n\n          Dir.chdir(checkout_directory) do\n            log \"Fetching the latest code\"\n            execute_and_log(%w{git fetch})\n            execute_and_log([\"git\", \"reset\", \"--hard\", sha])\n            deploy_command = [cap_path, environment, \"部署的 cap 指令\"]\n            log \"Executing capistrano: #{deploy_command.join(\" \")}\"\n            execute_and_log(deploy_command)\n          end\n        end\n      end\n    end\n  end\n  ```\n\n- 因為 heaven 在部署時會使用 gist 當作 stdout 跟 stderr，在設定 GITHUB_TOKEN 的時候一定要記得把 gist 的 scope 打勾\n\n- `Net::SSH::AuthenticationFailed: Authentication failed for user apps@staging.tripmoment.com` ：SSH private_key 設定有誤。先確定這組 ssh key 是否已經加入 github，再來確定將 `passphrase` 拿掉，並且將 ssh private key 變成一行加上 \\n。\n\n- `ArgumentError: Could not parse PKey: no start line` 沒有將 SSH private key 的 passphrase 移除\n\n## 後記\n\n通常在公司裡頭，開發團隊人數不多的話，devops 都是由後端兼任的，前端比較少接觸。不過用「我是前端，我不需要管 devops」這種藉口搪塞自己不去學習好像也說不太過去，畢竟開發一個健全的系統絕對不可能只有前端而已。\n\n這篇文章試著將文件中沒有提到或是省略的步驟整合起來，heaven 跟 hubot-deploy 的文件中有太多沒有提到的細節，導致整合起來時需要花不少時間試錯。希望能夠節省大家踩雷跟翻原始碼的時間。\n\n這篇文章還有許多 devops 的細節沒有詳述，畢竟建立一套完整的 devops pipeline 需要時間，自己對於 CI/CD 的設定也還不夠熟悉。\n\n### 參考資源：\n\n- [顆顆 devops 筆記](https://github.com/ocowchun/many101/blob/master/devops/chatops.md)\n- [chatops](http://lazier.cwchang.me/2015/01/24/ChatOps-Hubot-Capistrano-Heaven/)\n\n\n\n","slug":"chatops","published":1,"date":"2017-03-01T15:12:42.000Z","updated":"2017-03-02T12:55:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqg000siw5tk7z71iy7","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>目前所在的公司裡頭是直接在本地端的 terminal 跑 <code>cap staging deploy</code> 指令。 <a href=\"https://github.com/capistrano/capistrano\" target=\"_blank\" rel=\"external\">capistrano</a> 作為自動部署化的工具非常方便，但難免會遇到幾個問題：</p>\n<ul>\n<li>不是團隊中的每個人都有相同的環境</li>\n<li>大家都在部署，結果 staging 上現在到底是哪個 branch，完全一頭霧水。</li>\n<li>deploy 這件事情卡在本地端。</li>\n</ul>\n<p>對一家新創來說，越穩定的開發效率和流程，就越能夠專注在產品當中。所以我們希望做到幾件事：</p>\n<ul>\n<li>開發團隊都可以輕鬆的部署</li>\n<li>不用在本地端下指令部署，還要多設定 ssh。</li>\n<li>就算沒有開著電腦，也可以輕鬆地部署</li>\n<li>能夠記錄部署的狀況</li>\n<li>如果出問題了，可以快速 rollback 回上一個版本</li>\n</ul>\n<p>逐漸厭倦了在 terminal 打指令，ssh key 手動加的日子。於是打算自己研究有沒有更流暢的部署流程。</p>\n<p>之前在 Sudo 裡頭，幸好有 <a href=\"https://twitter.com/ocowchun\" target=\"_blank\" rel=\"external\">@ocowchun</a> 跟 <a href=\"https://twitter.com/henry40408\" target=\"_blank\" rel=\"external\">@henry</a> 兩位懶工，devops 做得非常完整，才能夠專注在開發功能，而不是一堆繁複的設定當中。（雖然才剛開發完就關閉服務了…）</p>\n<p>目前覺得最合適的解決方案是搭配 <code>hubot-deploy</code> 以及 <code>heaven</code> 來幫助部署。</p>\n<p>但 heaven 的文件實在寫的有夠爛。</p>\n<p>看了老半天，甚至看了一下 source code 才知道到底該怎麼設定。於是決定將整個設定流程分享給大家，希望能夠減少其他 devops 們走歪路的時間。</p>\n<h2 id=\"主要流程\"><a href=\"#主要流程\" class=\"headerlink\" title=\"主要流程\"></a>主要流程</h2><img src=\"/2017/03/01/chatops/process.png\" title=\"Github deployment process\">\n<p>hubot 接收到部署指令後，會發送 <a href=\"https://developer.github.com/v3/repos/deployments\" target=\"_blank\" rel=\"external\">github deployment</a>，同時會觸發 <code>deployment</code> 這個事件，這時 github 就會發送 POST 給在 webhook 設置的 url（這邊接收者為 <code>heaven</code>），heaven 接收到請求之後，就會開始部署，再一一回傳我們想要知道的部數狀況。</p>\n<h3 id=\"hubot-deploy\"><a href=\"#hubot-deploy\" class=\"headerlink\" title=\"hubot-deploy\"></a>hubot-deploy</h3><p>hubot-deploy 能夠用 slack 對 slack-bot 下指令的方式建立 github 的 <a href=\"https://developer.github.com/v3/repos/deployments\" target=\"_blank\" rel=\"external\">deployment</a> event。</p>\n<h3 id=\"heaven\"><a href=\"#heaven\" class=\"headerlink\" title=\"heaven\"></a>heaven</h3><p>是一個 Rails 的 application。主要有一個 <code>/events</code> 負責接收從 github deployment 傳來的 deployment 與 payload。</p>\n<h2 id=\"設定步驟\"><a href=\"#設定步驟\" class=\"headerlink\" title=\"設定步驟\"></a>設定步驟</h2><p><code>heaven</code> 的文件寫得不明所以<code>hubot-deploy</code> 也是草草帶過。幾乎只能靠著他們提供的流程圖，不斷的試錯與通靈。</p>\n<h3 id=\"設定-hubot-deploy\"><a href=\"#設定-hubot-deploy\" class=\"headerlink\" title=\"設定 hubot-deploy\"></a>設定 hubot-deploy</h3><ul>\n<li><a href=\"https://hubot.github.com/docs/\" target=\"_blank\" rel=\"external\">getting started with hubot</a></li>\n</ul>\n<ol>\n<li><p>利用 yeoman 產生 hubot，並且選擇 <code>adapter</code> 為 <code>slack</code>。</p>\n</li>\n<li><p>在 <code>package.json</code> 中加入 <code>hubot-deploy</code>，或者 run <code>npm install hubot-deploy --save-dev</code></p>\n</li>\n<li><p>在 <code>external-scripts.json</code> 裡頭加入 <code>hubot-deploy</code>。</p>\n</li>\n<li><p>到  <code>apps.json</code> 中設定想要部署的 repos 有哪些：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  &quot;repo_name&quot;: &#123;</div><div class=\"line\">    &quot;provider&quot;: &quot;capistrano&quot;,</div><div class=\"line\">    &quot;auto_merge&quot;: false,</div><div class=\"line\">    &quot;repository&quot;: &quot;kjj6198/deploy101&quot;,</div><div class=\"line\">    &quot;environments&quot;: [&quot;production&quot;, &quot;staging&quot;]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這些資料在 hubot 送出 deployment 時會一併塞入 payload 當中。像是這樣：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">payload: &#123;</div><div class=\"line\">  &quot;name&quot;: &quot;repo_name&quot;,</div><div class=\"line\">  &quot;robotName&quot;: &quot;yourrobot&quot;,</div><div class=\"line\">  &quot;hosts&quot;: &quot;&quot;,</div><div class=\"line\">  &quot;notify&quot;: &#123;</div><div class=\"line\">    &quot;adapter&quot;: &quot;slack&quot;,</div><div class=\"line\">    &quot;room&quot;: &quot;123456789&quot;,</div><div class=\"line\">    &quot;user&quot;: &quot;123456789&quot;,</div><div class=\"line\">    &quot;user_name&quot;: &quot;kjj6198&quot;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  &quot;config&quot;: &#123;</div><div class=\"line\">    &quot;provider&quot;: &quot;capistrano&quot;,</div><div class=\"line\">    &quot;auto_merge&quot;: false,</div><div class=\"line\">    &quot;repository&quot;: &quot;kjj6198/deploy101&quot;,</div><div class=\"line\">    &quot;environments&quot;: [</div><div class=\"line\">      &quot;production&quot;,</div><div class=\"line\">      &quot;staging&quot;</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>特別要注意的是，provider 的欄位之後會送給 heaven，所以 provider 的值必須是 heaven 有的（之後會提到），或是自己實作 Provider。</p>\n<p>這樣子我們的 hubot 就算設定完成了。先部署到 heroku 上測試看看，部署到 heroku 很簡單：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">heroku login</div><div class=\"line\">git init</div><div class=\"line\">git add .</div><div class=\"line\">git commit &quot;init&quot;</div><div class=\"line\">heroku create</div><div class=\"line\">git push heroku master</div></pre></td></tr></table></figure>\n<p>部署成功後，比較重要的變數有幾個：</p>\n<table>\n<thead>\n<tr>\n<th>變數名稱</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HUBOT_GITHUB_TOKEN</td>\n<td>GITHUB_TOKEN，到<strong>個人帳號</strong> &gt; settings &gt; personal access tokens 設定。設定好權限，因為 hubot 只是用來建立 repo 的 deployment，勾選 repo 即可。</td>\n</tr>\n<tr>\n<td>HUBOT_SLACK_TOKEN</td>\n<td>你的 slack-bot token。可以到<a href=\"https://slack.com/apps/A0F7XDU93-hubot\" target=\"_blank\" rel=\"external\">這裡</a>設定</td>\n</tr>\n</tbody>\n</table>\n<p>全域變數可以到 heroku 的 dashboard 或是直接用 command line 設定：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">heroku config:set HUBOT_GITHUB_TOKEN=abcccc</div><div class=\"line\">heroku config:set HUBOT_SLACK_TOKEN=abcccc</div></pre></td></tr></table></figure>\n<p>測試一下是否成功。在你設定的頻道中輸入 <code>hubot deploy:version</code></p>\n<img src=\"/2017/03/01/chatops/success.png\" title=\"success\">\n<p>其中的 <code>hubot</code> 要跟你的機器人名稱相同，例如機器人的名稱為 tripmomo，那麼我就要輸入 <code>tripmomo deploy:version</code>。</p>\n<p>成功的話 hubot 會回應你目前的版本訊息。</p>\n<ol>\n<li><p>確認 hubot 有送出 deployment 事件。輸入 <code>hubot deploy app to statging</code></p>\n</li>\n<li><p>輸入  <code>curl -H &quot;Authorization: token YOUR_GITHUB_TOKEN&quot; https://api.github.com/repos/my-github/my-repo/deployments</code> 看看 deployment 是否建立成功。如果成功會回傳：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo/deployments/28301325\"</span>,</div><div class=\"line\">    <span class=\"string\">\"id\"</span>: <span class=\"number\">123456</span>,</div><div class=\"line\">    <span class=\"string\">\"sha\"</span>: <span class=\"string\">\"2e3xxxxxxxaaaaaaabbbbbbb\"</span>,</div><div class=\"line\">    <span class=\"string\">\"ref\"</span>: <span class=\"string\">\"develop\"</span>,</div><div class=\"line\">    <span class=\"string\">\"task\"</span>: <span class=\"string\">\"deploy\"</span>,</div><div class=\"line\">    <span class=\"string\">\"payload\"</span>: &#123; <span class=\"comment\">// from apps.json</span></div><div class=\"line\">      <span class=\"string\">\"name\"</span>: <span class=\"string\">\"my-app\"</span>,</div><div class=\"line\">      <span class=\"string\">\"robotName\"</span>: <span class=\"string\">\"tripmomo\"</span>,</div><div class=\"line\">      <span class=\"string\">\"hosts\"</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"string\">\"notify\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"adapter\"</span>: <span class=\"string\">\"slack\"</span>,</div><div class=\"line\">        <span class=\"string\">\"room\"</span>: <span class=\"string\">\"aabbccdd\"</span>,</div><div class=\"line\">        <span class=\"string\">\"user\"</span>: <span class=\"string\">\"aabbccdd\"</span>,</div><div class=\"line\">        <span class=\"string\">\"user_name\"</span>: <span class=\"string\">\"kalan.chen\"</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      <span class=\"string\">\"config\"</span>: &#123; </div><div class=\"line\">        <span class=\"string\">\"provider\"</span>: <span class=\"string\">\"capistrano\"</span>,</div><div class=\"line\">        <span class=\"string\">\"auto_merge\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"string\">\"repository\"</span>: <span class=\"string\">\"my-github/my-repo\"</span>,</div><div class=\"line\">        <span class=\"string\">\"environments\"</span>: [</div><div class=\"line\">          <span class=\"string\">\"production\"</span>,</div><div class=\"line\">          <span class=\"string\">\"staging\"</span></div><div class=\"line\">        ]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"string\">\"environment\"</span>: <span class=\"string\">\"staging\"</span>,</div><div class=\"line\">    <span class=\"string\">\"description\"</span>: <span class=\"string\">\"deploy on staging from hubot-deploy-v0.13.27\"</span>,</div><div class=\"line\">    <span class=\"string\">\"creator\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"login\"</span>: <span class=\"string\">\"kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"number\">123456</span>,</div><div class=\"line\">      <span class=\"string\">\"avatar_url\"</span>: <span class=\"string\">\"https://avatars2.githubusercontent.com/u/123456?v=3\"</span>,</div><div class=\"line\">      <span class=\"string\">\"gravatar_id\"</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"html_url\"</span>: <span class=\"string\">\"https://github.com/kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"followers_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/followers\"</span>,</div><div class=\"line\">      <span class=\"string\">\"following_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/following&#123;/other_user&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"gists_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/gists&#123;/gist_id&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"starred_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/starred&#123;/owner&#125;&#123;/repo&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"subscriptions_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/subscriptions\"</span>,</div><div class=\"line\">      <span class=\"string\">\"organizations_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/orgs\"</span>,</div><div class=\"line\">      <span class=\"string\">\"repos_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kalanchen/repos\"</span>,</div><div class=\"line\">      <span class=\"string\">\"events_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/events&#123;/privacy&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"received_events_url\"</span>:<span class=\"string\">\"https://api.github.com/users/kjj6198/received_events\"</span>,</div><div class=\"line\">      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"User\"</span>,</div><div class=\"line\">      <span class=\"string\">\"site_admin\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"string\">\"created_at\"</span>: <span class=\"string\">\"2017-03-01T12:24:20Z\"</span>,</div><div class=\"line\">    <span class=\"string\">\"updated_at\"</span>: <span class=\"string\">\"2017-03-01T12:24:20Z\"</span>,</div><div class=\"line\">    <span class=\"string\">\"statuses_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo/deployments/12345667/statuses\"</span>,</div><div class=\"line\">    <span class=\"string\">\"repository_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo\"</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>更多 deployment API 可以到 <a href=\"https://developer.github.com/v3/repos/deployments/\" target=\"_blank\" rel=\"external\">github deployment API</a> 看看。</p>\n</li>\n</ol>\n<h3 id=\"設定-heaven\"><a href=\"#設定-heaven\" class=\"headerlink\" title=\"設定 heaven\"></a>設定 heaven</h3><ul>\n<li>到 <a href=\"https://github.com/atmos/heaven\" target=\"_blank\" rel=\"external\">heaven</a> 將 repo clone 下來。</li>\n<li>設定全域變數</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>變數名稱</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DEPLOYMENT_PRIVATE_KEY</td>\n<td>因為 heaven 是用 ssh 登入，需要 private key。如果 server 在 ec2 上，也可以用 pem 的方式來設定。</td>\n</tr>\n<tr>\n<td>GITHUB_CLIENT_ID</td>\n<td>到個人設定頁面 &gt; OAuth application 產生</td>\n</tr>\n<tr>\n<td>GITHUB_CLIENT_SECRET</td>\n<td>到個人設定頁面 &gt; OAuth application 產生</td>\n</tr>\n<tr>\n<td>DATABASE_URL</td>\n<td>heaven 會建立資料庫紀錄 deployment</td>\n</tr>\n<tr>\n<td>GITHUB_TOKEN</td>\n<td>heaven 會使用 gist 來當作 stdout stderr。所以在設定 token 時記得把 <code>gist</code> 打勾勾。</td>\n</tr>\n</tbody>\n</table>\n<p>其他的變數可以到 <a href=\"https://github.com/atmos/heaven/blob/master/doc/installation.md\" target=\"_blank\" rel=\"external\">這裡</a> 查看。</p>\n<p>補充說明 <code>DEPLOYMENT_PRIVATE_KEY</code>：原始檔案長這樣</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">-----BEGIN RSA PRIVATE KEY-----</div><div class=\"line\">MJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2</div><div class=\"line\">vy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps</div><div class=\"line\">M4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E</div><div class=\"line\">0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z</div><div class=\"line\">P4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT</div><div class=\"line\">KVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ</div><div class=\"line\">0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD</div><div class=\"line\">hQ77NMpQlmIC+TCJsLoADqwmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6</div><div class=\"line\">yUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn</div><div class=\"line\">scACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm</div><div class=\"line\">lRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg</div><div class=\"line\">H7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A</div><div class=\"line\">prVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE</div><div class=\"line\">arH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi</div><div class=\"line\">atiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP</div><div class=\"line\">NSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC</div><div class=\"line\">xIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j</div><div class=\"line\">Ai2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA</div><div class=\"line\">kIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8</div><div class=\"line\">GXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw</div><div class=\"line\">cZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3</div><div class=\"line\">2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV</div><div class=\"line\">LAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne</div><div class=\"line\">dpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY</div><div class=\"line\">6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP</div><div class=\"line\">-----END RSA PRIVATE KEY-----</div></pre></td></tr></table></figure>\n<p>要修改成：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-----BEGIN RSA PRIVATE KEY-----\\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\\nhQ77NMpQlmIC+TCJsLohtJEmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\\n-----END RSA PRIVATE KEY-----</div></pre></td></tr></table></figure>\n<p><em>既然公開，這組 private key 當然報廢了</em></p>\n<h4 id=\"設定-Gemfile\"><a href=\"#設定-Gemfile\" class=\"headerlink\" title=\"設定 Gemfile\"></a>設定 Gemfile</h4><p>因為 heaven 的動作會是拉下最新的 repo 後，執行 <code>cap ... deploy</code> 的指令，所以capistrano 的版本必須跟要部署的那個版本相同。同時，也要注意任何 asset 相關的 gem 也要一併放入 heaven。舉例來說，如果我的 Capfile 有用到</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem <span class=\"string\">'capistrano'</span>, <span class=\"string\">'3.4.0'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano3-unicorn'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano-rails'</span></div><div class=\"line\">gem <span class=\"string\">'sitemap_generator'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano-rvm'</span></div></pre></td></tr></table></figure>\n<p>那麼<strong>就要將這些 gem 加入 heaven 的 Gemfile 當中</strong>。因為 heaven 會將要部署的 repo 抓下來之後，進去資料夾輸入 <code>cap staging ... deploy</code> 的指令，所以如果沒有安裝相對應的 gem，heaven 就沒辦法部署了。</p>\n<h3 id=\"串接-github-deployment\"><a href=\"#串接-github-deployment\" class=\"headerlink\" title=\"串接 github deployment\"></a>串接 github deployment</h3><ul>\n<li>先到 repo 的 settings &gt; deploy key 加入 ssh-key。</li>\n<li>到 repo 的 settings &gt; webhooks &gt; add webhook</li>\n<li>Payload URL 填入你的 heaven 部署 host 的網址，例如：<a href=\"https://yourapp.com.tw/events。如果想要修改，可以到\" target=\"_blank\" rel=\"external\">https://yourapp.com.tw/events。如果想要修改，可以到</a> heaven repo 的 <code>routes.rb</code> 中修改</li>\n<li>Content Type 選擇 <code>application/json</code></li>\n<li>Secret 依需求選填</li>\n<li>下面問你這個 webhook 要監聽哪些事件，我們是用 deployment 來做部署的，所以選擇 deployment 以及 deployment status。</li>\n</ul>\n<h4 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h4><p>如果是部署到 heroku 的話，因為 heaven 要開 redis 跟 resque。記得加入相對應的 add-on 以及 <code>REDIS_URL</code> 。</p>\n<p>同時別忘記了要建立資料庫 <code>heroku run rake db:migrate</code>。</p>\n<h2 id=\"hubot-deploy-常用指令\"><a href=\"#hubot-deploy-常用指令\" class=\"headerlink\" title=\"hubot-deploy 常用指令\"></a>hubot-deploy 常用指令</h2><ul>\n<li><code>hubot deploy:version</code> 目前版本</li>\n<li><code>hubot deploy repo</code>： 根據 <code>apps.json</code> deploy 指定的 repo name。</li>\n<li><code>hubot deploy repo/branch</code>：將指定 repo 的某一個 branch 部署到預設的 environment 中。可設定 <code>HUBOT_DEPLOY_DEFAULT_ENVIRONMENT</code> 來決定</li>\n<li><code>hubot deploy repo/branch to staging</code>：將指定 repo 中的 branch 部署到 <code>staging</code></li>\n</ul>\n<h2 id=\"筆記\"><a href=\"#筆記\" class=\"headerlink\" title=\"筆記\"></a>筆記</h2><ul>\n<li><p>heaven 的文件雖然不明所以，但是程式碼跟測試寫得蠻完整的，熟悉 ruby 的開發者甚至可以將整個 heaven 架設好，修改一下程式碼，加上 routes，直接建立 UI 一鍵部署。</p>\n</li>\n<li><p><code>OptionParser::AmbiguousOption: ambiguous option: -s</code>：不確定是不是 Capistrano 更新之後指令有變動。解決方法是到 <code>lib/heaven/provider/capistrano.rb</code> 修改 <code>deploy_command</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Heaven</span></span></div><div class=\"line\">  <span class=\"comment\"># Top-level module for providers.</span></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Provider</span></span></div><div class=\"line\">    <span class=\"comment\"># The capistrano provider.</span></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Capistrano</span> &lt; DefaultProvider</span></div><div class=\"line\"> \t.....</div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">execute</span></span></div><div class=\"line\">        <span class=\"keyword\">return</span> execute_and_log([<span class=\"string\">\"/usr/bin/true\"</span>]) <span class=\"keyword\">if</span> Rails.env.test?</div><div class=\"line\"></div><div class=\"line\">        unless File.exist?(checkout_directory)</div><div class=\"line\">          log <span class=\"string\">\"Cloning <span class=\"subst\">#&#123;repository_url&#125;</span> into <span class=\"subst\">#&#123;checkout_directory&#125;</span>\"</span></div><div class=\"line\">          execute_and_log([<span class=\"string\">\"git\"</span>, <span class=\"string\">\"clone\"</span>, clone_url, checkout_directory])</div><div class=\"line\">        <span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\">        Dir.chdir(checkout_directory) <span class=\"keyword\">do</span></div><div class=\"line\">          log <span class=\"string\">\"Fetching the latest code\"</span></div><div class=\"line\">          execute_and_log(<span class=\"string\">%w&#123;git fetch&#125;</span>)</div><div class=\"line\">          execute_and_log([<span class=\"string\">\"git\"</span>, <span class=\"string\">\"reset\"</span>, <span class=\"string\">\"--hard\"</span>, sha])</div><div class=\"line\">          deploy_command = [cap_path, environment, <span class=\"string\">\"部署的 cap 指令\"</span>]</div><div class=\"line\">          log <span class=\"string\">\"Executing capistrano: <span class=\"subst\">#&#123;deploy_command.join(<span class=\"string\">\" \"</span>)&#125;</span>\"</span></div><div class=\"line\">          execute_and_log(deploy_command)</div><div class=\"line\">        <span class=\"keyword\">end</span></div><div class=\"line\">      <span class=\"keyword\">end</span></div><div class=\"line\">    <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>因為 heaven 在部署時會使用 gist 當作 stdout 跟 stderr，在設定 GITHUB_TOKEN 的時候一定要記得把 gist 的 scope 打勾</p>\n</li>\n<li><p><code>Net::SSH::AuthenticationFailed: Authentication failed for user apps@staging.tripmoment.com</code> ：SSH private_key 設定有誤。先確定這組 ssh key 是否已經加入 github，再來確定將 <code>passphrase</code> 拿掉，並且將 ssh private key 變成一行加上 \\n。</p>\n</li>\n<li><p><code>ArgumentError: Could not parse PKey: no start line</code> 沒有將 SSH private key 的 passphrase 移除</p>\n</li>\n</ul>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>通常在公司裡頭，開發團隊人數不多的話，devops 都是由後端兼任的，前端比較少接觸。不過用「我是前端，我不需要管 devops」這種藉口搪塞自己不去學習好像也說不太過去，畢竟開發一個健全的系統絕對不可能只有前端而已。</p>\n<p>這篇文章試著將文件中沒有提到或是省略的步驟整合起來，heaven 跟 hubot-deploy 的文件中有太多沒有提到的細節，導致整合起來時需要花不少時間試錯。希望能夠節省大家踩雷跟翻原始碼的時間。</p>\n<p>這篇文章還有許多 devops 的細節沒有詳述，畢竟建立一套完整的 devops pipeline 需要時間，自己對於 CI/CD 的設定也還不夠熟悉。</p>\n<h3 id=\"參考資源：\"><a href=\"#參考資源：\" class=\"headerlink\" title=\"參考資源：\"></a>參考資源：</h3><ul>\n<li><a href=\"https://github.com/ocowchun/many101/blob/master/devops/chatops.md\" target=\"_blank\" rel=\"external\">顆顆 devops 筆記</a></li>\n<li><a href=\"http://lazier.cwchang.me/2015/01/24/ChatOps-Hubot-Capistrano-Heaven/\" target=\"_blank\" rel=\"external\">chatops</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>目前所在的公司裡頭是直接在本地端的 terminal 跑 <code>cap staging deploy</code> 指令。 <a href=\"https://github.com/capistrano/capistrano\" target=\"_blank\" rel=\"external\">capistrano</a> 作為自動部署化的工具非常方便，但難免會遇到幾個問題：</p>\n<ul>\n<li>不是團隊中的每個人都有相同的環境</li>\n<li>大家都在部署，結果 staging 上現在到底是哪個 branch，完全一頭霧水。</li>\n<li>deploy 這件事情卡在本地端。</li>\n</ul>\n<p>對一家新創來說，越穩定的開發效率和流程，就越能夠專注在產品當中。所以我們希望做到幾件事：</p>\n<ul>\n<li>開發團隊都可以輕鬆的部署</li>\n<li>不用在本地端下指令部署，還要多設定 ssh。</li>\n<li>就算沒有開著電腦，也可以輕鬆地部署</li>\n<li>能夠記錄部署的狀況</li>\n<li>如果出問題了，可以快速 rollback 回上一個版本</li>\n</ul>\n<p>逐漸厭倦了在 terminal 打指令，ssh key 手動加的日子。於是打算自己研究有沒有更流暢的部署流程。</p>\n<p>之前在 Sudo 裡頭，幸好有 <a href=\"https://twitter.com/ocowchun\" target=\"_blank\" rel=\"external\">@ocowchun</a> 跟 <a href=\"https://twitter.com/henry40408\" target=\"_blank\" rel=\"external\">@henry</a> 兩位懶工，devops 做得非常完整，才能夠專注在開發功能，而不是一堆繁複的設定當中。（雖然才剛開發完就關閉服務了…）</p>\n<p>目前覺得最合適的解決方案是搭配 <code>hubot-deploy</code> 以及 <code>heaven</code> 來幫助部署。</p>\n<p>但 heaven 的文件實在寫的有夠爛。</p>\n<p>看了老半天，甚至看了一下 source code 才知道到底該怎麼設定。於是決定將整個設定流程分享給大家，希望能夠減少其他 devops 們走歪路的時間。</p>\n<h2 id=\"主要流程\"><a href=\"#主要流程\" class=\"headerlink\" title=\"主要流程\"></a>主要流程</h2><img src=\"/2017/03/01/chatops/process.png\" title=\"Github deployment process\">\n<p>hubot 接收到部署指令後，會發送 <a href=\"https://developer.github.com/v3/repos/deployments\" target=\"_blank\" rel=\"external\">github deployment</a>，同時會觸發 <code>deployment</code> 這個事件，這時 github 就會發送 POST 給在 webhook 設置的 url（這邊接收者為 <code>heaven</code>），heaven 接收到請求之後，就會開始部署，再一一回傳我們想要知道的部數狀況。</p>\n<h3 id=\"hubot-deploy\"><a href=\"#hubot-deploy\" class=\"headerlink\" title=\"hubot-deploy\"></a>hubot-deploy</h3><p>hubot-deploy 能夠用 slack 對 slack-bot 下指令的方式建立 github 的 <a href=\"https://developer.github.com/v3/repos/deployments\" target=\"_blank\" rel=\"external\">deployment</a> event。</p>\n<h3 id=\"heaven\"><a href=\"#heaven\" class=\"headerlink\" title=\"heaven\"></a>heaven</h3><p>是一個 Rails 的 application。主要有一個 <code>/events</code> 負責接收從 github deployment 傳來的 deployment 與 payload。</p>\n<h2 id=\"設定步驟\"><a href=\"#設定步驟\" class=\"headerlink\" title=\"設定步驟\"></a>設定步驟</h2><p><code>heaven</code> 的文件寫得不明所以<code>hubot-deploy</code> 也是草草帶過。幾乎只能靠著他們提供的流程圖，不斷的試錯與通靈。</p>\n<h3 id=\"設定-hubot-deploy\"><a href=\"#設定-hubot-deploy\" class=\"headerlink\" title=\"設定 hubot-deploy\"></a>設定 hubot-deploy</h3><ul>\n<li><a href=\"https://hubot.github.com/docs/\" target=\"_blank\" rel=\"external\">getting started with hubot</a></li>\n</ul>\n<ol>\n<li><p>利用 yeoman 產生 hubot，並且選擇 <code>adapter</code> 為 <code>slack</code>。</p>\n</li>\n<li><p>在 <code>package.json</code> 中加入 <code>hubot-deploy</code>，或者 run <code>npm install hubot-deploy --save-dev</code></p>\n</li>\n<li><p>在 <code>external-scripts.json</code> 裡頭加入 <code>hubot-deploy</code>。</p>\n</li>\n<li><p>到  <code>apps.json</code> 中設定想要部署的 repos 有哪些：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  &quot;repo_name&quot;: &#123;</div><div class=\"line\">    &quot;provider&quot;: &quot;capistrano&quot;,</div><div class=\"line\">    &quot;auto_merge&quot;: false,</div><div class=\"line\">    &quot;repository&quot;: &quot;kjj6198/deploy101&quot;,</div><div class=\"line\">    &quot;environments&quot;: [&quot;production&quot;, &quot;staging&quot;]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這些資料在 hubot 送出 deployment 時會一併塞入 payload 當中。像是這樣：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">payload: &#123;</div><div class=\"line\">  &quot;name&quot;: &quot;repo_name&quot;,</div><div class=\"line\">  &quot;robotName&quot;: &quot;yourrobot&quot;,</div><div class=\"line\">  &quot;hosts&quot;: &quot;&quot;,</div><div class=\"line\">  &quot;notify&quot;: &#123;</div><div class=\"line\">    &quot;adapter&quot;: &quot;slack&quot;,</div><div class=\"line\">    &quot;room&quot;: &quot;123456789&quot;,</div><div class=\"line\">    &quot;user&quot;: &quot;123456789&quot;,</div><div class=\"line\">    &quot;user_name&quot;: &quot;kjj6198&quot;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  &quot;config&quot;: &#123;</div><div class=\"line\">    &quot;provider&quot;: &quot;capistrano&quot;,</div><div class=\"line\">    &quot;auto_merge&quot;: false,</div><div class=\"line\">    &quot;repository&quot;: &quot;kjj6198/deploy101&quot;,</div><div class=\"line\">    &quot;environments&quot;: [</div><div class=\"line\">      &quot;production&quot;,</div><div class=\"line\">      &quot;staging&quot;</div><div class=\"line\">    ]</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>特別要注意的是，provider 的欄位之後會送給 heaven，所以 provider 的值必須是 heaven 有的（之後會提到），或是自己實作 Provider。</p>\n<p>這樣子我們的 hubot 就算設定完成了。先部署到 heroku 上測試看看，部署到 heroku 很簡單：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">heroku login</div><div class=\"line\">git init</div><div class=\"line\">git add .</div><div class=\"line\">git commit &quot;init&quot;</div><div class=\"line\">heroku create</div><div class=\"line\">git push heroku master</div></pre></td></tr></table></figure>\n<p>部署成功後，比較重要的變數有幾個：</p>\n<table>\n<thead>\n<tr>\n<th>變數名稱</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HUBOT_GITHUB_TOKEN</td>\n<td>GITHUB_TOKEN，到<strong>個人帳號</strong> &gt; settings &gt; personal access tokens 設定。設定好權限，因為 hubot 只是用來建立 repo 的 deployment，勾選 repo 即可。</td>\n</tr>\n<tr>\n<td>HUBOT_SLACK_TOKEN</td>\n<td>你的 slack-bot token。可以到<a href=\"https://slack.com/apps/A0F7XDU93-hubot\" target=\"_blank\" rel=\"external\">這裡</a>設定</td>\n</tr>\n</tbody>\n</table>\n<p>全域變數可以到 heroku 的 dashboard 或是直接用 command line 設定：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">heroku config:set HUBOT_GITHUB_TOKEN=abcccc</div><div class=\"line\">heroku config:set HUBOT_SLACK_TOKEN=abcccc</div></pre></td></tr></table></figure>\n<p>測試一下是否成功。在你設定的頻道中輸入 <code>hubot deploy:version</code></p>\n<img src=\"/2017/03/01/chatops/success.png\" title=\"success\">\n<p>其中的 <code>hubot</code> 要跟你的機器人名稱相同，例如機器人的名稱為 tripmomo，那麼我就要輸入 <code>tripmomo deploy:version</code>。</p>\n<p>成功的話 hubot 會回應你目前的版本訊息。</p>\n<ol>\n<li><p>確認 hubot 有送出 deployment 事件。輸入 <code>hubot deploy app to statging</code></p>\n</li>\n<li><p>輸入  <code>curl -H &quot;Authorization: token YOUR_GITHUB_TOKEN&quot; https://api.github.com/repos/my-github/my-repo/deployments</code> 看看 deployment 是否建立成功。如果成功會回傳：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo/deployments/28301325\"</span>,</div><div class=\"line\">    <span class=\"string\">\"id\"</span>: <span class=\"number\">123456</span>,</div><div class=\"line\">    <span class=\"string\">\"sha\"</span>: <span class=\"string\">\"2e3xxxxxxxaaaaaaabbbbbbb\"</span>,</div><div class=\"line\">    <span class=\"string\">\"ref\"</span>: <span class=\"string\">\"develop\"</span>,</div><div class=\"line\">    <span class=\"string\">\"task\"</span>: <span class=\"string\">\"deploy\"</span>,</div><div class=\"line\">    <span class=\"string\">\"payload\"</span>: &#123; <span class=\"comment\">// from apps.json</span></div><div class=\"line\">      <span class=\"string\">\"name\"</span>: <span class=\"string\">\"my-app\"</span>,</div><div class=\"line\">      <span class=\"string\">\"robotName\"</span>: <span class=\"string\">\"tripmomo\"</span>,</div><div class=\"line\">      <span class=\"string\">\"hosts\"</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"string\">\"notify\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"adapter\"</span>: <span class=\"string\">\"slack\"</span>,</div><div class=\"line\">        <span class=\"string\">\"room\"</span>: <span class=\"string\">\"aabbccdd\"</span>,</div><div class=\"line\">        <span class=\"string\">\"user\"</span>: <span class=\"string\">\"aabbccdd\"</span>,</div><div class=\"line\">        <span class=\"string\">\"user_name\"</span>: <span class=\"string\">\"kalan.chen\"</span></div><div class=\"line\">      &#125;,</div><div class=\"line\">      <span class=\"string\">\"config\"</span>: &#123; </div><div class=\"line\">        <span class=\"string\">\"provider\"</span>: <span class=\"string\">\"capistrano\"</span>,</div><div class=\"line\">        <span class=\"string\">\"auto_merge\"</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"string\">\"repository\"</span>: <span class=\"string\">\"my-github/my-repo\"</span>,</div><div class=\"line\">        <span class=\"string\">\"environments\"</span>: [</div><div class=\"line\">          <span class=\"string\">\"production\"</span>,</div><div class=\"line\">          <span class=\"string\">\"staging\"</span></div><div class=\"line\">        ]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"string\">\"environment\"</span>: <span class=\"string\">\"staging\"</span>,</div><div class=\"line\">    <span class=\"string\">\"description\"</span>: <span class=\"string\">\"deploy on staging from hubot-deploy-v0.13.27\"</span>,</div><div class=\"line\">    <span class=\"string\">\"creator\"</span>: &#123;</div><div class=\"line\">      <span class=\"string\">\"login\"</span>: <span class=\"string\">\"kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"id\"</span>: <span class=\"number\">123456</span>,</div><div class=\"line\">      <span class=\"string\">\"avatar_url\"</span>: <span class=\"string\">\"https://avatars2.githubusercontent.com/u/123456?v=3\"</span>,</div><div class=\"line\">      <span class=\"string\">\"gravatar_id\"</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"html_url\"</span>: <span class=\"string\">\"https://github.com/kjj6198\"</span>,</div><div class=\"line\">      <span class=\"string\">\"followers_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/followers\"</span>,</div><div class=\"line\">      <span class=\"string\">\"following_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/following&#123;/other_user&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"gists_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/gists&#123;/gist_id&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"starred_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/starred&#123;/owner&#125;&#123;/repo&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"subscriptions_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/subscriptions\"</span>,</div><div class=\"line\">      <span class=\"string\">\"organizations_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/orgs\"</span>,</div><div class=\"line\">      <span class=\"string\">\"repos_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kalanchen/repos\"</span>,</div><div class=\"line\">      <span class=\"string\">\"events_url\"</span>: <span class=\"string\">\"https://api.github.com/users/kjj6198/events&#123;/privacy&#125;\"</span>,</div><div class=\"line\">      <span class=\"string\">\"received_events_url\"</span>:<span class=\"string\">\"https://api.github.com/users/kjj6198/received_events\"</span>,</div><div class=\"line\">      <span class=\"string\">\"type\"</span>: <span class=\"string\">\"User\"</span>,</div><div class=\"line\">      <span class=\"string\">\"site_admin\"</span>: <span class=\"literal\">false</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"string\">\"created_at\"</span>: <span class=\"string\">\"2017-03-01T12:24:20Z\"</span>,</div><div class=\"line\">    <span class=\"string\">\"updated_at\"</span>: <span class=\"string\">\"2017-03-01T12:24:20Z\"</span>,</div><div class=\"line\">    <span class=\"string\">\"statuses_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo/deployments/12345667/statuses\"</span>,</div><div class=\"line\">    <span class=\"string\">\"repository_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/my-github/my-repo\"</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>更多 deployment API 可以到 <a href=\"https://developer.github.com/v3/repos/deployments/\" target=\"_blank\" rel=\"external\">github deployment API</a> 看看。</p>\n</li>\n</ol>\n<h3 id=\"設定-heaven\"><a href=\"#設定-heaven\" class=\"headerlink\" title=\"設定 heaven\"></a>設定 heaven</h3><ul>\n<li>到 <a href=\"https://github.com/atmos/heaven\" target=\"_blank\" rel=\"external\">heaven</a> 將 repo clone 下來。</li>\n<li>設定全域變數</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>變數名稱</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DEPLOYMENT_PRIVATE_KEY</td>\n<td>因為 heaven 是用 ssh 登入，需要 private key。如果 server 在 ec2 上，也可以用 pem 的方式來設定。</td>\n</tr>\n<tr>\n<td>GITHUB_CLIENT_ID</td>\n<td>到個人設定頁面 &gt; OAuth application 產生</td>\n</tr>\n<tr>\n<td>GITHUB_CLIENT_SECRET</td>\n<td>到個人設定頁面 &gt; OAuth application 產生</td>\n</tr>\n<tr>\n<td>DATABASE_URL</td>\n<td>heaven 會建立資料庫紀錄 deployment</td>\n</tr>\n<tr>\n<td>GITHUB_TOKEN</td>\n<td>heaven 會使用 gist 來當作 stdout stderr。所以在設定 token 時記得把 <code>gist</code> 打勾勾。</td>\n</tr>\n</tbody>\n</table>\n<p>其他的變數可以到 <a href=\"https://github.com/atmos/heaven/blob/master/doc/installation.md\" target=\"_blank\" rel=\"external\">這裡</a> 查看。</p>\n<p>補充說明 <code>DEPLOYMENT_PRIVATE_KEY</code>：原始檔案長這樣</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">-----BEGIN RSA PRIVATE KEY-----</div><div class=\"line\">MJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2</div><div class=\"line\">vy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps</div><div class=\"line\">M4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E</div><div class=\"line\">0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z</div><div class=\"line\">P4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT</div><div class=\"line\">KVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ</div><div class=\"line\">0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD</div><div class=\"line\">hQ77NMpQlmIC+TCJsLoADqwmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6</div><div class=\"line\">yUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn</div><div class=\"line\">scACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm</div><div class=\"line\">lRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg</div><div class=\"line\">H7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A</div><div class=\"line\">prVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE</div><div class=\"line\">arH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi</div><div class=\"line\">atiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP</div><div class=\"line\">NSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC</div><div class=\"line\">xIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j</div><div class=\"line\">Ai2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA</div><div class=\"line\">kIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8</div><div class=\"line\">GXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw</div><div class=\"line\">cZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3</div><div class=\"line\">2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV</div><div class=\"line\">LAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne</div><div class=\"line\">dpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY</div><div class=\"line\">6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP</div><div class=\"line\">-----END RSA PRIVATE KEY-----</div></pre></td></tr></table></figure>\n<p>要修改成：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">-----BEGIN RSA PRIVATE KEY-----\\nMJVGa/WNT9aFs63ykxLCdGzav8CfQ5vKXrLrllHXUYFaB2yaN72L+fSsXAy9zMs2\\nvy6wV2fB6j3YrVNCnBwUUNGTX9Ka6eeK98dCvHVyyE9Iz3CJAWZxaI03Px/xX9ps\\nM4kDWe7IA6+mnuCVSzwQVWMdOoAXbQbhGdfeixbqljNhJrKW/jA9w4BNarwGYv4E\\n0MwdU9x7zpk826ytza87yXHSdNuTKcsGQk4XHMYxJECj4EM8vTlVlEyEXZtCeh2z\\nP4bjYkTcBom4nC/q7Ea7Pmy1iDJqs0qc1L/xtNMypMhx4iIaeDVawkvBaL6t9IPT\\nKVuC9Y1uw5nJP1gwxXa5qoazhcikzqRYmaeWIzsZrcVShZBrJO9/a/APxXY7qJpJ\\n0r1YYTykw7THYj2QYiv8cfF64/vh9cB0NELEp5hIuS82Mf6CjqRR7QYR+By3uIdD\\nhQ77NMpQlmIC+TCJsLohtJEmEEZCiQSejtkXXtN/mNl581jP8+ViNkWZfPYWe7g6\\nyUeXVN1cBPo6AIu+lStE+SlR8lbu7sdpn6lid1pJf50zeythabze81y/nrAdx+Jn\\nscACBJBrERkhm2wdULkqwMV2g0U53YpYVAs2fFU1hGzRcE5zF1sdy9RLLX45Mzrm\\nlRErTbSUcnoQJhhCso5uNY6MMnr/rQF920KA0Ufr40IBcQ8bOSX7lJucST5bZLDg\\nH7g16rimHgK4I9rrvKy4plvbolfpuKGMYJDS3Q7IW5cL5lWLU3HaVSn+VyZe8p3A\\nprVx0XmSCwpmUzbDI6FoqniVPVdgis2tV1uKdnJPVn0DoK0ersosGXmALytbYLeE\\narH/cIlGGCoGbIX+Iv3u8aICBEG2eR8eXmQSlGI5rp9hGK/JrlkL3PywVmPw4Efi\\natiS6Y12Tuu8bdpPxBTzXK3PoZ23Pc+1l7NXXIzBeGnj56bALOIbAY5kg+lIRdtP\\nNSTAW8IVgFJUl4uzy/NXn/ewiE093ZVs59I2x4OoS14S20mkM/ldWbvlVm4Z3JxC\\nxIWsIV8aLznttic5MJUGjGoqH1Brg0o1HyWdkoEcC1N0G57oO4pN4UTD5co5xY9j\\nAi2NIcFCYzqrdTfSlPWJBZLhjZ5hOXIwuTeJfRxDAVphaUqfpXb3o3URGRWiGENA\\nkIYKiq4XeNguwrFBzg5CB7NEKvjbjJ31GI26yAPa7yrKpuNFAjPpO6JKdL8slvx8\\nGXCOSbhGPFxzmtYzEeMxmnHqOa0Z953XeheKfJoipqRAyENxPBvclDonqVfxuTvw\\ncZzqFD+XjDJCJ5INwuwk2WupVzQjzV6TagcIX63Kq1Z9HSoFIBiCrdLzTMDG4Ro3\\n2wpN1tFQFz6alvwKtifGwhvG3qqmsfcQqw56gGY0DWIqG5x/thdG7UzZT7iMVDJV\\nLAO5wNnBK6L+feov9LqP7ONAonBVawmTv0ArjVhhkYZEi6d+ymvPpL1ORFAymLne\\ndpk4VmmmQvkUu0KudRqulavTIrnXFkuv2va+5X9mHGoNNMo1TXk2XX1eM4Rc7nAY\\n6IwPyAuFEtT5ocWBklB/qUZtdu4fG876o0X87GklR9ZfPG+tWpH2F+1j1mMHKuiP\\n-----END RSA PRIVATE KEY-----</div></pre></td></tr></table></figure>\n<p><em>既然公開，這組 private key 當然報廢了</em></p>\n<h4 id=\"設定-Gemfile\"><a href=\"#設定-Gemfile\" class=\"headerlink\" title=\"設定 Gemfile\"></a>設定 Gemfile</h4><p>因為 heaven 的動作會是拉下最新的 repo 後，執行 <code>cap ... deploy</code> 的指令，所以capistrano 的版本必須跟要部署的那個版本相同。同時，也要注意任何 asset 相關的 gem 也要一併放入 heaven。舉例來說，如果我的 Capfile 有用到</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem <span class=\"string\">'capistrano'</span>, <span class=\"string\">'3.4.0'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano3-unicorn'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano-rails'</span></div><div class=\"line\">gem <span class=\"string\">'sitemap_generator'</span></div><div class=\"line\">gem <span class=\"string\">'capistrano-rvm'</span></div></pre></td></tr></table></figure>\n<p>那麼<strong>就要將這些 gem 加入 heaven 的 Gemfile 當中</strong>。因為 heaven 會將要部署的 repo 抓下來之後，進去資料夾輸入 <code>cap staging ... deploy</code> 的指令，所以如果沒有安裝相對應的 gem，heaven 就沒辦法部署了。</p>\n<h3 id=\"串接-github-deployment\"><a href=\"#串接-github-deployment\" class=\"headerlink\" title=\"串接 github deployment\"></a>串接 github deployment</h3><ul>\n<li>先到 repo 的 settings &gt; deploy key 加入 ssh-key。</li>\n<li>到 repo 的 settings &gt; webhooks &gt; add webhook</li>\n<li>Payload URL 填入你的 heaven 部署 host 的網址，例如：<a href=\"https://yourapp.com.tw/events。如果想要修改，可以到\" target=\"_blank\" rel=\"external\">https://yourapp.com.tw/events。如果想要修改，可以到</a> heaven repo 的 <code>routes.rb</code> 中修改</li>\n<li>Content Type 選擇 <code>application/json</code></li>\n<li>Secret 依需求選填</li>\n<li>下面問你這個 webhook 要監聽哪些事件，我們是用 deployment 來做部署的，所以選擇 deployment 以及 deployment status。</li>\n</ul>\n<h4 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h4><p>如果是部署到 heroku 的話，因為 heaven 要開 redis 跟 resque。記得加入相對應的 add-on 以及 <code>REDIS_URL</code> 。</p>\n<p>同時別忘記了要建立資料庫 <code>heroku run rake db:migrate</code>。</p>\n<h2 id=\"hubot-deploy-常用指令\"><a href=\"#hubot-deploy-常用指令\" class=\"headerlink\" title=\"hubot-deploy 常用指令\"></a>hubot-deploy 常用指令</h2><ul>\n<li><code>hubot deploy:version</code> 目前版本</li>\n<li><code>hubot deploy repo</code>： 根據 <code>apps.json</code> deploy 指定的 repo name。</li>\n<li><code>hubot deploy repo/branch</code>：將指定 repo 的某一個 branch 部署到預設的 environment 中。可設定 <code>HUBOT_DEPLOY_DEFAULT_ENVIRONMENT</code> 來決定</li>\n<li><code>hubot deploy repo/branch to staging</code>：將指定 repo 中的 branch 部署到 <code>staging</code></li>\n</ul>\n<h2 id=\"筆記\"><a href=\"#筆記\" class=\"headerlink\" title=\"筆記\"></a>筆記</h2><ul>\n<li><p>heaven 的文件雖然不明所以，但是程式碼跟測試寫得蠻完整的，熟悉 ruby 的開發者甚至可以將整個 heaven 架設好，修改一下程式碼，加上 routes，直接建立 UI 一鍵部署。</p>\n</li>\n<li><p><code>OptionParser::AmbiguousOption: ambiguous option: -s</code>：不確定是不是 Capistrano 更新之後指令有變動。解決方法是到 <code>lib/heaven/provider/capistrano.rb</code> 修改 <code>deploy_command</code></p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Heaven</span></span></div><div class=\"line\">  <span class=\"comment\"># Top-level module for providers.</span></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">module</span> <span class=\"title\">Provider</span></span></div><div class=\"line\">    <span class=\"comment\"># The capistrano provider.</span></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Capistrano</span> &lt; DefaultProvider</span></div><div class=\"line\"> \t.....</div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">execute</span></span></div><div class=\"line\">        <span class=\"keyword\">return</span> execute_and_log([<span class=\"string\">\"/usr/bin/true\"</span>]) <span class=\"keyword\">if</span> Rails.env.test?</div><div class=\"line\"></div><div class=\"line\">        unless File.exist?(checkout_directory)</div><div class=\"line\">          log <span class=\"string\">\"Cloning <span class=\"subst\">#&#123;repository_url&#125;</span> into <span class=\"subst\">#&#123;checkout_directory&#125;</span>\"</span></div><div class=\"line\">          execute_and_log([<span class=\"string\">\"git\"</span>, <span class=\"string\">\"clone\"</span>, clone_url, checkout_directory])</div><div class=\"line\">        <span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\">        Dir.chdir(checkout_directory) <span class=\"keyword\">do</span></div><div class=\"line\">          log <span class=\"string\">\"Fetching the latest code\"</span></div><div class=\"line\">          execute_and_log(<span class=\"string\">%w&#123;git fetch&#125;</span>)</div><div class=\"line\">          execute_and_log([<span class=\"string\">\"git\"</span>, <span class=\"string\">\"reset\"</span>, <span class=\"string\">\"--hard\"</span>, sha])</div><div class=\"line\">          deploy_command = [cap_path, environment, <span class=\"string\">\"部署的 cap 指令\"</span>]</div><div class=\"line\">          log <span class=\"string\">\"Executing capistrano: <span class=\"subst\">#&#123;deploy_command.join(<span class=\"string\">\" \"</span>)&#125;</span>\"</span></div><div class=\"line\">          execute_and_log(deploy_command)</div><div class=\"line\">        <span class=\"keyword\">end</span></div><div class=\"line\">      <span class=\"keyword\">end</span></div><div class=\"line\">    <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>因為 heaven 在部署時會使用 gist 當作 stdout 跟 stderr，在設定 GITHUB_TOKEN 的時候一定要記得把 gist 的 scope 打勾</p>\n</li>\n<li><p><code>Net::SSH::AuthenticationFailed: Authentication failed for user apps@staging.tripmoment.com</code> ：SSH private_key 設定有誤。先確定這組 ssh key 是否已經加入 github，再來確定將 <code>passphrase</code> 拿掉，並且將 ssh private key 變成一行加上 \\n。</p>\n</li>\n<li><p><code>ArgumentError: Could not parse PKey: no start line</code> 沒有將 SSH private key 的 passphrase 移除</p>\n</li>\n</ul>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>通常在公司裡頭，開發團隊人數不多的話，devops 都是由後端兼任的，前端比較少接觸。不過用「我是前端，我不需要管 devops」這種藉口搪塞自己不去學習好像也說不太過去，畢竟開發一個健全的系統絕對不可能只有前端而已。</p>\n<p>這篇文章試著將文件中沒有提到或是省略的步驟整合起來，heaven 跟 hubot-deploy 的文件中有太多沒有提到的細節，導致整合起來時需要花不少時間試錯。希望能夠節省大家踩雷跟翻原始碼的時間。</p>\n<p>這篇文章還有許多 devops 的細節沒有詳述，畢竟建立一套完整的 devops pipeline 需要時間，自己對於 CI/CD 的設定也還不夠熟悉。</p>\n<h3 id=\"參考資源：\"><a href=\"#參考資源：\" class=\"headerlink\" title=\"參考資源：\"></a>參考資源：</h3><ul>\n<li><a href=\"https://github.com/ocowchun/many101/blob/master/devops/chatops.md\" target=\"_blank\" rel=\"external\">顆顆 devops 筆記</a></li>\n<li><a href=\"http://lazier.cwchang.me/2015/01/24/ChatOps-Hubot-Capistrano-Heaven/\" target=\"_blank\" rel=\"external\">chatops</a></li>\n</ul>\n"},{"title":"人類也是 context switch 的動物 - 違反直覺的做事方式","date":"2016-10-27T09:52:51.000Z","_content":"\n\n{% youtube Dr67i5SdXiM %}\n\n今天看了這個影片，主要是想要指出其實在多工切換中，可以得到比較好的效率。\n\n聽起來很 trick，對吧？其實剛看完影片我也不太相信，不過這似乎可以用作業系統的角度來解釋。\n\n### Context Switch\n\n如果學過作業系統，對這個名詞不陌生。當時的疑問是，**既然轉換要成本，為什麼不直接一個 process 到底就好？**\n\n這個乍聽起來很蠢，但其實 context switch 並不會讓 process 的完成時間變短，只是將**平均等待時間縮短**了而已。\n\n不過，這是建立在轉換成本為零的情況下。\n\n儘管如此，這部影片給我的震撼也還蠻大的，如果今天這個數量提升到了某種量級，那麼彼此的差距將會非常驚人。如果我沒看過這部影片，之後遇到類似的作業大概也是也會這樣做吧...？\n\n### 結論\n\n- 如果 context switch 的成本不高，甚至幾乎不需要切換成本，那麼 context swtich 將會提高效率，他減少了每項作業的平均等待時間。但如果今天 switch 的成本高於 mass production 多出來步驟的成本，那麼結果就會反過來了。\n- 之所以 mass production 會比較慢的原因，是因為他多出了拿起跟放下的動作，而這個動作是在 one piece 當中沒有多出來的。如果今天 mass production **不會多出多餘的步驟（目前是還想不到例子啦...）**，那麼彼此的差距就不會那麼大，或者幾乎相同也說不定。（如果 context switch 成本不高的話）\n\n這兩點都很違反直覺，直覺來想，重複做某件事，大腦會習慣並且逐漸擅長；但是在影片當中，卻要逼你違反大腦的直覺，不斷的在四個步驟之間切換。\n\n\n\n","source":"_posts/context-switch.md","raw":"---\ntitle: 人類也是 context switch 的動物 - 違反直覺的做事方式\ndate: 2016-10-27 17:52:51\ncategories:\ntags:\n---\n\n\n{% youtube Dr67i5SdXiM %}\n\n今天看了這個影片，主要是想要指出其實在多工切換中，可以得到比較好的效率。\n\n聽起來很 trick，對吧？其實剛看完影片我也不太相信，不過這似乎可以用作業系統的角度來解釋。\n\n### Context Switch\n\n如果學過作業系統，對這個名詞不陌生。當時的疑問是，**既然轉換要成本，為什麼不直接一個 process 到底就好？**\n\n這個乍聽起來很蠢，但其實 context switch 並不會讓 process 的完成時間變短，只是將**平均等待時間縮短**了而已。\n\n不過，這是建立在轉換成本為零的情況下。\n\n儘管如此，這部影片給我的震撼也還蠻大的，如果今天這個數量提升到了某種量級，那麼彼此的差距將會非常驚人。如果我沒看過這部影片，之後遇到類似的作業大概也是也會這樣做吧...？\n\n### 結論\n\n- 如果 context switch 的成本不高，甚至幾乎不需要切換成本，那麼 context swtich 將會提高效率，他減少了每項作業的平均等待時間。但如果今天 switch 的成本高於 mass production 多出來步驟的成本，那麼結果就會反過來了。\n- 之所以 mass production 會比較慢的原因，是因為他多出了拿起跟放下的動作，而這個動作是在 one piece 當中沒有多出來的。如果今天 mass production **不會多出多餘的步驟（目前是還想不到例子啦...）**，那麼彼此的差距就不會那麼大，或者幾乎相同也說不定。（如果 context switch 成本不高的話）\n\n這兩點都很違反直覺，直覺來想，重複做某件事，大腦會習慣並且逐漸擅長；但是在影片當中，卻要逼你違反大腦的直覺，不斷的在四個步驟之間切換。\n\n\n\n","slug":"context-switch","published":1,"updated":"2017-02-28T14:58:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqi000viw5t83kfbvcw","content":"<div class=\"video-container\"><iframe src=\"//www.youtube.com/embed/Dr67i5SdXiM\" frameborder=\"0\" allowfullscreen></iframe></div>\n<p>今天看了這個影片，主要是想要指出其實在多工切換中，可以得到比較好的效率。</p>\n<p>聽起來很 trick，對吧？其實剛看完影片我也不太相信，不過這似乎可以用作業系統的角度來解釋。</p>\n<h3 id=\"Context-Switch\"><a href=\"#Context-Switch\" class=\"headerlink\" title=\"Context Switch\"></a>Context Switch</h3><p>如果學過作業系統，對這個名詞不陌生。當時的疑問是，<strong>既然轉換要成本，為什麼不直接一個 process 到底就好？</strong></p>\n<p>這個乍聽起來很蠢，但其實 context switch 並不會讓 process 的完成時間變短，只是將<strong>平均等待時間縮短</strong>了而已。</p>\n<p>不過，這是建立在轉換成本為零的情況下。</p>\n<p>儘管如此，這部影片給我的震撼也還蠻大的，如果今天這個數量提升到了某種量級，那麼彼此的差距將會非常驚人。如果我沒看過這部影片，之後遇到類似的作業大概也是也會這樣做吧…？</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><ul>\n<li>如果 context switch 的成本不高，甚至幾乎不需要切換成本，那麼 context swtich 將會提高效率，他減少了每項作業的平均等待時間。但如果今天 switch 的成本高於 mass production 多出來步驟的成本，那麼結果就會反過來了。</li>\n<li>之所以 mass production 會比較慢的原因，是因為他多出了拿起跟放下的動作，而這個動作是在 one piece 當中沒有多出來的。如果今天 mass production <strong>不會多出多餘的步驟（目前是還想不到例子啦…）</strong>，那麼彼此的差距就不會那麼大，或者幾乎相同也說不定。（如果 context switch 成本不高的話）</li>\n</ul>\n<p>這兩點都很違反直覺，直覺來想，重複做某件事，大腦會習慣並且逐漸擅長；但是在影片當中，卻要逼你違反大腦的直覺，不斷的在四個步驟之間切換。</p>\n","site":{"data":{}},"excerpt":"","more":"<div class=\"video-container\"><iframe src=\"//www.youtube.com/embed/Dr67i5SdXiM\" frameborder=\"0\" allowfullscreen></iframe></div>\n<p>今天看了這個影片，主要是想要指出其實在多工切換中，可以得到比較好的效率。</p>\n<p>聽起來很 trick，對吧？其實剛看完影片我也不太相信，不過這似乎可以用作業系統的角度來解釋。</p>\n<h3 id=\"Context-Switch\"><a href=\"#Context-Switch\" class=\"headerlink\" title=\"Context Switch\"></a>Context Switch</h3><p>如果學過作業系統，對這個名詞不陌生。當時的疑問是，<strong>既然轉換要成本，為什麼不直接一個 process 到底就好？</strong></p>\n<p>這個乍聽起來很蠢，但其實 context switch 並不會讓 process 的完成時間變短，只是將<strong>平均等待時間縮短</strong>了而已。</p>\n<p>不過，這是建立在轉換成本為零的情況下。</p>\n<p>儘管如此，這部影片給我的震撼也還蠻大的，如果今天這個數量提升到了某種量級，那麼彼此的差距將會非常驚人。如果我沒看過這部影片，之後遇到類似的作業大概也是也會這樣做吧…？</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><ul>\n<li>如果 context switch 的成本不高，甚至幾乎不需要切換成本，那麼 context swtich 將會提高效率，他減少了每項作業的平均等待時間。但如果今天 switch 的成本高於 mass production 多出來步驟的成本，那麼結果就會反過來了。</li>\n<li>之所以 mass production 會比較慢的原因，是因為他多出了拿起跟放下的動作，而這個動作是在 one piece 當中沒有多出來的。如果今天 mass production <strong>不會多出多餘的步驟（目前是還想不到例子啦…）</strong>，那麼彼此的差距就不會那麼大，或者幾乎相同也說不定。（如果 context switch 成本不高的話）</li>\n</ul>\n<p>這兩點都很違反直覺，直覺來想，重複做某件事，大腦會習慣並且逐漸擅長；但是在影片當中，卻要逼你違反大腦的直覺，不斷的在四個步驟之間切換。</p>\n"},{"title":"css variable + sass variable = 😍","date":"2016-11-14T11:44:20.000Z","_content":"\n之前寫過了一篇關於自己對 css variable 的想法，原本對這個屬性沒有抱持著太大的期待，自己用習慣了 SASS 變數也覺得這個 css variable 反而像個彆腳的 system，不過如果你也是這樣想的人，可以參考這篇文章 [Why should you care Css variables](https://developers.google.com/web/updates/2016/02/css-variables-why-should-you-care)\n\ncss 的變數已經出來有一段期間了，瀏覽器的支援程度還不算太糟。或許各位都曾經想過，這些變數的功能在 SASS 上幾乎都做得到，而且搭配 SASS 的 function 以及 SASS 的型別（list map）變數的使用彈性更為強大。\n\n不過這邊想要跟大家分享的是，css variable 真正亮眼的地方在哪裡。\n\n這篇文章會假設大家已經有一些 css variable 的基礎。\n\n附帶一提，這篇文章沒有很全面性的寫出如何使用 CSS variable，所以有任何建議都歡迎提出來，之後也會找時間來重新寫一篇比較全面性的文章。\n\n### 支援度\n\n\n| Browser | Version |\n| -----   | -----   |\n| Chrome  |   49    |\n| Firefox |   42    |\n| Safari  |   9.1   |\n\n### custom property\n\n> **只有在你讓他表現得像個 property 的時候**，他才會比一般的預處理器強大\n\n首先要澄清的一點是，在 [CSS 的 spec](https://drafts.csswg.org/css-variables/) 當中，variable 其實叫做 `custom property`。這是什麼意思？變數跟 property 搞得我好混亂！\n\n不要著急，意思就是在使用 css variable 的時候，我們應該把他們想成一般的 css 屬性使用，而非一般的變數而已。以下就會來介紹一些有關 css variable 的使用。\n\n### 為什麼你要用 CSS Variable\n\n- 你用這些屬性**不需要一個預處理器**。\n- 可以用 initial inherit 的方式建立階層\n- **瀏覽器會在需要的時候重新 render**\n- 你可以訪問並且**用JavaScript操縱它們（等等會講到）**\n\n#### property 特性\n\n既然是 css property 就一定會有以下幾個特性：\n\n- 有所謂的 `initial` `inherit` 的值可以使用\n- 呼叫的方式是 `var(--variable-name)`\n- **能夠放在 `inline-style` 裡面**\n- **可以用 js 取值、設值**\n\n其中，最大的亮點在於 inline-style 跟能夠與 js 搭配取值與設值。這是跟原本 SASS, LESS 等 CSS 預處理器最大的不同之處，也讓 CSS 具備了新的可能性，就讓我們來看一些範例吧！\n\n```scss\n:root {\n  --mainColor: #abc;\n  --subColor: #ccc;\n}\n\nh1 {\n  color: var(--mainColor);\n}\n```\n\n在這邊 `:root` 所宣告的元素會繼承到所有的元素當中，這就是 `custom property` 的特性。\n\n#### inline-style\n\n因為是 property，所以當然可以像這樣寫。\n\n```html\n<h1 style=\"color: var(--mainColor);\">\n  Hello, world\n</h1>\n```\n\n這看起來的確不怎麼稀奇，因為同樣的事情也可以用 class 跟 SCSS 變數的方式來達成，不過這讓我們在寫 inline style 的時候又多了一份可能性。\n\n##### react inline style\n\n例如在 react 當中，我們可能會需要寫一些 inline style，但是顏色的制定因為跳脫了 SCSS 的控制，常常顯得很彆扭，要嘛就是直接打上顏色碼，之後要修改的時候再捲起袖子慢慢改；或者用 js 另外保存一份顏色的變數表；最好的方法可能是幫每一個顏色變數賦予一個 class。\n\n現在有了 css variable 我們可以很方便的使用。\n\n```jsx\nconst styles = {\n  heading: {\n    fontSize: '14px',\n    color: 'var(--mainColor)',\n  },\n  warn: {\n    color: 'var(--warnColor)'\n  }\n};\n\nconst heading = ({title}) => <h1 style={styles.heading}>{title}</h1>\n```\n\n**本篇文章只聚焦在介紹 css variable，事實上也有其他優秀的 react style 管理方式**\n\n#### grid\n\n設定 gutter，我們現在可以用 css variable 的方式來做到，也就是說，我們可以用 `@media query` 的方式來幫變數設值，這是一般預處理器做不到的事情，\n\n#### js 的控制\n\n透過 javascript 的操作，我們可以很輕鬆的幫 css 變數設值或取值，來達到 view 跟 js 分離的效果。例如我們有一些效果想要透過 js 來取值，並傳給 css。一般來說，我們可能會透過 javascript 做計算之後，再把計算後的值，用 inline style 呈現。\n\n但這樣子有可能發生一些情形：\n\n- 這個值可能不是我想要的，或是我也想要自己對值做一些操作。這樣一來就要重新修改 javascript 的程式碼，非常麻煩。\n- 因為是用 inline style 設值，所以 CSS 無能為力。\n\n有了 css variable 之後，設值、取值非常的方便。\n\n##### 取值\n\n```javascript\nHTMLElement.style.getPropertyValue('--mainColor');\n```\n\n##### 設值\n\n```javascript\nHTMLElement.style.setProperty('--mainColor', '#abc');\n```\n\n所以，我們當然也可以套用事件註冊器，讓有興趣的數值注入到我們的變數之中。\n\n```javascript\nconst element = // some HTMLElement;\ndocument.addEventListener('mousedown', e => {\n  element.style.setProperty('--pageX', e.pageX);\n  element.style.setProperty('--pageY', e.pageY);\n});\n```\n\n##### 支援度\n\n如果要看看當前的瀏覽器是否有支援 CSS variable 的話，可以用 `CSS.supports` 的語法來檢測。\n\n`CSS.supports('(--css: variables)')` `CSS.supports('not (--css: variables)')`\n\n### 之後的挑戰\n\n因為管理變數的方式越來越多了，也有可能在 javascript 對變數進行設值的動作，所以在控制這些變數時我們應該要更小心一點。\n\n- 變數的宣告統一處理：全域變數統一放在一個檔案或資料夾當中，之後會比較方便處理，如果是宣告 css variable 也一樣。\n- 如果變數是為了讓 js 設值，可以試著加上前綴當作標記，例如：`--js-pageX` 等等。\n\n## 結論\n\n這篇文章介紹了 CSS variable 使用方式與場景，之前我也覺得 css variable 很彆扭，不但寫起來醜不拉機，而且也沒有相對應的函數操作。\n\n不過一旦理解 CSS variable 就是 custom property 的概念的時候，就會發現一些 CSS 以往無法突破的可能性。我們沒有必要一定要對 SASS 或是 CSS variable 做取捨，我們甚至可以將兩者搭配使用，做出一些以往無法達到的強大效果。\n","source":"_posts/css-variable.md","raw":"---\ntitle: \"css variable + sass variable = \\uD83D\\uDE0D\"\ntags:\n  - css\ncategory: 前端\ndate: 2016-11-14 19:44:20\ncategories:\n---\n\n之前寫過了一篇關於自己對 css variable 的想法，原本對這個屬性沒有抱持著太大的期待，自己用習慣了 SASS 變數也覺得這個 css variable 反而像個彆腳的 system，不過如果你也是這樣想的人，可以參考這篇文章 [Why should you care Css variables](https://developers.google.com/web/updates/2016/02/css-variables-why-should-you-care)\n\ncss 的變數已經出來有一段期間了，瀏覽器的支援程度還不算太糟。或許各位都曾經想過，這些變數的功能在 SASS 上幾乎都做得到，而且搭配 SASS 的 function 以及 SASS 的型別（list map）變數的使用彈性更為強大。\n\n不過這邊想要跟大家分享的是，css variable 真正亮眼的地方在哪裡。\n\n這篇文章會假設大家已經有一些 css variable 的基礎。\n\n附帶一提，這篇文章沒有很全面性的寫出如何使用 CSS variable，所以有任何建議都歡迎提出來，之後也會找時間來重新寫一篇比較全面性的文章。\n\n### 支援度\n\n\n| Browser | Version |\n| -----   | -----   |\n| Chrome  |   49    |\n| Firefox |   42    |\n| Safari  |   9.1   |\n\n### custom property\n\n> **只有在你讓他表現得像個 property 的時候**，他才會比一般的預處理器強大\n\n首先要澄清的一點是，在 [CSS 的 spec](https://drafts.csswg.org/css-variables/) 當中，variable 其實叫做 `custom property`。這是什麼意思？變數跟 property 搞得我好混亂！\n\n不要著急，意思就是在使用 css variable 的時候，我們應該把他們想成一般的 css 屬性使用，而非一般的變數而已。以下就會來介紹一些有關 css variable 的使用。\n\n### 為什麼你要用 CSS Variable\n\n- 你用這些屬性**不需要一個預處理器**。\n- 可以用 initial inherit 的方式建立階層\n- **瀏覽器會在需要的時候重新 render**\n- 你可以訪問並且**用JavaScript操縱它們（等等會講到）**\n\n#### property 特性\n\n既然是 css property 就一定會有以下幾個特性：\n\n- 有所謂的 `initial` `inherit` 的值可以使用\n- 呼叫的方式是 `var(--variable-name)`\n- **能夠放在 `inline-style` 裡面**\n- **可以用 js 取值、設值**\n\n其中，最大的亮點在於 inline-style 跟能夠與 js 搭配取值與設值。這是跟原本 SASS, LESS 等 CSS 預處理器最大的不同之處，也讓 CSS 具備了新的可能性，就讓我們來看一些範例吧！\n\n```scss\n:root {\n  --mainColor: #abc;\n  --subColor: #ccc;\n}\n\nh1 {\n  color: var(--mainColor);\n}\n```\n\n在這邊 `:root` 所宣告的元素會繼承到所有的元素當中，這就是 `custom property` 的特性。\n\n#### inline-style\n\n因為是 property，所以當然可以像這樣寫。\n\n```html\n<h1 style=\"color: var(--mainColor);\">\n  Hello, world\n</h1>\n```\n\n這看起來的確不怎麼稀奇，因為同樣的事情也可以用 class 跟 SCSS 變數的方式來達成，不過這讓我們在寫 inline style 的時候又多了一份可能性。\n\n##### react inline style\n\n例如在 react 當中，我們可能會需要寫一些 inline style，但是顏色的制定因為跳脫了 SCSS 的控制，常常顯得很彆扭，要嘛就是直接打上顏色碼，之後要修改的時候再捲起袖子慢慢改；或者用 js 另外保存一份顏色的變數表；最好的方法可能是幫每一個顏色變數賦予一個 class。\n\n現在有了 css variable 我們可以很方便的使用。\n\n```jsx\nconst styles = {\n  heading: {\n    fontSize: '14px',\n    color: 'var(--mainColor)',\n  },\n  warn: {\n    color: 'var(--warnColor)'\n  }\n};\n\nconst heading = ({title}) => <h1 style={styles.heading}>{title}</h1>\n```\n\n**本篇文章只聚焦在介紹 css variable，事實上也有其他優秀的 react style 管理方式**\n\n#### grid\n\n設定 gutter，我們現在可以用 css variable 的方式來做到，也就是說，我們可以用 `@media query` 的方式來幫變數設值，這是一般預處理器做不到的事情，\n\n#### js 的控制\n\n透過 javascript 的操作，我們可以很輕鬆的幫 css 變數設值或取值，來達到 view 跟 js 分離的效果。例如我們有一些效果想要透過 js 來取值，並傳給 css。一般來說，我們可能會透過 javascript 做計算之後，再把計算後的值，用 inline style 呈現。\n\n但這樣子有可能發生一些情形：\n\n- 這個值可能不是我想要的，或是我也想要自己對值做一些操作。這樣一來就要重新修改 javascript 的程式碼，非常麻煩。\n- 因為是用 inline style 設值，所以 CSS 無能為力。\n\n有了 css variable 之後，設值、取值非常的方便。\n\n##### 取值\n\n```javascript\nHTMLElement.style.getPropertyValue('--mainColor');\n```\n\n##### 設值\n\n```javascript\nHTMLElement.style.setProperty('--mainColor', '#abc');\n```\n\n所以，我們當然也可以套用事件註冊器，讓有興趣的數值注入到我們的變數之中。\n\n```javascript\nconst element = // some HTMLElement;\ndocument.addEventListener('mousedown', e => {\n  element.style.setProperty('--pageX', e.pageX);\n  element.style.setProperty('--pageY', e.pageY);\n});\n```\n\n##### 支援度\n\n如果要看看當前的瀏覽器是否有支援 CSS variable 的話，可以用 `CSS.supports` 的語法來檢測。\n\n`CSS.supports('(--css: variables)')` `CSS.supports('not (--css: variables)')`\n\n### 之後的挑戰\n\n因為管理變數的方式越來越多了，也有可能在 javascript 對變數進行設值的動作，所以在控制這些變數時我們應該要更小心一點。\n\n- 變數的宣告統一處理：全域變數統一放在一個檔案或資料夾當中，之後會比較方便處理，如果是宣告 css variable 也一樣。\n- 如果變數是為了讓 js 設值，可以試著加上前綴當作標記，例如：`--js-pageX` 等等。\n\n## 結論\n\n這篇文章介紹了 CSS variable 使用方式與場景，之前我也覺得 css variable 很彆扭，不但寫起來醜不拉機，而且也沒有相對應的函數操作。\n\n不過一旦理解 CSS variable 就是 custom property 的概念的時候，就會發現一些 CSS 以往無法突破的可能性。我們沒有必要一定要對 SASS 或是 CSS variable 做取捨，我們甚至可以將兩者搭配使用，做出一些以往無法達到的強大效果。\n","slug":"css-variable","published":1,"updated":"2016-11-14T12:07:16.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqj000yiw5tzw3gm85o","content":"<p>之前寫過了一篇關於自己對 css variable 的想法，原本對這個屬性沒有抱持著太大的期待，自己用習慣了 SASS 變數也覺得這個 css variable 反而像個彆腳的 system，不過如果你也是這樣想的人，可以參考這篇文章 <a href=\"https://developers.google.com/web/updates/2016/02/css-variables-why-should-you-care\" target=\"_blank\" rel=\"external\">Why should you care Css variables</a></p>\n<p>css 的變數已經出來有一段期間了，瀏覽器的支援程度還不算太糟。或許各位都曾經想過，這些變數的功能在 SASS 上幾乎都做得到，而且搭配 SASS 的 function 以及 SASS 的型別（list map）變數的使用彈性更為強大。</p>\n<p>不過這邊想要跟大家分享的是，css variable 真正亮眼的地方在哪裡。</p>\n<p>這篇文章會假設大家已經有一些 css variable 的基礎。</p>\n<p>附帶一提，這篇文章沒有很全面性的寫出如何使用 CSS variable，所以有任何建議都歡迎提出來，之後也會找時間來重新寫一篇比較全面性的文章。</p>\n<h3 id=\"支援度\"><a href=\"#支援度\" class=\"headerlink\" title=\"支援度\"></a>支援度</h3><table>\n<thead>\n<tr>\n<th>Browser</th>\n<th>Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome</td>\n<td>49</td>\n</tr>\n<tr>\n<td>Firefox</td>\n<td>42</td>\n</tr>\n<tr>\n<td>Safari</td>\n<td>9.1</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"custom-property\"><a href=\"#custom-property\" class=\"headerlink\" title=\"custom property\"></a>custom property</h3><blockquote>\n<p><strong>只有在你讓他表現得像個 property 的時候</strong>，他才會比一般的預處理器強大</p>\n</blockquote>\n<p>首先要澄清的一點是，在 <a href=\"https://drafts.csswg.org/css-variables/\" target=\"_blank\" rel=\"external\">CSS 的 spec</a> 當中，variable 其實叫做 <code>custom property</code>。這是什麼意思？變數跟 property 搞得我好混亂！</p>\n<p>不要著急，意思就是在使用 css variable 的時候，我們應該把他們想成一般的 css 屬性使用，而非一般的變數而已。以下就會來介紹一些有關 css variable 的使用。</p>\n<h3 id=\"為什麼你要用-CSS-Variable\"><a href=\"#為什麼你要用-CSS-Variable\" class=\"headerlink\" title=\"為什麼你要用 CSS Variable\"></a>為什麼你要用 CSS Variable</h3><ul>\n<li>你用這些屬性<strong>不需要一個預處理器</strong>。</li>\n<li>可以用 initial inherit 的方式建立階層</li>\n<li><strong>瀏覽器會在需要的時候重新 render</strong></li>\n<li>你可以訪問並且<strong>用JavaScript操縱它們（等等會講到）</strong></li>\n</ul>\n<h4 id=\"property-特性\"><a href=\"#property-特性\" class=\"headerlink\" title=\"property 特性\"></a>property 特性</h4><p>既然是 css property 就一定會有以下幾個特性：</p>\n<ul>\n<li>有所謂的 <code>initial</code> <code>inherit</code> 的值可以使用</li>\n<li>呼叫的方式是 <code>var(--variable-name)</code></li>\n<li><strong>能夠放在 <code>inline-style</code> 裡面</strong></li>\n<li><strong>可以用 js 取值、設值</strong></li>\n</ul>\n<p>其中，最大的亮點在於 inline-style 跟能夠與 js 搭配取值與設值。這是跟原本 SASS, LESS 等 CSS 預處理器最大的不同之處，也讓 CSS 具備了新的可能性，就讓我們來看一些範例吧！</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">:root &#123;</div><div class=\"line\">  --mainColor: <span class=\"number\">#abc</span>;</div><div class=\"line\">  --subColor: <span class=\"number\">#ccc</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">color</span>: var(--mainColor);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在這邊 <code>:root</code> 所宣告的元素會繼承到所有的元素當中，這就是 <code>custom property</code> 的特性。</p>\n<h4 id=\"inline-style\"><a href=\"#inline-style\" class=\"headerlink\" title=\"inline-style\"></a>inline-style</h4><p>因為是 property，所以當然可以像這樣寫。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">\"color: var(--mainColor);\"</span>&gt;</span></div><div class=\"line\">  Hello, world</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>這看起來的確不怎麼稀奇，因為同樣的事情也可以用 class 跟 SCSS 變數的方式來達成，不過這讓我們在寫 inline style 的時候又多了一份可能性。</p>\n<h5 id=\"react-inline-style\"><a href=\"#react-inline-style\" class=\"headerlink\" title=\"react inline style\"></a>react inline style</h5><p>例如在 react 當中，我們可能會需要寫一些 inline style，但是顏色的制定因為跳脫了 SCSS 的控制，常常顯得很彆扭，要嘛就是直接打上顏色碼，之後要修改的時候再捲起袖子慢慢改；或者用 js 另外保存一份顏色的變數表；最好的方法可能是幫每一個顏色變數賦予一個 class。</p>\n<p>現在有了 css variable 我們可以很方便的使用。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> styles = &#123;</div><div class=\"line\">  <span class=\"attr\">heading</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fontSize</span>: <span class=\"string\">'14px'</span>,</div><div class=\"line\">    <span class=\"attr\">color</span>: <span class=\"string\">'var(--mainColor)'</span>,</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">warn</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">color</span>: <span class=\"string\">'var(--warnColor)'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> heading = <span class=\"function\">(<span class=\"params\">&#123;title&#125;</span>) =&gt;</span> &lt;h1 style=&#123;styles.heading&#125;&gt;&#123;title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>本篇文章只聚焦在介紹 css variable，事實上也有其他優秀的 react style 管理方式</strong></p>\n<h4 id=\"grid\"><a href=\"#grid\" class=\"headerlink\" title=\"grid\"></a>grid</h4><p>設定 gutter，我們現在可以用 css variable 的方式來做到，也就是說，我們可以用 <code>@media query</code> 的方式來幫變數設值，這是一般預處理器做不到的事情，</p>\n<h4 id=\"js-的控制\"><a href=\"#js-的控制\" class=\"headerlink\" title=\"js 的控制\"></a>js 的控制</h4><p>透過 javascript 的操作，我們可以很輕鬆的幫 css 變數設值或取值，來達到 view 跟 js 分離的效果。例如我們有一些效果想要透過 js 來取值，並傳給 css。一般來說，我們可能會透過 javascript 做計算之後，再把計算後的值，用 inline style 呈現。</p>\n<p>但這樣子有可能發生一些情形：</p>\n<ul>\n<li>這個值可能不是我想要的，或是我也想要自己對值做一些操作。這樣一來就要重新修改 javascript 的程式碼，非常麻煩。</li>\n<li>因為是用 inline style 設值，所以 CSS 無能為力。</li>\n</ul>\n<p>有了 css variable 之後，設值、取值非常的方便。</p>\n<h5 id=\"取值\"><a href=\"#取值\" class=\"headerlink\" title=\"取值\"></a>取值</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">HTMLElement.style.getPropertyValue(<span class=\"string\">'--mainColor'</span>);</div></pre></td></tr></table></figure>\n<h5 id=\"設值\"><a href=\"#設值\" class=\"headerlink\" title=\"設值\"></a>設值</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">HTMLElement.style.setProperty(<span class=\"string\">'--mainColor'</span>, <span class=\"string\">'#abc'</span>);</div></pre></td></tr></table></figure>\n<p>所以，我們當然也可以套用事件註冊器，讓有興趣的數值注入到我們的變數之中。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"comment\">// some HTMLElement;</span></div><div class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'mousedown'</span>, e =&gt; &#123;</div><div class=\"line\">  element.style.setProperty(<span class=\"string\">'--pageX'</span>, e.pageX);</div><div class=\"line\">  element.style.setProperty(<span class=\"string\">'--pageY'</span>, e.pageY);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h5 id=\"支援度-1\"><a href=\"#支援度-1\" class=\"headerlink\" title=\"支援度\"></a>支援度</h5><p>如果要看看當前的瀏覽器是否有支援 CSS variable 的話，可以用 <code>CSS.supports</code> 的語法來檢測。</p>\n<p><code>CSS.supports(&#39;(--css: variables)&#39;)</code> <code>CSS.supports(&#39;not (--css: variables)&#39;)</code></p>\n<h3 id=\"之後的挑戰\"><a href=\"#之後的挑戰\" class=\"headerlink\" title=\"之後的挑戰\"></a>之後的挑戰</h3><p>因為管理變數的方式越來越多了，也有可能在 javascript 對變數進行設值的動作，所以在控制這些變數時我們應該要更小心一點。</p>\n<ul>\n<li>變數的宣告統一處理：全域變數統一放在一個檔案或資料夾當中，之後會比較方便處理，如果是宣告 css variable 也一樣。</li>\n<li>如果變數是為了讓 js 設值，可以試著加上前綴當作標記，例如：<code>--js-pageX</code> 等等。</li>\n</ul>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這篇文章介紹了 CSS variable 使用方式與場景，之前我也覺得 css variable 很彆扭，不但寫起來醜不拉機，而且也沒有相對應的函數操作。</p>\n<p>不過一旦理解 CSS variable 就是 custom property 的概念的時候，就會發現一些 CSS 以往無法突破的可能性。我們沒有必要一定要對 SASS 或是 CSS variable 做取捨，我們甚至可以將兩者搭配使用，做出一些以往無法達到的強大效果。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>之前寫過了一篇關於自己對 css variable 的想法，原本對這個屬性沒有抱持著太大的期待，自己用習慣了 SASS 變數也覺得這個 css variable 反而像個彆腳的 system，不過如果你也是這樣想的人，可以參考這篇文章 <a href=\"https://developers.google.com/web/updates/2016/02/css-variables-why-should-you-care\" target=\"_blank\" rel=\"external\">Why should you care Css variables</a></p>\n<p>css 的變數已經出來有一段期間了，瀏覽器的支援程度還不算太糟。或許各位都曾經想過，這些變數的功能在 SASS 上幾乎都做得到，而且搭配 SASS 的 function 以及 SASS 的型別（list map）變數的使用彈性更為強大。</p>\n<p>不過這邊想要跟大家分享的是，css variable 真正亮眼的地方在哪裡。</p>\n<p>這篇文章會假設大家已經有一些 css variable 的基礎。</p>\n<p>附帶一提，這篇文章沒有很全面性的寫出如何使用 CSS variable，所以有任何建議都歡迎提出來，之後也會找時間來重新寫一篇比較全面性的文章。</p>\n<h3 id=\"支援度\"><a href=\"#支援度\" class=\"headerlink\" title=\"支援度\"></a>支援度</h3><table>\n<thead>\n<tr>\n<th>Browser</th>\n<th>Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome</td>\n<td>49</td>\n</tr>\n<tr>\n<td>Firefox</td>\n<td>42</td>\n</tr>\n<tr>\n<td>Safari</td>\n<td>9.1</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"custom-property\"><a href=\"#custom-property\" class=\"headerlink\" title=\"custom property\"></a>custom property</h3><blockquote>\n<p><strong>只有在你讓他表現得像個 property 的時候</strong>，他才會比一般的預處理器強大</p>\n</blockquote>\n<p>首先要澄清的一點是，在 <a href=\"https://drafts.csswg.org/css-variables/\" target=\"_blank\" rel=\"external\">CSS 的 spec</a> 當中，variable 其實叫做 <code>custom property</code>。這是什麼意思？變數跟 property 搞得我好混亂！</p>\n<p>不要著急，意思就是在使用 css variable 的時候，我們應該把他們想成一般的 css 屬性使用，而非一般的變數而已。以下就會來介紹一些有關 css variable 的使用。</p>\n<h3 id=\"為什麼你要用-CSS-Variable\"><a href=\"#為什麼你要用-CSS-Variable\" class=\"headerlink\" title=\"為什麼你要用 CSS Variable\"></a>為什麼你要用 CSS Variable</h3><ul>\n<li>你用這些屬性<strong>不需要一個預處理器</strong>。</li>\n<li>可以用 initial inherit 的方式建立階層</li>\n<li><strong>瀏覽器會在需要的時候重新 render</strong></li>\n<li>你可以訪問並且<strong>用JavaScript操縱它們（等等會講到）</strong></li>\n</ul>\n<h4 id=\"property-特性\"><a href=\"#property-特性\" class=\"headerlink\" title=\"property 特性\"></a>property 特性</h4><p>既然是 css property 就一定會有以下幾個特性：</p>\n<ul>\n<li>有所謂的 <code>initial</code> <code>inherit</code> 的值可以使用</li>\n<li>呼叫的方式是 <code>var(--variable-name)</code></li>\n<li><strong>能夠放在 <code>inline-style</code> 裡面</strong></li>\n<li><strong>可以用 js 取值、設值</strong></li>\n</ul>\n<p>其中，最大的亮點在於 inline-style 跟能夠與 js 搭配取值與設值。這是跟原本 SASS, LESS 等 CSS 預處理器最大的不同之處，也讓 CSS 具備了新的可能性，就讓我們來看一些範例吧！</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">:root &#123;</div><div class=\"line\">  --mainColor: <span class=\"number\">#abc</span>;</div><div class=\"line\">  --subColor: <span class=\"number\">#ccc</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">h1</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">color</span>: var(--mainColor);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在這邊 <code>:root</code> 所宣告的元素會繼承到所有的元素當中，這就是 <code>custom property</code> 的特性。</p>\n<h4 id=\"inline-style\"><a href=\"#inline-style\" class=\"headerlink\" title=\"inline-style\"></a>inline-style</h4><p>因為是 property，所以當然可以像這樣寫。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">\"color: var(--mainColor);\"</span>&gt;</span></div><div class=\"line\">  Hello, world</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>這看起來的確不怎麼稀奇，因為同樣的事情也可以用 class 跟 SCSS 變數的方式來達成，不過這讓我們在寫 inline style 的時候又多了一份可能性。</p>\n<h5 id=\"react-inline-style\"><a href=\"#react-inline-style\" class=\"headerlink\" title=\"react inline style\"></a>react inline style</h5><p>例如在 react 當中，我們可能會需要寫一些 inline style，但是顏色的制定因為跳脫了 SCSS 的控制，常常顯得很彆扭，要嘛就是直接打上顏色碼，之後要修改的時候再捲起袖子慢慢改；或者用 js 另外保存一份顏色的變數表；最好的方法可能是幫每一個顏色變數賦予一個 class。</p>\n<p>現在有了 css variable 我們可以很方便的使用。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> styles = &#123;</div><div class=\"line\">  <span class=\"attr\">heading</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fontSize</span>: <span class=\"string\">'14px'</span>,</div><div class=\"line\">    <span class=\"attr\">color</span>: <span class=\"string\">'var(--mainColor)'</span>,</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">warn</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">color</span>: <span class=\"string\">'var(--warnColor)'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> heading = <span class=\"function\">(<span class=\"params\">&#123;title&#125;</span>) =&gt;</span> &lt;h1 style=&#123;styles.heading&#125;&gt;&#123;title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></div></pre></td></tr></table></figure>\n<p><strong>本篇文章只聚焦在介紹 css variable，事實上也有其他優秀的 react style 管理方式</strong></p>\n<h4 id=\"grid\"><a href=\"#grid\" class=\"headerlink\" title=\"grid\"></a>grid</h4><p>設定 gutter，我們現在可以用 css variable 的方式來做到，也就是說，我們可以用 <code>@media query</code> 的方式來幫變數設值，這是一般預處理器做不到的事情，</p>\n<h4 id=\"js-的控制\"><a href=\"#js-的控制\" class=\"headerlink\" title=\"js 的控制\"></a>js 的控制</h4><p>透過 javascript 的操作，我們可以很輕鬆的幫 css 變數設值或取值，來達到 view 跟 js 分離的效果。例如我們有一些效果想要透過 js 來取值，並傳給 css。一般來說，我們可能會透過 javascript 做計算之後，再把計算後的值，用 inline style 呈現。</p>\n<p>但這樣子有可能發生一些情形：</p>\n<ul>\n<li>這個值可能不是我想要的，或是我也想要自己對值做一些操作。這樣一來就要重新修改 javascript 的程式碼，非常麻煩。</li>\n<li>因為是用 inline style 設值，所以 CSS 無能為力。</li>\n</ul>\n<p>有了 css variable 之後，設值、取值非常的方便。</p>\n<h5 id=\"取值\"><a href=\"#取值\" class=\"headerlink\" title=\"取值\"></a>取值</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">HTMLElement.style.getPropertyValue(<span class=\"string\">'--mainColor'</span>);</div></pre></td></tr></table></figure>\n<h5 id=\"設值\"><a href=\"#設值\" class=\"headerlink\" title=\"設值\"></a>設值</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">HTMLElement.style.setProperty(<span class=\"string\">'--mainColor'</span>, <span class=\"string\">'#abc'</span>);</div></pre></td></tr></table></figure>\n<p>所以，我們當然也可以套用事件註冊器，讓有興趣的數值注入到我們的變數之中。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> element = <span class=\"comment\">// some HTMLElement;</span></div><div class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'mousedown'</span>, e =&gt; &#123;</div><div class=\"line\">  element.style.setProperty(<span class=\"string\">'--pageX'</span>, e.pageX);</div><div class=\"line\">  element.style.setProperty(<span class=\"string\">'--pageY'</span>, e.pageY);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h5 id=\"支援度-1\"><a href=\"#支援度-1\" class=\"headerlink\" title=\"支援度\"></a>支援度</h5><p>如果要看看當前的瀏覽器是否有支援 CSS variable 的話，可以用 <code>CSS.supports</code> 的語法來檢測。</p>\n<p><code>CSS.supports(&#39;(--css: variables)&#39;)</code> <code>CSS.supports(&#39;not (--css: variables)&#39;)</code></p>\n<h3 id=\"之後的挑戰\"><a href=\"#之後的挑戰\" class=\"headerlink\" title=\"之後的挑戰\"></a>之後的挑戰</h3><p>因為管理變數的方式越來越多了，也有可能在 javascript 對變數進行設值的動作，所以在控制這些變數時我們應該要更小心一點。</p>\n<ul>\n<li>變數的宣告統一處理：全域變數統一放在一個檔案或資料夾當中，之後會比較方便處理，如果是宣告 css variable 也一樣。</li>\n<li>如果變數是為了讓 js 設值，可以試著加上前綴當作標記，例如：<code>--js-pageX</code> 等等。</li>\n</ul>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這篇文章介紹了 CSS variable 使用方式與場景，之前我也覺得 css variable 很彆扭，不但寫起來醜不拉機，而且也沒有相對應的函數操作。</p>\n<p>不過一旦理解 CSS variable 就是 custom property 的概念的時候，就會發現一些 CSS 以往無法突破的可能性。我們沒有必要一定要對 SASS 或是 CSS variable 做取捨，我們甚至可以將兩者搭配使用，做出一些以往無法達到的強大效果。</p>\n"},{"title":"frontend collection - 5/23","date":"2016-11-14T11:45:21.000Z","_content":"\n## 這禮拜發現的新東西\n\n這個禮拜在思考關於重構的東西，在前端還可以怎麼實踐。css 的部分已經有大致的雛形出來了，把相關的註解跟文件寫完之後再和大家分享心得。\n\n### Get your `../../` out\n\n[reference](http://davidboyne.co.uk/2016/04/29/react-webpack-gem.html)\n\ncss 部分重構完之後，再來就是要對 js 下手了。目前比較困擾的幾個點有：\n\n1. component 初期的部分比較亂\n2. 有些 flux、有些 redux\n\n再來是我認為最麻煩的，就是路徑管理的問題了，因為檔案裡面有太多類似的 `../..` 出現，導致之後要對檔案做搬遷的時候還要全部重改一次，感覺非常的費工費時，也是讓人不敢輕易重構一大原因。\n\n那時候第一個想法是，「不然我把全部的檔案存成一張路由表好了。」，不是 import 檔案本身，而是每次要 import 時，都到這個路由表去拿路徑，不但方便，而且每次對檔案做搬遷時，我只要維護好這張路由表就了。不過這個想法還沒有實作過，所以可能不是好方法也說不定...。\n\n\n再來發現的第二個工具是`modulesDirectories`，主要是幫你把 root 定義好，每次呼叫 component 時都是以 root 當作起點而非檔案本身。\n\n以 sudo 的檔案為例\n\n```js\nrequire('../ui/comment_reply.js');\nimport h from '../utils/sudo_helper/dom.js';\nconst actionList = {\n\treply: 'reply',\n\tedit: 'edit'\n};\n\nimport jobsIndex from '../reducers/pages/JobsIndex.js';\nimport App from '../containers/jobs_index.js';\nimport configureStore from '../stores/JobSearchStore.js';\n\nvar Checkbox = require('../components/checkbox');\nvar Slider = require('../components/slider.js');\nvar TextInput = require('../components/text_input.js');\n```\n 加入 `modulesDirectories` 之後，我們可以這樣寫：\n\n```js\nrequire('ui/comment_reply.js');\nimport h from 'utils/sudo_helper/dom.js'\n\nimport jobIndex from 'reducers/pages/JobIndex';\nimport App from 'containers/jobs_index';\nimport configureStore from 'stores/JobSearchStore';\n```\n\n這樣 component 搬遷的時候，不會因為相對路徑改變的關係，而還要全部重寫一次，重構的意願也相對提高了。\n\n### [idiomatic-css](https://github.com/necolas/idiomatic-css/tree/master/translations/zh-TW)\n\n最近一直在研究如何讓 css 的易讀性更高，並且更好做維護，目前如果搭配 webpack 的話，常見的方法有：\n\n1. css-module\n2. postCss\n3. radium\n\n這些工具搭配 react 一起使用，其實可以很有效地解決 namespace 的問題。\n\n不過主站目前想要先解決的是變數的統一命名，及 css 的規範。這部分規範好了之後，css 的管理相對也會變得簡單許多。\n\n### [code smell in css](http://csswizardry.com/2012/11/code-smells-in-css/)\n\n這篇文章介紹了很多關於 css 的 `smell code`。幾個比較重要的大概念：\n\n1. 避免 magic number\n2. 盡量讓 class 是 immutable\n3. 利用權重的技巧，而不是過度使用 important\n4. selector 盡量簡單\n\n順便來複習一下 [selector](http://www.w3schools.com/cssref/css_selectors.asp) 的語法吧！除了用 class 來當做 selector 之外還有很多其他實用的 selector 可以使用！\n像是 input 就是一個非常好使用 attribute selector 的例子：\n\n```scss\n.sudo-input {\n  input[type=\"text\"] {\n    // text style\n  }\n\n  input[type=\"submit\"] {\n    // submit style\n  }\n\n  input[type=\"number\"] {\n   // ...\n  }\n}\n\n```\n這樣不僅語意清楚，也可以省下不必要的 class。\n","source":"_posts/frontend-weekly.md","raw":"---\ntitle: frontend collection - 5/23\ncategories: 前端週刊\ntags:\n  - react\n  - webpack\ndate: 2016-11-14 19:45:21\n---\n\n## 這禮拜發現的新東西\n\n這個禮拜在思考關於重構的東西，在前端還可以怎麼實踐。css 的部分已經有大致的雛形出來了，把相關的註解跟文件寫完之後再和大家分享心得。\n\n### Get your `../../` out\n\n[reference](http://davidboyne.co.uk/2016/04/29/react-webpack-gem.html)\n\ncss 部分重構完之後，再來就是要對 js 下手了。目前比較困擾的幾個點有：\n\n1. component 初期的部分比較亂\n2. 有些 flux、有些 redux\n\n再來是我認為最麻煩的，就是路徑管理的問題了，因為檔案裡面有太多類似的 `../..` 出現，導致之後要對檔案做搬遷的時候還要全部重改一次，感覺非常的費工費時，也是讓人不敢輕易重構一大原因。\n\n那時候第一個想法是，「不然我把全部的檔案存成一張路由表好了。」，不是 import 檔案本身，而是每次要 import 時，都到這個路由表去拿路徑，不但方便，而且每次對檔案做搬遷時，我只要維護好這張路由表就了。不過這個想法還沒有實作過，所以可能不是好方法也說不定...。\n\n\n再來發現的第二個工具是`modulesDirectories`，主要是幫你把 root 定義好，每次呼叫 component 時都是以 root 當作起點而非檔案本身。\n\n以 sudo 的檔案為例\n\n```js\nrequire('../ui/comment_reply.js');\nimport h from '../utils/sudo_helper/dom.js';\nconst actionList = {\n\treply: 'reply',\n\tedit: 'edit'\n};\n\nimport jobsIndex from '../reducers/pages/JobsIndex.js';\nimport App from '../containers/jobs_index.js';\nimport configureStore from '../stores/JobSearchStore.js';\n\nvar Checkbox = require('../components/checkbox');\nvar Slider = require('../components/slider.js');\nvar TextInput = require('../components/text_input.js');\n```\n 加入 `modulesDirectories` 之後，我們可以這樣寫：\n\n```js\nrequire('ui/comment_reply.js');\nimport h from 'utils/sudo_helper/dom.js'\n\nimport jobIndex from 'reducers/pages/JobIndex';\nimport App from 'containers/jobs_index';\nimport configureStore from 'stores/JobSearchStore';\n```\n\n這樣 component 搬遷的時候，不會因為相對路徑改變的關係，而還要全部重寫一次，重構的意願也相對提高了。\n\n### [idiomatic-css](https://github.com/necolas/idiomatic-css/tree/master/translations/zh-TW)\n\n最近一直在研究如何讓 css 的易讀性更高，並且更好做維護，目前如果搭配 webpack 的話，常見的方法有：\n\n1. css-module\n2. postCss\n3. radium\n\n這些工具搭配 react 一起使用，其實可以很有效地解決 namespace 的問題。\n\n不過主站目前想要先解決的是變數的統一命名，及 css 的規範。這部分規範好了之後，css 的管理相對也會變得簡單許多。\n\n### [code smell in css](http://csswizardry.com/2012/11/code-smells-in-css/)\n\n這篇文章介紹了很多關於 css 的 `smell code`。幾個比較重要的大概念：\n\n1. 避免 magic number\n2. 盡量讓 class 是 immutable\n3. 利用權重的技巧，而不是過度使用 important\n4. selector 盡量簡單\n\n順便來複習一下 [selector](http://www.w3schools.com/cssref/css_selectors.asp) 的語法吧！除了用 class 來當做 selector 之外還有很多其他實用的 selector 可以使用！\n像是 input 就是一個非常好使用 attribute selector 的例子：\n\n```scss\n.sudo-input {\n  input[type=\"text\"] {\n    // text style\n  }\n\n  input[type=\"submit\"] {\n    // submit style\n  }\n\n  input[type=\"number\"] {\n   // ...\n  }\n}\n\n```\n這樣不僅語意清楚，也可以省下不必要的 class。\n","slug":"frontend-weekly","published":1,"updated":"2017-02-19T11:16:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitql0012iw5t85wjxjhk","content":"<h2 id=\"這禮拜發現的新東西\"><a href=\"#這禮拜發現的新東西\" class=\"headerlink\" title=\"這禮拜發現的新東西\"></a>這禮拜發現的新東西</h2><p>這個禮拜在思考關於重構的東西，在前端還可以怎麼實踐。css 的部分已經有大致的雛形出來了，把相關的註解跟文件寫完之後再和大家分享心得。</p>\n<h3 id=\"Get-your-out\"><a href=\"#Get-your-out\" class=\"headerlink\" title=\"Get your ../../ out\"></a>Get your <code>../../</code> out</h3><p><a href=\"http://davidboyne.co.uk/2016/04/29/react-webpack-gem.html\" target=\"_blank\" rel=\"external\">reference</a></p>\n<p>css 部分重構完之後，再來就是要對 js 下手了。目前比較困擾的幾個點有：</p>\n<ol>\n<li>component 初期的部分比較亂</li>\n<li>有些 flux、有些 redux</li>\n</ol>\n<p>再來是我認為最麻煩的，就是路徑管理的問題了，因為檔案裡面有太多類似的 <code>../..</code> 出現，導致之後要對檔案做搬遷的時候還要全部重改一次，感覺非常的費工費時，也是讓人不敢輕易重構一大原因。</p>\n<p>那時候第一個想法是，「不然我把全部的檔案存成一張路由表好了。」，不是 import 檔案本身，而是每次要 import 時，都到這個路由表去拿路徑，不但方便，而且每次對檔案做搬遷時，我只要維護好這張路由表就了。不過這個想法還沒有實作過，所以可能不是好方法也說不定…。</p>\n<p>再來發現的第二個工具是<code>modulesDirectories</code>，主要是幫你把 root 定義好，每次呼叫 component 時都是以 root 當作起點而非檔案本身。</p>\n<p>以 sudo 的檔案為例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../ui/comment_reply.js'</span>);</div><div class=\"line\"><span class=\"keyword\">import</span> h <span class=\"keyword\">from</span> <span class=\"string\">'../utils/sudo_helper/dom.js'</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> actionList = &#123;</div><div class=\"line\">\t<span class=\"attr\">reply</span>: <span class=\"string\">'reply'</span>,</div><div class=\"line\">\t<span class=\"attr\">edit</span>: <span class=\"string\">'edit'</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> jobsIndex <span class=\"keyword\">from</span> <span class=\"string\">'../reducers/pages/JobsIndex.js'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'../containers/jobs_index.js'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> configureStore <span class=\"keyword\">from</span> <span class=\"string\">'../stores/JobSearchStore.js'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Checkbox = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/checkbox'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> Slider = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/slider.js'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> TextInput = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/text_input.js'</span>);</div></pre></td></tr></table></figure>\n<p> 加入 <code>modulesDirectories</code> 之後，我們可以這樣寫：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'ui/comment_reply.js'</span>);</div><div class=\"line\"><span class=\"keyword\">import</span> h <span class=\"keyword\">from</span> <span class=\"string\">'utils/sudo_helper/dom.js'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> jobIndex <span class=\"keyword\">from</span> <span class=\"string\">'reducers/pages/JobIndex'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'containers/jobs_index'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> configureStore <span class=\"keyword\">from</span> <span class=\"string\">'stores/JobSearchStore'</span>;</div></pre></td></tr></table></figure>\n<p>這樣 component 搬遷的時候，不會因為相對路徑改變的關係，而還要全部重寫一次，重構的意願也相對提高了。</p>\n<h3 id=\"idiomatic-css\"><a href=\"#idiomatic-css\" class=\"headerlink\" title=\"idiomatic-css\"></a><a href=\"https://github.com/necolas/idiomatic-css/tree/master/translations/zh-TW\" target=\"_blank\" rel=\"external\">idiomatic-css</a></h3><p>最近一直在研究如何讓 css 的易讀性更高，並且更好做維護，目前如果搭配 webpack 的話，常見的方法有：</p>\n<ol>\n<li>css-module</li>\n<li>postCss</li>\n<li>radium</li>\n</ol>\n<p>這些工具搭配 react 一起使用，其實可以很有效地解決 namespace 的問題。</p>\n<p>不過主站目前想要先解決的是變數的統一命名，及 css 的規範。這部分規範好了之後，css 的管理相對也會變得簡單許多。</p>\n<h3 id=\"code-smell-in-css\"><a href=\"#code-smell-in-css\" class=\"headerlink\" title=\"code smell in css\"></a><a href=\"http://csswizardry.com/2012/11/code-smells-in-css/\" target=\"_blank\" rel=\"external\">code smell in css</a></h3><p>這篇文章介紹了很多關於 css 的 <code>smell code</code>。幾個比較重要的大概念：</p>\n<ol>\n<li>避免 magic number</li>\n<li>盡量讓 class 是 immutable</li>\n<li>利用權重的技巧，而不是過度使用 important</li>\n<li>selector 盡量簡單</li>\n</ol>\n<p>順便來複習一下 <a href=\"http://www.w3schools.com/cssref/css_selectors.asp\" target=\"_blank\" rel=\"external\">selector</a> 的語法吧！除了用 class 來當做 selector 之外還有很多其他實用的 selector 可以使用！<br>像是 input 就是一個非常好使用 attribute selector 的例子：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.sudo-input</span> &#123;</div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"text\"]</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// text style</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"submit\"]</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// submit style</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"number\"]</span> &#123;</div><div class=\"line\">   <span class=\"comment\">// ...</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣不僅語意清楚，也可以省下不必要的 class。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"這禮拜發現的新東西\"><a href=\"#這禮拜發現的新東西\" class=\"headerlink\" title=\"這禮拜發現的新東西\"></a>這禮拜發現的新東西</h2><p>這個禮拜在思考關於重構的東西，在前端還可以怎麼實踐。css 的部分已經有大致的雛形出來了，把相關的註解跟文件寫完之後再和大家分享心得。</p>\n<h3 id=\"Get-your-out\"><a href=\"#Get-your-out\" class=\"headerlink\" title=\"Get your ../../ out\"></a>Get your <code>../../</code> out</h3><p><a href=\"http://davidboyne.co.uk/2016/04/29/react-webpack-gem.html\" target=\"_blank\" rel=\"external\">reference</a></p>\n<p>css 部分重構完之後，再來就是要對 js 下手了。目前比較困擾的幾個點有：</p>\n<ol>\n<li>component 初期的部分比較亂</li>\n<li>有些 flux、有些 redux</li>\n</ol>\n<p>再來是我認為最麻煩的，就是路徑管理的問題了，因為檔案裡面有太多類似的 <code>../..</code> 出現，導致之後要對檔案做搬遷的時候還要全部重改一次，感覺非常的費工費時，也是讓人不敢輕易重構一大原因。</p>\n<p>那時候第一個想法是，「不然我把全部的檔案存成一張路由表好了。」，不是 import 檔案本身，而是每次要 import 時，都到這個路由表去拿路徑，不但方便，而且每次對檔案做搬遷時，我只要維護好這張路由表就了。不過這個想法還沒有實作過，所以可能不是好方法也說不定…。</p>\n<p>再來發現的第二個工具是<code>modulesDirectories</code>，主要是幫你把 root 定義好，每次呼叫 component 時都是以 root 當作起點而非檔案本身。</p>\n<p>以 sudo 的檔案為例</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'../ui/comment_reply.js'</span>);</div><div class=\"line\"><span class=\"keyword\">import</span> h <span class=\"keyword\">from</span> <span class=\"string\">'../utils/sudo_helper/dom.js'</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> actionList = &#123;</div><div class=\"line\">\t<span class=\"attr\">reply</span>: <span class=\"string\">'reply'</span>,</div><div class=\"line\">\t<span class=\"attr\">edit</span>: <span class=\"string\">'edit'</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> jobsIndex <span class=\"keyword\">from</span> <span class=\"string\">'../reducers/pages/JobsIndex.js'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'../containers/jobs_index.js'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> configureStore <span class=\"keyword\">from</span> <span class=\"string\">'../stores/JobSearchStore.js'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> Checkbox = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/checkbox'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> Slider = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/slider.js'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> TextInput = <span class=\"built_in\">require</span>(<span class=\"string\">'../components/text_input.js'</span>);</div></pre></td></tr></table></figure>\n<p> 加入 <code>modulesDirectories</code> 之後，我們可以這樣寫：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'ui/comment_reply.js'</span>);</div><div class=\"line\"><span class=\"keyword\">import</span> h <span class=\"keyword\">from</span> <span class=\"string\">'utils/sudo_helper/dom.js'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> jobIndex <span class=\"keyword\">from</span> <span class=\"string\">'reducers/pages/JobIndex'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'containers/jobs_index'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> configureStore <span class=\"keyword\">from</span> <span class=\"string\">'stores/JobSearchStore'</span>;</div></pre></td></tr></table></figure>\n<p>這樣 component 搬遷的時候，不會因為相對路徑改變的關係，而還要全部重寫一次，重構的意願也相對提高了。</p>\n<h3 id=\"idiomatic-css\"><a href=\"#idiomatic-css\" class=\"headerlink\" title=\"idiomatic-css\"></a><a href=\"https://github.com/necolas/idiomatic-css/tree/master/translations/zh-TW\" target=\"_blank\" rel=\"external\">idiomatic-css</a></h3><p>最近一直在研究如何讓 css 的易讀性更高，並且更好做維護，目前如果搭配 webpack 的話，常見的方法有：</p>\n<ol>\n<li>css-module</li>\n<li>postCss</li>\n<li>radium</li>\n</ol>\n<p>這些工具搭配 react 一起使用，其實可以很有效地解決 namespace 的問題。</p>\n<p>不過主站目前想要先解決的是變數的統一命名，及 css 的規範。這部分規範好了之後，css 的管理相對也會變得簡單許多。</p>\n<h3 id=\"code-smell-in-css\"><a href=\"#code-smell-in-css\" class=\"headerlink\" title=\"code smell in css\"></a><a href=\"http://csswizardry.com/2012/11/code-smells-in-css/\" target=\"_blank\" rel=\"external\">code smell in css</a></h3><p>這篇文章介紹了很多關於 css 的 <code>smell code</code>。幾個比較重要的大概念：</p>\n<ol>\n<li>避免 magic number</li>\n<li>盡量讓 class 是 immutable</li>\n<li>利用權重的技巧，而不是過度使用 important</li>\n<li>selector 盡量簡單</li>\n</ol>\n<p>順便來複習一下 <a href=\"http://www.w3schools.com/cssref/css_selectors.asp\" target=\"_blank\" rel=\"external\">selector</a> 的語法吧！除了用 class 來當做 selector 之外還有很多其他實用的 selector 可以使用！<br>像是 input 就是一個非常好使用 attribute selector 的例子：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.sudo-input</span> &#123;</div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"text\"]</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// text style</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"submit\"]</span> &#123;</div><div class=\"line\">    <span class=\"comment\">// submit style</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"selector-tag\">input</span><span class=\"selector-attr\">[type=\"number\"]</span> &#123;</div><div class=\"line\">   <span class=\"comment\">// ...</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣不僅語意清楚，也可以省下不必要的 class。</p>\n"},{"title":"前端面試心得","date":"2017-09-01T16:00:00.000Z","_content":"\n### 前言\n\n終於有時間整理最近的面試歷程了。先總結一些看到的事情：\n\n1. 通常公司面試只考 Javascript 的熟悉度，多數關於演算法或是解釋原型鍊等等，很少考 DOM 或是 Event 的操作。\n2. 幾乎不考 CSS，就算有也只是簡單判斷 class、ID 優先度這種基本題目而已。\n3. 沒有面試考 HTML，例如 semantic tag、accessilbility、input type 使用等等。\n4. React、Redux、ES6 語法幾乎成為前端必備技能，Angular 比較少公司採用。\n5. 普遍的獵頭都不夠專業，也有可能是太菜了還沒被專業的獵頭找上\n\n以下是這次面試的公司：\n\n1. Accupass\n2. Codementor\n3. Linker Network Inc.\n4. 樂天市場\n5. 17 media\n\n### 背景\n\n國立科大資管系，目前已經有兩年工作經驗。平時專注在前端開發，接觸 React、Redux 開發約兩年的時間。除了一般的前端「工程」之外，自己也很喜歡畫面的實作與互動，同時也有在自己的小專案當中練習後端的知識，像是 AWS、Lambda、nodejs、資料庫、機器學習等等，不過最熟悉的還是前端相關。\n\n### 期待的工作環境\n\n1. 能夠和前端團隊一起合作。之前的工作經驗因為前端開發都只有自己一人，所以比較難討論特定的前端技術\n2. 不會有太多突發狀況。像是突然就改需求、砍掉開發中的產品、因為人情而被迫開發的案子等等\n3. 有主產品以及明確的服務\n4. 技術含量高，可以和優秀的團隊一起共事\n\n### 找工作的管道\n\n- inside jobboard\n- yourator\n- 104 人力銀行\n- f2e jobs\n- PTT Soft_Job 版\n\n### 1. Accupass 活動通\n\n**應徵職位：Frontend Developer**\n\n一個活動票券的網站，最近正在將架構從 Angular 改寫為 React，原因是原本的 Angular 較難維護，而且很容易產生牽一髮動全身的情形。\n\n#### 面試前\n\n在 104 上被邀約面試，是由 PM 邀約面試的。\n\n#### 面試中\n\n團隊正在擴編。面試主要聊一些自己的工作經驗以及一些小項目。當天面試我的前端工程師是一位日本人XD，但是中文講得很好（全程都是中文面試）。\n\n聊了關於 Accupass 的開發狀況、如何開發功能、管理時程等等，也和前端工程師聊技術，從 CSSModules、RxJS 聊到 CycleJS，感覺是個對前端技術很有熱忱的工程師。\n\n#### 面試結果\n\n婉拒 offer。\n\nPM 相當希望我能夠加入 Accupass 團隊，婉拒後也撥了通電話詢問原因，並提及如果以後有機會希望能夠一起合作。不過由於其他職位更吸引我，所以拒絕了 Accupass 的 offer。\n\n### 2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司\n\n**應徵職位：Frontend Developer**\n\n專門做 IOT、AI、機器學習的雲端運算平台，因為這些 platform 需要 UI 的支持，所以需要前端開發協助。官網還蠻簡陋的，看不出個所以然，不過做的事情技術含量很高。\n\n#### 面試前\n\n在 104 上主動投遞履歷，被電話邀請面試。這間公司做的技術含量很深，也有在線下辦一些社群。\n\n#### 面試中\n\n感覺得出來是個蠻技術含量很紮實的公司。自我介紹談了一下過去的工作經驗，以及用 React, Redux。\n\n我之後才知道原來當初面試我的是 c9s ，想說怎麼那麼眼熟。感覺得出來是位大大，技術的掌握度很深。（不過本人看起來比較憔悴）\n\n面試時考了些偏優化的題目，像是：\n\n1. js 如何做 minify？\n   這題是要你大概解釋一下 js minify 的過程，最後簡化到如何消除程式碼中不必要的空白。這題的想法很簡單，不過實作起來有一些細節要注意，當時沒有想很多，被提示很多次才寫出來\n2. 前端效能優化可以怎麼做？\n   提了一些常見的方式，不過感覺沒有很合面試官的胃口。像是 base64 編碼減少請求數、快取、ServiceWorker 等等。\n3. 如果要你做一個 SPA 的 framework，你會怎麼做？\n   如果要我做，首先要考慮的是 router 的處理方式，畢竟 SPA 需要依靠前端做 router。後來被提醒了還要考慮 lifecycle 的問題\n4. 一些 Javascript 的問題\n5. 原形鍊的原理\n6. `new` 背後發生了什麼事？\n7. 如何實作繼承\n8. `this` 指向誰\n\n最後由一位看起來是主管的人跟我談一些公司現況、未來發展等等。\n\n#### 面試結果\n\n無聲卡（到現在已經三週），大概是太菜了吧QQ\n\n### 3. 台灣樂天市場\n\n**應徵職位：Frontend Developer**\n\n之前有參加過一次面試，不過因為沒辦法提供全職的上班時間（也不確定是不是）。所以重新又投了一次。辦公室的氣氛跟一般大公司差不多，要有員工證才能進辦公室。\n\n#### 面試前\n\nHR 聯絡，寄給我一張身家調查表以及程式考題。上頭的格式大概跟 104 履歷差不多。這邊我想特別講一下他們的面試邀約信。\n\n一般的公司通常在信上附上地址，不過樂天市場會把一些重要的地標標示出來，例如 XX 號出口、在 XX 銀行上面、出電梯右轉等等，雖然這是一個微不足道的提醒，但對面試者來說很有用，畢竟誰都不想在大太陽底下看 google map 還不小心走反方向。\n\n#### 面試中\n\n這次的面試比起以前好像又更制式一些，還要寫智力測驗跟人格測驗的考卷，考一些類似加減乘除之類的題目，我好像還錯了幾題XD。整個面試流程又因為這樣拉長了一些時間。\n\n跟工程師面試的過程蠻愉快的，主要也是聊一些工作經驗以及對技術的了解，兩位工程師感覺也是技術很強的大大。有一位工程師之前已經面試過我，跟我說「我對你的技術能力沒有太大問題」，但是因為卡兵役的關係還是被 reject 掉，整個很感動QQ。\n\n後來我還發現原來有一位就是 [react-bootstrap-table](https://github.com/AllenFang/react-bootstrap-table/) 的 creator。\n\n面試主要考了一些 Javascript 的東西，像是：\n\n1. 遞迴以及實際應用\n   例如有一題反轉字串，主考官叫我用遞迴實現，並問我好處是什麼。我想破頭也想不出來，網路也找不到答案。\n2. 閉包與實際開發應用\n3. IIFE（立即執行函式） 的好處\n   我舉了幾個例子，不過後來一位工程師跟我分享 jQuery 的原始碼，說用 IIFE 的方式也可以有效幫助 minify（因為把 window 參數化了），這招倒是我以前從來沒想過的。\n4. React、Redux 的開發場景應用\n   考一些 Redux 常見開發情景、管理 store 的方式、react lifecycle 的應用\n5. （更新）如何不用 `+` 實作加法功能\n   這題考對 bit operator 了解。透過 `XOR` 可以做到，高中的加法器有教XD，不過還是要畫一下真值表。\n6. （更新）台灣樂天市場有一句令我印象深刻的標語：**複雜的東西簡單化、簡單的東西流程化、流程的東西標準化、標準化的東西自動化。**（不確定原文是不是這樣）\n\n之後問了一些比較工程化的問題，像是 CI/CD、如何跑開發流程等等，樂天市場的技術線蠻多的，Angular、React、RoR、GraphQL 都有。\n\n#### 面試結果\n\n因為還是資格不符，所以基本上應該是被淘汰。不過前端 team 感覺得出來相當紮實，兩位工程師除了前端外都有其他領域的開發經驗，而且相當友善，面試結束時還請我喝了一杯飲料（雖然是公司的販賣機啦XD），也給了我很多關於職涯上的建議。\n\n### 4. Codementor\n\n**應徵職位：Frontend Developer**\n\n做一對一的線上 mentor 的服務。衍伸出來許多服務，像是線上 code review、debug、pair programming 等等。\n\n#### 面試前\n\n因為技術含量高，而且面對的對象又是工程師，想說是個很好練功的地方，在 104 上投遞履歷，隔天收到 HR 線上面試邀請。我還蠻喜歡線上面試的，不用額外跑到公司一趟對工程師來說實在是一大福音啊！\n\n#### 面試中\n\n**第一階段 — 工程師面試**\n\n跟 team lead 面試，聊一些過去的工作經驗，問了一些開發上的問題。口頭考了一些 javascript 跟 react 的理解\n\n1. 閉包\n2. flux v.s MVC 解決了什麼問題：老實說我沒有實際用過 flux，只有看過架構圖跟 code，所以只能靠自己的理解來回答\n3. javascript 是如何做到非同步的？談對 call stack 跟 event loop 的理解\n\n**第二階段 — 與 co-founder 面試**\n\n一樣在線上跟 co-founder 聊天。這個階段比較少提技術的部分，自我介紹完了之後，他對我的一個 side project 好像很有興趣XD，問我當初成立的動機以及為什麼沒有把它變成完整的服務。有好一段時間都在談這個小專案，也有談到 code mentor 也有在做類似內容平台的服務。\n\n後來問了一些 code mentor 的歷史以及一些團隊文化。總共約 30–40 分鐘左右\n\n**第三階段 — 與 CEO 面試**\n\nCEO 人在 California，一樣在線上面試。主要也是聊一些自己的工作內容跟開發經驗以及一些關於人格特質的問題。應該是希望從對談當中聊聊彼此之間的契合程度吧！總共約 30–40 分鐘左右。\n\n因為 code mentor 的 co-founder 以及 CEO 都是工程師出身，聊起來相當愉快，不會有種從上往下看你的感覺。\n\n他後來問了一題「你覺得你自己是個聰明人嗎？」。我回答不是，看過越多的程式碼與演算法後更是如此覺得。\n\n自己可能一輩子都沒辦法設計出像 React 那麼龐大的架構，或是各種排序演算法等等，怎麼想都不覺得自己很聰明。\n\n#### 面試後\n\n約五天後被婉拒，好像是找到更 senior 的前端。code mentor 給我的感覺相當愉快，不管是 CEO 或是 team lead 都給我一種對自己產品相當有熱忱的感覺。希望未來還可以跟他們一起合作。\n\n### 5. 17 media\n\n**應徵職位：Frontend Developer**\n\n這應該是我目前面試過最愉快的一間公司。從 f2e jobs 上看到徵才資訊，一直猶豫要不要投履歷，後來是朋友推薦後獲得面試邀約。\n\n#### 面試中\n\n因為 team lead 是用下班時間面試 18:30。我很準時到達辦公室，team lead 也很準時出現在辦公室。這點讓我很欣賞。\n\n有些公司因為不確定面試者什麼時候來，所以多數都是工程師還在工作的狀態下突然被通知要面試才匆匆忙忙準備相關資料，或者臨時看一下履歷表。問了一下目前到現在面試幾個人了，他還特地秀出 slack 的訊息，還順便註記了幾個人遲到。是個相當重視時間的人。\n\n剛開始先由 HR 帶領晃過公司一圈。辦公室挺大的，零食櫃跟冰箱很猛，還有咖啡機、咖啡豆、微波爐等器具，聽說 RD team 還有另外一間辦公室，不過當天去的情況看來還是有點擠。\n\n再來是 team lead 面試，首先先自我介紹跟講一些工作經驗。\n\n一邊聊一邊帶到目前公司、團隊的狀況。感覺起來是個蠻保護團隊的人。之後就是 live coding 了，為了模擬真實的情況，所以不會斷網路，主要考一些 javascript 常見開發應用跟 built-in function 的實作。\n\n寫出來之後，team lead 就會從你寫的 code 當中開始討論技術。像是這邊為什麼要這樣寫，有沒有更好的寫法等等，他花了很多時間在討論、問問題以及提出自己對這段 code 的意見，感覺就像實際在 code review 一樣。這邊也花了最久時間，大概也有 1.5hr 左右吧。\n\n最後會給你一段髒髒的程式碼要你做 code review 跟解 bug，一起討論完之後，面試就結束了。\n\n出辦公室的時候大概已經 21:50 幾分了吧，他很有耐心都一直在旁邊做事。比較讓我印象深刻的是我們一起討論 `\\B` 的用法，這是很少人會去理解的正規表達式，所以討論完原本的答案後，我就請教他 `\\``B `的用法。\n\n他很有耐心地從 \\b、\\w 到 \\B 一個一個解釋，直接解開了我長久以來的疑問。（網路上很少把 `\\b` 解釋的很清楚）\n\n他給我幾個感覺：\n\n1. 真實：不會隱瞞公司的狀況，讓你進來後覺得被騙，而且過程中不經意會講一些工作上遇到的無奈與感嘆，感覺已經看過不少風雨。\n2. 真誠：不會用很奇怪的考題來電人，還會跟你一起討論 code quality、這段 code 要如何改進。這在面試當中是一件相當難得的事情。再來我跟他提到因為辦公室太大讓我不知道一進門要找誰時，他說會再反映給 HR。原本我以為他只是說說而已（畢竟大部分的公司也都是聽聽而已），沒想到他真的有跟 HR 反應，讓我非常感動。\n\n#### 面試結果\n\noffer get。HR 打電話來說明 on board 相關流程。\n\n### 面試心得\n\n面試真的好累QQ，如果可以的話實在不想到處奔波，全部採用線上面試，非常符合 lazy engineer 啊！\n\n這次面試除了「找工作」之外，也見識到許多開發者，他們或許不常出現在各大社群當中，但是論實力跟涵養，都遠比某些在社群上膨風的開發者來得深厚。並不是說參與社群是一件不好的事，還是有很多人為社群貢獻許多，不過線下也有許多人在默默奉獻，不應該用活躍與否來判斷一個人的實力。\n\n這一次的面試除了「找工作」這件事之外，我學到的是 — 謙遜。在軟體開發的領域中有太多聰明人了，不斷在提醒著自己有多麽無知。\n\n#### 1. 履歷準備\n\n因為我平常就有寫 medium 跟部落格的習慣，履歷表就能順便放進去。而且因為履歷表是放在 github 上，所以很容易更新。\n\n#### 2. 工作經驗\n\n工作經驗並不是把公司名稱、職稱、年資寫進去而已，你負責哪些工作內容、在公司做了什麼事情，盡量寫得具體一些，例如：\n\n- 用 React、Redux 管理複雜頁面開發\n- 優化首頁 Loading 效能\n\n就比擔任前端開發來得好許多。\n\n#### 3. Side Project\n\n除了工作以外，如果有自己的 side project 就更好了，身為工程師一定會有自己想要動手解決的問題。\n\n可以讓面試官知道你喜歡的領域以及技術線，每個專案當中一定會有一些特定的問題是困擾你很久或是花了許多時間解決的。\n\n#### 4. 多問問題\n\n面試應該是個你來我往的雙向溝通，而不是一場你問我答的標準流程而已，知道如何反問對方，也能夠增加對公司的了解程度。\n\n通常我都會問一些公司內部的問題，主要會針對這幾個方面問：\n\n1. **有沒有自動化？**\n   很多公司都還是土炮手動 SSH 登入部署。這種開發方式很可能間接一步反映到公司文化上，例如：申請預算流程繁瑣、對能夠自動化的東西視若無睹。\n2. **如何解決 bug？**\n   解決 bug 的方式可以看出公司如何排程。例如 bug 怎麼被回報的、誰來決定 bug 的優先度等等，通常從對方的回答就能判斷他們是否有一套規範來決定如何排程的\n3. **需求是否常常變動？**\n   從需求變動這個問題來看可以從很多角度切入，什麼是常常變動？在什麼時候變動？怎樣才叫做變動？這時候就能看出這間公司是否會出現明明開發時說 A，結果交差卻說 B 的情形了。\n\n接下來就是從這上面延伸出來的回答繼續追問了，通常看面試官的回答程度大概就知道這間公司的內部情形了。\n","source":"_posts/frontend-interview.md","raw":"---\ntitle: 前端面試心得\ncategories: 前端\ndate: 2017-09-02\ntags:\n  - 面試\n---\n\n### 前言\n\n終於有時間整理最近的面試歷程了。先總結一些看到的事情：\n\n1. 通常公司面試只考 Javascript 的熟悉度，多數關於演算法或是解釋原型鍊等等，很少考 DOM 或是 Event 的操作。\n2. 幾乎不考 CSS，就算有也只是簡單判斷 class、ID 優先度這種基本題目而已。\n3. 沒有面試考 HTML，例如 semantic tag、accessilbility、input type 使用等等。\n4. React、Redux、ES6 語法幾乎成為前端必備技能，Angular 比較少公司採用。\n5. 普遍的獵頭都不夠專業，也有可能是太菜了還沒被專業的獵頭找上\n\n以下是這次面試的公司：\n\n1. Accupass\n2. Codementor\n3. Linker Network Inc.\n4. 樂天市場\n5. 17 media\n\n### 背景\n\n國立科大資管系，目前已經有兩年工作經驗。平時專注在前端開發，接觸 React、Redux 開發約兩年的時間。除了一般的前端「工程」之外，自己也很喜歡畫面的實作與互動，同時也有在自己的小專案當中練習後端的知識，像是 AWS、Lambda、nodejs、資料庫、機器學習等等，不過最熟悉的還是前端相關。\n\n### 期待的工作環境\n\n1. 能夠和前端團隊一起合作。之前的工作經驗因為前端開發都只有自己一人，所以比較難討論特定的前端技術\n2. 不會有太多突發狀況。像是突然就改需求、砍掉開發中的產品、因為人情而被迫開發的案子等等\n3. 有主產品以及明確的服務\n4. 技術含量高，可以和優秀的團隊一起共事\n\n### 找工作的管道\n\n- inside jobboard\n- yourator\n- 104 人力銀行\n- f2e jobs\n- PTT Soft_Job 版\n\n### 1. Accupass 活動通\n\n**應徵職位：Frontend Developer**\n\n一個活動票券的網站，最近正在將架構從 Angular 改寫為 React，原因是原本的 Angular 較難維護，而且很容易產生牽一髮動全身的情形。\n\n#### 面試前\n\n在 104 上被邀約面試，是由 PM 邀約面試的。\n\n#### 面試中\n\n團隊正在擴編。面試主要聊一些自己的工作經驗以及一些小項目。當天面試我的前端工程師是一位日本人XD，但是中文講得很好（全程都是中文面試）。\n\n聊了關於 Accupass 的開發狀況、如何開發功能、管理時程等等，也和前端工程師聊技術，從 CSSModules、RxJS 聊到 CycleJS，感覺是個對前端技術很有熱忱的工程師。\n\n#### 面試結果\n\n婉拒 offer。\n\nPM 相當希望我能夠加入 Accupass 團隊，婉拒後也撥了通電話詢問原因，並提及如果以後有機會希望能夠一起合作。不過由於其他職位更吸引我，所以拒絕了 Accupass 的 offer。\n\n### 2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司\n\n**應徵職位：Frontend Developer**\n\n專門做 IOT、AI、機器學習的雲端運算平台，因為這些 platform 需要 UI 的支持，所以需要前端開發協助。官網還蠻簡陋的，看不出個所以然，不過做的事情技術含量很高。\n\n#### 面試前\n\n在 104 上主動投遞履歷，被電話邀請面試。這間公司做的技術含量很深，也有在線下辦一些社群。\n\n#### 面試中\n\n感覺得出來是個蠻技術含量很紮實的公司。自我介紹談了一下過去的工作經驗，以及用 React, Redux。\n\n我之後才知道原來當初面試我的是 c9s ，想說怎麼那麼眼熟。感覺得出來是位大大，技術的掌握度很深。（不過本人看起來比較憔悴）\n\n面試時考了些偏優化的題目，像是：\n\n1. js 如何做 minify？\n   這題是要你大概解釋一下 js minify 的過程，最後簡化到如何消除程式碼中不必要的空白。這題的想法很簡單，不過實作起來有一些細節要注意，當時沒有想很多，被提示很多次才寫出來\n2. 前端效能優化可以怎麼做？\n   提了一些常見的方式，不過感覺沒有很合面試官的胃口。像是 base64 編碼減少請求數、快取、ServiceWorker 等等。\n3. 如果要你做一個 SPA 的 framework，你會怎麼做？\n   如果要我做，首先要考慮的是 router 的處理方式，畢竟 SPA 需要依靠前端做 router。後來被提醒了還要考慮 lifecycle 的問題\n4. 一些 Javascript 的問題\n5. 原形鍊的原理\n6. `new` 背後發生了什麼事？\n7. 如何實作繼承\n8. `this` 指向誰\n\n最後由一位看起來是主管的人跟我談一些公司現況、未來發展等等。\n\n#### 面試結果\n\n無聲卡（到現在已經三週），大概是太菜了吧QQ\n\n### 3. 台灣樂天市場\n\n**應徵職位：Frontend Developer**\n\n之前有參加過一次面試，不過因為沒辦法提供全職的上班時間（也不確定是不是）。所以重新又投了一次。辦公室的氣氛跟一般大公司差不多，要有員工證才能進辦公室。\n\n#### 面試前\n\nHR 聯絡，寄給我一張身家調查表以及程式考題。上頭的格式大概跟 104 履歷差不多。這邊我想特別講一下他們的面試邀約信。\n\n一般的公司通常在信上附上地址，不過樂天市場會把一些重要的地標標示出來，例如 XX 號出口、在 XX 銀行上面、出電梯右轉等等，雖然這是一個微不足道的提醒，但對面試者來說很有用，畢竟誰都不想在大太陽底下看 google map 還不小心走反方向。\n\n#### 面試中\n\n這次的面試比起以前好像又更制式一些，還要寫智力測驗跟人格測驗的考卷，考一些類似加減乘除之類的題目，我好像還錯了幾題XD。整個面試流程又因為這樣拉長了一些時間。\n\n跟工程師面試的過程蠻愉快的，主要也是聊一些工作經驗以及對技術的了解，兩位工程師感覺也是技術很強的大大。有一位工程師之前已經面試過我，跟我說「我對你的技術能力沒有太大問題」，但是因為卡兵役的關係還是被 reject 掉，整個很感動QQ。\n\n後來我還發現原來有一位就是 [react-bootstrap-table](https://github.com/AllenFang/react-bootstrap-table/) 的 creator。\n\n面試主要考了一些 Javascript 的東西，像是：\n\n1. 遞迴以及實際應用\n   例如有一題反轉字串，主考官叫我用遞迴實現，並問我好處是什麼。我想破頭也想不出來，網路也找不到答案。\n2. 閉包與實際開發應用\n3. IIFE（立即執行函式） 的好處\n   我舉了幾個例子，不過後來一位工程師跟我分享 jQuery 的原始碼，說用 IIFE 的方式也可以有效幫助 minify（因為把 window 參數化了），這招倒是我以前從來沒想過的。\n4. React、Redux 的開發場景應用\n   考一些 Redux 常見開發情景、管理 store 的方式、react lifecycle 的應用\n5. （更新）如何不用 `+` 實作加法功能\n   這題考對 bit operator 了解。透過 `XOR` 可以做到，高中的加法器有教XD，不過還是要畫一下真值表。\n6. （更新）台灣樂天市場有一句令我印象深刻的標語：**複雜的東西簡單化、簡單的東西流程化、流程的東西標準化、標準化的東西自動化。**（不確定原文是不是這樣）\n\n之後問了一些比較工程化的問題，像是 CI/CD、如何跑開發流程等等，樂天市場的技術線蠻多的，Angular、React、RoR、GraphQL 都有。\n\n#### 面試結果\n\n因為還是資格不符，所以基本上應該是被淘汰。不過前端 team 感覺得出來相當紮實，兩位工程師除了前端外都有其他領域的開發經驗，而且相當友善，面試結束時還請我喝了一杯飲料（雖然是公司的販賣機啦XD），也給了我很多關於職涯上的建議。\n\n### 4. Codementor\n\n**應徵職位：Frontend Developer**\n\n做一對一的線上 mentor 的服務。衍伸出來許多服務，像是線上 code review、debug、pair programming 等等。\n\n#### 面試前\n\n因為技術含量高，而且面對的對象又是工程師，想說是個很好練功的地方，在 104 上投遞履歷，隔天收到 HR 線上面試邀請。我還蠻喜歡線上面試的，不用額外跑到公司一趟對工程師來說實在是一大福音啊！\n\n#### 面試中\n\n**第一階段 — 工程師面試**\n\n跟 team lead 面試，聊一些過去的工作經驗，問了一些開發上的問題。口頭考了一些 javascript 跟 react 的理解\n\n1. 閉包\n2. flux v.s MVC 解決了什麼問題：老實說我沒有實際用過 flux，只有看過架構圖跟 code，所以只能靠自己的理解來回答\n3. javascript 是如何做到非同步的？談對 call stack 跟 event loop 的理解\n\n**第二階段 — 與 co-founder 面試**\n\n一樣在線上跟 co-founder 聊天。這個階段比較少提技術的部分，自我介紹完了之後，他對我的一個 side project 好像很有興趣XD，問我當初成立的動機以及為什麼沒有把它變成完整的服務。有好一段時間都在談這個小專案，也有談到 code mentor 也有在做類似內容平台的服務。\n\n後來問了一些 code mentor 的歷史以及一些團隊文化。總共約 30–40 分鐘左右\n\n**第三階段 — 與 CEO 面試**\n\nCEO 人在 California，一樣在線上面試。主要也是聊一些自己的工作內容跟開發經驗以及一些關於人格特質的問題。應該是希望從對談當中聊聊彼此之間的契合程度吧！總共約 30–40 分鐘左右。\n\n因為 code mentor 的 co-founder 以及 CEO 都是工程師出身，聊起來相當愉快，不會有種從上往下看你的感覺。\n\n他後來問了一題「你覺得你自己是個聰明人嗎？」。我回答不是，看過越多的程式碼與演算法後更是如此覺得。\n\n自己可能一輩子都沒辦法設計出像 React 那麼龐大的架構，或是各種排序演算法等等，怎麼想都不覺得自己很聰明。\n\n#### 面試後\n\n約五天後被婉拒，好像是找到更 senior 的前端。code mentor 給我的感覺相當愉快，不管是 CEO 或是 team lead 都給我一種對自己產品相當有熱忱的感覺。希望未來還可以跟他們一起合作。\n\n### 5. 17 media\n\n**應徵職位：Frontend Developer**\n\n這應該是我目前面試過最愉快的一間公司。從 f2e jobs 上看到徵才資訊，一直猶豫要不要投履歷，後來是朋友推薦後獲得面試邀約。\n\n#### 面試中\n\n因為 team lead 是用下班時間面試 18:30。我很準時到達辦公室，team lead 也很準時出現在辦公室。這點讓我很欣賞。\n\n有些公司因為不確定面試者什麼時候來，所以多數都是工程師還在工作的狀態下突然被通知要面試才匆匆忙忙準備相關資料，或者臨時看一下履歷表。問了一下目前到現在面試幾個人了，他還特地秀出 slack 的訊息，還順便註記了幾個人遲到。是個相當重視時間的人。\n\n剛開始先由 HR 帶領晃過公司一圈。辦公室挺大的，零食櫃跟冰箱很猛，還有咖啡機、咖啡豆、微波爐等器具，聽說 RD team 還有另外一間辦公室，不過當天去的情況看來還是有點擠。\n\n再來是 team lead 面試，首先先自我介紹跟講一些工作經驗。\n\n一邊聊一邊帶到目前公司、團隊的狀況。感覺起來是個蠻保護團隊的人。之後就是 live coding 了，為了模擬真實的情況，所以不會斷網路，主要考一些 javascript 常見開發應用跟 built-in function 的實作。\n\n寫出來之後，team lead 就會從你寫的 code 當中開始討論技術。像是這邊為什麼要這樣寫，有沒有更好的寫法等等，他花了很多時間在討論、問問題以及提出自己對這段 code 的意見，感覺就像實際在 code review 一樣。這邊也花了最久時間，大概也有 1.5hr 左右吧。\n\n最後會給你一段髒髒的程式碼要你做 code review 跟解 bug，一起討論完之後，面試就結束了。\n\n出辦公室的時候大概已經 21:50 幾分了吧，他很有耐心都一直在旁邊做事。比較讓我印象深刻的是我們一起討論 `\\B` 的用法，這是很少人會去理解的正規表達式，所以討論完原本的答案後，我就請教他 `\\``B `的用法。\n\n他很有耐心地從 \\b、\\w 到 \\B 一個一個解釋，直接解開了我長久以來的疑問。（網路上很少把 `\\b` 解釋的很清楚）\n\n他給我幾個感覺：\n\n1. 真實：不會隱瞞公司的狀況，讓你進來後覺得被騙，而且過程中不經意會講一些工作上遇到的無奈與感嘆，感覺已經看過不少風雨。\n2. 真誠：不會用很奇怪的考題來電人，還會跟你一起討論 code quality、這段 code 要如何改進。這在面試當中是一件相當難得的事情。再來我跟他提到因為辦公室太大讓我不知道一進門要找誰時，他說會再反映給 HR。原本我以為他只是說說而已（畢竟大部分的公司也都是聽聽而已），沒想到他真的有跟 HR 反應，讓我非常感動。\n\n#### 面試結果\n\noffer get。HR 打電話來說明 on board 相關流程。\n\n### 面試心得\n\n面試真的好累QQ，如果可以的話實在不想到處奔波，全部採用線上面試，非常符合 lazy engineer 啊！\n\n這次面試除了「找工作」之外，也見識到許多開發者，他們或許不常出現在各大社群當中，但是論實力跟涵養，都遠比某些在社群上膨風的開發者來得深厚。並不是說參與社群是一件不好的事，還是有很多人為社群貢獻許多，不過線下也有許多人在默默奉獻，不應該用活躍與否來判斷一個人的實力。\n\n這一次的面試除了「找工作」這件事之外，我學到的是 — 謙遜。在軟體開發的領域中有太多聰明人了，不斷在提醒著自己有多麽無知。\n\n#### 1. 履歷準備\n\n因為我平常就有寫 medium 跟部落格的習慣，履歷表就能順便放進去。而且因為履歷表是放在 github 上，所以很容易更新。\n\n#### 2. 工作經驗\n\n工作經驗並不是把公司名稱、職稱、年資寫進去而已，你負責哪些工作內容、在公司做了什麼事情，盡量寫得具體一些，例如：\n\n- 用 React、Redux 管理複雜頁面開發\n- 優化首頁 Loading 效能\n\n就比擔任前端開發來得好許多。\n\n#### 3. Side Project\n\n除了工作以外，如果有自己的 side project 就更好了，身為工程師一定會有自己想要動手解決的問題。\n\n可以讓面試官知道你喜歡的領域以及技術線，每個專案當中一定會有一些特定的問題是困擾你很久或是花了許多時間解決的。\n\n#### 4. 多問問題\n\n面試應該是個你來我往的雙向溝通，而不是一場你問我答的標準流程而已，知道如何反問對方，也能夠增加對公司的了解程度。\n\n通常我都會問一些公司內部的問題，主要會針對這幾個方面問：\n\n1. **有沒有自動化？**\n   很多公司都還是土炮手動 SSH 登入部署。這種開發方式很可能間接一步反映到公司文化上，例如：申請預算流程繁瑣、對能夠自動化的東西視若無睹。\n2. **如何解決 bug？**\n   解決 bug 的方式可以看出公司如何排程。例如 bug 怎麼被回報的、誰來決定 bug 的優先度等等，通常從對方的回答就能判斷他們是否有一套規範來決定如何排程的\n3. **需求是否常常變動？**\n   從需求變動這個問題來看可以從很多角度切入，什麼是常常變動？在什麼時候變動？怎樣才叫做變動？這時候就能看出這間公司是否會出現明明開發時說 A，結果交差卻說 B 的情形了。\n\n接下來就是從這上面延伸出來的回答繼續追問了，通常看面試官的回答程度大概就知道這間公司的內部情形了。\n","slug":"frontend-interview","published":1,"updated":"2017-10-08T09:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqm0013iw5tha8sb3yh","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>終於有時間整理最近的面試歷程了。先總結一些看到的事情：</p>\n<ol>\n<li>通常公司面試只考 Javascript 的熟悉度，多數關於演算法或是解釋原型鍊等等，很少考 DOM 或是 Event 的操作。</li>\n<li>幾乎不考 CSS，就算有也只是簡單判斷 class、ID 優先度這種基本題目而已。</li>\n<li>沒有面試考 HTML，例如 semantic tag、accessilbility、input type 使用等等。</li>\n<li>React、Redux、ES6 語法幾乎成為前端必備技能，Angular 比較少公司採用。</li>\n<li>普遍的獵頭都不夠專業，也有可能是太菜了還沒被專業的獵頭找上</li>\n</ol>\n<p>以下是這次面試的公司：</p>\n<ol>\n<li>Accupass</li>\n<li>Codementor</li>\n<li>Linker Network Inc.</li>\n<li>樂天市場</li>\n<li>17 media</li>\n</ol>\n<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><p>國立科大資管系，目前已經有兩年工作經驗。平時專注在前端開發，接觸 React、Redux 開發約兩年的時間。除了一般的前端「工程」之外，自己也很喜歡畫面的實作與互動，同時也有在自己的小專案當中練習後端的知識，像是 AWS、Lambda、nodejs、資料庫、機器學習等等，不過最熟悉的還是前端相關。</p>\n<h3 id=\"期待的工作環境\"><a href=\"#期待的工作環境\" class=\"headerlink\" title=\"期待的工作環境\"></a>期待的工作環境</h3><ol>\n<li>能夠和前端團隊一起合作。之前的工作經驗因為前端開發都只有自己一人，所以比較難討論特定的前端技術</li>\n<li>不會有太多突發狀況。像是突然就改需求、砍掉開發中的產品、因為人情而被迫開發的案子等等</li>\n<li>有主產品以及明確的服務</li>\n<li>技術含量高，可以和優秀的團隊一起共事</li>\n</ol>\n<h3 id=\"找工作的管道\"><a href=\"#找工作的管道\" class=\"headerlink\" title=\"找工作的管道\"></a>找工作的管道</h3><ul>\n<li>inside jobboard</li>\n<li>yourator</li>\n<li>104 人力銀行</li>\n<li>f2e jobs</li>\n<li>PTT Soft_Job 版</li>\n</ul>\n<h3 id=\"1-Accupass-活動通\"><a href=\"#1-Accupass-活動通\" class=\"headerlink\" title=\"1. Accupass 活動通\"></a>1. Accupass 活動通</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>一個活動票券的網站，最近正在將架構從 Angular 改寫為 React，原因是原本的 Angular 較難維護，而且很容易產生牽一髮動全身的情形。</p>\n<h4 id=\"面試前\"><a href=\"#面試前\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>在 104 上被邀約面試，是由 PM 邀約面試的。</p>\n<h4 id=\"面試中\"><a href=\"#面試中\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>團隊正在擴編。面試主要聊一些自己的工作經驗以及一些小項目。當天面試我的前端工程師是一位日本人XD，但是中文講得很好（全程都是中文面試）。</p>\n<p>聊了關於 Accupass 的開發狀況、如何開發功能、管理時程等等，也和前端工程師聊技術，從 CSSModules、RxJS 聊到 CycleJS，感覺是個對前端技術很有熱忱的工程師。</p>\n<h4 id=\"面試結果\"><a href=\"#面試結果\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>婉拒 offer。</p>\n<p>PM 相當希望我能夠加入 Accupass 團隊，婉拒後也撥了通電話詢問原因，並提及如果以後有機會希望能夠一起合作。不過由於其他職位更吸引我，所以拒絕了 Accupass 的 offer。</p>\n<h3 id=\"2-Linker-Network-Inc-美商寶蘊凌科網路科技有限公司\"><a href=\"#2-Linker-Network-Inc-美商寶蘊凌科網路科技有限公司\" class=\"headerlink\" title=\"2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司\"></a>2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>專門做 IOT、AI、機器學習的雲端運算平台，因為這些 platform 需要 UI 的支持，所以需要前端開發協助。官網還蠻簡陋的，看不出個所以然，不過做的事情技術含量很高。</p>\n<h4 id=\"面試前-1\"><a href=\"#面試前-1\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>在 104 上主動投遞履歷，被電話邀請面試。這間公司做的技術含量很深，也有在線下辦一些社群。</p>\n<h4 id=\"面試中-1\"><a href=\"#面試中-1\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>感覺得出來是個蠻技術含量很紮實的公司。自我介紹談了一下過去的工作經驗，以及用 React, Redux。</p>\n<p>我之後才知道原來當初面試我的是 c9s ，想說怎麼那麼眼熟。感覺得出來是位大大，技術的掌握度很深。（不過本人看起來比較憔悴）</p>\n<p>面試時考了些偏優化的題目，像是：</p>\n<ol>\n<li>js 如何做 minify？<br>這題是要你大概解釋一下 js minify 的過程，最後簡化到如何消除程式碼中不必要的空白。這題的想法很簡單，不過實作起來有一些細節要注意，當時沒有想很多，被提示很多次才寫出來</li>\n<li>前端效能優化可以怎麼做？<br>提了一些常見的方式，不過感覺沒有很合面試官的胃口。像是 base64 編碼減少請求數、快取、ServiceWorker 等等。</li>\n<li>如果要你做一個 SPA 的 framework，你會怎麼做？<br>如果要我做，首先要考慮的是 router 的處理方式，畢竟 SPA 需要依靠前端做 router。後來被提醒了還要考慮 lifecycle 的問題</li>\n<li>一些 Javascript 的問題</li>\n<li>原形鍊的原理</li>\n<li><code>new</code> 背後發生了什麼事？</li>\n<li>如何實作繼承</li>\n<li><code>this</code> 指向誰</li>\n</ol>\n<p>最後由一位看起來是主管的人跟我談一些公司現況、未來發展等等。</p>\n<h4 id=\"面試結果-1\"><a href=\"#面試結果-1\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>無聲卡（到現在已經三週），大概是太菜了吧QQ</p>\n<h3 id=\"3-台灣樂天市場\"><a href=\"#3-台灣樂天市場\" class=\"headerlink\" title=\"3. 台灣樂天市場\"></a>3. 台灣樂天市場</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>之前有參加過一次面試，不過因為沒辦法提供全職的上班時間（也不確定是不是）。所以重新又投了一次。辦公室的氣氛跟一般大公司差不多，要有員工證才能進辦公室。</p>\n<h4 id=\"面試前-2\"><a href=\"#面試前-2\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>HR 聯絡，寄給我一張身家調查表以及程式考題。上頭的格式大概跟 104 履歷差不多。這邊我想特別講一下他們的面試邀約信。</p>\n<p>一般的公司通常在信上附上地址，不過樂天市場會把一些重要的地標標示出來，例如 XX 號出口、在 XX 銀行上面、出電梯右轉等等，雖然這是一個微不足道的提醒，但對面試者來說很有用，畢竟誰都不想在大太陽底下看 google map 還不小心走反方向。</p>\n<h4 id=\"面試中-2\"><a href=\"#面試中-2\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>這次的面試比起以前好像又更制式一些，還要寫智力測驗跟人格測驗的考卷，考一些類似加減乘除之類的題目，我好像還錯了幾題XD。整個面試流程又因為這樣拉長了一些時間。</p>\n<p>跟工程師面試的過程蠻愉快的，主要也是聊一些工作經驗以及對技術的了解，兩位工程師感覺也是技術很強的大大。有一位工程師之前已經面試過我，跟我說「我對你的技術能力沒有太大問題」，但是因為卡兵役的關係還是被 reject 掉，整個很感動QQ。</p>\n<p>後來我還發現原來有一位就是 <a href=\"https://github.com/AllenFang/react-bootstrap-table/\" target=\"_blank\" rel=\"external\">react-bootstrap-table</a> 的 creator。</p>\n<p>面試主要考了一些 Javascript 的東西，像是：</p>\n<ol>\n<li>遞迴以及實際應用<br>例如有一題反轉字串，主考官叫我用遞迴實現，並問我好處是什麼。我想破頭也想不出來，網路也找不到答案。</li>\n<li>閉包與實際開發應用</li>\n<li>IIFE（立即執行函式） 的好處<br>我舉了幾個例子，不過後來一位工程師跟我分享 jQuery 的原始碼，說用 IIFE 的方式也可以有效幫助 minify（因為把 window 參數化了），這招倒是我以前從來沒想過的。</li>\n<li>React、Redux 的開發場景應用<br>考一些 Redux 常見開發情景、管理 store 的方式、react lifecycle 的應用</li>\n<li>（更新）如何不用 <code>+</code> 實作加法功能<br>這題考對 bit operator 了解。透過 <code>XOR</code> 可以做到，高中的加法器有教XD，不過還是要畫一下真值表。</li>\n<li>（更新）台灣樂天市場有一句令我印象深刻的標語：<strong>複雜的東西簡單化、簡單的東西流程化、流程的東西標準化、標準化的東西自動化。</strong>（不確定原文是不是這樣）</li>\n</ol>\n<p>之後問了一些比較工程化的問題，像是 CI/CD、如何跑開發流程等等，樂天市場的技術線蠻多的，Angular、React、RoR、GraphQL 都有。</p>\n<h4 id=\"面試結果-2\"><a href=\"#面試結果-2\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>因為還是資格不符，所以基本上應該是被淘汰。不過前端 team 感覺得出來相當紮實，兩位工程師除了前端外都有其他領域的開發經驗，而且相當友善，面試結束時還請我喝了一杯飲料（雖然是公司的販賣機啦XD），也給了我很多關於職涯上的建議。</p>\n<h3 id=\"4-Codementor\"><a href=\"#4-Codementor\" class=\"headerlink\" title=\"4. Codementor\"></a>4. Codementor</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>做一對一的線上 mentor 的服務。衍伸出來許多服務，像是線上 code review、debug、pair programming 等等。</p>\n<h4 id=\"面試前-3\"><a href=\"#面試前-3\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>因為技術含量高，而且面對的對象又是工程師，想說是個很好練功的地方，在 104 上投遞履歷，隔天收到 HR 線上面試邀請。我還蠻喜歡線上面試的，不用額外跑到公司一趟對工程師來說實在是一大福音啊！</p>\n<h4 id=\"面試中-3\"><a href=\"#面試中-3\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p><strong>第一階段 — 工程師面試</strong></p>\n<p>跟 team lead 面試，聊一些過去的工作經驗，問了一些開發上的問題。口頭考了一些 javascript 跟 react 的理解</p>\n<ol>\n<li>閉包</li>\n<li>flux v.s MVC 解決了什麼問題：老實說我沒有實際用過 flux，只有看過架構圖跟 code，所以只能靠自己的理解來回答</li>\n<li>javascript 是如何做到非同步的？談對 call stack 跟 event loop 的理解</li>\n</ol>\n<p><strong>第二階段 — 與 co-founder 面試</strong></p>\n<p>一樣在線上跟 co-founder 聊天。這個階段比較少提技術的部分，自我介紹完了之後，他對我的一個 side project 好像很有興趣XD，問我當初成立的動機以及為什麼沒有把它變成完整的服務。有好一段時間都在談這個小專案，也有談到 code mentor 也有在做類似內容平台的服務。</p>\n<p>後來問了一些 code mentor 的歷史以及一些團隊文化。總共約 30–40 分鐘左右</p>\n<p><strong>第三階段 — 與 CEO 面試</strong></p>\n<p>CEO 人在 California，一樣在線上面試。主要也是聊一些自己的工作內容跟開發經驗以及一些關於人格特質的問題。應該是希望從對談當中聊聊彼此之間的契合程度吧！總共約 30–40 分鐘左右。</p>\n<p>因為 code mentor 的 co-founder 以及 CEO 都是工程師出身，聊起來相當愉快，不會有種從上往下看你的感覺。</p>\n<p>他後來問了一題「你覺得你自己是個聰明人嗎？」。我回答不是，看過越多的程式碼與演算法後更是如此覺得。</p>\n<p>自己可能一輩子都沒辦法設計出像 React 那麼龐大的架構，或是各種排序演算法等等，怎麼想都不覺得自己很聰明。</p>\n<h4 id=\"面試後\"><a href=\"#面試後\" class=\"headerlink\" title=\"面試後\"></a>面試後</h4><p>約五天後被婉拒，好像是找到更 senior 的前端。code mentor 給我的感覺相當愉快，不管是 CEO 或是 team lead 都給我一種對自己產品相當有熱忱的感覺。希望未來還可以跟他們一起合作。</p>\n<h3 id=\"5-17-media\"><a href=\"#5-17-media\" class=\"headerlink\" title=\"5. 17 media\"></a>5. 17 media</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>這應該是我目前面試過最愉快的一間公司。從 f2e jobs 上看到徵才資訊，一直猶豫要不要投履歷，後來是朋友推薦後獲得面試邀約。</p>\n<h4 id=\"面試中-4\"><a href=\"#面試中-4\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>因為 team lead 是用下班時間面試 18:30。我很準時到達辦公室，team lead 也很準時出現在辦公室。這點讓我很欣賞。</p>\n<p>有些公司因為不確定面試者什麼時候來，所以多數都是工程師還在工作的狀態下突然被通知要面試才匆匆忙忙準備相關資料，或者臨時看一下履歷表。問了一下目前到現在面試幾個人了，他還特地秀出 slack 的訊息，還順便註記了幾個人遲到。是個相當重視時間的人。</p>\n<p>剛開始先由 HR 帶領晃過公司一圈。辦公室挺大的，零食櫃跟冰箱很猛，還有咖啡機、咖啡豆、微波爐等器具，聽說 RD team 還有另外一間辦公室，不過當天去的情況看來還是有點擠。</p>\n<p>再來是 team lead 面試，首先先自我介紹跟講一些工作經驗。</p>\n<p>一邊聊一邊帶到目前公司、團隊的狀況。感覺起來是個蠻保護團隊的人。之後就是 live coding 了，為了模擬真實的情況，所以不會斷網路，主要考一些 javascript 常見開發應用跟 built-in function 的實作。</p>\n<p>寫出來之後，team lead 就會從你寫的 code 當中開始討論技術。像是這邊為什麼要這樣寫，有沒有更好的寫法等等，他花了很多時間在討論、問問題以及提出自己對這段 code 的意見，感覺就像實際在 code review 一樣。這邊也花了最久時間，大概也有 1.5hr 左右吧。</p>\n<p>最後會給你一段髒髒的程式碼要你做 code review 跟解 bug，一起討論完之後，面試就結束了。</p>\n<p>出辦公室的時候大概已經 21:50 幾分了吧，他很有耐心都一直在旁邊做事。比較讓我印象深刻的是我們一起討論 <code>\\B</code> 的用法，這是很少人會去理解的正規表達式，所以討論完原本的答案後，我就請教他 <code>\\``B</code>的用法。</p>\n<p>他很有耐心地從 \\b、\\w 到 \\B 一個一個解釋，直接解開了我長久以來的疑問。（網路上很少把 <code>\\b</code> 解釋的很清楚）</p>\n<p>他給我幾個感覺：</p>\n<ol>\n<li>真實：不會隱瞞公司的狀況，讓你進來後覺得被騙，而且過程中不經意會講一些工作上遇到的無奈與感嘆，感覺已經看過不少風雨。</li>\n<li>真誠：不會用很奇怪的考題來電人，還會跟你一起討論 code quality、這段 code 要如何改進。這在面試當中是一件相當難得的事情。再來我跟他提到因為辦公室太大讓我不知道一進門要找誰時，他說會再反映給 HR。原本我以為他只是說說而已（畢竟大部分的公司也都是聽聽而已），沒想到他真的有跟 HR 反應，讓我非常感動。</li>\n</ol>\n<h4 id=\"面試結果-3\"><a href=\"#面試結果-3\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>offer get。HR 打電話來說明 on board 相關流程。</p>\n<h3 id=\"面試心得\"><a href=\"#面試心得\" class=\"headerlink\" title=\"面試心得\"></a>面試心得</h3><p>面試真的好累QQ，如果可以的話實在不想到處奔波，全部採用線上面試，非常符合 lazy engineer 啊！</p>\n<p>這次面試除了「找工作」之外，也見識到許多開發者，他們或許不常出現在各大社群當中，但是論實力跟涵養，都遠比某些在社群上膨風的開發者來得深厚。並不是說參與社群是一件不好的事，還是有很多人為社群貢獻許多，不過線下也有許多人在默默奉獻，不應該用活躍與否來判斷一個人的實力。</p>\n<p>這一次的面試除了「找工作」這件事之外，我學到的是 — 謙遜。在軟體開發的領域中有太多聰明人了，不斷在提醒著自己有多麽無知。</p>\n<h4 id=\"1-履歷準備\"><a href=\"#1-履歷準備\" class=\"headerlink\" title=\"1. 履歷準備\"></a>1. 履歷準備</h4><p>因為我平常就有寫 medium 跟部落格的習慣，履歷表就能順便放進去。而且因為履歷表是放在 github 上，所以很容易更新。</p>\n<h4 id=\"2-工作經驗\"><a href=\"#2-工作經驗\" class=\"headerlink\" title=\"2. 工作經驗\"></a>2. 工作經驗</h4><p>工作經驗並不是把公司名稱、職稱、年資寫進去而已，你負責哪些工作內容、在公司做了什麼事情，盡量寫得具體一些，例如：</p>\n<ul>\n<li>用 React、Redux 管理複雜頁面開發</li>\n<li>優化首頁 Loading 效能</li>\n</ul>\n<p>就比擔任前端開發來得好許多。</p>\n<h4 id=\"3-Side-Project\"><a href=\"#3-Side-Project\" class=\"headerlink\" title=\"3. Side Project\"></a>3. Side Project</h4><p>除了工作以外，如果有自己的 side project 就更好了，身為工程師一定會有自己想要動手解決的問題。</p>\n<p>可以讓面試官知道你喜歡的領域以及技術線，每個專案當中一定會有一些特定的問題是困擾你很久或是花了許多時間解決的。</p>\n<h4 id=\"4-多問問題\"><a href=\"#4-多問問題\" class=\"headerlink\" title=\"4. 多問問題\"></a>4. 多問問題</h4><p>面試應該是個你來我往的雙向溝通，而不是一場你問我答的標準流程而已，知道如何反問對方，也能夠增加對公司的了解程度。</p>\n<p>通常我都會問一些公司內部的問題，主要會針對這幾個方面問：</p>\n<ol>\n<li><strong>有沒有自動化？</strong><br>很多公司都還是土炮手動 SSH 登入部署。這種開發方式很可能間接一步反映到公司文化上，例如：申請預算流程繁瑣、對能夠自動化的東西視若無睹。</li>\n<li><strong>如何解決 bug？</strong><br>解決 bug 的方式可以看出公司如何排程。例如 bug 怎麼被回報的、誰來決定 bug 的優先度等等，通常從對方的回答就能判斷他們是否有一套規範來決定如何排程的</li>\n<li><strong>需求是否常常變動？</strong><br>從需求變動這個問題來看可以從很多角度切入，什麼是常常變動？在什麼時候變動？怎樣才叫做變動？這時候就能看出這間公司是否會出現明明開發時說 A，結果交差卻說 B 的情形了。</li>\n</ol>\n<p>接下來就是從這上面延伸出來的回答繼續追問了，通常看面試官的回答程度大概就知道這間公司的內部情形了。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>終於有時間整理最近的面試歷程了。先總結一些看到的事情：</p>\n<ol>\n<li>通常公司面試只考 Javascript 的熟悉度，多數關於演算法或是解釋原型鍊等等，很少考 DOM 或是 Event 的操作。</li>\n<li>幾乎不考 CSS，就算有也只是簡單判斷 class、ID 優先度這種基本題目而已。</li>\n<li>沒有面試考 HTML，例如 semantic tag、accessilbility、input type 使用等等。</li>\n<li>React、Redux、ES6 語法幾乎成為前端必備技能，Angular 比較少公司採用。</li>\n<li>普遍的獵頭都不夠專業，也有可能是太菜了還沒被專業的獵頭找上</li>\n</ol>\n<p>以下是這次面試的公司：</p>\n<ol>\n<li>Accupass</li>\n<li>Codementor</li>\n<li>Linker Network Inc.</li>\n<li>樂天市場</li>\n<li>17 media</li>\n</ol>\n<h3 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h3><p>國立科大資管系，目前已經有兩年工作經驗。平時專注在前端開發，接觸 React、Redux 開發約兩年的時間。除了一般的前端「工程」之外，自己也很喜歡畫面的實作與互動，同時也有在自己的小專案當中練習後端的知識，像是 AWS、Lambda、nodejs、資料庫、機器學習等等，不過最熟悉的還是前端相關。</p>\n<h3 id=\"期待的工作環境\"><a href=\"#期待的工作環境\" class=\"headerlink\" title=\"期待的工作環境\"></a>期待的工作環境</h3><ol>\n<li>能夠和前端團隊一起合作。之前的工作經驗因為前端開發都只有自己一人，所以比較難討論特定的前端技術</li>\n<li>不會有太多突發狀況。像是突然就改需求、砍掉開發中的產品、因為人情而被迫開發的案子等等</li>\n<li>有主產品以及明確的服務</li>\n<li>技術含量高，可以和優秀的團隊一起共事</li>\n</ol>\n<h3 id=\"找工作的管道\"><a href=\"#找工作的管道\" class=\"headerlink\" title=\"找工作的管道\"></a>找工作的管道</h3><ul>\n<li>inside jobboard</li>\n<li>yourator</li>\n<li>104 人力銀行</li>\n<li>f2e jobs</li>\n<li>PTT Soft_Job 版</li>\n</ul>\n<h3 id=\"1-Accupass-活動通\"><a href=\"#1-Accupass-活動通\" class=\"headerlink\" title=\"1. Accupass 活動通\"></a>1. Accupass 活動通</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>一個活動票券的網站，最近正在將架構從 Angular 改寫為 React，原因是原本的 Angular 較難維護，而且很容易產生牽一髮動全身的情形。</p>\n<h4 id=\"面試前\"><a href=\"#面試前\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>在 104 上被邀約面試，是由 PM 邀約面試的。</p>\n<h4 id=\"面試中\"><a href=\"#面試中\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>團隊正在擴編。面試主要聊一些自己的工作經驗以及一些小項目。當天面試我的前端工程師是一位日本人XD，但是中文講得很好（全程都是中文面試）。</p>\n<p>聊了關於 Accupass 的開發狀況、如何開發功能、管理時程等等，也和前端工程師聊技術，從 CSSModules、RxJS 聊到 CycleJS，感覺是個對前端技術很有熱忱的工程師。</p>\n<h4 id=\"面試結果\"><a href=\"#面試結果\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>婉拒 offer。</p>\n<p>PM 相當希望我能夠加入 Accupass 團隊，婉拒後也撥了通電話詢問原因，並提及如果以後有機會希望能夠一起合作。不過由於其他職位更吸引我，所以拒絕了 Accupass 的 offer。</p>\n<h3 id=\"2-Linker-Network-Inc-美商寶蘊凌科網路科技有限公司\"><a href=\"#2-Linker-Network-Inc-美商寶蘊凌科網路科技有限公司\" class=\"headerlink\" title=\"2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司\"></a>2. Linker Network Inc. 美商寶蘊凌科網路科技有限公司</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>專門做 IOT、AI、機器學習的雲端運算平台，因為這些 platform 需要 UI 的支持，所以需要前端開發協助。官網還蠻簡陋的，看不出個所以然，不過做的事情技術含量很高。</p>\n<h4 id=\"面試前-1\"><a href=\"#面試前-1\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>在 104 上主動投遞履歷，被電話邀請面試。這間公司做的技術含量很深，也有在線下辦一些社群。</p>\n<h4 id=\"面試中-1\"><a href=\"#面試中-1\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>感覺得出來是個蠻技術含量很紮實的公司。自我介紹談了一下過去的工作經驗，以及用 React, Redux。</p>\n<p>我之後才知道原來當初面試我的是 c9s ，想說怎麼那麼眼熟。感覺得出來是位大大，技術的掌握度很深。（不過本人看起來比較憔悴）</p>\n<p>面試時考了些偏優化的題目，像是：</p>\n<ol>\n<li>js 如何做 minify？<br>這題是要你大概解釋一下 js minify 的過程，最後簡化到如何消除程式碼中不必要的空白。這題的想法很簡單，不過實作起來有一些細節要注意，當時沒有想很多，被提示很多次才寫出來</li>\n<li>前端效能優化可以怎麼做？<br>提了一些常見的方式，不過感覺沒有很合面試官的胃口。像是 base64 編碼減少請求數、快取、ServiceWorker 等等。</li>\n<li>如果要你做一個 SPA 的 framework，你會怎麼做？<br>如果要我做，首先要考慮的是 router 的處理方式，畢竟 SPA 需要依靠前端做 router。後來被提醒了還要考慮 lifecycle 的問題</li>\n<li>一些 Javascript 的問題</li>\n<li>原形鍊的原理</li>\n<li><code>new</code> 背後發生了什麼事？</li>\n<li>如何實作繼承</li>\n<li><code>this</code> 指向誰</li>\n</ol>\n<p>最後由一位看起來是主管的人跟我談一些公司現況、未來發展等等。</p>\n<h4 id=\"面試結果-1\"><a href=\"#面試結果-1\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>無聲卡（到現在已經三週），大概是太菜了吧QQ</p>\n<h3 id=\"3-台灣樂天市場\"><a href=\"#3-台灣樂天市場\" class=\"headerlink\" title=\"3. 台灣樂天市場\"></a>3. 台灣樂天市場</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>之前有參加過一次面試，不過因為沒辦法提供全職的上班時間（也不確定是不是）。所以重新又投了一次。辦公室的氣氛跟一般大公司差不多，要有員工證才能進辦公室。</p>\n<h4 id=\"面試前-2\"><a href=\"#面試前-2\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>HR 聯絡，寄給我一張身家調查表以及程式考題。上頭的格式大概跟 104 履歷差不多。這邊我想特別講一下他們的面試邀約信。</p>\n<p>一般的公司通常在信上附上地址，不過樂天市場會把一些重要的地標標示出來，例如 XX 號出口、在 XX 銀行上面、出電梯右轉等等，雖然這是一個微不足道的提醒，但對面試者來說很有用，畢竟誰都不想在大太陽底下看 google map 還不小心走反方向。</p>\n<h4 id=\"面試中-2\"><a href=\"#面試中-2\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>這次的面試比起以前好像又更制式一些，還要寫智力測驗跟人格測驗的考卷，考一些類似加減乘除之類的題目，我好像還錯了幾題XD。整個面試流程又因為這樣拉長了一些時間。</p>\n<p>跟工程師面試的過程蠻愉快的，主要也是聊一些工作經驗以及對技術的了解，兩位工程師感覺也是技術很強的大大。有一位工程師之前已經面試過我，跟我說「我對你的技術能力沒有太大問題」，但是因為卡兵役的關係還是被 reject 掉，整個很感動QQ。</p>\n<p>後來我還發現原來有一位就是 <a href=\"https://github.com/AllenFang/react-bootstrap-table/\" target=\"_blank\" rel=\"external\">react-bootstrap-table</a> 的 creator。</p>\n<p>面試主要考了一些 Javascript 的東西，像是：</p>\n<ol>\n<li>遞迴以及實際應用<br>例如有一題反轉字串，主考官叫我用遞迴實現，並問我好處是什麼。我想破頭也想不出來，網路也找不到答案。</li>\n<li>閉包與實際開發應用</li>\n<li>IIFE（立即執行函式） 的好處<br>我舉了幾個例子，不過後來一位工程師跟我分享 jQuery 的原始碼，說用 IIFE 的方式也可以有效幫助 minify（因為把 window 參數化了），這招倒是我以前從來沒想過的。</li>\n<li>React、Redux 的開發場景應用<br>考一些 Redux 常見開發情景、管理 store 的方式、react lifecycle 的應用</li>\n<li>（更新）如何不用 <code>+</code> 實作加法功能<br>這題考對 bit operator 了解。透過 <code>XOR</code> 可以做到，高中的加法器有教XD，不過還是要畫一下真值表。</li>\n<li>（更新）台灣樂天市場有一句令我印象深刻的標語：<strong>複雜的東西簡單化、簡單的東西流程化、流程的東西標準化、標準化的東西自動化。</strong>（不確定原文是不是這樣）</li>\n</ol>\n<p>之後問了一些比較工程化的問題，像是 CI/CD、如何跑開發流程等等，樂天市場的技術線蠻多的，Angular、React、RoR、GraphQL 都有。</p>\n<h4 id=\"面試結果-2\"><a href=\"#面試結果-2\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>因為還是資格不符，所以基本上應該是被淘汰。不過前端 team 感覺得出來相當紮實，兩位工程師除了前端外都有其他領域的開發經驗，而且相當友善，面試結束時還請我喝了一杯飲料（雖然是公司的販賣機啦XD），也給了我很多關於職涯上的建議。</p>\n<h3 id=\"4-Codementor\"><a href=\"#4-Codementor\" class=\"headerlink\" title=\"4. Codementor\"></a>4. Codementor</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>做一對一的線上 mentor 的服務。衍伸出來許多服務，像是線上 code review、debug、pair programming 等等。</p>\n<h4 id=\"面試前-3\"><a href=\"#面試前-3\" class=\"headerlink\" title=\"面試前\"></a>面試前</h4><p>因為技術含量高，而且面對的對象又是工程師，想說是個很好練功的地方，在 104 上投遞履歷，隔天收到 HR 線上面試邀請。我還蠻喜歡線上面試的，不用額外跑到公司一趟對工程師來說實在是一大福音啊！</p>\n<h4 id=\"面試中-3\"><a href=\"#面試中-3\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p><strong>第一階段 — 工程師面試</strong></p>\n<p>跟 team lead 面試，聊一些過去的工作經驗，問了一些開發上的問題。口頭考了一些 javascript 跟 react 的理解</p>\n<ol>\n<li>閉包</li>\n<li>flux v.s MVC 解決了什麼問題：老實說我沒有實際用過 flux，只有看過架構圖跟 code，所以只能靠自己的理解來回答</li>\n<li>javascript 是如何做到非同步的？談對 call stack 跟 event loop 的理解</li>\n</ol>\n<p><strong>第二階段 — 與 co-founder 面試</strong></p>\n<p>一樣在線上跟 co-founder 聊天。這個階段比較少提技術的部分，自我介紹完了之後，他對我的一個 side project 好像很有興趣XD，問我當初成立的動機以及為什麼沒有把它變成完整的服務。有好一段時間都在談這個小專案，也有談到 code mentor 也有在做類似內容平台的服務。</p>\n<p>後來問了一些 code mentor 的歷史以及一些團隊文化。總共約 30–40 分鐘左右</p>\n<p><strong>第三階段 — 與 CEO 面試</strong></p>\n<p>CEO 人在 California，一樣在線上面試。主要也是聊一些自己的工作內容跟開發經驗以及一些關於人格特質的問題。應該是希望從對談當中聊聊彼此之間的契合程度吧！總共約 30–40 分鐘左右。</p>\n<p>因為 code mentor 的 co-founder 以及 CEO 都是工程師出身，聊起來相當愉快，不會有種從上往下看你的感覺。</p>\n<p>他後來問了一題「你覺得你自己是個聰明人嗎？」。我回答不是，看過越多的程式碼與演算法後更是如此覺得。</p>\n<p>自己可能一輩子都沒辦法設計出像 React 那麼龐大的架構，或是各種排序演算法等等，怎麼想都不覺得自己很聰明。</p>\n<h4 id=\"面試後\"><a href=\"#面試後\" class=\"headerlink\" title=\"面試後\"></a>面試後</h4><p>約五天後被婉拒，好像是找到更 senior 的前端。code mentor 給我的感覺相當愉快，不管是 CEO 或是 team lead 都給我一種對自己產品相當有熱忱的感覺。希望未來還可以跟他們一起合作。</p>\n<h3 id=\"5-17-media\"><a href=\"#5-17-media\" class=\"headerlink\" title=\"5. 17 media\"></a>5. 17 media</h3><p><strong>應徵職位：Frontend Developer</strong></p>\n<p>這應該是我目前面試過最愉快的一間公司。從 f2e jobs 上看到徵才資訊，一直猶豫要不要投履歷，後來是朋友推薦後獲得面試邀約。</p>\n<h4 id=\"面試中-4\"><a href=\"#面試中-4\" class=\"headerlink\" title=\"面試中\"></a>面試中</h4><p>因為 team lead 是用下班時間面試 18:30。我很準時到達辦公室，team lead 也很準時出現在辦公室。這點讓我很欣賞。</p>\n<p>有些公司因為不確定面試者什麼時候來，所以多數都是工程師還在工作的狀態下突然被通知要面試才匆匆忙忙準備相關資料，或者臨時看一下履歷表。問了一下目前到現在面試幾個人了，他還特地秀出 slack 的訊息，還順便註記了幾個人遲到。是個相當重視時間的人。</p>\n<p>剛開始先由 HR 帶領晃過公司一圈。辦公室挺大的，零食櫃跟冰箱很猛，還有咖啡機、咖啡豆、微波爐等器具，聽說 RD team 還有另外一間辦公室，不過當天去的情況看來還是有點擠。</p>\n<p>再來是 team lead 面試，首先先自我介紹跟講一些工作經驗。</p>\n<p>一邊聊一邊帶到目前公司、團隊的狀況。感覺起來是個蠻保護團隊的人。之後就是 live coding 了，為了模擬真實的情況，所以不會斷網路，主要考一些 javascript 常見開發應用跟 built-in function 的實作。</p>\n<p>寫出來之後，team lead 就會從你寫的 code 當中開始討論技術。像是這邊為什麼要這樣寫，有沒有更好的寫法等等，他花了很多時間在討論、問問題以及提出自己對這段 code 的意見，感覺就像實際在 code review 一樣。這邊也花了最久時間，大概也有 1.5hr 左右吧。</p>\n<p>最後會給你一段髒髒的程式碼要你做 code review 跟解 bug，一起討論完之後，面試就結束了。</p>\n<p>出辦公室的時候大概已經 21:50 幾分了吧，他很有耐心都一直在旁邊做事。比較讓我印象深刻的是我們一起討論 <code>\\B</code> 的用法，這是很少人會去理解的正規表達式，所以討論完原本的答案後，我就請教他 <code>\\``B</code>的用法。</p>\n<p>他很有耐心地從 \\b、\\w 到 \\B 一個一個解釋，直接解開了我長久以來的疑問。（網路上很少把 <code>\\b</code> 解釋的很清楚）</p>\n<p>他給我幾個感覺：</p>\n<ol>\n<li>真實：不會隱瞞公司的狀況，讓你進來後覺得被騙，而且過程中不經意會講一些工作上遇到的無奈與感嘆，感覺已經看過不少風雨。</li>\n<li>真誠：不會用很奇怪的考題來電人，還會跟你一起討論 code quality、這段 code 要如何改進。這在面試當中是一件相當難得的事情。再來我跟他提到因為辦公室太大讓我不知道一進門要找誰時，他說會再反映給 HR。原本我以為他只是說說而已（畢竟大部分的公司也都是聽聽而已），沒想到他真的有跟 HR 反應，讓我非常感動。</li>\n</ol>\n<h4 id=\"面試結果-3\"><a href=\"#面試結果-3\" class=\"headerlink\" title=\"面試結果\"></a>面試結果</h4><p>offer get。HR 打電話來說明 on board 相關流程。</p>\n<h3 id=\"面試心得\"><a href=\"#面試心得\" class=\"headerlink\" title=\"面試心得\"></a>面試心得</h3><p>面試真的好累QQ，如果可以的話實在不想到處奔波，全部採用線上面試，非常符合 lazy engineer 啊！</p>\n<p>這次面試除了「找工作」之外，也見識到許多開發者，他們或許不常出現在各大社群當中，但是論實力跟涵養，都遠比某些在社群上膨風的開發者來得深厚。並不是說參與社群是一件不好的事，還是有很多人為社群貢獻許多，不過線下也有許多人在默默奉獻，不應該用活躍與否來判斷一個人的實力。</p>\n<p>這一次的面試除了「找工作」這件事之外，我學到的是 — 謙遜。在軟體開發的領域中有太多聰明人了，不斷在提醒著自己有多麽無知。</p>\n<h4 id=\"1-履歷準備\"><a href=\"#1-履歷準備\" class=\"headerlink\" title=\"1. 履歷準備\"></a>1. 履歷準備</h4><p>因為我平常就有寫 medium 跟部落格的習慣，履歷表就能順便放進去。而且因為履歷表是放在 github 上，所以很容易更新。</p>\n<h4 id=\"2-工作經驗\"><a href=\"#2-工作經驗\" class=\"headerlink\" title=\"2. 工作經驗\"></a>2. 工作經驗</h4><p>工作經驗並不是把公司名稱、職稱、年資寫進去而已，你負責哪些工作內容、在公司做了什麼事情，盡量寫得具體一些，例如：</p>\n<ul>\n<li>用 React、Redux 管理複雜頁面開發</li>\n<li>優化首頁 Loading 效能</li>\n</ul>\n<p>就比擔任前端開發來得好許多。</p>\n<h4 id=\"3-Side-Project\"><a href=\"#3-Side-Project\" class=\"headerlink\" title=\"3. Side Project\"></a>3. Side Project</h4><p>除了工作以外，如果有自己的 side project 就更好了，身為工程師一定會有自己想要動手解決的問題。</p>\n<p>可以讓面試官知道你喜歡的領域以及技術線，每個專案當中一定會有一些特定的問題是困擾你很久或是花了許多時間解決的。</p>\n<h4 id=\"4-多問問題\"><a href=\"#4-多問問題\" class=\"headerlink\" title=\"4. 多問問題\"></a>4. 多問問題</h4><p>面試應該是個你來我往的雙向溝通，而不是一場你問我答的標準流程而已，知道如何反問對方，也能夠增加對公司的了解程度。</p>\n<p>通常我都會問一些公司內部的問題，主要會針對這幾個方面問：</p>\n<ol>\n<li><strong>有沒有自動化？</strong><br>很多公司都還是土炮手動 SSH 登入部署。這種開發方式很可能間接一步反映到公司文化上，例如：申請預算流程繁瑣、對能夠自動化的東西視若無睹。</li>\n<li><strong>如何解決 bug？</strong><br>解決 bug 的方式可以看出公司如何排程。例如 bug 怎麼被回報的、誰來決定 bug 的優先度等等，通常從對方的回答就能判斷他們是否有一套規範來決定如何排程的</li>\n<li><strong>需求是否常常變動？</strong><br>從需求變動這個問題來看可以從很多角度切入，什麼是常常變動？在什麼時候變動？怎樣才叫做變動？這時候就能看出這間公司是否會出現明明開發時說 A，結果交差卻說 B 的情形了。</li>\n</ol>\n<p>接下來就是從這上面延伸出來的回答繼續追問了，通常看面試官的回答程度大概就知道這間公司的內部情形了。</p>\n"},{"title":"【讀書心得】伊坂幸太郎 - 汽油生活","date":"2016-10-16T07:17:01.000Z","image":"gaslife.jpg","_content":"\n\n## 前言\n\n自從實習生活開始之後已經很久沒有看小說了，不過仔細想想，如果把滑 FB 的時間拿來看書，應該可以偷到不少時間，於是假日心一狠，把之前很想看的小說全部搜刮起來...。但事實告訴我，這種衝動還是得小心啊！噴了 2200 多…，我得好好省吃儉用了。\n\n## 汽油生活 🚗🚕🚙\n\n這次的作品是從一輛汽車的角度出發，這已經不是伊坂第一次嘗試了，《死神系列作》、《夜之國的庫帕》，都是以非人類的角度來作描寫，觀察人類。\n\n這一次的主角是望月一家，有一次的旅程中望月一家載到一位大名鼎鼎的女藝人荒木翠，之後開啟一連串奇怪的事件中。汽車這次的作品中，由於故事中的敘事者都是以第一人稱出發，所以裡頭也有許多關於汽車的品牌跟故事，裡頭中出現的有關於汽車的心聲，也是讓人莞爾一笑的插曲之一。\n\n**新手駕駛反而是安全的，因為一旦開始鬆懈，就是危險的開始。**這是我很喜歡伊坂幸太郎風格的原因之一，他很擅長把這些東西拿進作品裡當作比喻，不管是讓我們思考也好；或是劇情的走向也好，我看得挺過癮的。**\n\n### 喇叭的存在目的 🎺\n\n喇叭似乎只是為了發洩憤怒而存在的。\n\n那為什麼喇叭發出的聲音那麼低俗且刺耳呢？如果汽車出廠時可以對喇叭多用點心，想必也可以增加賣點吧！\n\n而且喇叭聲通常是爭端的來源之一，人類會對這種如突其來的噪音感到煩躁。試著想想喇叭製造的目的，應該是為了提醒行人、前方車輛：「唷，我在這裡哦！唷，前方已經綠燈了哦！」而存在的吧？\n\n雖然喇叭的音量可以由按下的力道調整，但是那種音量還是會嚇到別人，也有可能引起別人不滿。更不用說有時會在路上看見橫行的汽車，喇叭按著不放，似乎只是想用這種方式宣洩自己的不滿而已，根本沒有任何提醒的作用。\n\n為什麼人類那麼喜歡這種原始而粗暴的方式呢？只因為這樣子很爽，發洩情緒的感覺讓自己產生優越感。備而不用是人類最愚蠢的地方。他們覺得也許會用到，所以就把什麼都保留下來。如果這樣一想，喇叭的聲音就應該被調整才對。\n\n如果想要達到「提醒」的作用，應該不需要那麼尖銳的音量才對。\n\n既然車子可以搭配喇叭，那麼行人也應該配戴喇叭，**看到三寶開車或是貪污的政治人物，就應該到他面前吧吧兩下，表達自己微不足道的憤怒**。\n\n### 霸凌二人組\n\n關於霸凌這個觀點巧妙地和伊坂筆下出現的霸凌『野菜組』結合。亨因為跟一般的小孩不同，所以在學校時常常被『野菜組』霸凌。但他並不以為意，因為他知道這是人性下的醜陋，這群人只是因為無聊所以只好用這種方式來欺負別人。亨也習慣這樣的事情，「因為我不討人喜歡，所以大家都霸凌我」。當然伊坂幸太郎是不會讓這種人好過的，故事結尾也巧妙地讓亨返回一擊。（讓我感動的是，當圭一說他下定決心要站出來時，亨說的那句：「加油」）\n\n只要有人跟一般人不同，就會有霸凌的存在，因為暴力讓人感覺很爽。\n\n而且在學校時不用負太多責任不是嗎？有哪個學校會希望自己的學生霸凌？有哪個老師希望自己的班級霸凌？有哪個家長希望自己的小孩霸凌？\n\n所以當霸凌這件事發生，大家採取的動作不是遏止、而是隱瞞，所以他們更加為所欲為，因為不用負責任，而且還有那麼多人在幫你。\n\n### 關於媒體\n\n媒體也常常出現在伊坂的筆下。之前才看過《64》、《虛線的惡意》，都是在說媒體、新聞業下的黑暗面。\n\n但是，這次角度從另外一邊來看。因為這件事更有趣不是嗎？大家都想看，所以就會有人去寫這種報導。然後民眾又可以把罪過全部推給記者，好像自己完全沒有責任似的。那為什麼壹週刊一樣那麼暢銷、為什麼八卦點擊率還是那麼高，民眾對這種報導還不是一樣樂見其成。\n\n所以到底是把媒體搞成這個樣子的？\n\n但是正如人類中有好人跟壞人，記者也有分好記者跟壞記者，這次是介紹好的記者。裡頭的阿玉因為對自己的報導害死了一位棒球選手感到愧疚，所以決定在這次車禍事件讓翠和丹羽遠走高飛，隱居他處。\n\n故事的橋段還有一句，「咦？你怎麼變得那麼乖，這樣怎麼當記者？」當亨純真地問著這句話時不禁笑了出來。\n\n「鏡頭具有抑制對方行為的力量」，所以在拍攝的時候都有種優越感，彷彿自己可以掌握全世界一樣。隱含在生活中的小道理我喜歡伊坂在敘事的過程中，將生活的小道理信手拈來，巧妙無痕地放入小說中的那種氣氛。就好像有人可以自私地害得整條高速公路都塞車一樣、就好像有人會把全世界的號誌燈都當作綠燈一樣。不管怎麼樣，還是有那些對道德無動於衷的人對吧？\n\n伊坂不會把這些道理赤裸裸地說清楚講明白，而是用巧妙的比喻帶過，卻又在故事結束後令人深思。\n\n「就好像媽媽說吃青椒才可以吃甜點那樣嗎？」明明只是一個等價交換的道理，伊坂卻可以依照角色上面的不同，描述出不同的說法。想像這樣的話語從一般的小孩口中說出來，真的在適切不過了！\n\n### 尾聲（お終い）\n\n在小說進入尾聲階段時，亨曾經鼓勵圭一，希望他可以走出被霸凌的陰影，勇敢起身對抗。「那種影片不好玩，所以大家都不會在意的」，然後拿出法蘭克‧札帕的名言出來，說：「人類所嘗試的事情中，有百分之九十九都是失敗，所以失敗是正常的事情」。這句話可以說是老生常談，但是搭配劇情之後，竟然亂熱血一把的。伊坂小說的尾聲，總會讓人意想不到，包括安田太太的帽子、開頭良夫買的青蛙擺飾、殺人埋藏的屍體、牙醫事件、車子最後的下落，都做了一個完美的交代。這次的結局讓人看得十分過癮，還特別將那四台車的第一個字連接變成『お。し。ま。い』\n\n伊坂的小說通常會用一個人物當作代表，引用他說過的名言來貫穿整個故事。\n\n這次的主角是「法蘭克．札帕」是一位歌手，他的生涯我不是很清楚，上了維基百科查了一下，也沒有很明確的資料，所以我就不多做介紹，直接把連結貼給大家看看好了。\n","source":"_posts/gasline.md","raw":"---\ntitle: 【讀書心得】伊坂幸太郎 - 汽油生活\ntags:\n  - 伊坂幸太郎\ncategory: 讀書心得\ndate: 2016-10-16 15:17:01\nimage: gaslife.jpg\n---\n\n\n## 前言\n\n自從實習生活開始之後已經很久沒有看小說了，不過仔細想想，如果把滑 FB 的時間拿來看書，應該可以偷到不少時間，於是假日心一狠，把之前很想看的小說全部搜刮起來...。但事實告訴我，這種衝動還是得小心啊！噴了 2200 多…，我得好好省吃儉用了。\n\n## 汽油生活 🚗🚕🚙\n\n這次的作品是從一輛汽車的角度出發，這已經不是伊坂第一次嘗試了，《死神系列作》、《夜之國的庫帕》，都是以非人類的角度來作描寫，觀察人類。\n\n這一次的主角是望月一家，有一次的旅程中望月一家載到一位大名鼎鼎的女藝人荒木翠，之後開啟一連串奇怪的事件中。汽車這次的作品中，由於故事中的敘事者都是以第一人稱出發，所以裡頭也有許多關於汽車的品牌跟故事，裡頭中出現的有關於汽車的心聲，也是讓人莞爾一笑的插曲之一。\n\n**新手駕駛反而是安全的，因為一旦開始鬆懈，就是危險的開始。**這是我很喜歡伊坂幸太郎風格的原因之一，他很擅長把這些東西拿進作品裡當作比喻，不管是讓我們思考也好；或是劇情的走向也好，我看得挺過癮的。**\n\n### 喇叭的存在目的 🎺\n\n喇叭似乎只是為了發洩憤怒而存在的。\n\n那為什麼喇叭發出的聲音那麼低俗且刺耳呢？如果汽車出廠時可以對喇叭多用點心，想必也可以增加賣點吧！\n\n而且喇叭聲通常是爭端的來源之一，人類會對這種如突其來的噪音感到煩躁。試著想想喇叭製造的目的，應該是為了提醒行人、前方車輛：「唷，我在這裡哦！唷，前方已經綠燈了哦！」而存在的吧？\n\n雖然喇叭的音量可以由按下的力道調整，但是那種音量還是會嚇到別人，也有可能引起別人不滿。更不用說有時會在路上看見橫行的汽車，喇叭按著不放，似乎只是想用這種方式宣洩自己的不滿而已，根本沒有任何提醒的作用。\n\n為什麼人類那麼喜歡這種原始而粗暴的方式呢？只因為這樣子很爽，發洩情緒的感覺讓自己產生優越感。備而不用是人類最愚蠢的地方。他們覺得也許會用到，所以就把什麼都保留下來。如果這樣一想，喇叭的聲音就應該被調整才對。\n\n如果想要達到「提醒」的作用，應該不需要那麼尖銳的音量才對。\n\n既然車子可以搭配喇叭，那麼行人也應該配戴喇叭，**看到三寶開車或是貪污的政治人物，就應該到他面前吧吧兩下，表達自己微不足道的憤怒**。\n\n### 霸凌二人組\n\n關於霸凌這個觀點巧妙地和伊坂筆下出現的霸凌『野菜組』結合。亨因為跟一般的小孩不同，所以在學校時常常被『野菜組』霸凌。但他並不以為意，因為他知道這是人性下的醜陋，這群人只是因為無聊所以只好用這種方式來欺負別人。亨也習慣這樣的事情，「因為我不討人喜歡，所以大家都霸凌我」。當然伊坂幸太郎是不會讓這種人好過的，故事結尾也巧妙地讓亨返回一擊。（讓我感動的是，當圭一說他下定決心要站出來時，亨說的那句：「加油」）\n\n只要有人跟一般人不同，就會有霸凌的存在，因為暴力讓人感覺很爽。\n\n而且在學校時不用負太多責任不是嗎？有哪個學校會希望自己的學生霸凌？有哪個老師希望自己的班級霸凌？有哪個家長希望自己的小孩霸凌？\n\n所以當霸凌這件事發生，大家採取的動作不是遏止、而是隱瞞，所以他們更加為所欲為，因為不用負責任，而且還有那麼多人在幫你。\n\n### 關於媒體\n\n媒體也常常出現在伊坂的筆下。之前才看過《64》、《虛線的惡意》，都是在說媒體、新聞業下的黑暗面。\n\n但是，這次角度從另外一邊來看。因為這件事更有趣不是嗎？大家都想看，所以就會有人去寫這種報導。然後民眾又可以把罪過全部推給記者，好像自己完全沒有責任似的。那為什麼壹週刊一樣那麼暢銷、為什麼八卦點擊率還是那麼高，民眾對這種報導還不是一樣樂見其成。\n\n所以到底是把媒體搞成這個樣子的？\n\n但是正如人類中有好人跟壞人，記者也有分好記者跟壞記者，這次是介紹好的記者。裡頭的阿玉因為對自己的報導害死了一位棒球選手感到愧疚，所以決定在這次車禍事件讓翠和丹羽遠走高飛，隱居他處。\n\n故事的橋段還有一句，「咦？你怎麼變得那麼乖，這樣怎麼當記者？」當亨純真地問著這句話時不禁笑了出來。\n\n「鏡頭具有抑制對方行為的力量」，所以在拍攝的時候都有種優越感，彷彿自己可以掌握全世界一樣。隱含在生活中的小道理我喜歡伊坂在敘事的過程中，將生活的小道理信手拈來，巧妙無痕地放入小說中的那種氣氛。就好像有人可以自私地害得整條高速公路都塞車一樣、就好像有人會把全世界的號誌燈都當作綠燈一樣。不管怎麼樣，還是有那些對道德無動於衷的人對吧？\n\n伊坂不會把這些道理赤裸裸地說清楚講明白，而是用巧妙的比喻帶過，卻又在故事結束後令人深思。\n\n「就好像媽媽說吃青椒才可以吃甜點那樣嗎？」明明只是一個等價交換的道理，伊坂卻可以依照角色上面的不同，描述出不同的說法。想像這樣的話語從一般的小孩口中說出來，真的在適切不過了！\n\n### 尾聲（お終い）\n\n在小說進入尾聲階段時，亨曾經鼓勵圭一，希望他可以走出被霸凌的陰影，勇敢起身對抗。「那種影片不好玩，所以大家都不會在意的」，然後拿出法蘭克‧札帕的名言出來，說：「人類所嘗試的事情中，有百分之九十九都是失敗，所以失敗是正常的事情」。這句話可以說是老生常談，但是搭配劇情之後，竟然亂熱血一把的。伊坂小說的尾聲，總會讓人意想不到，包括安田太太的帽子、開頭良夫買的青蛙擺飾、殺人埋藏的屍體、牙醫事件、車子最後的下落，都做了一個完美的交代。這次的結局讓人看得十分過癮，還特別將那四台車的第一個字連接變成『お。し。ま。い』\n\n伊坂的小說通常會用一個人物當作代表，引用他說過的名言來貫穿整個故事。\n\n這次的主角是「法蘭克．札帕」是一位歌手，他的生涯我不是很清楚，上了維基百科查了一下，也沒有很明確的資料，所以我就不多做介紹，直接把連結貼給大家看看好了。\n","slug":"gasline","published":1,"updated":"2017-02-19T11:26:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqo0017iw5t0hf69ebe","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>自從實習生活開始之後已經很久沒有看小說了，不過仔細想想，如果把滑 FB 的時間拿來看書，應該可以偷到不少時間，於是假日心一狠，把之前很想看的小說全部搜刮起來…。但事實告訴我，這種衝動還是得小心啊！噴了 2200 多…，我得好好省吃儉用了。</p>\n<h2 id=\"汽油生活-🚗🚕🚙\"><a href=\"#汽油生活-🚗🚕🚙\" class=\"headerlink\" title=\"汽油生活 🚗🚕🚙\"></a>汽油生活 🚗🚕🚙</h2><p>這次的作品是從一輛汽車的角度出發，這已經不是伊坂第一次嘗試了，《死神系列作》、《夜之國的庫帕》，都是以非人類的角度來作描寫，觀察人類。</p>\n<p>這一次的主角是望月一家，有一次的旅程中望月一家載到一位大名鼎鼎的女藝人荒木翠，之後開啟一連串奇怪的事件中。汽車這次的作品中，由於故事中的敘事者都是以第一人稱出發，所以裡頭也有許多關於汽車的品牌跟故事，裡頭中出現的有關於汽車的心聲，也是讓人莞爾一笑的插曲之一。</p>\n<p><strong>新手駕駛反而是安全的，因為一旦開始鬆懈，就是危險的開始。</strong>這是我很喜歡伊坂幸太郎風格的原因之一，他很擅長把這些東西拿進作品裡當作比喻，不管是讓我們思考也好；或是劇情的走向也好，我看得挺過癮的。**</p>\n<h3 id=\"喇叭的存在目的-🎺\"><a href=\"#喇叭的存在目的-🎺\" class=\"headerlink\" title=\"喇叭的存在目的 🎺\"></a>喇叭的存在目的 🎺</h3><p>喇叭似乎只是為了發洩憤怒而存在的。</p>\n<p>那為什麼喇叭發出的聲音那麼低俗且刺耳呢？如果汽車出廠時可以對喇叭多用點心，想必也可以增加賣點吧！</p>\n<p>而且喇叭聲通常是爭端的來源之一，人類會對這種如突其來的噪音感到煩躁。試著想想喇叭製造的目的，應該是為了提醒行人、前方車輛：「唷，我在這裡哦！唷，前方已經綠燈了哦！」而存在的吧？</p>\n<p>雖然喇叭的音量可以由按下的力道調整，但是那種音量還是會嚇到別人，也有可能引起別人不滿。更不用說有時會在路上看見橫行的汽車，喇叭按著不放，似乎只是想用這種方式宣洩自己的不滿而已，根本沒有任何提醒的作用。</p>\n<p>為什麼人類那麼喜歡這種原始而粗暴的方式呢？只因為這樣子很爽，發洩情緒的感覺讓自己產生優越感。備而不用是人類最愚蠢的地方。他們覺得也許會用到，所以就把什麼都保留下來。如果這樣一想，喇叭的聲音就應該被調整才對。</p>\n<p>如果想要達到「提醒」的作用，應該不需要那麼尖銳的音量才對。</p>\n<p>既然車子可以搭配喇叭，那麼行人也應該配戴喇叭，<strong>看到三寶開車或是貪污的政治人物，就應該到他面前吧吧兩下，表達自己微不足道的憤怒</strong>。</p>\n<h3 id=\"霸凌二人組\"><a href=\"#霸凌二人組\" class=\"headerlink\" title=\"霸凌二人組\"></a>霸凌二人組</h3><p>關於霸凌這個觀點巧妙地和伊坂筆下出現的霸凌『野菜組』結合。亨因為跟一般的小孩不同，所以在學校時常常被『野菜組』霸凌。但他並不以為意，因為他知道這是人性下的醜陋，這群人只是因為無聊所以只好用這種方式來欺負別人。亨也習慣這樣的事情，「因為我不討人喜歡，所以大家都霸凌我」。當然伊坂幸太郎是不會讓這種人好過的，故事結尾也巧妙地讓亨返回一擊。（讓我感動的是，當圭一說他下定決心要站出來時，亨說的那句：「加油」）</p>\n<p>只要有人跟一般人不同，就會有霸凌的存在，因為暴力讓人感覺很爽。</p>\n<p>而且在學校時不用負太多責任不是嗎？有哪個學校會希望自己的學生霸凌？有哪個老師希望自己的班級霸凌？有哪個家長希望自己的小孩霸凌？</p>\n<p>所以當霸凌這件事發生，大家採取的動作不是遏止、而是隱瞞，所以他們更加為所欲為，因為不用負責任，而且還有那麼多人在幫你。</p>\n<h3 id=\"關於媒體\"><a href=\"#關於媒體\" class=\"headerlink\" title=\"關於媒體\"></a>關於媒體</h3><p>媒體也常常出現在伊坂的筆下。之前才看過《64》、《虛線的惡意》，都是在說媒體、新聞業下的黑暗面。</p>\n<p>但是，這次角度從另外一邊來看。因為這件事更有趣不是嗎？大家都想看，所以就會有人去寫這種報導。然後民眾又可以把罪過全部推給記者，好像自己完全沒有責任似的。那為什麼壹週刊一樣那麼暢銷、為什麼八卦點擊率還是那麼高，民眾對這種報導還不是一樣樂見其成。</p>\n<p>所以到底是把媒體搞成這個樣子的？</p>\n<p>但是正如人類中有好人跟壞人，記者也有分好記者跟壞記者，這次是介紹好的記者。裡頭的阿玉因為對自己的報導害死了一位棒球選手感到愧疚，所以決定在這次車禍事件讓翠和丹羽遠走高飛，隱居他處。</p>\n<p>故事的橋段還有一句，「咦？你怎麼變得那麼乖，這樣怎麼當記者？」當亨純真地問著這句話時不禁笑了出來。</p>\n<p>「鏡頭具有抑制對方行為的力量」，所以在拍攝的時候都有種優越感，彷彿自己可以掌握全世界一樣。隱含在生活中的小道理我喜歡伊坂在敘事的過程中，將生活的小道理信手拈來，巧妙無痕地放入小說中的那種氣氛。就好像有人可以自私地害得整條高速公路都塞車一樣、就好像有人會把全世界的號誌燈都當作綠燈一樣。不管怎麼樣，還是有那些對道德無動於衷的人對吧？</p>\n<p>伊坂不會把這些道理赤裸裸地說清楚講明白，而是用巧妙的比喻帶過，卻又在故事結束後令人深思。</p>\n<p>「就好像媽媽說吃青椒才可以吃甜點那樣嗎？」明明只是一個等價交換的道理，伊坂卻可以依照角色上面的不同，描述出不同的說法。想像這樣的話語從一般的小孩口中說出來，真的在適切不過了！</p>\n<h3 id=\"尾聲（お終い）\"><a href=\"#尾聲（お終い）\" class=\"headerlink\" title=\"尾聲（お終い）\"></a>尾聲（お終い）</h3><p>在小說進入尾聲階段時，亨曾經鼓勵圭一，希望他可以走出被霸凌的陰影，勇敢起身對抗。「那種影片不好玩，所以大家都不會在意的」，然後拿出法蘭克‧札帕的名言出來，說：「人類所嘗試的事情中，有百分之九十九都是失敗，所以失敗是正常的事情」。這句話可以說是老生常談，但是搭配劇情之後，竟然亂熱血一把的。伊坂小說的尾聲，總會讓人意想不到，包括安田太太的帽子、開頭良夫買的青蛙擺飾、殺人埋藏的屍體、牙醫事件、車子最後的下落，都做了一個完美的交代。這次的結局讓人看得十分過癮，還特別將那四台車的第一個字連接變成『お。し。ま。い』</p>\n<p>伊坂的小說通常會用一個人物當作代表，引用他說過的名言來貫穿整個故事。</p>\n<p>這次的主角是「法蘭克．札帕」是一位歌手，他的生涯我不是很清楚，上了維基百科查了一下，也沒有很明確的資料，所以我就不多做介紹，直接把連結貼給大家看看好了。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>自從實習生活開始之後已經很久沒有看小說了，不過仔細想想，如果把滑 FB 的時間拿來看書，應該可以偷到不少時間，於是假日心一狠，把之前很想看的小說全部搜刮起來…。但事實告訴我，這種衝動還是得小心啊！噴了 2200 多…，我得好好省吃儉用了。</p>\n<h2 id=\"汽油生活-🚗🚕🚙\"><a href=\"#汽油生活-🚗🚕🚙\" class=\"headerlink\" title=\"汽油生活 🚗🚕🚙\"></a>汽油生活 🚗🚕🚙</h2><p>這次的作品是從一輛汽車的角度出發，這已經不是伊坂第一次嘗試了，《死神系列作》、《夜之國的庫帕》，都是以非人類的角度來作描寫，觀察人類。</p>\n<p>這一次的主角是望月一家，有一次的旅程中望月一家載到一位大名鼎鼎的女藝人荒木翠，之後開啟一連串奇怪的事件中。汽車這次的作品中，由於故事中的敘事者都是以第一人稱出發，所以裡頭也有許多關於汽車的品牌跟故事，裡頭中出現的有關於汽車的心聲，也是讓人莞爾一笑的插曲之一。</p>\n<p><strong>新手駕駛反而是安全的，因為一旦開始鬆懈，就是危險的開始。</strong>這是我很喜歡伊坂幸太郎風格的原因之一，他很擅長把這些東西拿進作品裡當作比喻，不管是讓我們思考也好；或是劇情的走向也好，我看得挺過癮的。**</p>\n<h3 id=\"喇叭的存在目的-🎺\"><a href=\"#喇叭的存在目的-🎺\" class=\"headerlink\" title=\"喇叭的存在目的 🎺\"></a>喇叭的存在目的 🎺</h3><p>喇叭似乎只是為了發洩憤怒而存在的。</p>\n<p>那為什麼喇叭發出的聲音那麼低俗且刺耳呢？如果汽車出廠時可以對喇叭多用點心，想必也可以增加賣點吧！</p>\n<p>而且喇叭聲通常是爭端的來源之一，人類會對這種如突其來的噪音感到煩躁。試著想想喇叭製造的目的，應該是為了提醒行人、前方車輛：「唷，我在這裡哦！唷，前方已經綠燈了哦！」而存在的吧？</p>\n<p>雖然喇叭的音量可以由按下的力道調整，但是那種音量還是會嚇到別人，也有可能引起別人不滿。更不用說有時會在路上看見橫行的汽車，喇叭按著不放，似乎只是想用這種方式宣洩自己的不滿而已，根本沒有任何提醒的作用。</p>\n<p>為什麼人類那麼喜歡這種原始而粗暴的方式呢？只因為這樣子很爽，發洩情緒的感覺讓自己產生優越感。備而不用是人類最愚蠢的地方。他們覺得也許會用到，所以就把什麼都保留下來。如果這樣一想，喇叭的聲音就應該被調整才對。</p>\n<p>如果想要達到「提醒」的作用，應該不需要那麼尖銳的音量才對。</p>\n<p>既然車子可以搭配喇叭，那麼行人也應該配戴喇叭，<strong>看到三寶開車或是貪污的政治人物，就應該到他面前吧吧兩下，表達自己微不足道的憤怒</strong>。</p>\n<h3 id=\"霸凌二人組\"><a href=\"#霸凌二人組\" class=\"headerlink\" title=\"霸凌二人組\"></a>霸凌二人組</h3><p>關於霸凌這個觀點巧妙地和伊坂筆下出現的霸凌『野菜組』結合。亨因為跟一般的小孩不同，所以在學校時常常被『野菜組』霸凌。但他並不以為意，因為他知道這是人性下的醜陋，這群人只是因為無聊所以只好用這種方式來欺負別人。亨也習慣這樣的事情，「因為我不討人喜歡，所以大家都霸凌我」。當然伊坂幸太郎是不會讓這種人好過的，故事結尾也巧妙地讓亨返回一擊。（讓我感動的是，當圭一說他下定決心要站出來時，亨說的那句：「加油」）</p>\n<p>只要有人跟一般人不同，就會有霸凌的存在，因為暴力讓人感覺很爽。</p>\n<p>而且在學校時不用負太多責任不是嗎？有哪個學校會希望自己的學生霸凌？有哪個老師希望自己的班級霸凌？有哪個家長希望自己的小孩霸凌？</p>\n<p>所以當霸凌這件事發生，大家採取的動作不是遏止、而是隱瞞，所以他們更加為所欲為，因為不用負責任，而且還有那麼多人在幫你。</p>\n<h3 id=\"關於媒體\"><a href=\"#關於媒體\" class=\"headerlink\" title=\"關於媒體\"></a>關於媒體</h3><p>媒體也常常出現在伊坂的筆下。之前才看過《64》、《虛線的惡意》，都是在說媒體、新聞業下的黑暗面。</p>\n<p>但是，這次角度從另外一邊來看。因為這件事更有趣不是嗎？大家都想看，所以就會有人去寫這種報導。然後民眾又可以把罪過全部推給記者，好像自己完全沒有責任似的。那為什麼壹週刊一樣那麼暢銷、為什麼八卦點擊率還是那麼高，民眾對這種報導還不是一樣樂見其成。</p>\n<p>所以到底是把媒體搞成這個樣子的？</p>\n<p>但是正如人類中有好人跟壞人，記者也有分好記者跟壞記者，這次是介紹好的記者。裡頭的阿玉因為對自己的報導害死了一位棒球選手感到愧疚，所以決定在這次車禍事件讓翠和丹羽遠走高飛，隱居他處。</p>\n<p>故事的橋段還有一句，「咦？你怎麼變得那麼乖，這樣怎麼當記者？」當亨純真地問著這句話時不禁笑了出來。</p>\n<p>「鏡頭具有抑制對方行為的力量」，所以在拍攝的時候都有種優越感，彷彿自己可以掌握全世界一樣。隱含在生活中的小道理我喜歡伊坂在敘事的過程中，將生活的小道理信手拈來，巧妙無痕地放入小說中的那種氣氛。就好像有人可以自私地害得整條高速公路都塞車一樣、就好像有人會把全世界的號誌燈都當作綠燈一樣。不管怎麼樣，還是有那些對道德無動於衷的人對吧？</p>\n<p>伊坂不會把這些道理赤裸裸地說清楚講明白，而是用巧妙的比喻帶過，卻又在故事結束後令人深思。</p>\n<p>「就好像媽媽說吃青椒才可以吃甜點那樣嗎？」明明只是一個等價交換的道理，伊坂卻可以依照角色上面的不同，描述出不同的說法。想像這樣的話語從一般的小孩口中說出來，真的在適切不過了！</p>\n<h3 id=\"尾聲（お終い）\"><a href=\"#尾聲（お終い）\" class=\"headerlink\" title=\"尾聲（お終い）\"></a>尾聲（お終い）</h3><p>在小說進入尾聲階段時，亨曾經鼓勵圭一，希望他可以走出被霸凌的陰影，勇敢起身對抗。「那種影片不好玩，所以大家都不會在意的」，然後拿出法蘭克‧札帕的名言出來，說：「人類所嘗試的事情中，有百分之九十九都是失敗，所以失敗是正常的事情」。這句話可以說是老生常談，但是搭配劇情之後，竟然亂熱血一把的。伊坂小說的尾聲，總會讓人意想不到，包括安田太太的帽子、開頭良夫買的青蛙擺飾、殺人埋藏的屍體、牙醫事件、車子最後的下落，都做了一個完美的交代。這次的結局讓人看得十分過癮，還特別將那四台車的第一個字連接變成『お。し。ま。い』</p>\n<p>伊坂的小說通常會用一個人物當作代表，引用他說過的名言來貫穿整個故事。</p>\n<p>這次的主角是「法蘭克．札帕」是一位歌手，他的生涯我不是很清楚，上了維基百科查了一下，也沒有很明確的資料，所以我就不多做介紹，直接把連結貼給大家看看好了。</p>\n"},{"title":"令人期待的 PostCSS","date":"2016-09-16T15:58:02.000Z","_content":"\n\n## 從 SASS 到 PostCSS\n\n大約在一年前，PostCSS 開始竄紅在前端生態圈裡，不外乎就是所謂的 preprocessor 的特性、高度客製化自己的 plugin、搶先使用 cssnext 的功能，還能夠搭配各種建構工具（gulp, webpack），用起來非常輕鬆寫意。\n\n### 變數\n\n雖然剛開始看到 PostCSS 的時候還挺興奮的，但隨即思考了一下：「真的有必要馬上把 SASS 取代掉嗎？」。\n\nPostCSS 的優點在於你能夠選擇你想要的 plugin，需要時再使用就好。舉變數的功能為例好了，[postcss-simple-vars](https://github.com/postcss/postcss-simple-vars) 能夠模擬 SASS 的變數宣告及使用行為。對我來說怎麼看都彆扭，因為 SASS 除了變數本身宣告之外，還有 map, list 的型別，而且具備了相當完整的 API 操作。例如：取值、判斷式、迴圈功能等。\n\n```scss\n\n$colors: (\n  main: #abc,\n  sub: #bac,\n  word: #333\n);\n\n.container {\n  background-color: map-get($colors, $main);\n  color: map-get($colors, word);\n}\n\n```\n\n就算使用 css spec 的 var 也是一樣，沒有 map 或 list 取值的功能。\n\n```scss\n\n:root {\n  --wordColor: #333;\n  --bgColor: #fafafa;\n}\n\nbody {\n  background-color: var(--wordColor);\n  color: var(--bgColor);\n}\n\n```\n\n（o.s：而且這樣子寫其實有點醜~~很醜~~）\n\n或者，SASS 的 @function 也能夠進一步將 `map-get`做包裝\n\n```scss\n\n$colors: (\n\n main: #abc,\n\n sub: #bac,\n\n word: #333\n\n);\n\n/* alias method for getting color from $colors map\n\n/// @param {$key} the key you want to choose\n\n///\n\n/// eg:\n\n color: c($word); \n\n*/\n\n@function c($key) {\n\n  @if map-has-key($colors, $key) {\n\n    @return map-get($colors, $key);\n\n  }\n\n  @else {\n\n    @error \"Unknown key #{$key}\";\n\n  }\n\n}\n\n.container {\n\n background-color: map-get($colors, $main);\n\n color: map-get($colors, word);\n\n}\n\n```\n\n因為 PostCSS 生態圈廣泛的原因，不少獨立開發者的插件很可能因為沒有在維護，或是因為疏忽而導致編譯錯誤有小 bug 等等的問題，相對之下 SASS 本身具有的功能相對完整的多。\n\n### mixins 跟 function\n\n相對應的 plugin 有  [postcss-mixins](https://github.com/postcss/postcss-mixins) 跟 [postcss-functions](https://github.com/andyjansson/postcss-functions)\n\n雖然模擬的 mixin 的行為，但如果要搭配判斷式使用的話，又要花一番功夫。\n\n```scss\n\n@mixin state($state,$namespace: '') {\n\n  @if ($namespace != ''){\n\n   .#{$namespace}-#{$state} {\n\n     text-transform: uppercase;\n\n   } \n\n  }\n\n  @else {\n\n    .${state} {\n\n      text-transform: uppercase;\n\n    }\n\n  }\n\n}\n\n```\n\n而 `function` 的部分也一樣，如果使用純 CSS 搭配 PostCSS 撰寫，沒有辦法使用 SASS 原生的 function。雖然能夠用 js 自定義 function，這一點其實還蠻吸引人的，但如果要模擬 SASS 相對應 function 的話，又要在重造一次輪子，不免顯得有些麻煩。\n\n### 相較於 SASS 還不成熟\n\n相對於 SASS 來說，PostCSS 其實還算蠻新的工具，雖然生態圈很廣泛，插件也多，但目前版本仍在快速變動中，也還有很多 issue 沒有解完，SASS 因為本身是使用 Ruby 撰寫，雖然速度會比 PostCSS 慢一些（好吧，應該是很多），但其穩定跟完善的 API 跟型別、語法，都是 PostCSS 還無法達到的程度。\n\n## PostCSS 的優勢\n\n來說說 PostCSS 的優勢吧！目前我最喜歡搭配使用的功能有 autoprefixer cssnano。\n\nautoprefixer 能夠幫你處理 CSS 麻煩的前綴，以往是使用 mixins 來解決，現在完全交給 PostCSS 處理就可以了，相對起來乾淨簡潔多了；cssnano 則是幫你處理 CSS minify，搭配 gulp 使用你可以只要安裝 gulp-postcss gulp-cssnano gulp-postcss gulp-sass 就可以進行 css 編譯跟最小化的動作了。\n\n除了上述的插件之外，我認為很棒的插件還有\n\n* `postcss-sorting`：根據定義的規則排序你的 css properties\n* `precss`：包含許多 sass-like 的功能\n* `stylelint`：lint 你的 CSS\n* `stylefmt`：根據 stylelint 的規則幫你 format css code\n* `doiuse`：幫你偵測目前 CSS 的瀏覽器支援度\n* livereload：搭配 webpack 的淫威之下，css-loader 本身就幫你設定好了 hot reload 的配置，只要一改動 style 檔案，就可以在不用重新載入的情況下將新的 style 套入。\n\n### 為什麼我不敢離開 SASS\n\n搭配 PostCSS 的確非常方便，但我不認為兩者同時套用能夠減少日常開發，畢竟一旦出錯，就得花時間去研究底下的運行機制。有可能 PostCSS 編譯完之後再給 SASS 編譯會報錯；又或者某個套件的 bug 導致檔案沒有完整編譯，某段的 CSS 代碼沒有生效等等，都是潛在的問題，目前的開發我也只有使用 `autoprefixer` `cssnano` `stylelint` 來幫助簡化、檢查 CSS 而已。\n\n## 結論\n\n或許最後 SASS 會完全被 PostCSS 打敗也說不定，但 SASS 本身完整、成熟的架構跟語法，還是讓我不想要輕易完全使用 PostCSS 的最大主因，哪天等 PostCSS 成熟到能夠完全獨立於 SASS 的時候，我可能就會轉移過去了吧！就像當初在學 CSS 的時候，也是猶豫了很久才開始學習 SASS 那樣。不過，這兩者（sass, postCSS）是可以共存、互補的。\n\n既然享受了 PostCSS 高度彈性化的優點，我們接下來也不得不關心抽象化滲透，因為插件有可能因為時代的變遷，或是開發者不在維護的關係而出現錯誤。這些插件分別看來功能微小，但是全部加起來之後能夠省下的時間也是很巨大的。；而 SASS 完整的語法、變數系統雖然需要花一段時間學習，卻能夠用統一的語法大幅提升 CSS 維護度。\n\n在這個組件化盛行的年代，前端工程的開發逐漸傾向於維護模組化的檔案（react, css-modules 等），最後可能不需要那麼多繁雜的操作（此指 sass 的 function、變數等），而是回歸到最原始的純 css 也說不定。\n\n### reference\n\n- [PostCSS](https://github.com/postcss/postcss)\n- [I'm excited about Postcss, but I'm scared to leaving SASS](http://davidtheclark.com/excited-about-postcss/)\n- [Breaking up with scss](https://benfrain.com/breaking-up-with-sass-postcss/)\n- [cssnext](http://cssnext.io/)\n\n","source":"_posts/go-to-postcss-or-not.md","raw":"---\ntitle: 令人期待的 PostCSS\ncategories: 前端\ntags:\n  - postcss\n  - sass\ndate: 2016-09-16 23:58:02\n---\n\n\n## 從 SASS 到 PostCSS\n\n大約在一年前，PostCSS 開始竄紅在前端生態圈裡，不外乎就是所謂的 preprocessor 的特性、高度客製化自己的 plugin、搶先使用 cssnext 的功能，還能夠搭配各種建構工具（gulp, webpack），用起來非常輕鬆寫意。\n\n### 變數\n\n雖然剛開始看到 PostCSS 的時候還挺興奮的，但隨即思考了一下：「真的有必要馬上把 SASS 取代掉嗎？」。\n\nPostCSS 的優點在於你能夠選擇你想要的 plugin，需要時再使用就好。舉變數的功能為例好了，[postcss-simple-vars](https://github.com/postcss/postcss-simple-vars) 能夠模擬 SASS 的變數宣告及使用行為。對我來說怎麼看都彆扭，因為 SASS 除了變數本身宣告之外，還有 map, list 的型別，而且具備了相當完整的 API 操作。例如：取值、判斷式、迴圈功能等。\n\n```scss\n\n$colors: (\n  main: #abc,\n  sub: #bac,\n  word: #333\n);\n\n.container {\n  background-color: map-get($colors, $main);\n  color: map-get($colors, word);\n}\n\n```\n\n就算使用 css spec 的 var 也是一樣，沒有 map 或 list 取值的功能。\n\n```scss\n\n:root {\n  --wordColor: #333;\n  --bgColor: #fafafa;\n}\n\nbody {\n  background-color: var(--wordColor);\n  color: var(--bgColor);\n}\n\n```\n\n（o.s：而且這樣子寫其實有點醜~~很醜~~）\n\n或者，SASS 的 @function 也能夠進一步將 `map-get`做包裝\n\n```scss\n\n$colors: (\n\n main: #abc,\n\n sub: #bac,\n\n word: #333\n\n);\n\n/* alias method for getting color from $colors map\n\n/// @param {$key} the key you want to choose\n\n///\n\n/// eg:\n\n color: c($word); \n\n*/\n\n@function c($key) {\n\n  @if map-has-key($colors, $key) {\n\n    @return map-get($colors, $key);\n\n  }\n\n  @else {\n\n    @error \"Unknown key #{$key}\";\n\n  }\n\n}\n\n.container {\n\n background-color: map-get($colors, $main);\n\n color: map-get($colors, word);\n\n}\n\n```\n\n因為 PostCSS 生態圈廣泛的原因，不少獨立開發者的插件很可能因為沒有在維護，或是因為疏忽而導致編譯錯誤有小 bug 等等的問題，相對之下 SASS 本身具有的功能相對完整的多。\n\n### mixins 跟 function\n\n相對應的 plugin 有  [postcss-mixins](https://github.com/postcss/postcss-mixins) 跟 [postcss-functions](https://github.com/andyjansson/postcss-functions)\n\n雖然模擬的 mixin 的行為，但如果要搭配判斷式使用的話，又要花一番功夫。\n\n```scss\n\n@mixin state($state,$namespace: '') {\n\n  @if ($namespace != ''){\n\n   .#{$namespace}-#{$state} {\n\n     text-transform: uppercase;\n\n   } \n\n  }\n\n  @else {\n\n    .${state} {\n\n      text-transform: uppercase;\n\n    }\n\n  }\n\n}\n\n```\n\n而 `function` 的部分也一樣，如果使用純 CSS 搭配 PostCSS 撰寫，沒有辦法使用 SASS 原生的 function。雖然能夠用 js 自定義 function，這一點其實還蠻吸引人的，但如果要模擬 SASS 相對應 function 的話，又要在重造一次輪子，不免顯得有些麻煩。\n\n### 相較於 SASS 還不成熟\n\n相對於 SASS 來說，PostCSS 其實還算蠻新的工具，雖然生態圈很廣泛，插件也多，但目前版本仍在快速變動中，也還有很多 issue 沒有解完，SASS 因為本身是使用 Ruby 撰寫，雖然速度會比 PostCSS 慢一些（好吧，應該是很多），但其穩定跟完善的 API 跟型別、語法，都是 PostCSS 還無法達到的程度。\n\n## PostCSS 的優勢\n\n來說說 PostCSS 的優勢吧！目前我最喜歡搭配使用的功能有 autoprefixer cssnano。\n\nautoprefixer 能夠幫你處理 CSS 麻煩的前綴，以往是使用 mixins 來解決，現在完全交給 PostCSS 處理就可以了，相對起來乾淨簡潔多了；cssnano 則是幫你處理 CSS minify，搭配 gulp 使用你可以只要安裝 gulp-postcss gulp-cssnano gulp-postcss gulp-sass 就可以進行 css 編譯跟最小化的動作了。\n\n除了上述的插件之外，我認為很棒的插件還有\n\n* `postcss-sorting`：根據定義的規則排序你的 css properties\n* `precss`：包含許多 sass-like 的功能\n* `stylelint`：lint 你的 CSS\n* `stylefmt`：根據 stylelint 的規則幫你 format css code\n* `doiuse`：幫你偵測目前 CSS 的瀏覽器支援度\n* livereload：搭配 webpack 的淫威之下，css-loader 本身就幫你設定好了 hot reload 的配置，只要一改動 style 檔案，就可以在不用重新載入的情況下將新的 style 套入。\n\n### 為什麼我不敢離開 SASS\n\n搭配 PostCSS 的確非常方便，但我不認為兩者同時套用能夠減少日常開發，畢竟一旦出錯，就得花時間去研究底下的運行機制。有可能 PostCSS 編譯完之後再給 SASS 編譯會報錯；又或者某個套件的 bug 導致檔案沒有完整編譯，某段的 CSS 代碼沒有生效等等，都是潛在的問題，目前的開發我也只有使用 `autoprefixer` `cssnano` `stylelint` 來幫助簡化、檢查 CSS 而已。\n\n## 結論\n\n或許最後 SASS 會完全被 PostCSS 打敗也說不定，但 SASS 本身完整、成熟的架構跟語法，還是讓我不想要輕易完全使用 PostCSS 的最大主因，哪天等 PostCSS 成熟到能夠完全獨立於 SASS 的時候，我可能就會轉移過去了吧！就像當初在學 CSS 的時候，也是猶豫了很久才開始學習 SASS 那樣。不過，這兩者（sass, postCSS）是可以共存、互補的。\n\n既然享受了 PostCSS 高度彈性化的優點，我們接下來也不得不關心抽象化滲透，因為插件有可能因為時代的變遷，或是開發者不在維護的關係而出現錯誤。這些插件分別看來功能微小，但是全部加起來之後能夠省下的時間也是很巨大的。；而 SASS 完整的語法、變數系統雖然需要花一段時間學習，卻能夠用統一的語法大幅提升 CSS 維護度。\n\n在這個組件化盛行的年代，前端工程的開發逐漸傾向於維護模組化的檔案（react, css-modules 等），最後可能不需要那麼多繁雜的操作（此指 sass 的 function、變數等），而是回歸到最原始的純 css 也說不定。\n\n### reference\n\n- [PostCSS](https://github.com/postcss/postcss)\n- [I'm excited about Postcss, but I'm scared to leaving SASS](http://davidtheclark.com/excited-about-postcss/)\n- [Breaking up with scss](https://benfrain.com/breaking-up-with-sass-postcss/)\n- [cssnext](http://cssnext.io/)\n\n","slug":"go-to-postcss-or-not","published":1,"updated":"2017-02-28T15:04:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqs001aiw5tseg8f5pk","content":"<h2 id=\"從-SASS-到-PostCSS\"><a href=\"#從-SASS-到-PostCSS\" class=\"headerlink\" title=\"從 SASS 到 PostCSS\"></a>從 SASS 到 PostCSS</h2><p>大約在一年前，PostCSS 開始竄紅在前端生態圈裡，不外乎就是所謂的 preprocessor 的特性、高度客製化自己的 plugin、搶先使用 cssnext 的功能，還能夠搭配各種建構工具（gulp, webpack），用起來非常輕鬆寫意。</p>\n<h3 id=\"變數\"><a href=\"#變數\" class=\"headerlink\" title=\"變數\"></a>變數</h3><p>雖然剛開始看到 PostCSS 的時候還挺興奮的，但隨即思考了一下：「真的有必要馬上把 SASS 取代掉嗎？」。</p>\n<p>PostCSS 的優點在於你能夠選擇你想要的 plugin，需要時再使用就好。舉變數的功能為例好了，<a href=\"https://github.com/postcss/postcss-simple-vars\" target=\"_blank\" rel=\"external\">postcss-simple-vars</a> 能夠模擬 SASS 的變數宣告及使用行為。對我來說怎麼看都彆扭，因為 SASS 除了變數本身宣告之外，還有 map, list 的型別，而且具備了相當完整的 API 操作。例如：取值、判斷式、迴圈功能等。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#abc</span>,</div><div class=\"line\">  sub: <span class=\"number\">#bac</span>,</div><div class=\"line\">  word: <span class=\"number\">#333</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$main</span>);</div><div class=\"line\">  <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, word);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>就算使用 css spec 的 var 也是一樣，沒有 map 或 list 取值的功能。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">:root &#123;</div><div class=\"line\">  --wordColor: <span class=\"number\">#333</span>;</div><div class=\"line\">  --bgColor: <span class=\"number\">#fafafa</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: var(--wordColor);</div><div class=\"line\">  <span class=\"attribute\">color</span>: var(--bgColor);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>（o.s：而且這樣子寫其實有點醜<del>很醜</del>）</p>\n<p>或者，SASS 的 @function 也能夠進一步將 <code>map-get</code>做包裝</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\"></div><div class=\"line\"> main: <span class=\"number\">#abc</span>,</div><div class=\"line\"></div><div class=\"line\"> sub: <span class=\"number\">#bac</span>,</div><div class=\"line\"></div><div class=\"line\"> word: <span class=\"number\">#333</span></div><div class=\"line\"></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* alias method for getting color from $colors map</span></div><div class=\"line\"></div><div class=\"line\">/// @param &#123;$key&#125; the key you want to choose</div><div class=\"line\"></div><div class=\"line\">///</div><div class=\"line\"></div><div class=\"line\">/// eg:</div><div class=\"line\"></div><div class=\"line\"> color: c($word); </div><div class=\"line\"></div><div class=\"line\">*/</div><div class=\"line\"></div><div class=\"line\">@function c(<span class=\"variable\">$key</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">if</span> map-has-key(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">    @return map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>);</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\"></div><div class=\"line\">    @error <span class=\"string\">\"Unknown key #&#123;$key&#125;\"</span>;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$main</span>);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, word);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因為 PostCSS 生態圈廣泛的原因，不少獨立開發者的插件很可能因為沒有在維護，或是因為疏忽而導致編譯錯誤有小 bug 等等的問題，相對之下 SASS 本身具有的功能相對完整的多。</p>\n<h3 id=\"mixins-跟-function\"><a href=\"#mixins-跟-function\" class=\"headerlink\" title=\"mixins 跟 function\"></a>mixins 跟 function</h3><p>相對應的 plugin 有  <a href=\"https://github.com/postcss/postcss-mixins\" target=\"_blank\" rel=\"external\">postcss-mixins</a> 跟 <a href=\"https://github.com/andyjansson/postcss-functions\" target=\"_blank\" rel=\"external\">postcss-functions</a></p>\n<p>雖然模擬的 mixin 的行為，但如果要搭配判斷式使用的話，又要花一番功夫。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> state(<span class=\"variable\">$state</span>,<span class=\"variable\">$namespace</span>: <span class=\"string\">''</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">if</span> (<span class=\"variable\">$namespace</span> != <span class=\"string\">''</span>)&#123;</div><div class=\"line\"></div><div class=\"line\">   .#&#123;<span class=\"variable\">$namespace</span>&#125;-#&#123;<span class=\"variable\">$state</span>&#125; &#123;</div><div class=\"line\"></div><div class=\"line\">     <span class=\"attribute\">text-transform</span>: uppercase;</div><div class=\"line\"></div><div class=\"line\">   &#125; </div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\"></div><div class=\"line\">    .$&#123;state&#125; &#123;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"attribute\">text-transform</span>: uppercase;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>而 <code>function</code> 的部分也一樣，如果使用純 CSS 搭配 PostCSS 撰寫，沒有辦法使用 SASS 原生的 function。雖然能夠用 js 自定義 function，這一點其實還蠻吸引人的，但如果要模擬 SASS 相對應 function 的話，又要在重造一次輪子，不免顯得有些麻煩。</p>\n<h3 id=\"相較於-SASS-還不成熟\"><a href=\"#相較於-SASS-還不成熟\" class=\"headerlink\" title=\"相較於 SASS 還不成熟\"></a>相較於 SASS 還不成熟</h3><p>相對於 SASS 來說，PostCSS 其實還算蠻新的工具，雖然生態圈很廣泛，插件也多，但目前版本仍在快速變動中，也還有很多 issue 沒有解完，SASS 因為本身是使用 Ruby 撰寫，雖然速度會比 PostCSS 慢一些（好吧，應該是很多），但其穩定跟完善的 API 跟型別、語法，都是 PostCSS 還無法達到的程度。</p>\n<h2 id=\"PostCSS-的優勢\"><a href=\"#PostCSS-的優勢\" class=\"headerlink\" title=\"PostCSS 的優勢\"></a>PostCSS 的優勢</h2><p>來說說 PostCSS 的優勢吧！目前我最喜歡搭配使用的功能有 autoprefixer cssnano。</p>\n<p>autoprefixer 能夠幫你處理 CSS 麻煩的前綴，以往是使用 mixins 來解決，現在完全交給 PostCSS 處理就可以了，相對起來乾淨簡潔多了；cssnano 則是幫你處理 CSS minify，搭配 gulp 使用你可以只要安裝 gulp-postcss gulp-cssnano gulp-postcss gulp-sass 就可以進行 css 編譯跟最小化的動作了。</p>\n<p>除了上述的插件之外，我認為很棒的插件還有</p>\n<ul>\n<li><code>postcss-sorting</code>：根據定義的規則排序你的 css properties</li>\n<li><code>precss</code>：包含許多 sass-like 的功能</li>\n<li><code>stylelint</code>：lint 你的 CSS</li>\n<li><code>stylefmt</code>：根據 stylelint 的規則幫你 format css code</li>\n<li><code>doiuse</code>：幫你偵測目前 CSS 的瀏覽器支援度</li>\n<li>livereload：搭配 webpack 的淫威之下，css-loader 本身就幫你設定好了 hot reload 的配置，只要一改動 style 檔案，就可以在不用重新載入的情況下將新的 style 套入。</li>\n</ul>\n<h3 id=\"為什麼我不敢離開-SASS\"><a href=\"#為什麼我不敢離開-SASS\" class=\"headerlink\" title=\"為什麼我不敢離開 SASS\"></a>為什麼我不敢離開 SASS</h3><p>搭配 PostCSS 的確非常方便，但我不認為兩者同時套用能夠減少日常開發，畢竟一旦出錯，就得花時間去研究底下的運行機制。有可能 PostCSS 編譯完之後再給 SASS 編譯會報錯；又或者某個套件的 bug 導致檔案沒有完整編譯，某段的 CSS 代碼沒有生效等等，都是潛在的問題，目前的開發我也只有使用 <code>autoprefixer</code> <code>cssnano</code> <code>stylelint</code> 來幫助簡化、檢查 CSS 而已。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>或許最後 SASS 會完全被 PostCSS 打敗也說不定，但 SASS 本身完整、成熟的架構跟語法，還是讓我不想要輕易完全使用 PostCSS 的最大主因，哪天等 PostCSS 成熟到能夠完全獨立於 SASS 的時候，我可能就會轉移過去了吧！就像當初在學 CSS 的時候，也是猶豫了很久才開始學習 SASS 那樣。不過，這兩者（sass, postCSS）是可以共存、互補的。</p>\n<p>既然享受了 PostCSS 高度彈性化的優點，我們接下來也不得不關心抽象化滲透，因為插件有可能因為時代的變遷，或是開發者不在維護的關係而出現錯誤。這些插件分別看來功能微小，但是全部加起來之後能夠省下的時間也是很巨大的。；而 SASS 完整的語法、變數系統雖然需要花一段時間學習，卻能夠用統一的語法大幅提升 CSS 維護度。</p>\n<p>在這個組件化盛行的年代，前端工程的開發逐漸傾向於維護模組化的檔案（react, css-modules 等），最後可能不需要那麼多繁雜的操作（此指 sass 的 function、變數等），而是回歸到最原始的純 css 也說不定。</p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><ul>\n<li><a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">PostCSS</a></li>\n<li><a href=\"http://davidtheclark.com/excited-about-postcss/\" target=\"_blank\" rel=\"external\">I’m excited about Postcss, but I’m scared to leaving SASS</a></li>\n<li><a href=\"https://benfrain.com/breaking-up-with-sass-postcss/\" target=\"_blank\" rel=\"external\">Breaking up with scss</a></li>\n<li><a href=\"http://cssnext.io/\" target=\"_blank\" rel=\"external\">cssnext</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"從-SASS-到-PostCSS\"><a href=\"#從-SASS-到-PostCSS\" class=\"headerlink\" title=\"從 SASS 到 PostCSS\"></a>從 SASS 到 PostCSS</h2><p>大約在一年前，PostCSS 開始竄紅在前端生態圈裡，不外乎就是所謂的 preprocessor 的特性、高度客製化自己的 plugin、搶先使用 cssnext 的功能，還能夠搭配各種建構工具（gulp, webpack），用起來非常輕鬆寫意。</p>\n<h3 id=\"變數\"><a href=\"#變數\" class=\"headerlink\" title=\"變數\"></a>變數</h3><p>雖然剛開始看到 PostCSS 的時候還挺興奮的，但隨即思考了一下：「真的有必要馬上把 SASS 取代掉嗎？」。</p>\n<p>PostCSS 的優點在於你能夠選擇你想要的 plugin，需要時再使用就好。舉變數的功能為例好了，<a href=\"https://github.com/postcss/postcss-simple-vars\" target=\"_blank\" rel=\"external\">postcss-simple-vars</a> 能夠模擬 SASS 的變數宣告及使用行為。對我來說怎麼看都彆扭，因為 SASS 除了變數本身宣告之外，還有 map, list 的型別，而且具備了相當完整的 API 操作。例如：取值、判斷式、迴圈功能等。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\">  main: <span class=\"number\">#abc</span>,</div><div class=\"line\">  sub: <span class=\"number\">#bac</span>,</div><div class=\"line\">  word: <span class=\"number\">#333</span></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$main</span>);</div><div class=\"line\">  <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, word);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>就算使用 css spec 的 var 也是一樣，沒有 map 或 list 取值的功能。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">:root &#123;</div><div class=\"line\">  --wordColor: <span class=\"number\">#333</span>;</div><div class=\"line\">  --bgColor: <span class=\"number\">#fafafa</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">background-color</span>: var(--wordColor);</div><div class=\"line\">  <span class=\"attribute\">color</span>: var(--bgColor);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>（o.s：而且這樣子寫其實有點醜<del>很醜</del>）</p>\n<p>或者，SASS 的 @function 也能夠進一步將 <code>map-get</code>做包裝</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"variable\">$colors</span>: (</div><div class=\"line\"></div><div class=\"line\"> main: <span class=\"number\">#abc</span>,</div><div class=\"line\"></div><div class=\"line\"> sub: <span class=\"number\">#bac</span>,</div><div class=\"line\"></div><div class=\"line\"> word: <span class=\"number\">#333</span></div><div class=\"line\"></div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* alias method for getting color from $colors map</span></div><div class=\"line\"></div><div class=\"line\">/// @param &#123;$key&#125; the key you want to choose</div><div class=\"line\"></div><div class=\"line\">///</div><div class=\"line\"></div><div class=\"line\">/// eg:</div><div class=\"line\"></div><div class=\"line\"> color: c($word); </div><div class=\"line\"></div><div class=\"line\">*/</div><div class=\"line\"></div><div class=\"line\">@function c(<span class=\"variable\">$key</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">if</span> map-has-key(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">    @return map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$key</span>);</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\"></div><div class=\"line\">    @error <span class=\"string\">\"Unknown key #&#123;$key&#125;\"</span>;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"attribute\">background-color</span>: map-get(<span class=\"variable\">$colors</span>, <span class=\"variable\">$main</span>);</div><div class=\"line\"></div><div class=\"line\"> <span class=\"attribute\">color</span>: map-get(<span class=\"variable\">$colors</span>, word);</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>因為 PostCSS 生態圈廣泛的原因，不少獨立開發者的插件很可能因為沒有在維護，或是因為疏忽而導致編譯錯誤有小 bug 等等的問題，相對之下 SASS 本身具有的功能相對完整的多。</p>\n<h3 id=\"mixins-跟-function\"><a href=\"#mixins-跟-function\" class=\"headerlink\" title=\"mixins 跟 function\"></a>mixins 跟 function</h3><p>相對應的 plugin 有  <a href=\"https://github.com/postcss/postcss-mixins\" target=\"_blank\" rel=\"external\">postcss-mixins</a> 跟 <a href=\"https://github.com/andyjansson/postcss-functions\" target=\"_blank\" rel=\"external\">postcss-functions</a></p>\n<p>雖然模擬的 mixin 的行為，但如果要搭配判斷式使用的話，又要花一番功夫。</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">mixin</span> state(<span class=\"variable\">$state</span>,<span class=\"variable\">$namespace</span>: <span class=\"string\">''</span>) &#123;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">if</span> (<span class=\"variable\">$namespace</span> != <span class=\"string\">''</span>)&#123;</div><div class=\"line\"></div><div class=\"line\">   .#&#123;<span class=\"variable\">$namespace</span>&#125;-#&#123;<span class=\"variable\">$state</span>&#125; &#123;</div><div class=\"line\"></div><div class=\"line\">     <span class=\"attribute\">text-transform</span>: uppercase;</div><div class=\"line\"></div><div class=\"line\">   &#125; </div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\"></div><div class=\"line\">    .$&#123;state&#125; &#123;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"attribute\">text-transform</span>: uppercase;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>而 <code>function</code> 的部分也一樣，如果使用純 CSS 搭配 PostCSS 撰寫，沒有辦法使用 SASS 原生的 function。雖然能夠用 js 自定義 function，這一點其實還蠻吸引人的，但如果要模擬 SASS 相對應 function 的話，又要在重造一次輪子，不免顯得有些麻煩。</p>\n<h3 id=\"相較於-SASS-還不成熟\"><a href=\"#相較於-SASS-還不成熟\" class=\"headerlink\" title=\"相較於 SASS 還不成熟\"></a>相較於 SASS 還不成熟</h3><p>相對於 SASS 來說，PostCSS 其實還算蠻新的工具，雖然生態圈很廣泛，插件也多，但目前版本仍在快速變動中，也還有很多 issue 沒有解完，SASS 因為本身是使用 Ruby 撰寫，雖然速度會比 PostCSS 慢一些（好吧，應該是很多），但其穩定跟完善的 API 跟型別、語法，都是 PostCSS 還無法達到的程度。</p>\n<h2 id=\"PostCSS-的優勢\"><a href=\"#PostCSS-的優勢\" class=\"headerlink\" title=\"PostCSS 的優勢\"></a>PostCSS 的優勢</h2><p>來說說 PostCSS 的優勢吧！目前我最喜歡搭配使用的功能有 autoprefixer cssnano。</p>\n<p>autoprefixer 能夠幫你處理 CSS 麻煩的前綴，以往是使用 mixins 來解決，現在完全交給 PostCSS 處理就可以了，相對起來乾淨簡潔多了；cssnano 則是幫你處理 CSS minify，搭配 gulp 使用你可以只要安裝 gulp-postcss gulp-cssnano gulp-postcss gulp-sass 就可以進行 css 編譯跟最小化的動作了。</p>\n<p>除了上述的插件之外，我認為很棒的插件還有</p>\n<ul>\n<li><code>postcss-sorting</code>：根據定義的規則排序你的 css properties</li>\n<li><code>precss</code>：包含許多 sass-like 的功能</li>\n<li><code>stylelint</code>：lint 你的 CSS</li>\n<li><code>stylefmt</code>：根據 stylelint 的規則幫你 format css code</li>\n<li><code>doiuse</code>：幫你偵測目前 CSS 的瀏覽器支援度</li>\n<li>livereload：搭配 webpack 的淫威之下，css-loader 本身就幫你設定好了 hot reload 的配置，只要一改動 style 檔案，就可以在不用重新載入的情況下將新的 style 套入。</li>\n</ul>\n<h3 id=\"為什麼我不敢離開-SASS\"><a href=\"#為什麼我不敢離開-SASS\" class=\"headerlink\" title=\"為什麼我不敢離開 SASS\"></a>為什麼我不敢離開 SASS</h3><p>搭配 PostCSS 的確非常方便，但我不認為兩者同時套用能夠減少日常開發，畢竟一旦出錯，就得花時間去研究底下的運行機制。有可能 PostCSS 編譯完之後再給 SASS 編譯會報錯；又或者某個套件的 bug 導致檔案沒有完整編譯，某段的 CSS 代碼沒有生效等等，都是潛在的問題，目前的開發我也只有使用 <code>autoprefixer</code> <code>cssnano</code> <code>stylelint</code> 來幫助簡化、檢查 CSS 而已。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>或許最後 SASS 會完全被 PostCSS 打敗也說不定，但 SASS 本身完整、成熟的架構跟語法，還是讓我不想要輕易完全使用 PostCSS 的最大主因，哪天等 PostCSS 成熟到能夠完全獨立於 SASS 的時候，我可能就會轉移過去了吧！就像當初在學 CSS 的時候，也是猶豫了很久才開始學習 SASS 那樣。不過，這兩者（sass, postCSS）是可以共存、互補的。</p>\n<p>既然享受了 PostCSS 高度彈性化的優點，我們接下來也不得不關心抽象化滲透，因為插件有可能因為時代的變遷，或是開發者不在維護的關係而出現錯誤。這些插件分別看來功能微小，但是全部加起來之後能夠省下的時間也是很巨大的。；而 SASS 完整的語法、變數系統雖然需要花一段時間學習，卻能夠用統一的語法大幅提升 CSS 維護度。</p>\n<p>在這個組件化盛行的年代，前端工程的開發逐漸傾向於維護模組化的檔案（react, css-modules 等），最後可能不需要那麼多繁雜的操作（此指 sass 的 function、變數等），而是回歸到最原始的純 css 也說不定。</p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><ul>\n<li><a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">PostCSS</a></li>\n<li><a href=\"http://davidtheclark.com/excited-about-postcss/\" target=\"_blank\" rel=\"external\">I’m excited about Postcss, but I’m scared to leaving SASS</a></li>\n<li><a href=\"https://benfrain.com/breaking-up-with-sass-postcss/\" target=\"_blank\" rel=\"external\">Breaking up with scss</a></li>\n<li><a href=\"http://cssnext.io/\" target=\"_blank\" rel=\"external\">cssnext</a></li>\n</ul>\n"},{"title":"【讀書心得】夜之國的庫帕","date":"2016-10-16T06:59:53.000Z","_content":"\n\n為了不要讓這裡的技術成分太濃厚，我打算直接將之前整理的閱讀筆記也一併 PO 在這裡統一管理比較方便。\n\n從 2013 年以來陸陸續續看了很多本書，也做了厚厚的筆記。趁著部落格還空空的，動力還在，決定把那些擱置已久的筆記一併搬出來曬曬太陽見見世面。\n\n## 夜之國的庫帕\n\n### 前言\n\n「來個慵懶而即興的小革命吧！」這本小說很適合在午後咖啡店，一邊啜飲著咖啡，一邊聽著輕音樂，一邊享受著小說中可愛而有趣的視角和劇情。\n\n有一種慵懶卻又身在其中的感覺，跟著貓的想法一起思考、行動，雖然好像事不關己，但是到後面竟然連自己都開始緊張了起來，「拜託！劇情一定要這樣才對！」，還好，愛好和平的伊坂少年讓結局看起來如此的溫馨。不過，我還是好捨不得就這樣把小說給看完了嗚嗚嗚。\n\n這本小說的筆調是很輕鬆的，但是在這種輕鬆的氛圍中，卻把人類社會中的現實和殘酷丟出來，拋出一個完美的質問。你會在故事的結尾中思考，對呀！我們不也是這樣？\n\n故事裡，獨眼兵長給了讀者答案：「懷疑。」\n\n故事的內容是在描寫夜之國的人民被鐵國擊敗後，剛開始先假裝和平停戰，卻在一夕之間發生國王被殺（冠人）的事件，搞得整個夜之國人心惶惶、不知所措。\n\n每個登場的角色都有一個小小故事，而這些小小故事結合起來，卻又和主軸互相連結，不會顯得太過凸出，伊坂揉合了不同支線的故事發展，最後將事實完整交代出來。這必須有非常深厚的寫作功力還有架構才有辦法做到。\n\n### 安穩＝和平？\n\n夜之國的人民們深深相信著自己是處於一種和鐵國對立、領土相當的狀態下。他們並沒有產生懷疑，也沒有人想要求證。反正，只要日子過得安穩，就沒有這個必要管那麼多的事情吧！\n\n人民們依賴城牆內的安穩，卻沒有人願意思考、懷疑現狀的可能性。甚至他們放棄了探究真相，因為只要冠人說出包裝後的故事，他們就會無條件地全盤相信。不需要動腦筋、不需要奔波勞碌就有安穩的生活，何必大費周章確認事實呢？\n\n### 庫帕的傳說\n\n我好喜歡這個傳說。\n\n「比起公佈真相，維持威嚴更加重要」那麼，要如何維持自己的威嚴呢？冠人的方法是，在外部安排一個又恐怖又強大的敵人（就算是假的也沒關係），然後再對人民說：「別怕，我會保護你們。」並且拿出實際作為（每年派出庫帕士兵）。這樣包裝下來，人民就自然而然地會將領導人視為英雄。冠人確保地位的方式是：欺騙、隱瞞、扭曲這個世界的價值觀\n\n「什麼是對的，什麼事錯的，自己去判斷吧！」獨眼兵長丟出了結論。\n\n「對任何意見都要有同等的懷疑，不然一定會吃虧。」\n\n### 無知\n\n「無知」是一種恐懼，人們會因為不知道而害怕。所以如果領導者將事情處理好了，人民就無所憂慮，無所憂慮後，人民就會感到幸福，感到幸福之後，人民就會依賴領導者了。冠人成功創造了這樣的優勢，所以儘管獨眼兵長將事實說出，他們仍然是半信半疑。\n\n「會不會我們所深信不疑的，都有改變的可能呢？」\n\n### 貓吃老鼠\n\n貓吃老鼠就是天經地義嗎？誰規定的？來自上古的命令告訴多姆，「貓就是要吃老鼠」。但，為什麼呢？\n\n有人思考過這個問題嗎？故事中有蠻多篇幅是在描寫貓與老鼠間的對立關係及談判。\n\n比自己弱小的東西，誰也不會放在心上。「只要心血來潮，我們就捉弄老鼠」，但弱者就一定要被欺負嗎？貓似乎都沒有想過，直到老鼠長老冒出來要求談判後，多姆才開始思考這個問題。\n\n「我們獵捕老鼠，所以老鼠是低等的」，這是正確的看法嗎？同樣的觀點挪用到人類身上，弱者就應該順應天命的安排嗎？\n\n「出了門就該好好回家，不都是這樣嗎？」「既然你都能跟貓交談，跟老婆交談也是輕而易舉吧！」如果不改變彼此的關係，就永遠是兩條平行線。光是這樣，就可以有很大的改變了。\n\n## 後記\n\n大約是在兩年多前寫的文章，現在看起來格外稚嫩。不過很慶幸自己當時真的記錄下來了，寫一篇文章真的很累，大概要花一小時構思、兩小時寫文章。\n\n看完心得之後，又能馬上回味當時看小說時的情景，劇情也馬上映入眼簾，感覺真棒。\n\n","source":"_posts/isaka-kupa.md","raw":"---\ntitle: 【讀書心得】夜之國的庫帕\ncategories: 讀書心得\ntags:\n  - 伊坂幸太郎\n  - 推理\ndate: 2016-10-16 14:59:53\n---\n\n\n為了不要讓這裡的技術成分太濃厚，我打算直接將之前整理的閱讀筆記也一併 PO 在這裡統一管理比較方便。\n\n從 2013 年以來陸陸續續看了很多本書，也做了厚厚的筆記。趁著部落格還空空的，動力還在，決定把那些擱置已久的筆記一併搬出來曬曬太陽見見世面。\n\n## 夜之國的庫帕\n\n### 前言\n\n「來個慵懶而即興的小革命吧！」這本小說很適合在午後咖啡店，一邊啜飲著咖啡，一邊聽著輕音樂，一邊享受著小說中可愛而有趣的視角和劇情。\n\n有一種慵懶卻又身在其中的感覺，跟著貓的想法一起思考、行動，雖然好像事不關己，但是到後面竟然連自己都開始緊張了起來，「拜託！劇情一定要這樣才對！」，還好，愛好和平的伊坂少年讓結局看起來如此的溫馨。不過，我還是好捨不得就這樣把小說給看完了嗚嗚嗚。\n\n這本小說的筆調是很輕鬆的，但是在這種輕鬆的氛圍中，卻把人類社會中的現實和殘酷丟出來，拋出一個完美的質問。你會在故事的結尾中思考，對呀！我們不也是這樣？\n\n故事裡，獨眼兵長給了讀者答案：「懷疑。」\n\n故事的內容是在描寫夜之國的人民被鐵國擊敗後，剛開始先假裝和平停戰，卻在一夕之間發生國王被殺（冠人）的事件，搞得整個夜之國人心惶惶、不知所措。\n\n每個登場的角色都有一個小小故事，而這些小小故事結合起來，卻又和主軸互相連結，不會顯得太過凸出，伊坂揉合了不同支線的故事發展，最後將事實完整交代出來。這必須有非常深厚的寫作功力還有架構才有辦法做到。\n\n### 安穩＝和平？\n\n夜之國的人民們深深相信著自己是處於一種和鐵國對立、領土相當的狀態下。他們並沒有產生懷疑，也沒有人想要求證。反正，只要日子過得安穩，就沒有這個必要管那麼多的事情吧！\n\n人民們依賴城牆內的安穩，卻沒有人願意思考、懷疑現狀的可能性。甚至他們放棄了探究真相，因為只要冠人說出包裝後的故事，他們就會無條件地全盤相信。不需要動腦筋、不需要奔波勞碌就有安穩的生活，何必大費周章確認事實呢？\n\n### 庫帕的傳說\n\n我好喜歡這個傳說。\n\n「比起公佈真相，維持威嚴更加重要」那麼，要如何維持自己的威嚴呢？冠人的方法是，在外部安排一個又恐怖又強大的敵人（就算是假的也沒關係），然後再對人民說：「別怕，我會保護你們。」並且拿出實際作為（每年派出庫帕士兵）。這樣包裝下來，人民就自然而然地會將領導人視為英雄。冠人確保地位的方式是：欺騙、隱瞞、扭曲這個世界的價值觀\n\n「什麼是對的，什麼事錯的，自己去判斷吧！」獨眼兵長丟出了結論。\n\n「對任何意見都要有同等的懷疑，不然一定會吃虧。」\n\n### 無知\n\n「無知」是一種恐懼，人們會因為不知道而害怕。所以如果領導者將事情處理好了，人民就無所憂慮，無所憂慮後，人民就會感到幸福，感到幸福之後，人民就會依賴領導者了。冠人成功創造了這樣的優勢，所以儘管獨眼兵長將事實說出，他們仍然是半信半疑。\n\n「會不會我們所深信不疑的，都有改變的可能呢？」\n\n### 貓吃老鼠\n\n貓吃老鼠就是天經地義嗎？誰規定的？來自上古的命令告訴多姆，「貓就是要吃老鼠」。但，為什麼呢？\n\n有人思考過這個問題嗎？故事中有蠻多篇幅是在描寫貓與老鼠間的對立關係及談判。\n\n比自己弱小的東西，誰也不會放在心上。「只要心血來潮，我們就捉弄老鼠」，但弱者就一定要被欺負嗎？貓似乎都沒有想過，直到老鼠長老冒出來要求談判後，多姆才開始思考這個問題。\n\n「我們獵捕老鼠，所以老鼠是低等的」，這是正確的看法嗎？同樣的觀點挪用到人類身上，弱者就應該順應天命的安排嗎？\n\n「出了門就該好好回家，不都是這樣嗎？」「既然你都能跟貓交談，跟老婆交談也是輕而易舉吧！」如果不改變彼此的關係，就永遠是兩條平行線。光是這樣，就可以有很大的改變了。\n\n## 後記\n\n大約是在兩年多前寫的文章，現在看起來格外稚嫩。不過很慶幸自己當時真的記錄下來了，寫一篇文章真的很累，大概要花一小時構思、兩小時寫文章。\n\n看完心得之後，又能馬上回味當時看小說時的情景，劇情也馬上映入眼簾，感覺真棒。\n\n","slug":"isaka-kupa","published":1,"updated":"2016-10-16T06:59:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqu001fiw5txc1jgpoy","content":"<p>為了不要讓這裡的技術成分太濃厚，我打算直接將之前整理的閱讀筆記也一併 PO 在這裡統一管理比較方便。</p>\n<p>從 2013 年以來陸陸續續看了很多本書，也做了厚厚的筆記。趁著部落格還空空的，動力還在，決定把那些擱置已久的筆記一併搬出來曬曬太陽見見世面。</p>\n<h2 id=\"夜之國的庫帕\"><a href=\"#夜之國的庫帕\" class=\"headerlink\" title=\"夜之國的庫帕\"></a>夜之國的庫帕</h2><h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>「來個慵懶而即興的小革命吧！」這本小說很適合在午後咖啡店，一邊啜飲著咖啡，一邊聽著輕音樂，一邊享受著小說中可愛而有趣的視角和劇情。</p>\n<p>有一種慵懶卻又身在其中的感覺，跟著貓的想法一起思考、行動，雖然好像事不關己，但是到後面竟然連自己都開始緊張了起來，「拜託！劇情一定要這樣才對！」，還好，愛好和平的伊坂少年讓結局看起來如此的溫馨。不過，我還是好捨不得就這樣把小說給看完了嗚嗚嗚。</p>\n<p>這本小說的筆調是很輕鬆的，但是在這種輕鬆的氛圍中，卻把人類社會中的現實和殘酷丟出來，拋出一個完美的質問。你會在故事的結尾中思考，對呀！我們不也是這樣？</p>\n<p>故事裡，獨眼兵長給了讀者答案：「懷疑。」</p>\n<p>故事的內容是在描寫夜之國的人民被鐵國擊敗後，剛開始先假裝和平停戰，卻在一夕之間發生國王被殺（冠人）的事件，搞得整個夜之國人心惶惶、不知所措。</p>\n<p>每個登場的角色都有一個小小故事，而這些小小故事結合起來，卻又和主軸互相連結，不會顯得太過凸出，伊坂揉合了不同支線的故事發展，最後將事實完整交代出來。這必須有非常深厚的寫作功力還有架構才有辦法做到。</p>\n<h3 id=\"安穩＝和平？\"><a href=\"#安穩＝和平？\" class=\"headerlink\" title=\"安穩＝和平？\"></a>安穩＝和平？</h3><p>夜之國的人民們深深相信著自己是處於一種和鐵國對立、領土相當的狀態下。他們並沒有產生懷疑，也沒有人想要求證。反正，只要日子過得安穩，就沒有這個必要管那麼多的事情吧！</p>\n<p>人民們依賴城牆內的安穩，卻沒有人願意思考、懷疑現狀的可能性。甚至他們放棄了探究真相，因為只要冠人說出包裝後的故事，他們就會無條件地全盤相信。不需要動腦筋、不需要奔波勞碌就有安穩的生活，何必大費周章確認事實呢？</p>\n<h3 id=\"庫帕的傳說\"><a href=\"#庫帕的傳說\" class=\"headerlink\" title=\"庫帕的傳說\"></a>庫帕的傳說</h3><p>我好喜歡這個傳說。</p>\n<p>「比起公佈真相，維持威嚴更加重要」那麼，要如何維持自己的威嚴呢？冠人的方法是，在外部安排一個又恐怖又強大的敵人（就算是假的也沒關係），然後再對人民說：「別怕，我會保護你們。」並且拿出實際作為（每年派出庫帕士兵）。這樣包裝下來，人民就自然而然地會將領導人視為英雄。冠人確保地位的方式是：欺騙、隱瞞、扭曲這個世界的價值觀</p>\n<p>「什麼是對的，什麼事錯的，自己去判斷吧！」獨眼兵長丟出了結論。</p>\n<p>「對任何意見都要有同等的懷疑，不然一定會吃虧。」</p>\n<h3 id=\"無知\"><a href=\"#無知\" class=\"headerlink\" title=\"無知\"></a>無知</h3><p>「無知」是一種恐懼，人們會因為不知道而害怕。所以如果領導者將事情處理好了，人民就無所憂慮，無所憂慮後，人民就會感到幸福，感到幸福之後，人民就會依賴領導者了。冠人成功創造了這樣的優勢，所以儘管獨眼兵長將事實說出，他們仍然是半信半疑。</p>\n<p>「會不會我們所深信不疑的，都有改變的可能呢？」</p>\n<h3 id=\"貓吃老鼠\"><a href=\"#貓吃老鼠\" class=\"headerlink\" title=\"貓吃老鼠\"></a>貓吃老鼠</h3><p>貓吃老鼠就是天經地義嗎？誰規定的？來自上古的命令告訴多姆，「貓就是要吃老鼠」。但，為什麼呢？</p>\n<p>有人思考過這個問題嗎？故事中有蠻多篇幅是在描寫貓與老鼠間的對立關係及談判。</p>\n<p>比自己弱小的東西，誰也不會放在心上。「只要心血來潮，我們就捉弄老鼠」，但弱者就一定要被欺負嗎？貓似乎都沒有想過，直到老鼠長老冒出來要求談判後，多姆才開始思考這個問題。</p>\n<p>「我們獵捕老鼠，所以老鼠是低等的」，這是正確的看法嗎？同樣的觀點挪用到人類身上，弱者就應該順應天命的安排嗎？</p>\n<p>「出了門就該好好回家，不都是這樣嗎？」「既然你都能跟貓交談，跟老婆交談也是輕而易舉吧！」如果不改變彼此的關係，就永遠是兩條平行線。光是這樣，就可以有很大的改變了。</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>大約是在兩年多前寫的文章，現在看起來格外稚嫩。不過很慶幸自己當時真的記錄下來了，寫一篇文章真的很累，大概要花一小時構思、兩小時寫文章。</p>\n<p>看完心得之後，又能馬上回味當時看小說時的情景，劇情也馬上映入眼簾，感覺真棒。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>為了不要讓這裡的技術成分太濃厚，我打算直接將之前整理的閱讀筆記也一併 PO 在這裡統一管理比較方便。</p>\n<p>從 2013 年以來陸陸續續看了很多本書，也做了厚厚的筆記。趁著部落格還空空的，動力還在，決定把那些擱置已久的筆記一併搬出來曬曬太陽見見世面。</p>\n<h2 id=\"夜之國的庫帕\"><a href=\"#夜之國的庫帕\" class=\"headerlink\" title=\"夜之國的庫帕\"></a>夜之國的庫帕</h2><h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>「來個慵懶而即興的小革命吧！」這本小說很適合在午後咖啡店，一邊啜飲著咖啡，一邊聽著輕音樂，一邊享受著小說中可愛而有趣的視角和劇情。</p>\n<p>有一種慵懶卻又身在其中的感覺，跟著貓的想法一起思考、行動，雖然好像事不關己，但是到後面竟然連自己都開始緊張了起來，「拜託！劇情一定要這樣才對！」，還好，愛好和平的伊坂少年讓結局看起來如此的溫馨。不過，我還是好捨不得就這樣把小說給看完了嗚嗚嗚。</p>\n<p>這本小說的筆調是很輕鬆的，但是在這種輕鬆的氛圍中，卻把人類社會中的現實和殘酷丟出來，拋出一個完美的質問。你會在故事的結尾中思考，對呀！我們不也是這樣？</p>\n<p>故事裡，獨眼兵長給了讀者答案：「懷疑。」</p>\n<p>故事的內容是在描寫夜之國的人民被鐵國擊敗後，剛開始先假裝和平停戰，卻在一夕之間發生國王被殺（冠人）的事件，搞得整個夜之國人心惶惶、不知所措。</p>\n<p>每個登場的角色都有一個小小故事，而這些小小故事結合起來，卻又和主軸互相連結，不會顯得太過凸出，伊坂揉合了不同支線的故事發展，最後將事實完整交代出來。這必須有非常深厚的寫作功力還有架構才有辦法做到。</p>\n<h3 id=\"安穩＝和平？\"><a href=\"#安穩＝和平？\" class=\"headerlink\" title=\"安穩＝和平？\"></a>安穩＝和平？</h3><p>夜之國的人民們深深相信著自己是處於一種和鐵國對立、領土相當的狀態下。他們並沒有產生懷疑，也沒有人想要求證。反正，只要日子過得安穩，就沒有這個必要管那麼多的事情吧！</p>\n<p>人民們依賴城牆內的安穩，卻沒有人願意思考、懷疑現狀的可能性。甚至他們放棄了探究真相，因為只要冠人說出包裝後的故事，他們就會無條件地全盤相信。不需要動腦筋、不需要奔波勞碌就有安穩的生活，何必大費周章確認事實呢？</p>\n<h3 id=\"庫帕的傳說\"><a href=\"#庫帕的傳說\" class=\"headerlink\" title=\"庫帕的傳說\"></a>庫帕的傳說</h3><p>我好喜歡這個傳說。</p>\n<p>「比起公佈真相，維持威嚴更加重要」那麼，要如何維持自己的威嚴呢？冠人的方法是，在外部安排一個又恐怖又強大的敵人（就算是假的也沒關係），然後再對人民說：「別怕，我會保護你們。」並且拿出實際作為（每年派出庫帕士兵）。這樣包裝下來，人民就自然而然地會將領導人視為英雄。冠人確保地位的方式是：欺騙、隱瞞、扭曲這個世界的價值觀</p>\n<p>「什麼是對的，什麼事錯的，自己去判斷吧！」獨眼兵長丟出了結論。</p>\n<p>「對任何意見都要有同等的懷疑，不然一定會吃虧。」</p>\n<h3 id=\"無知\"><a href=\"#無知\" class=\"headerlink\" title=\"無知\"></a>無知</h3><p>「無知」是一種恐懼，人們會因為不知道而害怕。所以如果領導者將事情處理好了，人民就無所憂慮，無所憂慮後，人民就會感到幸福，感到幸福之後，人民就會依賴領導者了。冠人成功創造了這樣的優勢，所以儘管獨眼兵長將事實說出，他們仍然是半信半疑。</p>\n<p>「會不會我們所深信不疑的，都有改變的可能呢？」</p>\n<h3 id=\"貓吃老鼠\"><a href=\"#貓吃老鼠\" class=\"headerlink\" title=\"貓吃老鼠\"></a>貓吃老鼠</h3><p>貓吃老鼠就是天經地義嗎？誰規定的？來自上古的命令告訴多姆，「貓就是要吃老鼠」。但，為什麼呢？</p>\n<p>有人思考過這個問題嗎？故事中有蠻多篇幅是在描寫貓與老鼠間的對立關係及談判。</p>\n<p>比自己弱小的東西，誰也不會放在心上。「只要心血來潮，我們就捉弄老鼠」，但弱者就一定要被欺負嗎？貓似乎都沒有想過，直到老鼠長老冒出來要求談判後，多姆才開始思考這個問題。</p>\n<p>「我們獵捕老鼠，所以老鼠是低等的」，這是正確的看法嗎？同樣的觀點挪用到人類身上，弱者就應該順應天命的安排嗎？</p>\n<p>「出了門就該好好回家，不都是這樣嗎？」「既然你都能跟貓交談，跟老婆交談也是輕而易舉吧！」如果不改變彼此的關係，就永遠是兩條平行線。光是這樣，就可以有很大的改變了。</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>大約是在兩年多前寫的文章，現在看起來格外稚嫩。不過很慶幸自己當時真的記錄下來了，寫一篇文章真的很累，大概要花一小時構思、兩小時寫文章。</p>\n<p>看完心得之後，又能馬上回味當時看小說時的情景，劇情也馬上映入眼簾，感覺真棒。</p>\n"},{"title":"自學四年通過日檢 N2 心得","_content":"\n### 前言\n\n從大學開始，因為高中畢業後對日本文化相當有興趣，所以開始自學五十音。先談談我的背景：\n\n- 高職電子科畢業\n- 科大資管系\n\n大學選修初階日文跟進階日文，不過進度本身已超過課程許多。期間雖然一直想報名日檢，但礙於自身實力與經濟考量，所以直到大學快畢業後才報考日檢。\n\n以下是我這次的日檢成績：\n\n- 日本語能力檢定 **N2 (134/180)**\n- 日本語能力檢定 **N3 (163/180)**\n\n![N2](https://cdn-images-1.medium.com/max/2000/1*N94QaFraADD7onb_wP-KeA.png)\n\n![N3](https://cdn-images-1.medium.com/max/2000/1*STX_msnfGMBp95gEUNhXlw.png)\n\n這並不是很亮眼的成績，不過這篇文章會結合我自己自學日文的經驗，並且分享一些學習的技巧，畢竟一直以來依靠許多網路資源，希望能夠回饋給大家。\n\n這篇文章會分成兩部分，第一部分談談自己對學習語言的看法，第二部分則是介紹一些我在學習日文時常用的學習資源。\n\n這篇文章不會提到答題技巧或是短期衝刺的秘訣，原因很簡單，日檢等考試都可能會更改制度或題型，未來可能主流的考試也並非 JLPT，過度追求答題技巧可能只會造成反效果而已。\n\n### 為什麼要學日文？\n\n首先先思考：「為什麼要學日文？」。\n\n英文不論廣度以及對於工作的幫助，毋庸置疑都是一個投資報酬率遠高於日文的語言，想清楚自己為何要學習日文這件事很重要。\n\n> *大家都會一點日文，感覺好像很簡單*\n\n> *我的好朋友們都選日文當通識，我想要跟他們一起上課*\n\n> *日文跟中文蠻像的，應該很好學*\n\n> *學日文應該很有用*\n\n學習一些大家都會用的日文很簡單，早安晚安、數數、形容詞變化，比較好一點懂得ます形變化就能夠橫行無阻了。不過這真的是你想要的目標嗎？你花了金錢和時間學習一項技能，最後遺忘。\n\n所以在開始之前，我希望各位都能夠思考學習日文的理由，儘管最後得出的答案可能是興趣、看日劇、看動漫、追星、甚至只是一句爽都好，**只要你知道你在做什麼**。\n\n這裡推薦大家閱讀一下 Denny 寫的[為什麼你可能不需要「寫程式」補習班？](https://medium.com/@dennyku/%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81-%E5%AF%AB%E7%A8%8B%E5%BC%8F-%E8%A3%9C%E7%BF%92%E7%8F%AD-b6b7ca174393)。\n\n學語言跟學程式很像。學日文的人太多了，如果搞不清楚自己的價值，那麼只能在社會的洪流中被淘汰而已。\n\n### 要不要報名補習班？\n\n在學習日文的路上，如果有人能夠給你適當的指導，那麼絕對能夠少走很多冤枉路，在市面上有很多日語補習班，品質參差不齊。\n\n所以在被其他補習班的話術迷惑之前，記得先上網做做功課，衡量自己的時間成本後再決定是否需要投入。\n\n我在大學四年中雖然有修過初級日文及進階日文，但除了初級日文外，自身學習的進度都遠超過課程當中的內容。\n\n### 用笨方法學日文\n\n#### 1. 每天 2 小時\n\n學習初期絕對會是最枯燥跟痛苦的時候，因為你沒有任何的基礎觸類旁通，只能緩慢地累積單字量跟文法。這個階段我每天會安排空閒的時間念日文，**然後做筆記**。\n\n大概 2 個月過後，我已經能夠使用形容詞變化、基本動詞變化，但這時我的單字量並沒有很多，大概只會一些生活常見單字跟動詞而已。\n\n比起單字，這個時候的重點應該是**盡可能地了解日文的文法規則和句子組成。**\n\n原因很簡單，我們都知道動詞進行式要加 ing 被動是要加上 ed，這是英文當中相當基本的規則。雖然你也可以從大量的句子當中找出這樣的規則，但直接學習文法是了解規則最快的方式。\n\n> *打排球也要知道怎樣算出界跟犯規吧！*\n\n等到基本文法學習完畢（名詞句變化、形容詞句、形容動詞、動詞變化、敬語常語轉換、て形應用）後，開始能夠看懂大部分的**句子組成架構**後，重點就轉為背單字了。\n\n特別注意，**動詞是一個語言的靈魂**，動詞變化的掌握度決定你對語言的熟悉程度。所以初期學習日文的目標應該盡量以文法導向，先不用著墨太多會話與單字。\n\n#### 2. 利用零碎時間背單字\n\n下面會講到 Anki 這個應用程式，他能夠根據你對單字的熟悉度更改出現的頻率。\n\n透過這個應用程式，開始在零碎時間累積單字，並持續加強不熟的文法。\n\n這個階段也可以開始看一些比較簡單的文章，從文章中練習日本人是如何組織句子的。這個階段會是成長速度最快的階段，因為你已經有足夠的基礎。而這時你應該開始將核心著重於累積單字量上。\n\n#### 3. 深入日本文化\n\n像是「尊敬語」、「謙讓語」，以及他們的變化規則，雖然稍嫌複雜，不過已經有閱讀量跟單字量當作根基，很快就能上手。同時也可以開始針對日文的「複合動詞」、「擬態語」、「熟語」做加強。\n\n#### 4. 針對特定主題\n\n之前撰寫過服務業日語、日語單字剪髮篇，都是在特定情境下背單字，這可以提昇你對單字的熟悉度。\n\n#### 5. 多聞闕疑\n\n如果在學習的階段中遇到一些容易混肴的觀念，像是最常見的「が、は」的使用方式，先不用急著想知道答案，你可能看過 100 種不同的說法。這時候可以先放下心中的疑問，繼續學習，等到累積的閱讀量跟文法夠紮實的時候，自然就會知道。也就是我們常常說的「語感」\n\n### 怎麼準備考試的？\n\n考試前我有買 「EZJapan N3 應考對策」跟「EZJapan N2 應考對策」。大概在前兩週開始寫試題，看解析，把不熟的單字背起來。平常看日劇，NHK 練聽力跟閱讀。\n\n不過自己平時就有固定學習日文的習慣，所以考前 2 個禮拜時除了做題目練手感之外沒有做太多準備，下面會再提到我有利用哪些資源學習。\n\n### 自學資源整理\n\n之前我有寫過一篇關於自學資源的文章，這邊再補充一些資訊給大家參考。\n\n在學習日文到一定的程度後，就是靠單字跟閱讀量的累積來決勝負了。學習文法雖然能夠幫助我們快速理解，但是最重要的還是「累積」。\n\n自己在跌跌撞撞找了很多網站跟資源後，選出幾個我覺得非常有用的網站推薦給大家，希望能夠幫助到一樣在自學之路上跌跌撞撞的學習者們。\n\n#### 1. [Nippon 所藏](http://www.books.com.tw/products/0010729474)\n\n我喜歡日本文化，所以到書店時如果有看到喜歡的雜誌或書籍就會買下來。其中我最喜歡的就是 Nippon 所藏。他的排版非常用心，而且內容相當豐富，我每一本都買下來了。裏頭也可以學習到很多關於日本流行的話題跟單字。如果程度還沒有很紮實的初學者，每一篇文章都有中文對照，也有提供單字跟文法筆記。\n\n- **日本和食 100 品**：提供許多日式料理的食譜，獲益良多。\n- **日本流行話題 100 選**：結合當時日本時下流行的話題，像是半澤直樹、王牌大律師、家政婦女王、日本核災、晴空塔等等。\n- **日本潮流 100 選**：以「時尚」為主題，裏頭有許多關於美容美髮相關的單字，有一章節是在討論如何修飾自己的造型、體態，後半段甚至還有約會筆記跟注意事項！\n- **日本職場案內 100 則**：敘述日本的職場文化以及潛規則，像是年功序列制、團塊世代、寄信時、接電話時、交換名片時要注意的事情，也有一小節是在教你如何使用「尊敬語」與「謙讓語」，如果要到日本工作的朋友們，這本相當推\n\n#### 2. [音速日語學習](https://jp.sonic-learning.com/)\n\n大家在學習日文的旅途上應該都有它的陪伴吧，我自己在剛學習日文時是每天都會到音速日語學習中學習一個單元。一個單元雖然不多，不過累積了 3 個月之後就有將近 100 個單元。\n\n#### 3. 日劇\n\n在大學四年中，我看了許多日劇。不過我看日劇時會分成學習和純娛樂兩種，學習時我會把字幕擋起來，遇到聽不太懂的句子就直接暫停重聽，再把新學習到的單字或句子輸入到 Anki 當中之後再複習。\n\n印象最深刻的是我之前把王牌大律師後面死刑辯論那一段全部背下來了XD。這樣子學習效果很好，因為他強迫你重複去聽某個句子，而且事後的複習又會加深印象以及日劇當中的場景作輔助。（雖然聽力還是我的罩門QQ）\n\n#### 4. [Lang-8](http://lang-8.com/)\n\n![img](https://cdn-images-1.medium.com/max/2000/1*SnCiZHXA30pEek1ToxwhWg.png)\n\n是我在學習日文中，幫助最大的學習平台，沒有之一。他的運作方式是這樣的，你可以在這個平台上用你想要學習的語言**撰寫日記**，之後就會有相對的母語人士來幫你修改。\n\n這樣子誰要來幫我改？這個網站的機制做得很好，如果你想要你的日記被別人看到，你就要用你的母語幫別人修改日記，才能拿到點數（Lang-8 裡頭稱作 L-point），點數越高你的排名就會越高，日記的曝光率也就越高。\n\n所以別人為了拿點數，就會來閱讀、修改你的日記，久而久之就能搜集來自母語者的建議。\n\n就算你只有 N5, N4 的程度也沒關係，放下自尊跟臉皮寫寫一些文章，今天的心情、發生了什麼事，試著寫下來，就算文法錯了也沒關係。\n\n不過，也因為如此，偶而會出現修改品質參差不一的情形。例如：有些日本人就硬要你改成敬語。\n\n或是省略 ている 的 い 時，有些日本人不知道你是不會還是真的不懂，所以就一律幫你加上去等等。所以修改之後的日記品質，必須靠自己確認。\n\n這的確是讓我學習的一大動力之一，分享日記給日本人看，瀏覽其他國家學習中文後的日記，說真的挺好玩的。可以從中認識一些不錯的朋友也說不定喲！\n\n很可惜的一點是，目前 Lang-8 這個平台已經不開放註冊了。好像轉移服務到 [HiNative](https://hinative.com/zh-CN) 的平台上去了。Hinative 上比較像是用問問題的模式來進行，個人比較不喜歡，有興趣的讀者們可以參考看看。\n\n我目前的**排名是 445/410,886**，不過已經荒廢了一陣子。歡迎之前有註冊的朋友們一起交流！\n\n#### 5. [徵求外國朋友佈告欄](http://www.jcinfo.net/tw/friends/)\n\n除了日語學習外，也常常會徵求其他國家的朋友。但也有許多來者不善的貼文就是了。\n\n至於能不能夠找到志同道合的夥伴，需要靠很大的運氣。\n\n有許多人只是想要和外國人聊聊天而已，並不是真的想要做「語言交換」這個目的。而且就幾次交流的經驗來看，除非雙方都是為了學習語言，不然很容易就陷入純聊天的情況，根本無法進行語言交換。\n\n#### 6. [Anki](https://ankiweb.net/)\n\n不多說，背單字的神器。我目前也只有累積 4,5000 的單字而已，不過因為我習慣把自己看到有趣的動漫台詞跟**自己的筆記**加進去，所以看單字的時候不至於那麼枯燥。\n\n像是什麼**趣味でヒーロをやっている者だ**這種句子XD。至少在一片單字海當中，看到幾句中二的台詞能夠調解一下。\n\n#### 7. [日本語之森](http://nihongonomori.com/)\n\n文法講解非常清楚。而且資源很豐富，想要短時間加強文法的讀者們可以參考看看！這個網站的特色是都是由日本人來講解文法的，所以可以用更 native 的方式來學習日文。\n\n#### 8. 原文小說\n\n我很喜歡日本推理的作品，像是伊坂幸太郎、米澤穗信、東野圭吾都是我很喜歡的作家，之前到日本時就買了幾本文庫本，在通勤時會拿出來翻，並且把不會的單字用螢光筆匡起來之後回家再查。\n\n大概持續了兩個月左右，明顯感受到單字量大幅提升，不過看完一本小說的速度好慢QQ，老實說我還沒看完任何一本。\n\n#### 9. 日語八百屋\n\n在今年的 3 月份左右，我成立了[日語八百屋週刊](https://www.shurado.com/)。因為我自己本身有在收集筆記跟文章的習慣，久而久之累積了不少，想說自己做個 email 的服務把這些筆記寄給大家，舒緩一下在漫長日文自學之路中的枯燥苦悶。\n\n**致力於滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。**\n\n有興趣的朋友們也可以來訂閱看看，如果內容不喜歡隨時可以退訂，或者直接到 [Medium](https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B) 看看歷期週刊。\n\n目前已經有 1200 多人訂閱，總共有 24 期週刊內容，也歡迎大家一起分享自己的學習心得或筆記。\n\n[日語八百屋 | 為日本愛好者而生的週刊](https://www.shurado.com/)\n\n### 寫下來\n\n寫作是個很好組織自己想法的方式。如果在學習日文時有做筆記的習慣，那麼一年兩年累積下來的量相當可觀。\n\n同時，如果你能夠將文章發佈在部落格當中，除了能夠幫助到其他人之外，因為需要讓別人看到，所以你更需要強迫自己組織好自己的文章架構。\n\n> 光是寫下來這件事，你就贏過許多舉足不前的台灣人了。\n\n#### 一些推薦使用的工具\n\n- [Evernote](https://evernote.com/intl/zh-tw/) 非常好用的筆記軟體，除了用在日語學習上還可以用在工作、生活當中，他的搜尋機制相當強大，很容易就可以找到自己想要找的東西\n- Google drive\n- [typora](https://typora.io/)：一個 [markdown](http://markdown.tw/) 的編輯器，喜歡 markdown 語法，或是想要嘗試簡潔地寫文章非常推薦這個軟體！\n\n### 結論\n\n其實當初沒有想很多，只是一直以來都對日本文化有興趣，想要趁著高中畢業的空檔學習。後來因為科系（資管系）的關係，有部分的技術文章或是部落格都是用日文撰寫，還有一年跑去台大修日本歷史（全日文授課），覺得當初幸好有好好學日文。後來出社會面試後，也因為日文的關係，在面試時遇到日本人時可以多講幾句話加深印象。\n\n這次考完試給我最大的感受應該就是真正的日文學習之路才剛開始而已。\n\n如果以檢定為目標，你可能會錯失許多學習日文的美景，不過考取檢定確實是一個測試自己實力的好方法，不管是為了什麼目標考取檢定，我們都應該要知道，檢定只是一個另外一個起點而已。\n","source":"_posts/jlpt-learning.md","raw":"---\ntitle: 自學四年通過日檢 N2 心得\ncategories:\n  - 日語學習\ntags:\n  - JLPT\n  - 日檢\n  - 日語學習\n  - 日語八百屋\n---\n\n### 前言\n\n從大學開始，因為高中畢業後對日本文化相當有興趣，所以開始自學五十音。先談談我的背景：\n\n- 高職電子科畢業\n- 科大資管系\n\n大學選修初階日文跟進階日文，不過進度本身已超過課程許多。期間雖然一直想報名日檢，但礙於自身實力與經濟考量，所以直到大學快畢業後才報考日檢。\n\n以下是我這次的日檢成績：\n\n- 日本語能力檢定 **N2 (134/180)**\n- 日本語能力檢定 **N3 (163/180)**\n\n![N2](https://cdn-images-1.medium.com/max/2000/1*N94QaFraADD7onb_wP-KeA.png)\n\n![N3](https://cdn-images-1.medium.com/max/2000/1*STX_msnfGMBp95gEUNhXlw.png)\n\n這並不是很亮眼的成績，不過這篇文章會結合我自己自學日文的經驗，並且分享一些學習的技巧，畢竟一直以來依靠許多網路資源，希望能夠回饋給大家。\n\n這篇文章會分成兩部分，第一部分談談自己對學習語言的看法，第二部分則是介紹一些我在學習日文時常用的學習資源。\n\n這篇文章不會提到答題技巧或是短期衝刺的秘訣，原因很簡單，日檢等考試都可能會更改制度或題型，未來可能主流的考試也並非 JLPT，過度追求答題技巧可能只會造成反效果而已。\n\n### 為什麼要學日文？\n\n首先先思考：「為什麼要學日文？」。\n\n英文不論廣度以及對於工作的幫助，毋庸置疑都是一個投資報酬率遠高於日文的語言，想清楚自己為何要學習日文這件事很重要。\n\n> *大家都會一點日文，感覺好像很簡單*\n\n> *我的好朋友們都選日文當通識，我想要跟他們一起上課*\n\n> *日文跟中文蠻像的，應該很好學*\n\n> *學日文應該很有用*\n\n學習一些大家都會用的日文很簡單，早安晚安、數數、形容詞變化，比較好一點懂得ます形變化就能夠橫行無阻了。不過這真的是你想要的目標嗎？你花了金錢和時間學習一項技能，最後遺忘。\n\n所以在開始之前，我希望各位都能夠思考學習日文的理由，儘管最後得出的答案可能是興趣、看日劇、看動漫、追星、甚至只是一句爽都好，**只要你知道你在做什麼**。\n\n這裡推薦大家閱讀一下 Denny 寫的[為什麼你可能不需要「寫程式」補習班？](https://medium.com/@dennyku/%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81-%E5%AF%AB%E7%A8%8B%E5%BC%8F-%E8%A3%9C%E7%BF%92%E7%8F%AD-b6b7ca174393)。\n\n學語言跟學程式很像。學日文的人太多了，如果搞不清楚自己的價值，那麼只能在社會的洪流中被淘汰而已。\n\n### 要不要報名補習班？\n\n在學習日文的路上，如果有人能夠給你適當的指導，那麼絕對能夠少走很多冤枉路，在市面上有很多日語補習班，品質參差不齊。\n\n所以在被其他補習班的話術迷惑之前，記得先上網做做功課，衡量自己的時間成本後再決定是否需要投入。\n\n我在大學四年中雖然有修過初級日文及進階日文，但除了初級日文外，自身學習的進度都遠超過課程當中的內容。\n\n### 用笨方法學日文\n\n#### 1. 每天 2 小時\n\n學習初期絕對會是最枯燥跟痛苦的時候，因為你沒有任何的基礎觸類旁通，只能緩慢地累積單字量跟文法。這個階段我每天會安排空閒的時間念日文，**然後做筆記**。\n\n大概 2 個月過後，我已經能夠使用形容詞變化、基本動詞變化，但這時我的單字量並沒有很多，大概只會一些生活常見單字跟動詞而已。\n\n比起單字，這個時候的重點應該是**盡可能地了解日文的文法規則和句子組成。**\n\n原因很簡單，我們都知道動詞進行式要加 ing 被動是要加上 ed，這是英文當中相當基本的規則。雖然你也可以從大量的句子當中找出這樣的規則，但直接學習文法是了解規則最快的方式。\n\n> *打排球也要知道怎樣算出界跟犯規吧！*\n\n等到基本文法學習完畢（名詞句變化、形容詞句、形容動詞、動詞變化、敬語常語轉換、て形應用）後，開始能夠看懂大部分的**句子組成架構**後，重點就轉為背單字了。\n\n特別注意，**動詞是一個語言的靈魂**，動詞變化的掌握度決定你對語言的熟悉程度。所以初期學習日文的目標應該盡量以文法導向，先不用著墨太多會話與單字。\n\n#### 2. 利用零碎時間背單字\n\n下面會講到 Anki 這個應用程式，他能夠根據你對單字的熟悉度更改出現的頻率。\n\n透過這個應用程式，開始在零碎時間累積單字，並持續加強不熟的文法。\n\n這個階段也可以開始看一些比較簡單的文章，從文章中練習日本人是如何組織句子的。這個階段會是成長速度最快的階段，因為你已經有足夠的基礎。而這時你應該開始將核心著重於累積單字量上。\n\n#### 3. 深入日本文化\n\n像是「尊敬語」、「謙讓語」，以及他們的變化規則，雖然稍嫌複雜，不過已經有閱讀量跟單字量當作根基，很快就能上手。同時也可以開始針對日文的「複合動詞」、「擬態語」、「熟語」做加強。\n\n#### 4. 針對特定主題\n\n之前撰寫過服務業日語、日語單字剪髮篇，都是在特定情境下背單字，這可以提昇你對單字的熟悉度。\n\n#### 5. 多聞闕疑\n\n如果在學習的階段中遇到一些容易混肴的觀念，像是最常見的「が、は」的使用方式，先不用急著想知道答案，你可能看過 100 種不同的說法。這時候可以先放下心中的疑問，繼續學習，等到累積的閱讀量跟文法夠紮實的時候，自然就會知道。也就是我們常常說的「語感」\n\n### 怎麼準備考試的？\n\n考試前我有買 「EZJapan N3 應考對策」跟「EZJapan N2 應考對策」。大概在前兩週開始寫試題，看解析，把不熟的單字背起來。平常看日劇，NHK 練聽力跟閱讀。\n\n不過自己平時就有固定學習日文的習慣，所以考前 2 個禮拜時除了做題目練手感之外沒有做太多準備，下面會再提到我有利用哪些資源學習。\n\n### 自學資源整理\n\n之前我有寫過一篇關於自學資源的文章，這邊再補充一些資訊給大家參考。\n\n在學習日文到一定的程度後，就是靠單字跟閱讀量的累積來決勝負了。學習文法雖然能夠幫助我們快速理解，但是最重要的還是「累積」。\n\n自己在跌跌撞撞找了很多網站跟資源後，選出幾個我覺得非常有用的網站推薦給大家，希望能夠幫助到一樣在自學之路上跌跌撞撞的學習者們。\n\n#### 1. [Nippon 所藏](http://www.books.com.tw/products/0010729474)\n\n我喜歡日本文化，所以到書店時如果有看到喜歡的雜誌或書籍就會買下來。其中我最喜歡的就是 Nippon 所藏。他的排版非常用心，而且內容相當豐富，我每一本都買下來了。裏頭也可以學習到很多關於日本流行的話題跟單字。如果程度還沒有很紮實的初學者，每一篇文章都有中文對照，也有提供單字跟文法筆記。\n\n- **日本和食 100 品**：提供許多日式料理的食譜，獲益良多。\n- **日本流行話題 100 選**：結合當時日本時下流行的話題，像是半澤直樹、王牌大律師、家政婦女王、日本核災、晴空塔等等。\n- **日本潮流 100 選**：以「時尚」為主題，裏頭有許多關於美容美髮相關的單字，有一章節是在討論如何修飾自己的造型、體態，後半段甚至還有約會筆記跟注意事項！\n- **日本職場案內 100 則**：敘述日本的職場文化以及潛規則，像是年功序列制、團塊世代、寄信時、接電話時、交換名片時要注意的事情，也有一小節是在教你如何使用「尊敬語」與「謙讓語」，如果要到日本工作的朋友們，這本相當推\n\n#### 2. [音速日語學習](https://jp.sonic-learning.com/)\n\n大家在學習日文的旅途上應該都有它的陪伴吧，我自己在剛學習日文時是每天都會到音速日語學習中學習一個單元。一個單元雖然不多，不過累積了 3 個月之後就有將近 100 個單元。\n\n#### 3. 日劇\n\n在大學四年中，我看了許多日劇。不過我看日劇時會分成學習和純娛樂兩種，學習時我會把字幕擋起來，遇到聽不太懂的句子就直接暫停重聽，再把新學習到的單字或句子輸入到 Anki 當中之後再複習。\n\n印象最深刻的是我之前把王牌大律師後面死刑辯論那一段全部背下來了XD。這樣子學習效果很好，因為他強迫你重複去聽某個句子，而且事後的複習又會加深印象以及日劇當中的場景作輔助。（雖然聽力還是我的罩門QQ）\n\n#### 4. [Lang-8](http://lang-8.com/)\n\n![img](https://cdn-images-1.medium.com/max/2000/1*SnCiZHXA30pEek1ToxwhWg.png)\n\n是我在學習日文中，幫助最大的學習平台，沒有之一。他的運作方式是這樣的，你可以在這個平台上用你想要學習的語言**撰寫日記**，之後就會有相對的母語人士來幫你修改。\n\n這樣子誰要來幫我改？這個網站的機制做得很好，如果你想要你的日記被別人看到，你就要用你的母語幫別人修改日記，才能拿到點數（Lang-8 裡頭稱作 L-point），點數越高你的排名就會越高，日記的曝光率也就越高。\n\n所以別人為了拿點數，就會來閱讀、修改你的日記，久而久之就能搜集來自母語者的建議。\n\n就算你只有 N5, N4 的程度也沒關係，放下自尊跟臉皮寫寫一些文章，今天的心情、發生了什麼事，試著寫下來，就算文法錯了也沒關係。\n\n不過，也因為如此，偶而會出現修改品質參差不一的情形。例如：有些日本人就硬要你改成敬語。\n\n或是省略 ている 的 い 時，有些日本人不知道你是不會還是真的不懂，所以就一律幫你加上去等等。所以修改之後的日記品質，必須靠自己確認。\n\n這的確是讓我學習的一大動力之一，分享日記給日本人看，瀏覽其他國家學習中文後的日記，說真的挺好玩的。可以從中認識一些不錯的朋友也說不定喲！\n\n很可惜的一點是，目前 Lang-8 這個平台已經不開放註冊了。好像轉移服務到 [HiNative](https://hinative.com/zh-CN) 的平台上去了。Hinative 上比較像是用問問題的模式來進行，個人比較不喜歡，有興趣的讀者們可以參考看看。\n\n我目前的**排名是 445/410,886**，不過已經荒廢了一陣子。歡迎之前有註冊的朋友們一起交流！\n\n#### 5. [徵求外國朋友佈告欄](http://www.jcinfo.net/tw/friends/)\n\n除了日語學習外，也常常會徵求其他國家的朋友。但也有許多來者不善的貼文就是了。\n\n至於能不能夠找到志同道合的夥伴，需要靠很大的運氣。\n\n有許多人只是想要和外國人聊聊天而已，並不是真的想要做「語言交換」這個目的。而且就幾次交流的經驗來看，除非雙方都是為了學習語言，不然很容易就陷入純聊天的情況，根本無法進行語言交換。\n\n#### 6. [Anki](https://ankiweb.net/)\n\n不多說，背單字的神器。我目前也只有累積 4,5000 的單字而已，不過因為我習慣把自己看到有趣的動漫台詞跟**自己的筆記**加進去，所以看單字的時候不至於那麼枯燥。\n\n像是什麼**趣味でヒーロをやっている者だ**這種句子XD。至少在一片單字海當中，看到幾句中二的台詞能夠調解一下。\n\n#### 7. [日本語之森](http://nihongonomori.com/)\n\n文法講解非常清楚。而且資源很豐富，想要短時間加強文法的讀者們可以參考看看！這個網站的特色是都是由日本人來講解文法的，所以可以用更 native 的方式來學習日文。\n\n#### 8. 原文小說\n\n我很喜歡日本推理的作品，像是伊坂幸太郎、米澤穗信、東野圭吾都是我很喜歡的作家，之前到日本時就買了幾本文庫本，在通勤時會拿出來翻，並且把不會的單字用螢光筆匡起來之後回家再查。\n\n大概持續了兩個月左右，明顯感受到單字量大幅提升，不過看完一本小說的速度好慢QQ，老實說我還沒看完任何一本。\n\n#### 9. 日語八百屋\n\n在今年的 3 月份左右，我成立了[日語八百屋週刊](https://www.shurado.com/)。因為我自己本身有在收集筆記跟文章的習慣，久而久之累積了不少，想說自己做個 email 的服務把這些筆記寄給大家，舒緩一下在漫長日文自學之路中的枯燥苦悶。\n\n**致力於滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。**\n\n有興趣的朋友們也可以來訂閱看看，如果內容不喜歡隨時可以退訂，或者直接到 [Medium](https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B) 看看歷期週刊。\n\n目前已經有 1200 多人訂閱，總共有 24 期週刊內容，也歡迎大家一起分享自己的學習心得或筆記。\n\n[日語八百屋 | 為日本愛好者而生的週刊](https://www.shurado.com/)\n\n### 寫下來\n\n寫作是個很好組織自己想法的方式。如果在學習日文時有做筆記的習慣，那麼一年兩年累積下來的量相當可觀。\n\n同時，如果你能夠將文章發佈在部落格當中，除了能夠幫助到其他人之外，因為需要讓別人看到，所以你更需要強迫自己組織好自己的文章架構。\n\n> 光是寫下來這件事，你就贏過許多舉足不前的台灣人了。\n\n#### 一些推薦使用的工具\n\n- [Evernote](https://evernote.com/intl/zh-tw/) 非常好用的筆記軟體，除了用在日語學習上還可以用在工作、生活當中，他的搜尋機制相當強大，很容易就可以找到自己想要找的東西\n- Google drive\n- [typora](https://typora.io/)：一個 [markdown](http://markdown.tw/) 的編輯器，喜歡 markdown 語法，或是想要嘗試簡潔地寫文章非常推薦這個軟體！\n\n### 結論\n\n其實當初沒有想很多，只是一直以來都對日本文化有興趣，想要趁著高中畢業的空檔學習。後來因為科系（資管系）的關係，有部分的技術文章或是部落格都是用日文撰寫，還有一年跑去台大修日本歷史（全日文授課），覺得當初幸好有好好學日文。後來出社會面試後，也因為日文的關係，在面試時遇到日本人時可以多講幾句話加深印象。\n\n這次考完試給我最大的感受應該就是真正的日文學習之路才剛開始而已。\n\n如果以檢定為目標，你可能會錯失許多學習日文的美景，不過考取檢定確實是一個測試自己實力的好方法，不管是為了什麼目標考取檢定，我們都應該要知道，檢定只是一個另外一個起點而已。\n","slug":"jlpt-learning","published":1,"date":"2017-10-07T13:47:12.000Z","updated":"2017-10-07T13:50:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitqv001iiw5tsxvupxx4","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>從大學開始，因為高中畢業後對日本文化相當有興趣，所以開始自學五十音。先談談我的背景：</p>\n<ul>\n<li>高職電子科畢業</li>\n<li>科大資管系</li>\n</ul>\n<p>大學選修初階日文跟進階日文，不過進度本身已超過課程許多。期間雖然一直想報名日檢，但礙於自身實力與經濟考量，所以直到大學快畢業後才報考日檢。</p>\n<p>以下是我這次的日檢成績：</p>\n<ul>\n<li>日本語能力檢定 <strong>N2 (134/180)</strong></li>\n<li>日本語能力檢定 <strong>N3 (163/180)</strong></li>\n</ul>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*N94QaFraADD7onb_wP-KeA.png\" alt=\"N2\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*STX_msnfGMBp95gEUNhXlw.png\" alt=\"N3\"></p>\n<p>這並不是很亮眼的成績，不過這篇文章會結合我自己自學日文的經驗，並且分享一些學習的技巧，畢竟一直以來依靠許多網路資源，希望能夠回饋給大家。</p>\n<p>這篇文章會分成兩部分，第一部分談談自己對學習語言的看法，第二部分則是介紹一些我在學習日文時常用的學習資源。</p>\n<p>這篇文章不會提到答題技巧或是短期衝刺的秘訣，原因很簡單，日檢等考試都可能會更改制度或題型，未來可能主流的考試也並非 JLPT，過度追求答題技巧可能只會造成反效果而已。</p>\n<h3 id=\"為什麼要學日文？\"><a href=\"#為什麼要學日文？\" class=\"headerlink\" title=\"為什麼要學日文？\"></a>為什麼要學日文？</h3><p>首先先思考：「為什麼要學日文？」。</p>\n<p>英文不論廣度以及對於工作的幫助，毋庸置疑都是一個投資報酬率遠高於日文的語言，想清楚自己為何要學習日文這件事很重要。</p>\n<blockquote>\n<p><em>大家都會一點日文，感覺好像很簡單</em></p>\n<p><em>我的好朋友們都選日文當通識，我想要跟他們一起上課</em></p>\n<p><em>日文跟中文蠻像的，應該很好學</em></p>\n<p><em>學日文應該很有用</em></p>\n</blockquote>\n<p>學習一些大家都會用的日文很簡單，早安晚安、數數、形容詞變化，比較好一點懂得ます形變化就能夠橫行無阻了。不過這真的是你想要的目標嗎？你花了金錢和時間學習一項技能，最後遺忘。</p>\n<p>所以在開始之前，我希望各位都能夠思考學習日文的理由，儘管最後得出的答案可能是興趣、看日劇、看動漫、追星、甚至只是一句爽都好，<strong>只要你知道你在做什麼</strong>。</p>\n<p>這裡推薦大家閱讀一下 Denny 寫的<a href=\"https://medium.com/@dennyku/%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81-%E5%AF%AB%E7%A8%8B%E5%BC%8F-%E8%A3%9C%E7%BF%92%E7%8F%AD-b6b7ca174393\" target=\"_blank\" rel=\"external\">為什麼你可能不需要「寫程式」補習班？</a>。</p>\n<p>學語言跟學程式很像。學日文的人太多了，如果搞不清楚自己的價值，那麼只能在社會的洪流中被淘汰而已。</p>\n<h3 id=\"要不要報名補習班？\"><a href=\"#要不要報名補習班？\" class=\"headerlink\" title=\"要不要報名補習班？\"></a>要不要報名補習班？</h3><p>在學習日文的路上，如果有人能夠給你適當的指導，那麼絕對能夠少走很多冤枉路，在市面上有很多日語補習班，品質參差不齊。</p>\n<p>所以在被其他補習班的話術迷惑之前，記得先上網做做功課，衡量自己的時間成本後再決定是否需要投入。</p>\n<p>我在大學四年中雖然有修過初級日文及進階日文，但除了初級日文外，自身學習的進度都遠超過課程當中的內容。</p>\n<h3 id=\"用笨方法學日文\"><a href=\"#用笨方法學日文\" class=\"headerlink\" title=\"用笨方法學日文\"></a>用笨方法學日文</h3><h4 id=\"1-每天-2-小時\"><a href=\"#1-每天-2-小時\" class=\"headerlink\" title=\"1. 每天 2 小時\"></a>1. 每天 2 小時</h4><p>學習初期絕對會是最枯燥跟痛苦的時候，因為你沒有任何的基礎觸類旁通，只能緩慢地累積單字量跟文法。這個階段我每天會安排空閒的時間念日文，<strong>然後做筆記</strong>。</p>\n<p>大概 2 個月過後，我已經能夠使用形容詞變化、基本動詞變化，但這時我的單字量並沒有很多，大概只會一些生活常見單字跟動詞而已。</p>\n<p>比起單字，這個時候的重點應該是<strong>盡可能地了解日文的文法規則和句子組成。</strong></p>\n<p>原因很簡單，我們都知道動詞進行式要加 ing 被動是要加上 ed，這是英文當中相當基本的規則。雖然你也可以從大量的句子當中找出這樣的規則，但直接學習文法是了解規則最快的方式。</p>\n<blockquote>\n<p><em>打排球也要知道怎樣算出界跟犯規吧！</em></p>\n</blockquote>\n<p>等到基本文法學習完畢（名詞句變化、形容詞句、形容動詞、動詞變化、敬語常語轉換、て形應用）後，開始能夠看懂大部分的<strong>句子組成架構</strong>後，重點就轉為背單字了。</p>\n<p>特別注意，<strong>動詞是一個語言的靈魂</strong>，動詞變化的掌握度決定你對語言的熟悉程度。所以初期學習日文的目標應該盡量以文法導向，先不用著墨太多會話與單字。</p>\n<h4 id=\"2-利用零碎時間背單字\"><a href=\"#2-利用零碎時間背單字\" class=\"headerlink\" title=\"2. 利用零碎時間背單字\"></a>2. 利用零碎時間背單字</h4><p>下面會講到 Anki 這個應用程式，他能夠根據你對單字的熟悉度更改出現的頻率。</p>\n<p>透過這個應用程式，開始在零碎時間累積單字，並持續加強不熟的文法。</p>\n<p>這個階段也可以開始看一些比較簡單的文章，從文章中練習日本人是如何組織句子的。這個階段會是成長速度最快的階段，因為你已經有足夠的基礎。而這時你應該開始將核心著重於累積單字量上。</p>\n<h4 id=\"3-深入日本文化\"><a href=\"#3-深入日本文化\" class=\"headerlink\" title=\"3. 深入日本文化\"></a>3. 深入日本文化</h4><p>像是「尊敬語」、「謙讓語」，以及他們的變化規則，雖然稍嫌複雜，不過已經有閱讀量跟單字量當作根基，很快就能上手。同時也可以開始針對日文的「複合動詞」、「擬態語」、「熟語」做加強。</p>\n<h4 id=\"4-針對特定主題\"><a href=\"#4-針對特定主題\" class=\"headerlink\" title=\"4. 針對特定主題\"></a>4. 針對特定主題</h4><p>之前撰寫過服務業日語、日語單字剪髮篇，都是在特定情境下背單字，這可以提昇你對單字的熟悉度。</p>\n<h4 id=\"5-多聞闕疑\"><a href=\"#5-多聞闕疑\" class=\"headerlink\" title=\"5. 多聞闕疑\"></a>5. 多聞闕疑</h4><p>如果在學習的階段中遇到一些容易混肴的觀念，像是最常見的「が、は」的使用方式，先不用急著想知道答案，你可能看過 100 種不同的說法。這時候可以先放下心中的疑問，繼續學習，等到累積的閱讀量跟文法夠紮實的時候，自然就會知道。也就是我們常常說的「語感」</p>\n<h3 id=\"怎麼準備考試的？\"><a href=\"#怎麼準備考試的？\" class=\"headerlink\" title=\"怎麼準備考試的？\"></a>怎麼準備考試的？</h3><p>考試前我有買 「EZJapan N3 應考對策」跟「EZJapan N2 應考對策」。大概在前兩週開始寫試題，看解析，把不熟的單字背起來。平常看日劇，NHK 練聽力跟閱讀。</p>\n<p>不過自己平時就有固定學習日文的習慣，所以考前 2 個禮拜時除了做題目練手感之外沒有做太多準備，下面會再提到我有利用哪些資源學習。</p>\n<h3 id=\"自學資源整理\"><a href=\"#自學資源整理\" class=\"headerlink\" title=\"自學資源整理\"></a>自學資源整理</h3><p>之前我有寫過一篇關於自學資源的文章，這邊再補充一些資訊給大家參考。</p>\n<p>在學習日文到一定的程度後，就是靠單字跟閱讀量的累積來決勝負了。學習文法雖然能夠幫助我們快速理解，但是最重要的還是「累積」。</p>\n<p>自己在跌跌撞撞找了很多網站跟資源後，選出幾個我覺得非常有用的網站推薦給大家，希望能夠幫助到一樣在自學之路上跌跌撞撞的學習者們。</p>\n<h4 id=\"1-Nippon-所藏\"><a href=\"#1-Nippon-所藏\" class=\"headerlink\" title=\"1. Nippon 所藏\"></a>1. <a href=\"http://www.books.com.tw/products/0010729474\" target=\"_blank\" rel=\"external\">Nippon 所藏</a></h4><p>我喜歡日本文化，所以到書店時如果有看到喜歡的雜誌或書籍就會買下來。其中我最喜歡的就是 Nippon 所藏。他的排版非常用心，而且內容相當豐富，我每一本都買下來了。裏頭也可以學習到很多關於日本流行的話題跟單字。如果程度還沒有很紮實的初學者，每一篇文章都有中文對照，也有提供單字跟文法筆記。</p>\n<ul>\n<li><strong>日本和食 100 品</strong>：提供許多日式料理的食譜，獲益良多。</li>\n<li><strong>日本流行話題 100 選</strong>：結合當時日本時下流行的話題，像是半澤直樹、王牌大律師、家政婦女王、日本核災、晴空塔等等。</li>\n<li><strong>日本潮流 100 選</strong>：以「時尚」為主題，裏頭有許多關於美容美髮相關的單字，有一章節是在討論如何修飾自己的造型、體態，後半段甚至還有約會筆記跟注意事項！</li>\n<li><strong>日本職場案內 100 則</strong>：敘述日本的職場文化以及潛規則，像是年功序列制、團塊世代、寄信時、接電話時、交換名片時要注意的事情，也有一小節是在教你如何使用「尊敬語」與「謙讓語」，如果要到日本工作的朋友們，這本相當推</li>\n</ul>\n<h4 id=\"2-音速日語學習\"><a href=\"#2-音速日語學習\" class=\"headerlink\" title=\"2. 音速日語學習\"></a>2. <a href=\"https://jp.sonic-learning.com/\" target=\"_blank\" rel=\"external\">音速日語學習</a></h4><p>大家在學習日文的旅途上應該都有它的陪伴吧，我自己在剛學習日文時是每天都會到音速日語學習中學習一個單元。一個單元雖然不多，不過累積了 3 個月之後就有將近 100 個單元。</p>\n<h4 id=\"3-日劇\"><a href=\"#3-日劇\" class=\"headerlink\" title=\"3. 日劇\"></a>3. 日劇</h4><p>在大學四年中，我看了許多日劇。不過我看日劇時會分成學習和純娛樂兩種，學習時我會把字幕擋起來，遇到聽不太懂的句子就直接暫停重聽，再把新學習到的單字或句子輸入到 Anki 當中之後再複習。</p>\n<p>印象最深刻的是我之前把王牌大律師後面死刑辯論那一段全部背下來了XD。這樣子學習效果很好，因為他強迫你重複去聽某個句子，而且事後的複習又會加深印象以及日劇當中的場景作輔助。（雖然聽力還是我的罩門QQ）</p>\n<h4 id=\"4-Lang-8\"><a href=\"#4-Lang-8\" class=\"headerlink\" title=\"4. Lang-8\"></a>4. <a href=\"http://lang-8.com/\" target=\"_blank\" rel=\"external\">Lang-8</a></h4><p><img src=\"https://cdn-images-1.medium.com/max/2000/1*SnCiZHXA30pEek1ToxwhWg.png\" alt=\"img\"></p>\n<p>是我在學習日文中，幫助最大的學習平台，沒有之一。他的運作方式是這樣的，你可以在這個平台上用你想要學習的語言<strong>撰寫日記</strong>，之後就會有相對的母語人士來幫你修改。</p>\n<p>這樣子誰要來幫我改？這個網站的機制做得很好，如果你想要你的日記被別人看到，你就要用你的母語幫別人修改日記，才能拿到點數（Lang-8 裡頭稱作 L-point），點數越高你的排名就會越高，日記的曝光率也就越高。</p>\n<p>所以別人為了拿點數，就會來閱讀、修改你的日記，久而久之就能搜集來自母語者的建議。</p>\n<p>就算你只有 N5, N4 的程度也沒關係，放下自尊跟臉皮寫寫一些文章，今天的心情、發生了什麼事，試著寫下來，就算文法錯了也沒關係。</p>\n<p>不過，也因為如此，偶而會出現修改品質參差不一的情形。例如：有些日本人就硬要你改成敬語。</p>\n<p>或是省略 ている 的 い 時，有些日本人不知道你是不會還是真的不懂，所以就一律幫你加上去等等。所以修改之後的日記品質，必須靠自己確認。</p>\n<p>這的確是讓我學習的一大動力之一，分享日記給日本人看，瀏覽其他國家學習中文後的日記，說真的挺好玩的。可以從中認識一些不錯的朋友也說不定喲！</p>\n<p>很可惜的一點是，目前 Lang-8 這個平台已經不開放註冊了。好像轉移服務到 <a href=\"https://hinative.com/zh-CN\" target=\"_blank\" rel=\"external\">HiNative</a> 的平台上去了。Hinative 上比較像是用問問題的模式來進行，個人比較不喜歡，有興趣的讀者們可以參考看看。</p>\n<p>我目前的<strong>排名是 445/410,886</strong>，不過已經荒廢了一陣子。歡迎之前有註冊的朋友們一起交流！</p>\n<h4 id=\"5-徵求外國朋友佈告欄\"><a href=\"#5-徵求外國朋友佈告欄\" class=\"headerlink\" title=\"5. 徵求外國朋友佈告欄\"></a>5. <a href=\"http://www.jcinfo.net/tw/friends/\" target=\"_blank\" rel=\"external\">徵求外國朋友佈告欄</a></h4><p>除了日語學習外，也常常會徵求其他國家的朋友。但也有許多來者不善的貼文就是了。</p>\n<p>至於能不能夠找到志同道合的夥伴，需要靠很大的運氣。</p>\n<p>有許多人只是想要和外國人聊聊天而已，並不是真的想要做「語言交換」這個目的。而且就幾次交流的經驗來看，除非雙方都是為了學習語言，不然很容易就陷入純聊天的情況，根本無法進行語言交換。</p>\n<h4 id=\"6-Anki\"><a href=\"#6-Anki\" class=\"headerlink\" title=\"6. Anki\"></a>6. <a href=\"https://ankiweb.net/\" target=\"_blank\" rel=\"external\">Anki</a></h4><p>不多說，背單字的神器。我目前也只有累積 4,5000 的單字而已，不過因為我習慣把自己看到有趣的動漫台詞跟<strong>自己的筆記</strong>加進去，所以看單字的時候不至於那麼枯燥。</p>\n<p>像是什麼<strong>趣味でヒーロをやっている者だ</strong>這種句子XD。至少在一片單字海當中，看到幾句中二的台詞能夠調解一下。</p>\n<h4 id=\"7-日本語之森\"><a href=\"#7-日本語之森\" class=\"headerlink\" title=\"7. 日本語之森\"></a>7. <a href=\"http://nihongonomori.com/\" target=\"_blank\" rel=\"external\">日本語之森</a></h4><p>文法講解非常清楚。而且資源很豐富，想要短時間加強文法的讀者們可以參考看看！這個網站的特色是都是由日本人來講解文法的，所以可以用更 native 的方式來學習日文。</p>\n<h4 id=\"8-原文小說\"><a href=\"#8-原文小說\" class=\"headerlink\" title=\"8. 原文小說\"></a>8. 原文小說</h4><p>我很喜歡日本推理的作品，像是伊坂幸太郎、米澤穗信、東野圭吾都是我很喜歡的作家，之前到日本時就買了幾本文庫本，在通勤時會拿出來翻，並且把不會的單字用螢光筆匡起來之後回家再查。</p>\n<p>大概持續了兩個月左右，明顯感受到單字量大幅提升，不過看完一本小說的速度好慢QQ，老實說我還沒看完任何一本。</p>\n<h4 id=\"9-日語八百屋\"><a href=\"#9-日語八百屋\" class=\"headerlink\" title=\"9. 日語八百屋\"></a>9. 日語八百屋</h4><p>在今年的 3 月份左右，我成立了<a href=\"https://www.shurado.com/\" target=\"_blank\" rel=\"external\">日語八百屋週刊</a>。因為我自己本身有在收集筆記跟文章的習慣，久而久之累積了不少，想說自己做個 email 的服務把這些筆記寄給大家，舒緩一下在漫長日文自學之路中的枯燥苦悶。</p>\n<p><strong>致力於滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。</strong></p>\n<p>有興趣的朋友們也可以來訂閱看看，如果內容不喜歡隨時可以退訂，或者直接到 <a href=\"https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B\" target=\"_blank\" rel=\"external\">Medium</a> 看看歷期週刊。</p>\n<p>目前已經有 1200 多人訂閱，總共有 24 期週刊內容，也歡迎大家一起分享自己的學習心得或筆記。</p>\n<p><a href=\"https://www.shurado.com/\" target=\"_blank\" rel=\"external\">日語八百屋 | 為日本愛好者而生的週刊</a></p>\n<h3 id=\"寫下來\"><a href=\"#寫下來\" class=\"headerlink\" title=\"寫下來\"></a>寫下來</h3><p>寫作是個很好組織自己想法的方式。如果在學習日文時有做筆記的習慣，那麼一年兩年累積下來的量相當可觀。</p>\n<p>同時，如果你能夠將文章發佈在部落格當中，除了能夠幫助到其他人之外，因為需要讓別人看到，所以你更需要強迫自己組織好自己的文章架構。</p>\n<blockquote>\n<p>光是寫下來這件事，你就贏過許多舉足不前的台灣人了。</p>\n</blockquote>\n<h4 id=\"一些推薦使用的工具\"><a href=\"#一些推薦使用的工具\" class=\"headerlink\" title=\"一些推薦使用的工具\"></a>一些推薦使用的工具</h4><ul>\n<li><a href=\"https://evernote.com/intl/zh-tw/\" target=\"_blank\" rel=\"external\">Evernote</a> 非常好用的筆記軟體，除了用在日語學習上還可以用在工作、生活當中，他的搜尋機制相當強大，很容易就可以找到自己想要找的東西</li>\n<li>Google drive</li>\n<li><a href=\"https://typora.io/\" target=\"_blank\" rel=\"external\">typora</a>：一個 <a href=\"http://markdown.tw/\" target=\"_blank\" rel=\"external\">markdown</a> 的編輯器，喜歡 markdown 語法，或是想要嘗試簡潔地寫文章非常推薦這個軟體！</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>其實當初沒有想很多，只是一直以來都對日本文化有興趣，想要趁著高中畢業的空檔學習。後來因為科系（資管系）的關係，有部分的技術文章或是部落格都是用日文撰寫，還有一年跑去台大修日本歷史（全日文授課），覺得當初幸好有好好學日文。後來出社會面試後，也因為日文的關係，在面試時遇到日本人時可以多講幾句話加深印象。</p>\n<p>這次考完試給我最大的感受應該就是真正的日文學習之路才剛開始而已。</p>\n<p>如果以檢定為目標，你可能會錯失許多學習日文的美景，不過考取檢定確實是一個測試自己實力的好方法，不管是為了什麼目標考取檢定，我們都應該要知道，檢定只是一個另外一個起點而已。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>從大學開始，因為高中畢業後對日本文化相當有興趣，所以開始自學五十音。先談談我的背景：</p>\n<ul>\n<li>高職電子科畢業</li>\n<li>科大資管系</li>\n</ul>\n<p>大學選修初階日文跟進階日文，不過進度本身已超過課程許多。期間雖然一直想報名日檢，但礙於自身實力與經濟考量，所以直到大學快畢業後才報考日檢。</p>\n<p>以下是我這次的日檢成績：</p>\n<ul>\n<li>日本語能力檢定 <strong>N2 (134/180)</strong></li>\n<li>日本語能力檢定 <strong>N3 (163/180)</strong></li>\n</ul>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*N94QaFraADD7onb_wP-KeA.png\" alt=\"N2\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*STX_msnfGMBp95gEUNhXlw.png\" alt=\"N3\"></p>\n<p>這並不是很亮眼的成績，不過這篇文章會結合我自己自學日文的經驗，並且分享一些學習的技巧，畢竟一直以來依靠許多網路資源，希望能夠回饋給大家。</p>\n<p>這篇文章會分成兩部分，第一部分談談自己對學習語言的看法，第二部分則是介紹一些我在學習日文時常用的學習資源。</p>\n<p>這篇文章不會提到答題技巧或是短期衝刺的秘訣，原因很簡單，日檢等考試都可能會更改制度或題型，未來可能主流的考試也並非 JLPT，過度追求答題技巧可能只會造成反效果而已。</p>\n<h3 id=\"為什麼要學日文？\"><a href=\"#為什麼要學日文？\" class=\"headerlink\" title=\"為什麼要學日文？\"></a>為什麼要學日文？</h3><p>首先先思考：「為什麼要學日文？」。</p>\n<p>英文不論廣度以及對於工作的幫助，毋庸置疑都是一個投資報酬率遠高於日文的語言，想清楚自己為何要學習日文這件事很重要。</p>\n<blockquote>\n<p><em>大家都會一點日文，感覺好像很簡單</em></p>\n<p><em>我的好朋友們都選日文當通識，我想要跟他們一起上課</em></p>\n<p><em>日文跟中文蠻像的，應該很好學</em></p>\n<p><em>學日文應該很有用</em></p>\n</blockquote>\n<p>學習一些大家都會用的日文很簡單，早安晚安、數數、形容詞變化，比較好一點懂得ます形變化就能夠橫行無阻了。不過這真的是你想要的目標嗎？你花了金錢和時間學習一項技能，最後遺忘。</p>\n<p>所以在開始之前，我希望各位都能夠思考學習日文的理由，儘管最後得出的答案可能是興趣、看日劇、看動漫、追星、甚至只是一句爽都好，<strong>只要你知道你在做什麼</strong>。</p>\n<p>這裡推薦大家閱讀一下 Denny 寫的<a href=\"https://medium.com/@dennyku/%E7%82%BA%E4%BB%80%E9%BA%BC%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81-%E5%AF%AB%E7%A8%8B%E5%BC%8F-%E8%A3%9C%E7%BF%92%E7%8F%AD-b6b7ca174393\" target=\"_blank\" rel=\"external\">為什麼你可能不需要「寫程式」補習班？</a>。</p>\n<p>學語言跟學程式很像。學日文的人太多了，如果搞不清楚自己的價值，那麼只能在社會的洪流中被淘汰而已。</p>\n<h3 id=\"要不要報名補習班？\"><a href=\"#要不要報名補習班？\" class=\"headerlink\" title=\"要不要報名補習班？\"></a>要不要報名補習班？</h3><p>在學習日文的路上，如果有人能夠給你適當的指導，那麼絕對能夠少走很多冤枉路，在市面上有很多日語補習班，品質參差不齊。</p>\n<p>所以在被其他補習班的話術迷惑之前，記得先上網做做功課，衡量自己的時間成本後再決定是否需要投入。</p>\n<p>我在大學四年中雖然有修過初級日文及進階日文，但除了初級日文外，自身學習的進度都遠超過課程當中的內容。</p>\n<h3 id=\"用笨方法學日文\"><a href=\"#用笨方法學日文\" class=\"headerlink\" title=\"用笨方法學日文\"></a>用笨方法學日文</h3><h4 id=\"1-每天-2-小時\"><a href=\"#1-每天-2-小時\" class=\"headerlink\" title=\"1. 每天 2 小時\"></a>1. 每天 2 小時</h4><p>學習初期絕對會是最枯燥跟痛苦的時候，因為你沒有任何的基礎觸類旁通，只能緩慢地累積單字量跟文法。這個階段我每天會安排空閒的時間念日文，<strong>然後做筆記</strong>。</p>\n<p>大概 2 個月過後，我已經能夠使用形容詞變化、基本動詞變化，但這時我的單字量並沒有很多，大概只會一些生活常見單字跟動詞而已。</p>\n<p>比起單字，這個時候的重點應該是<strong>盡可能地了解日文的文法規則和句子組成。</strong></p>\n<p>原因很簡單，我們都知道動詞進行式要加 ing 被動是要加上 ed，這是英文當中相當基本的規則。雖然你也可以從大量的句子當中找出這樣的規則，但直接學習文法是了解規則最快的方式。</p>\n<blockquote>\n<p><em>打排球也要知道怎樣算出界跟犯規吧！</em></p>\n</blockquote>\n<p>等到基本文法學習完畢（名詞句變化、形容詞句、形容動詞、動詞變化、敬語常語轉換、て形應用）後，開始能夠看懂大部分的<strong>句子組成架構</strong>後，重點就轉為背單字了。</p>\n<p>特別注意，<strong>動詞是一個語言的靈魂</strong>，動詞變化的掌握度決定你對語言的熟悉程度。所以初期學習日文的目標應該盡量以文法導向，先不用著墨太多會話與單字。</p>\n<h4 id=\"2-利用零碎時間背單字\"><a href=\"#2-利用零碎時間背單字\" class=\"headerlink\" title=\"2. 利用零碎時間背單字\"></a>2. 利用零碎時間背單字</h4><p>下面會講到 Anki 這個應用程式，他能夠根據你對單字的熟悉度更改出現的頻率。</p>\n<p>透過這個應用程式，開始在零碎時間累積單字，並持續加強不熟的文法。</p>\n<p>這個階段也可以開始看一些比較簡單的文章，從文章中練習日本人是如何組織句子的。這個階段會是成長速度最快的階段，因為你已經有足夠的基礎。而這時你應該開始將核心著重於累積單字量上。</p>\n<h4 id=\"3-深入日本文化\"><a href=\"#3-深入日本文化\" class=\"headerlink\" title=\"3. 深入日本文化\"></a>3. 深入日本文化</h4><p>像是「尊敬語」、「謙讓語」，以及他們的變化規則，雖然稍嫌複雜，不過已經有閱讀量跟單字量當作根基，很快就能上手。同時也可以開始針對日文的「複合動詞」、「擬態語」、「熟語」做加強。</p>\n<h4 id=\"4-針對特定主題\"><a href=\"#4-針對特定主題\" class=\"headerlink\" title=\"4. 針對特定主題\"></a>4. 針對特定主題</h4><p>之前撰寫過服務業日語、日語單字剪髮篇，都是在特定情境下背單字，這可以提昇你對單字的熟悉度。</p>\n<h4 id=\"5-多聞闕疑\"><a href=\"#5-多聞闕疑\" class=\"headerlink\" title=\"5. 多聞闕疑\"></a>5. 多聞闕疑</h4><p>如果在學習的階段中遇到一些容易混肴的觀念，像是最常見的「が、は」的使用方式，先不用急著想知道答案，你可能看過 100 種不同的說法。這時候可以先放下心中的疑問，繼續學習，等到累積的閱讀量跟文法夠紮實的時候，自然就會知道。也就是我們常常說的「語感」</p>\n<h3 id=\"怎麼準備考試的？\"><a href=\"#怎麼準備考試的？\" class=\"headerlink\" title=\"怎麼準備考試的？\"></a>怎麼準備考試的？</h3><p>考試前我有買 「EZJapan N3 應考對策」跟「EZJapan N2 應考對策」。大概在前兩週開始寫試題，看解析，把不熟的單字背起來。平常看日劇，NHK 練聽力跟閱讀。</p>\n<p>不過自己平時就有固定學習日文的習慣，所以考前 2 個禮拜時除了做題目練手感之外沒有做太多準備，下面會再提到我有利用哪些資源學習。</p>\n<h3 id=\"自學資源整理\"><a href=\"#自學資源整理\" class=\"headerlink\" title=\"自學資源整理\"></a>自學資源整理</h3><p>之前我有寫過一篇關於自學資源的文章，這邊再補充一些資訊給大家參考。</p>\n<p>在學習日文到一定的程度後，就是靠單字跟閱讀量的累積來決勝負了。學習文法雖然能夠幫助我們快速理解，但是最重要的還是「累積」。</p>\n<p>自己在跌跌撞撞找了很多網站跟資源後，選出幾個我覺得非常有用的網站推薦給大家，希望能夠幫助到一樣在自學之路上跌跌撞撞的學習者們。</p>\n<h4 id=\"1-Nippon-所藏\"><a href=\"#1-Nippon-所藏\" class=\"headerlink\" title=\"1. Nippon 所藏\"></a>1. <a href=\"http://www.books.com.tw/products/0010729474\" target=\"_blank\" rel=\"external\">Nippon 所藏</a></h4><p>我喜歡日本文化，所以到書店時如果有看到喜歡的雜誌或書籍就會買下來。其中我最喜歡的就是 Nippon 所藏。他的排版非常用心，而且內容相當豐富，我每一本都買下來了。裏頭也可以學習到很多關於日本流行的話題跟單字。如果程度還沒有很紮實的初學者，每一篇文章都有中文對照，也有提供單字跟文法筆記。</p>\n<ul>\n<li><strong>日本和食 100 品</strong>：提供許多日式料理的食譜，獲益良多。</li>\n<li><strong>日本流行話題 100 選</strong>：結合當時日本時下流行的話題，像是半澤直樹、王牌大律師、家政婦女王、日本核災、晴空塔等等。</li>\n<li><strong>日本潮流 100 選</strong>：以「時尚」為主題，裏頭有許多關於美容美髮相關的單字，有一章節是在討論如何修飾自己的造型、體態，後半段甚至還有約會筆記跟注意事項！</li>\n<li><strong>日本職場案內 100 則</strong>：敘述日本的職場文化以及潛規則，像是年功序列制、團塊世代、寄信時、接電話時、交換名片時要注意的事情，也有一小節是在教你如何使用「尊敬語」與「謙讓語」，如果要到日本工作的朋友們，這本相當推</li>\n</ul>\n<h4 id=\"2-音速日語學習\"><a href=\"#2-音速日語學習\" class=\"headerlink\" title=\"2. 音速日語學習\"></a>2. <a href=\"https://jp.sonic-learning.com/\" target=\"_blank\" rel=\"external\">音速日語學習</a></h4><p>大家在學習日文的旅途上應該都有它的陪伴吧，我自己在剛學習日文時是每天都會到音速日語學習中學習一個單元。一個單元雖然不多，不過累積了 3 個月之後就有將近 100 個單元。</p>\n<h4 id=\"3-日劇\"><a href=\"#3-日劇\" class=\"headerlink\" title=\"3. 日劇\"></a>3. 日劇</h4><p>在大學四年中，我看了許多日劇。不過我看日劇時會分成學習和純娛樂兩種，學習時我會把字幕擋起來，遇到聽不太懂的句子就直接暫停重聽，再把新學習到的單字或句子輸入到 Anki 當中之後再複習。</p>\n<p>印象最深刻的是我之前把王牌大律師後面死刑辯論那一段全部背下來了XD。這樣子學習效果很好，因為他強迫你重複去聽某個句子，而且事後的複習又會加深印象以及日劇當中的場景作輔助。（雖然聽力還是我的罩門QQ）</p>\n<h4 id=\"4-Lang-8\"><a href=\"#4-Lang-8\" class=\"headerlink\" title=\"4. Lang-8\"></a>4. <a href=\"http://lang-8.com/\" target=\"_blank\" rel=\"external\">Lang-8</a></h4><p><img src=\"https://cdn-images-1.medium.com/max/2000/1*SnCiZHXA30pEek1ToxwhWg.png\" alt=\"img\"></p>\n<p>是我在學習日文中，幫助最大的學習平台，沒有之一。他的運作方式是這樣的，你可以在這個平台上用你想要學習的語言<strong>撰寫日記</strong>，之後就會有相對的母語人士來幫你修改。</p>\n<p>這樣子誰要來幫我改？這個網站的機制做得很好，如果你想要你的日記被別人看到，你就要用你的母語幫別人修改日記，才能拿到點數（Lang-8 裡頭稱作 L-point），點數越高你的排名就會越高，日記的曝光率也就越高。</p>\n<p>所以別人為了拿點數，就會來閱讀、修改你的日記，久而久之就能搜集來自母語者的建議。</p>\n<p>就算你只有 N5, N4 的程度也沒關係，放下自尊跟臉皮寫寫一些文章，今天的心情、發生了什麼事，試著寫下來，就算文法錯了也沒關係。</p>\n<p>不過，也因為如此，偶而會出現修改品質參差不一的情形。例如：有些日本人就硬要你改成敬語。</p>\n<p>或是省略 ている 的 い 時，有些日本人不知道你是不會還是真的不懂，所以就一律幫你加上去等等。所以修改之後的日記品質，必須靠自己確認。</p>\n<p>這的確是讓我學習的一大動力之一，分享日記給日本人看，瀏覽其他國家學習中文後的日記，說真的挺好玩的。可以從中認識一些不錯的朋友也說不定喲！</p>\n<p>很可惜的一點是，目前 Lang-8 這個平台已經不開放註冊了。好像轉移服務到 <a href=\"https://hinative.com/zh-CN\" target=\"_blank\" rel=\"external\">HiNative</a> 的平台上去了。Hinative 上比較像是用問問題的模式來進行，個人比較不喜歡，有興趣的讀者們可以參考看看。</p>\n<p>我目前的<strong>排名是 445/410,886</strong>，不過已經荒廢了一陣子。歡迎之前有註冊的朋友們一起交流！</p>\n<h4 id=\"5-徵求外國朋友佈告欄\"><a href=\"#5-徵求外國朋友佈告欄\" class=\"headerlink\" title=\"5. 徵求外國朋友佈告欄\"></a>5. <a href=\"http://www.jcinfo.net/tw/friends/\" target=\"_blank\" rel=\"external\">徵求外國朋友佈告欄</a></h4><p>除了日語學習外，也常常會徵求其他國家的朋友。但也有許多來者不善的貼文就是了。</p>\n<p>至於能不能夠找到志同道合的夥伴，需要靠很大的運氣。</p>\n<p>有許多人只是想要和外國人聊聊天而已，並不是真的想要做「語言交換」這個目的。而且就幾次交流的經驗來看，除非雙方都是為了學習語言，不然很容易就陷入純聊天的情況，根本無法進行語言交換。</p>\n<h4 id=\"6-Anki\"><a href=\"#6-Anki\" class=\"headerlink\" title=\"6. Anki\"></a>6. <a href=\"https://ankiweb.net/\" target=\"_blank\" rel=\"external\">Anki</a></h4><p>不多說，背單字的神器。我目前也只有累積 4,5000 的單字而已，不過因為我習慣把自己看到有趣的動漫台詞跟<strong>自己的筆記</strong>加進去，所以看單字的時候不至於那麼枯燥。</p>\n<p>像是什麼<strong>趣味でヒーロをやっている者だ</strong>這種句子XD。至少在一片單字海當中，看到幾句中二的台詞能夠調解一下。</p>\n<h4 id=\"7-日本語之森\"><a href=\"#7-日本語之森\" class=\"headerlink\" title=\"7. 日本語之森\"></a>7. <a href=\"http://nihongonomori.com/\" target=\"_blank\" rel=\"external\">日本語之森</a></h4><p>文法講解非常清楚。而且資源很豐富，想要短時間加強文法的讀者們可以參考看看！這個網站的特色是都是由日本人來講解文法的，所以可以用更 native 的方式來學習日文。</p>\n<h4 id=\"8-原文小說\"><a href=\"#8-原文小說\" class=\"headerlink\" title=\"8. 原文小說\"></a>8. 原文小說</h4><p>我很喜歡日本推理的作品，像是伊坂幸太郎、米澤穗信、東野圭吾都是我很喜歡的作家，之前到日本時就買了幾本文庫本，在通勤時會拿出來翻，並且把不會的單字用螢光筆匡起來之後回家再查。</p>\n<p>大概持續了兩個月左右，明顯感受到單字量大幅提升，不過看完一本小說的速度好慢QQ，老實說我還沒看完任何一本。</p>\n<h4 id=\"9-日語八百屋\"><a href=\"#9-日語八百屋\" class=\"headerlink\" title=\"9. 日語八百屋\"></a>9. 日語八百屋</h4><p>在今年的 3 月份左右，我成立了<a href=\"https://www.shurado.com/\" target=\"_blank\" rel=\"external\">日語八百屋週刊</a>。因為我自己本身有在收集筆記跟文章的習慣，久而久之累積了不少，想說自己做個 email 的服務把這些筆記寄給大家，舒緩一下在漫長日文自學之路中的枯燥苦悶。</p>\n<p><strong>致力於滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。</strong></p>\n<p>有興趣的朋友們也可以來訂閱看看，如果內容不喜歡隨時可以退訂，或者直接到 <a href=\"https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B\" target=\"_blank\" rel=\"external\">Medium</a> 看看歷期週刊。</p>\n<p>目前已經有 1200 多人訂閱，總共有 24 期週刊內容，也歡迎大家一起分享自己的學習心得或筆記。</p>\n<p><a href=\"https://www.shurado.com/\" target=\"_blank\" rel=\"external\">日語八百屋 | 為日本愛好者而生的週刊</a></p>\n<h3 id=\"寫下來\"><a href=\"#寫下來\" class=\"headerlink\" title=\"寫下來\"></a>寫下來</h3><p>寫作是個很好組織自己想法的方式。如果在學習日文時有做筆記的習慣，那麼一年兩年累積下來的量相當可觀。</p>\n<p>同時，如果你能夠將文章發佈在部落格當中，除了能夠幫助到其他人之外，因為需要讓別人看到，所以你更需要強迫自己組織好自己的文章架構。</p>\n<blockquote>\n<p>光是寫下來這件事，你就贏過許多舉足不前的台灣人了。</p>\n</blockquote>\n<h4 id=\"一些推薦使用的工具\"><a href=\"#一些推薦使用的工具\" class=\"headerlink\" title=\"一些推薦使用的工具\"></a>一些推薦使用的工具</h4><ul>\n<li><a href=\"https://evernote.com/intl/zh-tw/\" target=\"_blank\" rel=\"external\">Evernote</a> 非常好用的筆記軟體，除了用在日語學習上還可以用在工作、生活當中，他的搜尋機制相當強大，很容易就可以找到自己想要找的東西</li>\n<li>Google drive</li>\n<li><a href=\"https://typora.io/\" target=\"_blank\" rel=\"external\">typora</a>：一個 <a href=\"http://markdown.tw/\" target=\"_blank\" rel=\"external\">markdown</a> 的編輯器，喜歡 markdown 語法，或是想要嘗試簡潔地寫文章非常推薦這個軟體！</li>\n</ul>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>其實當初沒有想很多，只是一直以來都對日本文化有興趣，想要趁著高中畢業的空檔學習。後來因為科系（資管系）的關係，有部分的技術文章或是部落格都是用日文撰寫，還有一年跑去台大修日本歷史（全日文授課），覺得當初幸好有好好學日文。後來出社會面試後，也因為日文的關係，在面試時遇到日本人時可以多講幾句話加深印象。</p>\n<p>這次考完試給我最大的感受應該就是真正的日文學習之路才剛開始而已。</p>\n<p>如果以檢定為目標，你可能會錯失許多學習日文的美景，不過考取檢定確實是一個測試自己實力的好方法，不管是為了什麼目標考取檢定，我們都應該要知道，檢定只是一個另外一個起點而已。</p>\n"},{"title":"5/1 勞工大代誌","date":"2017-04-30T16:00:00.000Z","_content":"\n![landing image](https://kjj6198.github.io/pround-of-labor/app/img/top-image.jpg)\n\n先來看[成品](https://kjj6198.github.io/pround-of-labor/app/)吧！\n\n記錄一下這個專案的始末。\n\n## 規劃\n\n從四月中旬開始規劃、搜集資料到實作，都是一個人慢慢整理而成的，除了想要練習更好的視覺化技巧之外，主要還是想透過這樣的方式來了解台灣的勞動問題，以及曾經經歷過的勞工運動。\n\n因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。\n\n不過這個專題仍然有太多議題沒有涵蓋到，像是**年金制度**、**職災統計**等等。因為時間上的關係，無法深入介紹。\n\n## 為什麼想要做這份專案\n\n國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。\n\n這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。\n\n工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會，這些都是現在台灣正在面臨，且有可能會日漸嚴重的議題。\n\n如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。\n\n更何況是在我還沒出社會之前，就已經是那麼慘的現況了。\n\n台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。\n\n這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。\n\n身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。\n但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。\n\n其實在查資料的時候，有很多讓人鼻酸的故事。\n\n像是關廠工人臥軌時，民眾大喊輾過去；\n像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；\n像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。\n\n我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，更何況是以前沒有任何勞基法保護的勞工們。\n\n最後，特別感謝小公主陪我度過忙碌的一個月，幫我找資料跟拍照，這一個月陪我一起奮鬥；\n還有 [潘敬昇 （Sheng Pan）](https://www.facebook.com/sandokaishy?fref=mentions) 義無反顧地幫我設計了很有質感的 LOGO 跟 Title，還有設計上的建議。\n\n最後，如果你們也有什麼勞工議題或心得想要分享的話，可以在 facebook 或是 twiiter 加入 [#勞工大代誌](https://www.facebook.com/hashtag/%E5%8B%9E%E5%B7%A5%E5%A4%A7%E4%BB%A3%E8%AA%8C?source=feed_text&story_id=1269510183156649) 這個 hashtag。如果你喜歡這份專案，也可以順手把他分享出去。\n\n另外，除了在網站裡頭所提到的議題跟事件，還有太多是我不知道、不清楚的事情存在在這個社會上。\n\n我整理了一份勞工大代誌總表：[https://goo.gl/nPxeg2](https://goo.gl/nPxeg2) 任何人都可以編輯。\n\n敬，所有勞工們。\n\n## 後記\n\n- 之後這個專題被分享到[求職天眼通](https://www.facebook.com/qollie.tw/)上，也算是讓更多人知道了。\n- 暑假選修了一門叫做職場災害與防治","source":"_posts/labor-project.md","raw":"---\ntitle: 5/1 勞工大代誌\ndate: 2017-5-1\ncategories:\n  - 前端\ntags:\n  - 勞動節\n  - 視覺化\n  - d3js\n  - 勞工大代誌\n---\n\n![landing image](https://kjj6198.github.io/pround-of-labor/app/img/top-image.jpg)\n\n先來看[成品](https://kjj6198.github.io/pround-of-labor/app/)吧！\n\n記錄一下這個專案的始末。\n\n## 規劃\n\n從四月中旬開始規劃、搜集資料到實作，都是一個人慢慢整理而成的，除了想要練習更好的視覺化技巧之外，主要還是想透過這樣的方式來了解台灣的勞動問題，以及曾經經歷過的勞工運動。\n\n因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。\n\n不過這個專題仍然有太多議題沒有涵蓋到，像是**年金制度**、**職災統計**等等。因為時間上的關係，無法深入介紹。\n\n## 為什麼想要做這份專案\n\n國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。\n\n這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。\n\n工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會，這些都是現在台灣正在面臨，且有可能會日漸嚴重的議題。\n\n如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。\n\n更何況是在我還沒出社會之前，就已經是那麼慘的現況了。\n\n台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。\n\n這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。\n\n身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。\n但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。\n\n其實在查資料的時候，有很多讓人鼻酸的故事。\n\n像是關廠工人臥軌時，民眾大喊輾過去；\n像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；\n像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。\n\n我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，更何況是以前沒有任何勞基法保護的勞工們。\n\n最後，特別感謝小公主陪我度過忙碌的一個月，幫我找資料跟拍照，這一個月陪我一起奮鬥；\n還有 [潘敬昇 （Sheng Pan）](https://www.facebook.com/sandokaishy?fref=mentions) 義無反顧地幫我設計了很有質感的 LOGO 跟 Title，還有設計上的建議。\n\n最後，如果你們也有什麼勞工議題或心得想要分享的話，可以在 facebook 或是 twiiter 加入 [#勞工大代誌](https://www.facebook.com/hashtag/%E5%8B%9E%E5%B7%A5%E5%A4%A7%E4%BB%A3%E8%AA%8C?source=feed_text&story_id=1269510183156649) 這個 hashtag。如果你喜歡這份專案，也可以順手把他分享出去。\n\n另外，除了在網站裡頭所提到的議題跟事件，還有太多是我不知道、不清楚的事情存在在這個社會上。\n\n我整理了一份勞工大代誌總表：[https://goo.gl/nPxeg2](https://goo.gl/nPxeg2) 任何人都可以編輯。\n\n敬，所有勞工們。\n\n## 後記\n\n- 之後這個專題被分享到[求職天眼通](https://www.facebook.com/qollie.tw/)上，也算是讓更多人知道了。\n- 暑假選修了一門叫做職場災害與防治","slug":"labor-project","published":1,"updated":"2017-07-19T14:02:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitr2001miw5t9ytzp3ri","content":"<p><img src=\"https://kjj6198.github.io/pround-of-labor/app/img/top-image.jpg\" alt=\"landing image\"></p>\n<p>先來看<a href=\"https://kjj6198.github.io/pround-of-labor/app/\">成品</a>吧！</p>\n<p>記錄一下這個專案的始末。</p>\n<h2 id=\"規劃\"><a href=\"#規劃\" class=\"headerlink\" title=\"規劃\"></a>規劃</h2><p>從四月中旬開始規劃、搜集資料到實作，都是一個人慢慢整理而成的，除了想要練習更好的視覺化技巧之外，主要還是想透過這樣的方式來了解台灣的勞動問題，以及曾經經歷過的勞工運動。</p>\n<p>因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。</p>\n<p>不過這個專題仍然有太多議題沒有涵蓋到，像是<strong>年金制度</strong>、<strong>職災統計</strong>等等。因為時間上的關係，無法深入介紹。</p>\n<h2 id=\"為什麼想要做這份專案\"><a href=\"#為什麼想要做這份專案\" class=\"headerlink\" title=\"為什麼想要做這份專案\"></a>為什麼想要做這份專案</h2><p>國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。</p>\n<p>這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。</p>\n<p>工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會，這些都是現在台灣正在面臨，且有可能會日漸嚴重的議題。</p>\n<p>如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。</p>\n<p>更何況是在我還沒出社會之前，就已經是那麼慘的現況了。</p>\n<p>台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。</p>\n<p>這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。</p>\n<p>身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。<br>但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。</p>\n<p>其實在查資料的時候，有很多讓人鼻酸的故事。</p>\n<p>像是關廠工人臥軌時，民眾大喊輾過去；<br>像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；<br>像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。</p>\n<p>我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，更何況是以前沒有任何勞基法保護的勞工們。</p>\n<p>最後，特別感謝小公主陪我度過忙碌的一個月，幫我找資料跟拍照，這一個月陪我一起奮鬥；<br>還有 <a href=\"https://www.facebook.com/sandokaishy?fref=mentions\" target=\"_blank\" rel=\"external\">潘敬昇 （Sheng Pan）</a> 義無反顧地幫我設計了很有質感的 LOGO 跟 Title，還有設計上的建議。</p>\n<p>最後，如果你們也有什麼勞工議題或心得想要分享的話，可以在 facebook 或是 twiiter 加入 <a href=\"https://www.facebook.com/hashtag/%E5%8B%9E%E5%B7%A5%E5%A4%A7%E4%BB%A3%E8%AA%8C?source=feed_text&amp;story_id=1269510183156649\" target=\"_blank\" rel=\"external\">#勞工大代誌</a> 這個 hashtag。如果你喜歡這份專案，也可以順手把他分享出去。</p>\n<p>另外，除了在網站裡頭所提到的議題跟事件，還有太多是我不知道、不清楚的事情存在在這個社會上。</p>\n<p>我整理了一份勞工大代誌總表：<a href=\"https://goo.gl/nPxeg2\" target=\"_blank\" rel=\"external\">https://goo.gl/nPxeg2</a> 任何人都可以編輯。</p>\n<p>敬，所有勞工們。</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><ul>\n<li>之後這個專題被分享到<a href=\"https://www.facebook.com/qollie.tw/\" target=\"_blank\" rel=\"external\">求職天眼通</a>上，也算是讓更多人知道了。</li>\n<li>暑假選修了一門叫做職場災害與防治</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://kjj6198.github.io/pround-of-labor/app/img/top-image.jpg\" alt=\"landing image\"></p>\n<p>先來看<a href=\"https://kjj6198.github.io/pround-of-labor/app/\">成品</a>吧！</p>\n<p>記錄一下這個專案的始末。</p>\n<h2 id=\"規劃\"><a href=\"#規劃\" class=\"headerlink\" title=\"規劃\"></a>規劃</h2><p>從四月中旬開始規劃、搜集資料到實作，都是一個人慢慢整理而成的，除了想要練習更好的視覺化技巧之外，主要還是想透過這樣的方式來了解台灣的勞動問題，以及曾經經歷過的勞工運動。</p>\n<p>因為平時還有課業跟工作要顧，所以實際上花的時間不多，最後兩天甚至是熬夜在趕工。有更多的原因是因為，寫到一半發現又有更多資料想要搜集，不知不覺就變得非常龐大了。</p>\n<p>不過這個專題仍然有太多議題沒有涵蓋到，像是<strong>年金制度</strong>、<strong>職災統計</strong>等等。因為時間上的關係，無法深入介紹。</p>\n<h2 id=\"為什麼想要做這份專案\"><a href=\"#為什麼想要做這份專案\" class=\"headerlink\" title=\"為什麼想要做這份專案\"></a>為什麼想要做這份專案</h2><p>國中跟高中的時候，或許是職科出身的關係，平時除了從報紙跟電視看看一些新聞外，很少汲取社會的議題和發生的事。</p>\n<p>這樣半懺悔、半好奇的心態，開始搜集了一些台灣過去的勞工運動以及相關數據。像是薪資漲幅、平均工時、出生率等等，這些都是當我看到數據的當下才發現，原來事情那麼大條。</p>\n<p>工時高居全球、薪資漲幅凍漲將近十年、出生率最後一名、即將邁入超高齡社會，這些都是現在台灣正在面臨，且有可能會日漸嚴重的議題。</p>\n<p>如果說現在這個渺小的我能夠做些什麼，大概就是勞動節時上街遊行，聽聽勞工的聲音，畢竟身為一位準勞工，再過不久大概就會遇到同樣的情境。</p>\n<p>更何況是在我還沒出社會之前，就已經是那麼慘的現況了。</p>\n<p>台灣的勞動環境仍然有許多待改進的地方，後人能夠享受到的果實絕不是理所當然。</p>\n<p>這些前輩們用血汗、用人生、甚至賠上性命來爭取更好的勞工環境。</p>\n<p>身為一位工程師能做的事情不多，這個社會上還有更多用科技無法觸及的事。<br>但能夠拋磚引玉地讓人了解到「啊！原來還有這樣子的事啊」，就好了。</p>\n<p>其實在查資料的時候，有很多讓人鼻酸的故事。</p>\n<p>像是關廠工人臥軌時，民眾大喊輾過去；<br>像是看到台電大樓的紀念碑連名字都沒有，藏在樹叢裡頭；<br>像是看見 101 樹立的國殤紀念碑，卻過了那麼久才知道那是為何而來。</p>\n<p>我們所處的社會當中有太多的理所當然，捷運順利地運作、高鐵能夠平安無事地從高雄開到台北、101 能夠安穩座落在臺北城、垃圾桶的垃圾有人收、廁所有人清、24 小時的便利商店，導致我們常常會忘記那背後隱藏的事情是由多少人的汗水（或是鮮血）堆積起來的，更何況是以前沒有任何勞基法保護的勞工們。</p>\n<p>最後，特別感謝小公主陪我度過忙碌的一個月，幫我找資料跟拍照，這一個月陪我一起奮鬥；<br>還有 <a href=\"https://www.facebook.com/sandokaishy?fref=mentions\" target=\"_blank\" rel=\"external\">潘敬昇 （Sheng Pan）</a> 義無反顧地幫我設計了很有質感的 LOGO 跟 Title，還有設計上的建議。</p>\n<p>最後，如果你們也有什麼勞工議題或心得想要分享的話，可以在 facebook 或是 twiiter 加入 <a href=\"https://www.facebook.com/hashtag/%E5%8B%9E%E5%B7%A5%E5%A4%A7%E4%BB%A3%E8%AA%8C?source=feed_text&amp;story_id=1269510183156649\" target=\"_blank\" rel=\"external\">#勞工大代誌</a> 這個 hashtag。如果你喜歡這份專案，也可以順手把他分享出去。</p>\n<p>另外，除了在網站裡頭所提到的議題跟事件，還有太多是我不知道、不清楚的事情存在在這個社會上。</p>\n<p>我整理了一份勞工大代誌總表：<a href=\"https://goo.gl/nPxeg2\" target=\"_blank\" rel=\"external\">https://goo.gl/nPxeg2</a> 任何人都可以編輯。</p>\n<p>敬，所有勞工們。</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><ul>\n<li>之後這個專題被分享到<a href=\"https://www.facebook.com/qollie.tw/\" target=\"_blank\" rel=\"external\">求職天眼通</a>上，也算是讓更多人知道了。</li>\n<li>暑假選修了一門叫做職場災害與防治</li>\n</ul>\n"},{"title":"從 legacy code 中尋找出口（上）","date":"2016-06-11T00:56:15.000Z","_content":"\n\n在我第一次進入主產品開發後，把代碼從 Github 上面 pull 下來。\n\n「這是什麼鬼東西？」\n\n結構混亂，大量覆寫的 class 各處都是，以及很可怕的巢狀 ID。\nview 的部分也有些地方非常雜亂......。看來 legacy code 跟 refactor 永遠都在進行式。\n\n對於日新月異的前端來說，要接觸一個新技術、框架並不是太困難的事。但困難點在於如何在現有的大型專案中做取捨，我們常常會有其他考量。例如團隊的接受度、team leader、其他政治因素等等而無法輕易地將新框架套用在目前的專案上。\n\n這個系列的文章主要會分享如何在既有的專案中小心地進行重構。希望對各位有些幫助。\n\n## 目前遇到的問題\n\nHTML 的架構混亂肥大，許多 `util class` 四散各處，在 CSS 中更可以看到大量的覆寫 class。雖然聽說之前已經有整理過了，但顯然這個房間還充滿許多灰塵。\n\n我認為前端常常遇到的 smell 問題有：\n\n- 復用性不足：儘管已經採用 React，但仍有許多高耦合的 component。而且其中還夾雜著 flux 與 redux 兩種不同的 library\n- 大量混雜業務邏輯的代碼（如 API ability 的判斷等），不僅要實際去了解業務流程外，還要知道檔案放在哪，必要時可能還要去看後端的程式碼\n- HTML 的撰寫不夠語義化，充斥太多 `util class` 及 `atomic class`，後面接手的人比較難搞懂這行 view 裡頭所要表達的東西。\n- CSS 檔案的撰寫不夠模組化。有太多混雜的模組都放在同一隻檔案中，查找非常不方便。\n- 大量的覆寫 class 造成上版時有很多意外的狀況發生。\n\n沒有統一的規範跟撰寫方式，很快代碼就會往指數性的肥大邁進。\n\n身為一個前端工程師，經驗還稍嫌不足的我來說，雖然目前正在孤軍奮戰中，但其實還能做一些事。有問題對我來說是一件非常值得興奮的事，至少對我來說，那是一個可以捲起袖子來做事的大好機會。\n\n## 解法\n\n那麼，到底該怎麼做呢？我認為可以從以下幾點開始下手\n\n- 著手撰寫 `styleguide`，讓自己與之後的前端團隊快速上手，並且有一定的準則可以遵守\n- 技術選型：自動化工具、code quality 工具、選擇與淘汰\n- test 框架：前端代碼大部分都還沒寫 test，未來等架構穩定的時候希望可以趕快補上。\n- 讓重構變得簡單\n- 讓 comment 及 doc 變成習慣： comment 的 doc 永遠是工程師的好朋友！\n- 提交代碼的規範\n\n本系列的文章主要會著重在重構的部分，最後一篇會再跟大家分享文件應該寫些什麼，以及前端如何提交代碼及發送 pull request 給 code reviewer。\n\n目前已經大致撰寫了 styguide 的架構，下一步是逐漸重整 CSS 的架構以及拆分 HTML 組件。\n\n這不是一朝一夕就能完成的東西，甚至就某種角度來看會拖延到專案的進度。有點像是默默付出的工作吧...！畢竟在原有的專案中做改變本來就有較大的阻力。\n\n## 何時應該重構\n\n隨時重構，不要為了重構而重構。再來可以參考[三次法則](http://www.wikiwand.com/zh-tw/%E4%B8%89%E6%AC%A1%E6%B3%95%E5%88%99_(%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1))\n\n- 上版的時候對現有的 HTML 及 CSS 重構，或者對應的 component\n- 寫新的 js 模組時重構，順便撰寫 Comment 及文件\n- 送 pull request 的時候：不過要確定自己有寫上詳細的 comment 及 doc，才能提高 code reviewer 的 review 意願，而 senior 總是能更快看出代碼裡面的問題。\n\n我們常常對一些既有代碼的架構感到心癢，或者很想要趕快重構。但在 workaround 的情況下，有時重構的成本是非常大的。\n\n## 何時不應該重構\n\n其實比起重構來說，更重要的應該是拿捏不應該重構的程度。身為工程師或多或少都會對別人的代碼嗤之以鼻，恨不得趕快把 code 清掉。\n但，既然 code 有某種程度的肥大，代表他或多或少解決了問題。而且重構是需要**成本**的。就算是以目前的開發來說，通常也是先著重於將功能實作後，在有限度地作小幅度的調整以及逐漸補齊文件及註解。對於重構來說，最重要的是 `consistency`。s\n\n- 目前的解法雖然不漂亮，但確實解決問題的時候。\n- 目前的代碼重複率還不高的時候\n- 重構的成本太大，甚至影響到系統本身的時候。\n\n## 保持心平氣和\n\n重構的時候記得控制自己的情緒。我們很可能一不小心就在咒罵代碼或前任，然後在情緒上頭反而過度重構，造成更多的問題也說不定。\n\n> 代碼的存在是有歷史的\n\n有可能是進度太趕、有可能是政治因素、又或者當時的技術還沒到位。但可以確定的是，情緒化完全無法解決問題。\n\n[don't let anger contol you](http://www.apa.org/topics/anger/control.aspx)\n\n\n> Talk is cheap. Show me the code.\n\n下一篇，我會開始分享一些重構的技巧。\n\n## Final Word\n\n最後還是要聲明一下，這篇文章雖然會著重在一些重構的技巧上，但其實從 legacy code 中尋找出口的方法不只是重構而已。希望大家不要過往矯正，一看到髒 code 就急著捲起袖子重構。退一步評估一下成本跟重構的價值再做決定。\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code2' %}\n- {% post_link 'legacy-code3' %}\n","source":"_posts/legacy-code.md","raw":"---\ntitle: 從 legacy code 中尋找出口（上）\ncategories: 前端\ntags:\n  - 重構\n  - 前端\ndate: 2016-06-11 08:56:15\n---\n\n\n在我第一次進入主產品開發後，把代碼從 Github 上面 pull 下來。\n\n「這是什麼鬼東西？」\n\n結構混亂，大量覆寫的 class 各處都是，以及很可怕的巢狀 ID。\nview 的部分也有些地方非常雜亂......。看來 legacy code 跟 refactor 永遠都在進行式。\n\n對於日新月異的前端來說，要接觸一個新技術、框架並不是太困難的事。但困難點在於如何在現有的大型專案中做取捨，我們常常會有其他考量。例如團隊的接受度、team leader、其他政治因素等等而無法輕易地將新框架套用在目前的專案上。\n\n這個系列的文章主要會分享如何在既有的專案中小心地進行重構。希望對各位有些幫助。\n\n## 目前遇到的問題\n\nHTML 的架構混亂肥大，許多 `util class` 四散各處，在 CSS 中更可以看到大量的覆寫 class。雖然聽說之前已經有整理過了，但顯然這個房間還充滿許多灰塵。\n\n我認為前端常常遇到的 smell 問題有：\n\n- 復用性不足：儘管已經採用 React，但仍有許多高耦合的 component。而且其中還夾雜著 flux 與 redux 兩種不同的 library\n- 大量混雜業務邏輯的代碼（如 API ability 的判斷等），不僅要實際去了解業務流程外，還要知道檔案放在哪，必要時可能還要去看後端的程式碼\n- HTML 的撰寫不夠語義化，充斥太多 `util class` 及 `atomic class`，後面接手的人比較難搞懂這行 view 裡頭所要表達的東西。\n- CSS 檔案的撰寫不夠模組化。有太多混雜的模組都放在同一隻檔案中，查找非常不方便。\n- 大量的覆寫 class 造成上版時有很多意外的狀況發生。\n\n沒有統一的規範跟撰寫方式，很快代碼就會往指數性的肥大邁進。\n\n身為一個前端工程師，經驗還稍嫌不足的我來說，雖然目前正在孤軍奮戰中，但其實還能做一些事。有問題對我來說是一件非常值得興奮的事，至少對我來說，那是一個可以捲起袖子來做事的大好機會。\n\n## 解法\n\n那麼，到底該怎麼做呢？我認為可以從以下幾點開始下手\n\n- 著手撰寫 `styleguide`，讓自己與之後的前端團隊快速上手，並且有一定的準則可以遵守\n- 技術選型：自動化工具、code quality 工具、選擇與淘汰\n- test 框架：前端代碼大部分都還沒寫 test，未來等架構穩定的時候希望可以趕快補上。\n- 讓重構變得簡單\n- 讓 comment 及 doc 變成習慣： comment 的 doc 永遠是工程師的好朋友！\n- 提交代碼的規範\n\n本系列的文章主要會著重在重構的部分，最後一篇會再跟大家分享文件應該寫些什麼，以及前端如何提交代碼及發送 pull request 給 code reviewer。\n\n目前已經大致撰寫了 styguide 的架構，下一步是逐漸重整 CSS 的架構以及拆分 HTML 組件。\n\n這不是一朝一夕就能完成的東西，甚至就某種角度來看會拖延到專案的進度。有點像是默默付出的工作吧...！畢竟在原有的專案中做改變本來就有較大的阻力。\n\n## 何時應該重構\n\n隨時重構，不要為了重構而重構。再來可以參考[三次法則](http://www.wikiwand.com/zh-tw/%E4%B8%89%E6%AC%A1%E6%B3%95%E5%88%99_(%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1))\n\n- 上版的時候對現有的 HTML 及 CSS 重構，或者對應的 component\n- 寫新的 js 模組時重構，順便撰寫 Comment 及文件\n- 送 pull request 的時候：不過要確定自己有寫上詳細的 comment 及 doc，才能提高 code reviewer 的 review 意願，而 senior 總是能更快看出代碼裡面的問題。\n\n我們常常對一些既有代碼的架構感到心癢，或者很想要趕快重構。但在 workaround 的情況下，有時重構的成本是非常大的。\n\n## 何時不應該重構\n\n其實比起重構來說，更重要的應該是拿捏不應該重構的程度。身為工程師或多或少都會對別人的代碼嗤之以鼻，恨不得趕快把 code 清掉。\n但，既然 code 有某種程度的肥大，代表他或多或少解決了問題。而且重構是需要**成本**的。就算是以目前的開發來說，通常也是先著重於將功能實作後，在有限度地作小幅度的調整以及逐漸補齊文件及註解。對於重構來說，最重要的是 `consistency`。s\n\n- 目前的解法雖然不漂亮，但確實解決問題的時候。\n- 目前的代碼重複率還不高的時候\n- 重構的成本太大，甚至影響到系統本身的時候。\n\n## 保持心平氣和\n\n重構的時候記得控制自己的情緒。我們很可能一不小心就在咒罵代碼或前任，然後在情緒上頭反而過度重構，造成更多的問題也說不定。\n\n> 代碼的存在是有歷史的\n\n有可能是進度太趕、有可能是政治因素、又或者當時的技術還沒到位。但可以確定的是，情緒化完全無法解決問題。\n\n[don't let anger contol you](http://www.apa.org/topics/anger/control.aspx)\n\n\n> Talk is cheap. Show me the code.\n\n下一篇，我會開始分享一些重構的技巧。\n\n## Final Word\n\n最後還是要聲明一下，這篇文章雖然會著重在一些重構的技巧上，但其實從 legacy code 中尋找出口的方法不只是重構而已。希望大家不要過往矯正，一看到髒 code 就急著捲起袖子重構。退一步評估一下成本跟重構的價值再做決定。\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code2' %}\n- {% post_link 'legacy-code3' %}\n","slug":"legacy-code","published":1,"updated":"2016-10-18T11:31:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitr5001oiw5tstrd63zm","content":"<p>在我第一次進入主產品開發後，把代碼從 Github 上面 pull 下來。</p>\n<p>「這是什麼鬼東西？」</p>\n<p>結構混亂，大量覆寫的 class 各處都是，以及很可怕的巢狀 ID。<br>view 的部分也有些地方非常雜亂……。看來 legacy code 跟 refactor 永遠都在進行式。</p>\n<p>對於日新月異的前端來說，要接觸一個新技術、框架並不是太困難的事。但困難點在於如何在現有的大型專案中做取捨，我們常常會有其他考量。例如團隊的接受度、team leader、其他政治因素等等而無法輕易地將新框架套用在目前的專案上。</p>\n<p>這個系列的文章主要會分享如何在既有的專案中小心地進行重構。希望對各位有些幫助。</p>\n<h2 id=\"目前遇到的問題\"><a href=\"#目前遇到的問題\" class=\"headerlink\" title=\"目前遇到的問題\"></a>目前遇到的問題</h2><p>HTML 的架構混亂肥大，許多 <code>util class</code> 四散各處，在 CSS 中更可以看到大量的覆寫 class。雖然聽說之前已經有整理過了，但顯然這個房間還充滿許多灰塵。</p>\n<p>我認為前端常常遇到的 smell 問題有：</p>\n<ul>\n<li>復用性不足：儘管已經採用 React，但仍有許多高耦合的 component。而且其中還夾雜著 flux 與 redux 兩種不同的 library</li>\n<li>大量混雜業務邏輯的代碼（如 API ability 的判斷等），不僅要實際去了解業務流程外，還要知道檔案放在哪，必要時可能還要去看後端的程式碼</li>\n<li>HTML 的撰寫不夠語義化，充斥太多 <code>util class</code> 及 <code>atomic class</code>，後面接手的人比較難搞懂這行 view 裡頭所要表達的東西。</li>\n<li>CSS 檔案的撰寫不夠模組化。有太多混雜的模組都放在同一隻檔案中，查找非常不方便。</li>\n<li>大量的覆寫 class 造成上版時有很多意外的狀況發生。</li>\n</ul>\n<p>沒有統一的規範跟撰寫方式，很快代碼就會往指數性的肥大邁進。</p>\n<p>身為一個前端工程師，經驗還稍嫌不足的我來說，雖然目前正在孤軍奮戰中，但其實還能做一些事。有問題對我來說是一件非常值得興奮的事，至少對我來說，那是一個可以捲起袖子來做事的大好機會。</p>\n<h2 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h2><p>那麼，到底該怎麼做呢？我認為可以從以下幾點開始下手</p>\n<ul>\n<li>著手撰寫 <code>styleguide</code>，讓自己與之後的前端團隊快速上手，並且有一定的準則可以遵守</li>\n<li>技術選型：自動化工具、code quality 工具、選擇與淘汰</li>\n<li>test 框架：前端代碼大部分都還沒寫 test，未來等架構穩定的時候希望可以趕快補上。</li>\n<li>讓重構變得簡單</li>\n<li>讓 comment 及 doc 變成習慣： comment 的 doc 永遠是工程師的好朋友！</li>\n<li>提交代碼的規範</li>\n</ul>\n<p>本系列的文章主要會著重在重構的部分，最後一篇會再跟大家分享文件應該寫些什麼，以及前端如何提交代碼及發送 pull request 給 code reviewer。</p>\n<p>目前已經大致撰寫了 styguide 的架構，下一步是逐漸重整 CSS 的架構以及拆分 HTML 組件。</p>\n<p>這不是一朝一夕就能完成的東西，甚至就某種角度來看會拖延到專案的進度。有點像是默默付出的工作吧…！畢竟在原有的專案中做改變本來就有較大的阻力。</p>\n<h2 id=\"何時應該重構\"><a href=\"#何時應該重構\" class=\"headerlink\" title=\"何時應該重構\"></a>何時應該重構</h2><p>隨時重構，不要為了重構而重構。再來可以參考<a href=\"http://www.wikiwand.com/zh-tw/%E4%B8%89%E6%AC%A1%E6%B3%95%E5%88%99_(%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1\" target=\"_blank\" rel=\"external\">三次法則</a>)</p>\n<ul>\n<li>上版的時候對現有的 HTML 及 CSS 重構，或者對應的 component</li>\n<li>寫新的 js 模組時重構，順便撰寫 Comment 及文件</li>\n<li>送 pull request 的時候：不過要確定自己有寫上詳細的 comment 及 doc，才能提高 code reviewer 的 review 意願，而 senior 總是能更快看出代碼裡面的問題。</li>\n</ul>\n<p>我們常常對一些既有代碼的架構感到心癢，或者很想要趕快重構。但在 workaround 的情況下，有時重構的成本是非常大的。</p>\n<h2 id=\"何時不應該重構\"><a href=\"#何時不應該重構\" class=\"headerlink\" title=\"何時不應該重構\"></a>何時不應該重構</h2><p>其實比起重構來說，更重要的應該是拿捏不應該重構的程度。身為工程師或多或少都會對別人的代碼嗤之以鼻，恨不得趕快把 code 清掉。<br>但，既然 code 有某種程度的肥大，代表他或多或少解決了問題。而且重構是需要<strong>成本</strong>的。就算是以目前的開發來說，通常也是先著重於將功能實作後，在有限度地作小幅度的調整以及逐漸補齊文件及註解。對於重構來說，最重要的是 <code>consistency</code>。s</p>\n<ul>\n<li>目前的解法雖然不漂亮，但確實解決問題的時候。</li>\n<li>目前的代碼重複率還不高的時候</li>\n<li>重構的成本太大，甚至影響到系統本身的時候。</li>\n</ul>\n<h2 id=\"保持心平氣和\"><a href=\"#保持心平氣和\" class=\"headerlink\" title=\"保持心平氣和\"></a>保持心平氣和</h2><p>重構的時候記得控制自己的情緒。我們很可能一不小心就在咒罵代碼或前任，然後在情緒上頭反而過度重構，造成更多的問題也說不定。</p>\n<blockquote>\n<p>代碼的存在是有歷史的</p>\n</blockquote>\n<p>有可能是進度太趕、有可能是政治因素、又或者當時的技術還沒到位。但可以確定的是，情緒化完全無法解決問題。</p>\n<p><a href=\"http://www.apa.org/topics/anger/control.aspx\" target=\"_blank\" rel=\"external\">don’t let anger contol you</a></p>\n<blockquote>\n<p>Talk is cheap. Show me the code.</p>\n</blockquote>\n<p>下一篇，我會開始分享一些重構的技巧。</p>\n<h2 id=\"Final-Word\"><a href=\"#Final-Word\" class=\"headerlink\" title=\"Final Word\"></a>Final Word</h2><p>最後還是要聲明一下，這篇文章雖然會著重在一些重構的技巧上，但其實從 legacy code 中尋找出口的方法不只是重構而已。希望大家不要過往矯正，一看到髒 code 就急著捲起袖子重構。退一步評估一下成本跟重構的價值再做決定。</p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/14/legacy-code2/\" title=\"如何從 legacy code 中尋找出口（中）- CSS 篇\">如何從 legacy code 中尋找出口（中）- CSS 篇</a></li>\n<li><a href=\"/2016/09/17/legacy-code3/\" title=\"從 legacy code 中尋找出口（中）- HTML 篇\">從 legacy code 中尋找出口（中）- HTML 篇</a>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>在我第一次進入主產品開發後，把代碼從 Github 上面 pull 下來。</p>\n<p>「這是什麼鬼東西？」</p>\n<p>結構混亂，大量覆寫的 class 各處都是，以及很可怕的巢狀 ID。<br>view 的部分也有些地方非常雜亂……。看來 legacy code 跟 refactor 永遠都在進行式。</p>\n<p>對於日新月異的前端來說，要接觸一個新技術、框架並不是太困難的事。但困難點在於如何在現有的大型專案中做取捨，我們常常會有其他考量。例如團隊的接受度、team leader、其他政治因素等等而無法輕易地將新框架套用在目前的專案上。</p>\n<p>這個系列的文章主要會分享如何在既有的專案中小心地進行重構。希望對各位有些幫助。</p>\n<h2 id=\"目前遇到的問題\"><a href=\"#目前遇到的問題\" class=\"headerlink\" title=\"目前遇到的問題\"></a>目前遇到的問題</h2><p>HTML 的架構混亂肥大，許多 <code>util class</code> 四散各處，在 CSS 中更可以看到大量的覆寫 class。雖然聽說之前已經有整理過了，但顯然這個房間還充滿許多灰塵。</p>\n<p>我認為前端常常遇到的 smell 問題有：</p>\n<ul>\n<li>復用性不足：儘管已經採用 React，但仍有許多高耦合的 component。而且其中還夾雜著 flux 與 redux 兩種不同的 library</li>\n<li>大量混雜業務邏輯的代碼（如 API ability 的判斷等），不僅要實際去了解業務流程外，還要知道檔案放在哪，必要時可能還要去看後端的程式碼</li>\n<li>HTML 的撰寫不夠語義化，充斥太多 <code>util class</code> 及 <code>atomic class</code>，後面接手的人比較難搞懂這行 view 裡頭所要表達的東西。</li>\n<li>CSS 檔案的撰寫不夠模組化。有太多混雜的模組都放在同一隻檔案中，查找非常不方便。</li>\n<li>大量的覆寫 class 造成上版時有很多意外的狀況發生。</li>\n</ul>\n<p>沒有統一的規範跟撰寫方式，很快代碼就會往指數性的肥大邁進。</p>\n<p>身為一個前端工程師，經驗還稍嫌不足的我來說，雖然目前正在孤軍奮戰中，但其實還能做一些事。有問題對我來說是一件非常值得興奮的事，至少對我來說，那是一個可以捲起袖子來做事的大好機會。</p>\n<h2 id=\"解法\"><a href=\"#解法\" class=\"headerlink\" title=\"解法\"></a>解法</h2><p>那麼，到底該怎麼做呢？我認為可以從以下幾點開始下手</p>\n<ul>\n<li>著手撰寫 <code>styleguide</code>，讓自己與之後的前端團隊快速上手，並且有一定的準則可以遵守</li>\n<li>技術選型：自動化工具、code quality 工具、選擇與淘汰</li>\n<li>test 框架：前端代碼大部分都還沒寫 test，未來等架構穩定的時候希望可以趕快補上。</li>\n<li>讓重構變得簡單</li>\n<li>讓 comment 及 doc 變成習慣： comment 的 doc 永遠是工程師的好朋友！</li>\n<li>提交代碼的規範</li>\n</ul>\n<p>本系列的文章主要會著重在重構的部分，最後一篇會再跟大家分享文件應該寫些什麼，以及前端如何提交代碼及發送 pull request 給 code reviewer。</p>\n<p>目前已經大致撰寫了 styguide 的架構，下一步是逐漸重整 CSS 的架構以及拆分 HTML 組件。</p>\n<p>這不是一朝一夕就能完成的東西，甚至就某種角度來看會拖延到專案的進度。有點像是默默付出的工作吧…！畢竟在原有的專案中做改變本來就有較大的阻力。</p>\n<h2 id=\"何時應該重構\"><a href=\"#何時應該重構\" class=\"headerlink\" title=\"何時應該重構\"></a>何時應該重構</h2><p>隨時重構，不要為了重構而重構。再來可以參考<a href=\"http://www.wikiwand.com/zh-tw/%E4%B8%89%E6%AC%A1%E6%B3%95%E5%88%99_(%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1\" target=\"_blank\" rel=\"external\">三次法則</a>)</p>\n<ul>\n<li>上版的時候對現有的 HTML 及 CSS 重構，或者對應的 component</li>\n<li>寫新的 js 模組時重構，順便撰寫 Comment 及文件</li>\n<li>送 pull request 的時候：不過要確定自己有寫上詳細的 comment 及 doc，才能提高 code reviewer 的 review 意願，而 senior 總是能更快看出代碼裡面的問題。</li>\n</ul>\n<p>我們常常對一些既有代碼的架構感到心癢，或者很想要趕快重構。但在 workaround 的情況下，有時重構的成本是非常大的。</p>\n<h2 id=\"何時不應該重構\"><a href=\"#何時不應該重構\" class=\"headerlink\" title=\"何時不應該重構\"></a>何時不應該重構</h2><p>其實比起重構來說，更重要的應該是拿捏不應該重構的程度。身為工程師或多或少都會對別人的代碼嗤之以鼻，恨不得趕快把 code 清掉。<br>但，既然 code 有某種程度的肥大，代表他或多或少解決了問題。而且重構是需要<strong>成本</strong>的。就算是以目前的開發來說，通常也是先著重於將功能實作後，在有限度地作小幅度的調整以及逐漸補齊文件及註解。對於重構來說，最重要的是 <code>consistency</code>。s</p>\n<ul>\n<li>目前的解法雖然不漂亮，但確實解決問題的時候。</li>\n<li>目前的代碼重複率還不高的時候</li>\n<li>重構的成本太大，甚至影響到系統本身的時候。</li>\n</ul>\n<h2 id=\"保持心平氣和\"><a href=\"#保持心平氣和\" class=\"headerlink\" title=\"保持心平氣和\"></a>保持心平氣和</h2><p>重構的時候記得控制自己的情緒。我們很可能一不小心就在咒罵代碼或前任，然後在情緒上頭反而過度重構，造成更多的問題也說不定。</p>\n<blockquote>\n<p>代碼的存在是有歷史的</p>\n</blockquote>\n<p>有可能是進度太趕、有可能是政治因素、又或者當時的技術還沒到位。但可以確定的是，情緒化完全無法解決問題。</p>\n<p><a href=\"http://www.apa.org/topics/anger/control.aspx\" target=\"_blank\" rel=\"external\">don’t let anger contol you</a></p>\n<blockquote>\n<p>Talk is cheap. Show me the code.</p>\n</blockquote>\n<p>下一篇，我會開始分享一些重構的技巧。</p>\n<h2 id=\"Final-Word\"><a href=\"#Final-Word\" class=\"headerlink\" title=\"Final Word\"></a>Final Word</h2><p>最後還是要聲明一下，這篇文章雖然會著重在一些重構的技巧上，但其實從 legacy code 中尋找出口的方法不只是重構而已。希望大家不要過往矯正，一看到髒 code 就急著捲起袖子重構。退一步評估一下成本跟重構的價值再做決定。</p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/14/legacy-code2/\" title=\"如何從 legacy code 中尋找出口（中）- CSS 篇\">如何從 legacy code 中尋找出口（中）- CSS 篇</a></li>\n<li><a href=\"/2016/09/17/legacy-code3/\" title=\"從 legacy code 中尋找出口（中）- HTML 篇\">從 legacy code 中尋找出口（中）- HTML 篇</a>\n</li>\n</ul>\n"},{"title":"如何從 legacy code 中尋找出口（中）- CSS 篇","date":"2016-06-14T04:01:52.000Z","_content":"\n\n## 前言\n\n我們的第一步是先從 CSS 下手，因為 css 是相對於其他前端部分來說比較容易重構的部分。很容易髒亂的 code 也是 CSS。\n\n\n上一篇描述了在大型專案中引入新框架及技術的困難點，這一篇主要會專注在如何透過現有的工具及框架來重構現有的代碼。\n\n本次的重構技巧會以 SCSS 為主，所以在閱讀本文之前，我先假設你已經有基本的 SCSS 以及 CSS 的基礎。其他預處理器的概念應該是相通的。\n\n## 引入 style linter 及 editorconfig\n\n我們採取的第一步是先引入審查代碼工具。目前比較流行的 css linter 是 stylelinter，他能夠針對 scss sass 語法做 lint。也可以搭配其他 IDE、文字編輯器 plugin。這邊的範例是使用 sublime，其他的 IDE 應該也有類似的功能。\n\n### 1. 加入 stylelint\n\nstylelint 除了可以針對 scss 語法做 lint 之外。由於其本身是用 js 撰寫的，可以客製化自己的 rule 跟加入其他開源的 plugin。\n\n因為 stylelint 是以 AST 的方式解析，所以可以很容易的對文件中的節點做操作。\n\n關於 stylelint 的深入使用，已經超過本文篇幅，有興趣的人可以參考 css trick 的[教學](https://css-tricks.com/stylelint/)\n\n首先，先來安裝 `stylelint`，run `npm install -g stylelint`。\n\n再來設置 .stylelintrc 檔，詳細的 rules 可以到[這裡](http://stylelint.io/user-guide/rules/) 查看。如果你不想要那麼麻煩自己手動一個一個設定的話。可以考慮使用 [stylelint-config-standard](https://github.com/stylelint/stylelint-config-standard) 這個插件，再根據自己的需求做調整。\n\n`npm install --save-dev stylelint-config-standard`\n\n**這邊還是建議花時間瞭解一下專案的需求來制定 rule，不然有時候太嚴格的 rule，滿江紅看到也懶得改了。**\n\n\n### 2. 加入 .editorconfig\n\nEditorConfig 是一個為了統一代碼風格的解決方案。每個人文字編輯器的環境可能不盡相同，為了統一彼此之間的環境，這邊我們採用的 `editorconfig`\n\n設定非常簡單，只要新增一個檔案就好。[editorconfig](http://EditorConfig.org)。\n\n目前幾乎主流的文字編輯器都有支援 editorconfig。\n\n## 常見的 code smell 以及 refactor 方式\n\n在開始捲起袖子做事之前，還是先來確認一下目前的專案是否需要 refactor：\n\n- 許多元件（如 button input）等放在同一個檔案內，查找非常不易。\n- 覆寫了許多 class 造成預期之外的行為發生\n- 早期沒有統一的代碼規範，tab、空白夾雜在一起，閱讀性大幅降低\n- !important 四散各處\n- 變數的命名跟管理不夠統一\n- 團隊開始擴增\n- 相關的文件不足\n\n接下來介紹一些比較常見的 code smell\n\n### Order\n\nclass 變多之後，如果 rule 裡面沒有一定的排列順序的話，其實查找很不方便。而且易讀性並不高，像是下列的 code\n\n```css\n.class {\n\tposition: absolute;\n\tdisplay: none;\n\tpadding: 30px;\n\tcursor: pointer;\n\tlist-style: none;\n\tfont-size: 20px;\n\tbackground: white;\n\tmargin:0;\n\ttop:0;\n\tleft:0;\n\twidth: 250px;\n\tpadding-left: 15px;\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tborder: 1px solid $hr-gray;\n\tz-index: 9999999;\n}\n```\n\n那麼要怎樣排序會比較好呢？這邊提供幾個大原則：\n\n1. display、position\n2. box-model\n3. font、typography\n4. layout(包含 color、border-radius 等)\n5. 其他屬性(如animation)\n\n\n原因：對一個 class 來說，最重要的就是 display 與 position ，所以應該擺在最上面。而其次重要的內容是文字，所以擺第二，最後才是 `layout` 與其他屬性。\n至於屬於同屬性的話不限制順序，例如 padding margin 順序調換沒有關係，因為找起來都很方便。只要維持一定的邏輯即可。\n\n```css\n.class {\n\tdisplay: none;\n\tposition: absolute;\n\ttop:0;\n\tleft:0;\n\tz-index: 9999999;\n\t\n\twidth: 250px;\n\n\tpadding: 30px;\n\tpadding-left: 15px;\n\tmargin:0;\n\n\tfont-size: 20px;\n\n\tbackground: white;\n\tborder: 1px solid #aaa;\n\n\tlist-style: none;\n\tcursor: pointer;\n\t\n\toverflow-y: scroll;\n\toverflow-x: hidden;\t\n}\n```\n\n### 善用 sass map 管理變數\n\nstyle 檔案變多了之後，相對的要管理的變數也會變得越來越多。\n除了在命名時加上前綴之外，我們也可以利用 sass map 的方式來統一管理。而且 sass map 提供了一些很方便的 [function](http://sass-lang.com/documentation/Sass/Script/Functions.html) 來操作，像是 `map-get` `map-has-key`等等，可以很有效地把變數 group 起來。很像 js 的 object。\n\n以 `z-index` 來說，我們可以改寫下面的 code\n\n\n```CSS\n/* before */\n$zindex-navbar: 100;\n$zindex-dropdown: 200;\n$zindex-tooltip: 300;\n$zindex-modal: 400;\n\n.navbar {\n\tz-index: $zindex-navbar;\n}\n\n/* after */\n$zindex: (\n  navbar: 100,\n  dropdown: 200,\n  tooltip: 300,\n  modal: 400\n);\n\n.navbar {\n\tz-index: map-get($zindex, 'navbar');\n}\n```\n\n用 `map` 的方式取值，看起來好像比較厚工一點，我們可以用 sass 的 function 包裝起來：\n\n```css\n/**\n * z alias for z-index\n * get zindex map value\n */\n@function z($key) {\n\t@if(map-has-key($zindex, $key)){\n    @return map-get($zindex, $key);\n  } @else {\n    @error \"unknown key #{$key}\";\n  }\n}\n.navbar {\n\tz-index: z($zindex, 'navbar');\n}\n```\n\n當然還有其他的應用像是 `color` `typography` 等等，都可以搭配 sass map 的方式來操作。\n\n如果你認為上述的方式跟用前綴的方式分類變數沒有什麼不同的話，不套用也沒關係，重構是為了讓之後的開發更舒服。\n\n### 大量的巢狀 class\n\n我的建議是不要超過三層，第一是易讀性非常低，再來很容易覆蓋到權重。\n可以採用一些目前比較熱門的 css 命名規範如 OOCSS 或是 BEM，或者搭配兩者一起使用。\n\n但最重要的一點是自己寫起來的感覺，不要讓規範箝制你了。\n\n如果想要使用 scss 的巢狀功能方便閱讀，又不想要讓巢狀 class 覆蓋權重的話，可以使用 @at-root，@at-root 在編譯的時候會幫你把巢狀拆出來到 root。\n\n另外可以使用 `>` 子元素選擇器來取代後代選擇器。\n\n```css\n.classA {\n\t@at-root .classB {\n    // bla\n\t}\n}\n\n// compiled\n\n.classA {\n\t\n}\n  .classB {\n    // bla\n  }\n```\n\n實際的 use case 如下：\n\n```css \n.alert-modal {\n  @at-root &__header {\n\n  }\n\n  @at-root &__body {\n\n  }\n\n  @at-root &__footer {\n\n  }\n}\n```\n\n以上的代碼好像沒有想像中的好看，等下可以搭配 mixin 把它進一步做簡化。\n\n## 善用 Mixin 簡化程式\n\n除了一般使用 mixin 來加入 `prefixer` 之外，mixin 能夠做的事情還有很多，這邊提出幾個方法給大家參考。\n\n### BEM mixin\n\nBEM 的命名方式，如果一直手動 key 的話，感覺也挺麻煩的，而且 key 錯的機率也蠻高的，我們可以利用 mixin 來簡化他。\n\n順便一提，如果你的專案已經套用了 `postCSS`，可以使用 [postcss-bem](https://www.npmjs.com/package/postcss-bem) 來幫助命名。\n\n如果你不喜歡他的命名方式，或是當前還無法套用 postCSS 的話也沒關係，我們可以自己做一個。\n\n上面的 code 可以改成下面的形式：\n\n```css\n@mixin block($block_name) {\n  .#{$block_name} { @content; }\n}\n\n@mixin element($element_name) { \n  @at-root &__#{$element_name} { @content; }\n}\n\n@mixin modifier($modifier_name) {\n  @at-root &-#{$modifier_name} { @content; }\t\n}\n\n@mixin state($state_name) {\n\t&.is-${#state_name} {@content;}\n}\n\n// modal.scss\n\n// before\n.alert-modal {\n  @at-root &__header {\n\n  }\n\n  @at-root &__body {\n\n  }\n\n  @at-root &__footer {\n\n  }\n}\n\n// after\n@include block(\"alert-modal\") {\n\t@include element(\"header\") {}\n\t@include element(\"body\") {}\n\t@include element(\"footer\") {}\n}\n```\n\n這樣一來簡單的 BEM mixins 就製作完成了。注意到這邊我們使用 `at-root` 的方式來避免巢狀 class。\n\n可以按照自己的喜好來調整命名方式，或者嚴謹一點對參數做一些處理（轉為小寫等等）、加入判斷式等等，或者今天你想要使用巢狀 class 的話可以加入額外的判斷參數。\n\n```css\n@mixin element($element_name, $at-root: true) { \n  @if($at-root) {\n    @at-root &__#{$element_name} { @content; }\n  }\n  @else {\n    &__#{$element_name} { @content; }\n  }\n  \n}\n```\n\n### util mixin\n\n舉例來說，在設置 padding margin 的時候，我們常常會將上下或是左右的值設為一樣。寫久了難免會嫌麻煩，這時候就可以拜託 mixin 了。\n\n```css\n// before\n.classA {\n\tmargin-right: 10px;\n\tmargin-left: 10px;\n}\n\n// after\n\n/*\n * lr Alias for left right\n */\n@mixin lr($box_model, $value) {\n\t#{$box_model}-left: $value;\n\t#{$box_model}-right: $value;\n};\n.classA {\n\t@include lr(\"margin\", 10px);\n}\n```\n這邊沒有寫得很嚴謹，你可以另外加入判斷式來保證輸入的值是合法的，類似的概念也能套用到 top left 設值上。\n\n或是常常遇到的 clearfix。\n\n```css\n@mixin clearfix() {\n\t&:before, &:after {\n    display: table;\n    content: \"\";\n\t\tclear: both;\n  }\n}\n\n.column {\n\t@include clearfix;\n}\n```\n\n### child selector mixin\n\n常常會遇到使用 child selector 的情境。我們可以用 mixin 進一步包裝起來。\n\n```css\n// before\n.list {\n\t&:first-child {\n\t  //bla\n\t}\n\n\t&:nth-child(2n) {\n\t  //bla\n\t}\n}\n// after \n@mixin first() {\n\t&:first-child { @content; }\n}\n.list {\n\t@include first() {};\n}\n```\n\n這邊推薦 [Family.scss](http://lukyvj.github.io/family.scss/)，搜集了許多好用 child selector mixin。\n\n**p.s：我認為剛入門 CSS 的人還是從純 CSS 開始學習比較好，以免被 SCSS 的語法糖給寵壞了**\n\n## 善用 Comment\n\n在缺乏 function 的 css 下，使用 comment 來解釋 class 更為重要。這邊提供一些，comment 的技巧。\n\n註解不但方便自己閱讀，之後別人接手也會比較快理解這個 class 該如何使用、在哪個場景使用。\n\n### 目錄\n\n如果文件包含的 class 較多，可以考慮在文件最前面加入目錄，方便之後查找。\n\n```css\n/**\n * INPUT\n *  text\n *  select\n *  number\n * BUTTON\n *  primary\n *  warn\n */\n```\n\n### 魔術數字、HACK、使用方式\n\n```css\n/*\n * for input[type=\"text\"]\n * e.g: <input type=\"text\" />\n */\n \n.text-input[type=\"text\"] {\n  padding: 20px;\n\n  /* page offset */\n\ttop: 27px;\n  /* IE 8+ hack */\n  // ...\n}\n```\n\n## CSS 結構\n\n基本上分成幾個大方向：`module` `base` `config` `helper`\n\n### module\n\nmodule 資料夾裡存放所有模組化的元件，像是 button input modal 等等。如果元件拆得更細的話，可以再另外開資料夾，像是 button 有可能樣式比較多，這時候我們可以另外開一個 `button` 資料夾，裡頭存放所有 button 的樣式。\n\n### base \n\nbase 裡頭放置了像是 `grid` `normalize` `reset` `typography` 等比較基本的架構。\n\n### config\n\n存放變數跟 color 的地方，設定的內容統一存放在這個資料夾統一管理。\n\n### helper\n\n存放客製化的 function 跟 mixin。\n\n## 寫在最後\n\n如果你有額外的時間，建議你還是可以去看看像是 [postCSS](https://github.com/postcss/postcss)、[css-modules](https://github.com/css-modules/css-modules)、[webpack](https://github.com/webpack/webpack) 等優秀的開源工具。\n不然整天跟 CSS 打架總有一天會精神耗弱的XD。\n\n做了一個[DEMO](https://github.com/kjj6198/css-structure-example)，非常陽春。\n\n如果你也想分享自己在前端跟 legacy code 奮鬥的過程，或是有更好的解決方案，歡迎在下面留言。\n\n## 持續關注前端趨勢\n\n這裡分享幾個覺得蠻優質的資源。\n\n[掘金網](http://gold.xitu.io/)\n\n[碼天狗（但最近前端的分享不多）](http://weekly.codetengu.com/)\n\n[TechBrige](https://www.techbridge.cc/)\n\n[CSS wizard](http://csswizardry.com/)\n\n\n### reference\n\n[CSS guideline](http://cssguidelin.es/)\n\n[Why Stylelint](https://www.smashingmagazine.com/2016/05/stylelint-the-style-sheet-linter-weve-always-wanted/)\n\n[CSS coding techniques](https://hacks.mozilla.org/2016/05/css-coding-techniques/?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_44)\n\n[why you should refactor your css](http://seesparkbox.com/foundry/why_you_need_to_refactor_your_css)\n\n[rsscss.io](http://rscss.io/)\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code' %}\n- {% post_link 'legacy-code3' %}\n","source":"_posts/legacy-code2.md","raw":"---\ntitle: 如何從 legacy code 中尋找出口（中）- CSS 篇\ncategories: 前端\ntags:\n  - 重構\n  - 前端\ndate: 2016-06-14 12:01:52\n---\n\n\n## 前言\n\n我們的第一步是先從 CSS 下手，因為 css 是相對於其他前端部分來說比較容易重構的部分。很容易髒亂的 code 也是 CSS。\n\n\n上一篇描述了在大型專案中引入新框架及技術的困難點，這一篇主要會專注在如何透過現有的工具及框架來重構現有的代碼。\n\n本次的重構技巧會以 SCSS 為主，所以在閱讀本文之前，我先假設你已經有基本的 SCSS 以及 CSS 的基礎。其他預處理器的概念應該是相通的。\n\n## 引入 style linter 及 editorconfig\n\n我們採取的第一步是先引入審查代碼工具。目前比較流行的 css linter 是 stylelinter，他能夠針對 scss sass 語法做 lint。也可以搭配其他 IDE、文字編輯器 plugin。這邊的範例是使用 sublime，其他的 IDE 應該也有類似的功能。\n\n### 1. 加入 stylelint\n\nstylelint 除了可以針對 scss 語法做 lint 之外。由於其本身是用 js 撰寫的，可以客製化自己的 rule 跟加入其他開源的 plugin。\n\n因為 stylelint 是以 AST 的方式解析，所以可以很容易的對文件中的節點做操作。\n\n關於 stylelint 的深入使用，已經超過本文篇幅，有興趣的人可以參考 css trick 的[教學](https://css-tricks.com/stylelint/)\n\n首先，先來安裝 `stylelint`，run `npm install -g stylelint`。\n\n再來設置 .stylelintrc 檔，詳細的 rules 可以到[這裡](http://stylelint.io/user-guide/rules/) 查看。如果你不想要那麼麻煩自己手動一個一個設定的話。可以考慮使用 [stylelint-config-standard](https://github.com/stylelint/stylelint-config-standard) 這個插件，再根據自己的需求做調整。\n\n`npm install --save-dev stylelint-config-standard`\n\n**這邊還是建議花時間瞭解一下專案的需求來制定 rule，不然有時候太嚴格的 rule，滿江紅看到也懶得改了。**\n\n\n### 2. 加入 .editorconfig\n\nEditorConfig 是一個為了統一代碼風格的解決方案。每個人文字編輯器的環境可能不盡相同，為了統一彼此之間的環境，這邊我們採用的 `editorconfig`\n\n設定非常簡單，只要新增一個檔案就好。[editorconfig](http://EditorConfig.org)。\n\n目前幾乎主流的文字編輯器都有支援 editorconfig。\n\n## 常見的 code smell 以及 refactor 方式\n\n在開始捲起袖子做事之前，還是先來確認一下目前的專案是否需要 refactor：\n\n- 許多元件（如 button input）等放在同一個檔案內，查找非常不易。\n- 覆寫了許多 class 造成預期之外的行為發生\n- 早期沒有統一的代碼規範，tab、空白夾雜在一起，閱讀性大幅降低\n- !important 四散各處\n- 變數的命名跟管理不夠統一\n- 團隊開始擴增\n- 相關的文件不足\n\n接下來介紹一些比較常見的 code smell\n\n### Order\n\nclass 變多之後，如果 rule 裡面沒有一定的排列順序的話，其實查找很不方便。而且易讀性並不高，像是下列的 code\n\n```css\n.class {\n\tposition: absolute;\n\tdisplay: none;\n\tpadding: 30px;\n\tcursor: pointer;\n\tlist-style: none;\n\tfont-size: 20px;\n\tbackground: white;\n\tmargin:0;\n\ttop:0;\n\tleft:0;\n\twidth: 250px;\n\tpadding-left: 15px;\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tborder: 1px solid $hr-gray;\n\tz-index: 9999999;\n}\n```\n\n那麼要怎樣排序會比較好呢？這邊提供幾個大原則：\n\n1. display、position\n2. box-model\n3. font、typography\n4. layout(包含 color、border-radius 等)\n5. 其他屬性(如animation)\n\n\n原因：對一個 class 來說，最重要的就是 display 與 position ，所以應該擺在最上面。而其次重要的內容是文字，所以擺第二，最後才是 `layout` 與其他屬性。\n至於屬於同屬性的話不限制順序，例如 padding margin 順序調換沒有關係，因為找起來都很方便。只要維持一定的邏輯即可。\n\n```css\n.class {\n\tdisplay: none;\n\tposition: absolute;\n\ttop:0;\n\tleft:0;\n\tz-index: 9999999;\n\t\n\twidth: 250px;\n\n\tpadding: 30px;\n\tpadding-left: 15px;\n\tmargin:0;\n\n\tfont-size: 20px;\n\n\tbackground: white;\n\tborder: 1px solid #aaa;\n\n\tlist-style: none;\n\tcursor: pointer;\n\t\n\toverflow-y: scroll;\n\toverflow-x: hidden;\t\n}\n```\n\n### 善用 sass map 管理變數\n\nstyle 檔案變多了之後，相對的要管理的變數也會變得越來越多。\n除了在命名時加上前綴之外，我們也可以利用 sass map 的方式來統一管理。而且 sass map 提供了一些很方便的 [function](http://sass-lang.com/documentation/Sass/Script/Functions.html) 來操作，像是 `map-get` `map-has-key`等等，可以很有效地把變數 group 起來。很像 js 的 object。\n\n以 `z-index` 來說，我們可以改寫下面的 code\n\n\n```CSS\n/* before */\n$zindex-navbar: 100;\n$zindex-dropdown: 200;\n$zindex-tooltip: 300;\n$zindex-modal: 400;\n\n.navbar {\n\tz-index: $zindex-navbar;\n}\n\n/* after */\n$zindex: (\n  navbar: 100,\n  dropdown: 200,\n  tooltip: 300,\n  modal: 400\n);\n\n.navbar {\n\tz-index: map-get($zindex, 'navbar');\n}\n```\n\n用 `map` 的方式取值，看起來好像比較厚工一點，我們可以用 sass 的 function 包裝起來：\n\n```css\n/**\n * z alias for z-index\n * get zindex map value\n */\n@function z($key) {\n\t@if(map-has-key($zindex, $key)){\n    @return map-get($zindex, $key);\n  } @else {\n    @error \"unknown key #{$key}\";\n  }\n}\n.navbar {\n\tz-index: z($zindex, 'navbar');\n}\n```\n\n當然還有其他的應用像是 `color` `typography` 等等，都可以搭配 sass map 的方式來操作。\n\n如果你認為上述的方式跟用前綴的方式分類變數沒有什麼不同的話，不套用也沒關係，重構是為了讓之後的開發更舒服。\n\n### 大量的巢狀 class\n\n我的建議是不要超過三層，第一是易讀性非常低，再來很容易覆蓋到權重。\n可以採用一些目前比較熱門的 css 命名規範如 OOCSS 或是 BEM，或者搭配兩者一起使用。\n\n但最重要的一點是自己寫起來的感覺，不要讓規範箝制你了。\n\n如果想要使用 scss 的巢狀功能方便閱讀，又不想要讓巢狀 class 覆蓋權重的話，可以使用 @at-root，@at-root 在編譯的時候會幫你把巢狀拆出來到 root。\n\n另外可以使用 `>` 子元素選擇器來取代後代選擇器。\n\n```css\n.classA {\n\t@at-root .classB {\n    // bla\n\t}\n}\n\n// compiled\n\n.classA {\n\t\n}\n  .classB {\n    // bla\n  }\n```\n\n實際的 use case 如下：\n\n```css \n.alert-modal {\n  @at-root &__header {\n\n  }\n\n  @at-root &__body {\n\n  }\n\n  @at-root &__footer {\n\n  }\n}\n```\n\n以上的代碼好像沒有想像中的好看，等下可以搭配 mixin 把它進一步做簡化。\n\n## 善用 Mixin 簡化程式\n\n除了一般使用 mixin 來加入 `prefixer` 之外，mixin 能夠做的事情還有很多，這邊提出幾個方法給大家參考。\n\n### BEM mixin\n\nBEM 的命名方式，如果一直手動 key 的話，感覺也挺麻煩的，而且 key 錯的機率也蠻高的，我們可以利用 mixin 來簡化他。\n\n順便一提，如果你的專案已經套用了 `postCSS`，可以使用 [postcss-bem](https://www.npmjs.com/package/postcss-bem) 來幫助命名。\n\n如果你不喜歡他的命名方式，或是當前還無法套用 postCSS 的話也沒關係，我們可以自己做一個。\n\n上面的 code 可以改成下面的形式：\n\n```css\n@mixin block($block_name) {\n  .#{$block_name} { @content; }\n}\n\n@mixin element($element_name) { \n  @at-root &__#{$element_name} { @content; }\n}\n\n@mixin modifier($modifier_name) {\n  @at-root &-#{$modifier_name} { @content; }\t\n}\n\n@mixin state($state_name) {\n\t&.is-${#state_name} {@content;}\n}\n\n// modal.scss\n\n// before\n.alert-modal {\n  @at-root &__header {\n\n  }\n\n  @at-root &__body {\n\n  }\n\n  @at-root &__footer {\n\n  }\n}\n\n// after\n@include block(\"alert-modal\") {\n\t@include element(\"header\") {}\n\t@include element(\"body\") {}\n\t@include element(\"footer\") {}\n}\n```\n\n這樣一來簡單的 BEM mixins 就製作完成了。注意到這邊我們使用 `at-root` 的方式來避免巢狀 class。\n\n可以按照自己的喜好來調整命名方式，或者嚴謹一點對參數做一些處理（轉為小寫等等）、加入判斷式等等，或者今天你想要使用巢狀 class 的話可以加入額外的判斷參數。\n\n```css\n@mixin element($element_name, $at-root: true) { \n  @if($at-root) {\n    @at-root &__#{$element_name} { @content; }\n  }\n  @else {\n    &__#{$element_name} { @content; }\n  }\n  \n}\n```\n\n### util mixin\n\n舉例來說，在設置 padding margin 的時候，我們常常會將上下或是左右的值設為一樣。寫久了難免會嫌麻煩，這時候就可以拜託 mixin 了。\n\n```css\n// before\n.classA {\n\tmargin-right: 10px;\n\tmargin-left: 10px;\n}\n\n// after\n\n/*\n * lr Alias for left right\n */\n@mixin lr($box_model, $value) {\n\t#{$box_model}-left: $value;\n\t#{$box_model}-right: $value;\n};\n.classA {\n\t@include lr(\"margin\", 10px);\n}\n```\n這邊沒有寫得很嚴謹，你可以另外加入判斷式來保證輸入的值是合法的，類似的概念也能套用到 top left 設值上。\n\n或是常常遇到的 clearfix。\n\n```css\n@mixin clearfix() {\n\t&:before, &:after {\n    display: table;\n    content: \"\";\n\t\tclear: both;\n  }\n}\n\n.column {\n\t@include clearfix;\n}\n```\n\n### child selector mixin\n\n常常會遇到使用 child selector 的情境。我們可以用 mixin 進一步包裝起來。\n\n```css\n// before\n.list {\n\t&:first-child {\n\t  //bla\n\t}\n\n\t&:nth-child(2n) {\n\t  //bla\n\t}\n}\n// after \n@mixin first() {\n\t&:first-child { @content; }\n}\n.list {\n\t@include first() {};\n}\n```\n\n這邊推薦 [Family.scss](http://lukyvj.github.io/family.scss/)，搜集了許多好用 child selector mixin。\n\n**p.s：我認為剛入門 CSS 的人還是從純 CSS 開始學習比較好，以免被 SCSS 的語法糖給寵壞了**\n\n## 善用 Comment\n\n在缺乏 function 的 css 下，使用 comment 來解釋 class 更為重要。這邊提供一些，comment 的技巧。\n\n註解不但方便自己閱讀，之後別人接手也會比較快理解這個 class 該如何使用、在哪個場景使用。\n\n### 目錄\n\n如果文件包含的 class 較多，可以考慮在文件最前面加入目錄，方便之後查找。\n\n```css\n/**\n * INPUT\n *  text\n *  select\n *  number\n * BUTTON\n *  primary\n *  warn\n */\n```\n\n### 魔術數字、HACK、使用方式\n\n```css\n/*\n * for input[type=\"text\"]\n * e.g: <input type=\"text\" />\n */\n \n.text-input[type=\"text\"] {\n  padding: 20px;\n\n  /* page offset */\n\ttop: 27px;\n  /* IE 8+ hack */\n  // ...\n}\n```\n\n## CSS 結構\n\n基本上分成幾個大方向：`module` `base` `config` `helper`\n\n### module\n\nmodule 資料夾裡存放所有模組化的元件，像是 button input modal 等等。如果元件拆得更細的話，可以再另外開資料夾，像是 button 有可能樣式比較多，這時候我們可以另外開一個 `button` 資料夾，裡頭存放所有 button 的樣式。\n\n### base \n\nbase 裡頭放置了像是 `grid` `normalize` `reset` `typography` 等比較基本的架構。\n\n### config\n\n存放變數跟 color 的地方，設定的內容統一存放在這個資料夾統一管理。\n\n### helper\n\n存放客製化的 function 跟 mixin。\n\n## 寫在最後\n\n如果你有額外的時間，建議你還是可以去看看像是 [postCSS](https://github.com/postcss/postcss)、[css-modules](https://github.com/css-modules/css-modules)、[webpack](https://github.com/webpack/webpack) 等優秀的開源工具。\n不然整天跟 CSS 打架總有一天會精神耗弱的XD。\n\n做了一個[DEMO](https://github.com/kjj6198/css-structure-example)，非常陽春。\n\n如果你也想分享自己在前端跟 legacy code 奮鬥的過程，或是有更好的解決方案，歡迎在下面留言。\n\n## 持續關注前端趨勢\n\n這裡分享幾個覺得蠻優質的資源。\n\n[掘金網](http://gold.xitu.io/)\n\n[碼天狗（但最近前端的分享不多）](http://weekly.codetengu.com/)\n\n[TechBrige](https://www.techbridge.cc/)\n\n[CSS wizard](http://csswizardry.com/)\n\n\n### reference\n\n[CSS guideline](http://cssguidelin.es/)\n\n[Why Stylelint](https://www.smashingmagazine.com/2016/05/stylelint-the-style-sheet-linter-weve-always-wanted/)\n\n[CSS coding techniques](https://hacks.mozilla.org/2016/05/css-coding-techniques/?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_44)\n\n[why you should refactor your css](http://seesparkbox.com/foundry/why_you_need_to_refactor_your_css)\n\n[rsscss.io](http://rscss.io/)\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code' %}\n- {% post_link 'legacy-code3' %}\n","slug":"legacy-code2","published":1,"updated":"2016-10-18T11:32:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitrb001qiw5tlfgjpwf4","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>我們的第一步是先從 CSS 下手，因為 css 是相對於其他前端部分來說比較容易重構的部分。很容易髒亂的 code 也是 CSS。</p>\n<p>上一篇描述了在大型專案中引入新框架及技術的困難點，這一篇主要會專注在如何透過現有的工具及框架來重構現有的代碼。</p>\n<p>本次的重構技巧會以 SCSS 為主，所以在閱讀本文之前，我先假設你已經有基本的 SCSS 以及 CSS 的基礎。其他預處理器的概念應該是相通的。</p>\n<h2 id=\"引入-style-linter-及-editorconfig\"><a href=\"#引入-style-linter-及-editorconfig\" class=\"headerlink\" title=\"引入 style linter 及 editorconfig\"></a>引入 style linter 及 editorconfig</h2><p>我們採取的第一步是先引入審查代碼工具。目前比較流行的 css linter 是 stylelinter，他能夠針對 scss sass 語法做 lint。也可以搭配其他 IDE、文字編輯器 plugin。這邊的範例是使用 sublime，其他的 IDE 應該也有類似的功能。</p>\n<h3 id=\"1-加入-stylelint\"><a href=\"#1-加入-stylelint\" class=\"headerlink\" title=\"1. 加入 stylelint\"></a>1. 加入 stylelint</h3><p>stylelint 除了可以針對 scss 語法做 lint 之外。由於其本身是用 js 撰寫的，可以客製化自己的 rule 跟加入其他開源的 plugin。</p>\n<p>因為 stylelint 是以 AST 的方式解析，所以可以很容易的對文件中的節點做操作。</p>\n<p>關於 stylelint 的深入使用，已經超過本文篇幅，有興趣的人可以參考 css trick 的<a href=\"https://css-tricks.com/stylelint/\" target=\"_blank\" rel=\"external\">教學</a></p>\n<p>首先，先來安裝 <code>stylelint</code>，run <code>npm install -g stylelint</code>。</p>\n<p>再來設置 .stylelintrc 檔，詳細的 rules 可以到<a href=\"http://stylelint.io/user-guide/rules/\" target=\"_blank\" rel=\"external\">這裡</a> 查看。如果你不想要那麼麻煩自己手動一個一個設定的話。可以考慮使用 <a href=\"https://github.com/stylelint/stylelint-config-standard\" target=\"_blank\" rel=\"external\">stylelint-config-standard</a> 這個插件，再根據自己的需求做調整。</p>\n<p><code>npm install --save-dev stylelint-config-standard</code></p>\n<p><strong>這邊還是建議花時間瞭解一下專案的需求來制定 rule，不然有時候太嚴格的 rule，滿江紅看到也懶得改了。</strong></p>\n<h3 id=\"2-加入-editorconfig\"><a href=\"#2-加入-editorconfig\" class=\"headerlink\" title=\"2. 加入 .editorconfig\"></a>2. 加入 .editorconfig</h3><p>EditorConfig 是一個為了統一代碼風格的解決方案。每個人文字編輯器的環境可能不盡相同，為了統一彼此之間的環境，這邊我們採用的 <code>editorconfig</code></p>\n<p>設定非常簡單，只要新增一個檔案就好。<a href=\"http://EditorConfig.org\" target=\"_blank\" rel=\"external\">editorconfig</a>。</p>\n<p>目前幾乎主流的文字編輯器都有支援 editorconfig。</p>\n<h2 id=\"常見的-code-smell-以及-refactor-方式\"><a href=\"#常見的-code-smell-以及-refactor-方式\" class=\"headerlink\" title=\"常見的 code smell 以及 refactor 方式\"></a>常見的 code smell 以及 refactor 方式</h2><p>在開始捲起袖子做事之前，還是先來確認一下目前的專案是否需要 refactor：</p>\n<ul>\n<li>許多元件（如 button input）等放在同一個檔案內，查找非常不易。</li>\n<li>覆寫了許多 class 造成預期之外的行為發生</li>\n<li>早期沒有統一的代碼規範，tab、空白夾雜在一起，閱讀性大幅降低</li>\n<li>!important 四散各處</li>\n<li>變數的命名跟管理不夠統一</li>\n<li>團隊開始擴增</li>\n<li>相關的文件不足</li>\n</ul>\n<p>接下來介紹一些比較常見的 code smell</p>\n<h3 id=\"Order\"><a href=\"#Order\" class=\"headerlink\" title=\"Order\"></a>Order</h3><p>class 變多之後，如果 rule 裡面沒有一定的排列順序的話，其實查找很不方便。而且易讀性並不高，像是下列的 code</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.class</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</div><div class=\"line\">\t<span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">\t<span class=\"attribute\">list-style</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">\t<span class=\"attribute\">background</span>: white;</div><div class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</div><div class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">15px</span>;</div><div class=\"line\">\t<span class=\"attribute\">overflow-y</span>: scroll;</div><div class=\"line\">\t<span class=\"attribute\">overflow-x</span>: hidden;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid $hr-gray;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">9999999</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>那麼要怎樣排序會比較好呢？這邊提供幾個大原則：</p>\n<ol>\n<li>display、position</li>\n<li>box-model</li>\n<li>font、typography</li>\n<li>layout(包含 color、border-radius 等)</li>\n<li>其他屬性(如animation)</li>\n</ol>\n<p>原因：對一個 class 來說，最重要的就是 display 與 position ，所以應該擺在最上面。而其次重要的內容是文字，所以擺第二，最後才是 <code>layout</code> 與其他屬性。<br>至於屬於同屬性的話不限制順序，例如 padding margin 順序調換沒有關係，因為找起來都很方便。只要維持一定的邏輯即可。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.class</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">9999999</span>;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</div><div class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">15px</span>;</div><div class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">background</span>: white;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">list-style</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"attribute\">overflow-y</span>: scroll;</div><div class=\"line\">\t<span class=\"attribute\">overflow-x</span>: hidden;\t</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"善用-sass-map-管理變數\"><a href=\"#善用-sass-map-管理變數\" class=\"headerlink\" title=\"善用 sass map 管理變數\"></a>善用 sass map 管理變數</h3><p>style 檔案變多了之後，相對的要管理的變數也會變得越來越多。<br>除了在命名時加上前綴之外，我們也可以利用 sass map 的方式來統一管理。而且 sass map 提供了一些很方便的 <a href=\"http://sass-lang.com/documentation/Sass/Script/Functions.html\" target=\"_blank\" rel=\"external\">function</a> 來操作，像是 <code>map-get</code> <code>map-has-key</code>等等，可以很有效地把變數 group 起來。很像 js 的 object。</p>\n<p>以 <code>z-index</code> 來說，我們可以改寫下面的 code</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">/* before */</div><div class=\"line\">$zindex-navbar: 100;</div><div class=\"line\">$zindex-dropdown: 200;</div><div class=\"line\">$zindex-tooltip: 300;</div><div class=\"line\">$zindex-modal: 400;</div><div class=\"line\"></div><div class=\"line\">.navbar &#123;</div><div class=\"line\">\tz-index: $zindex-navbar;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">/* after */</div><div class=\"line\">$zindex: (</div><div class=\"line\">  navbar: 100,</div><div class=\"line\">  dropdown: 200,</div><div class=\"line\">  tooltip: 300,</div><div class=\"line\">  modal: 400</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">.navbar &#123;</div><div class=\"line\">\tz-index: map-get($zindex, 'navbar');</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>用 <code>map</code> 的方式取值，看起來好像比較厚工一點，我們可以用 sass 的 function 包裝起來：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * z alias for z-index</div><div class=\"line\"> * get zindex map value</div><div class=\"line\"> */</div><div class=\"line\">@<span class=\"keyword\">function</span> z($key) &#123;</div><div class=\"line\">\t@<span class=\"keyword\">if</span>(<span class=\"keyword\">map</span>-<span class=\"keyword\">has</span>-<span class=\"keyword\">key</span>($<span class=\"keyword\">zindex</span>, $key))&#123;</div><div class=\"line\">    @<span class=\"keyword\">return</span> map-get($zindex, $key);</div><div class=\"line\">  &#125; @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">error</span> <span class=\"string\">\"unknown key #&#123;$key&#125;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-class\">.navbar</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"built_in\">z</span>($zindex, <span class=\"string\">'navbar'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>當然還有其他的應用像是 <code>color</code> <code>typography</code> 等等，都可以搭配 sass map 的方式來操作。</p>\n<p>如果你認為上述的方式跟用前綴的方式分類變數沒有什麼不同的話，不套用也沒關係，重構是為了讓之後的開發更舒服。</p>\n<h3 id=\"大量的巢狀-class\"><a href=\"#大量的巢狀-class\" class=\"headerlink\" title=\"大量的巢狀 class\"></a>大量的巢狀 class</h3><p>我的建議是不要超過三層，第一是易讀性非常低，再來很容易覆蓋到權重。<br>可以採用一些目前比較熱門的 css 命名規範如 OOCSS 或是 BEM，或者搭配兩者一起使用。</p>\n<p>但最重要的一點是自己寫起來的感覺，不要讓規範箝制你了。</p>\n<p>如果想要使用 scss 的巢狀功能方便閱讀，又不想要讓巢狀 class 覆蓋權重的話，可以使用 @at-root，@at-root 在編譯的時候會幫你把巢狀拆出來到 root。</p>\n<p>另外可以使用 <code>&gt;</code> 子元素選擇器來取代後代選擇器。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">.classA &#123;</div><div class=\"line\">\t@at-root .classB &#123;</div><div class=\"line\">    // bla</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// compiled</div><div class=\"line\"></div><div class=\"line\">.classA &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;</div><div class=\"line\">  .classB &#123;</div><div class=\"line\">    // bla</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>實際的 use case 如下：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">.alert-modal &#123;</div><div class=\"line\">  @at-root &amp;__header &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__body &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__footer &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>以上的代碼好像沒有想像中的好看，等下可以搭配 mixin 把它進一步做簡化。</p>\n<h2 id=\"善用-Mixin-簡化程式\"><a href=\"#善用-Mixin-簡化程式\" class=\"headerlink\" title=\"善用 Mixin 簡化程式\"></a>善用 Mixin 簡化程式</h2><p>除了一般使用 mixin 來加入 <code>prefixer</code> 之外，mixin 能夠做的事情還有很多，這邊提出幾個方法給大家參考。</p>\n<h3 id=\"BEM-mixin\"><a href=\"#BEM-mixin\" class=\"headerlink\" title=\"BEM mixin\"></a>BEM mixin</h3><p>BEM 的命名方式，如果一直手動 key 的話，感覺也挺麻煩的，而且 key 錯的機率也蠻高的，我們可以利用 mixin 來簡化他。</p>\n<p>順便一提，如果你的專案已經套用了 <code>postCSS</code>，可以使用 <a href=\"https://www.npmjs.com/package/postcss-bem\" target=\"_blank\" rel=\"external\">postcss-bem</a> 來幫助命名。</p>\n<p>如果你不喜歡他的命名方式，或是當前還無法套用 postCSS 的話也沒關係，我們可以自己做一個。</p>\n<p>上面的 code 可以改成下面的形式：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin block($block_name) &#123;</div><div class=\"line\">  .#&#123;$block_name&#125; &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin element($element_name) &#123; </div><div class=\"line\">  @at-root &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin modifier($modifier_name) &#123;</div><div class=\"line\">  @at-root &amp;-#&#123;$modifier_name&#125; &#123; @content; &#125;\t</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin state($state_name) &#123;</div><div class=\"line\">\t&amp;.is-$&#123;#state_name&#125; &#123;@content;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// modal.scss</div><div class=\"line\"></div><div class=\"line\">// before</div><div class=\"line\">.alert-modal &#123;</div><div class=\"line\">  @at-root &amp;__header &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__body &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__footer &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// after</div><div class=\"line\">@include block(\"alert-modal\") &#123;</div><div class=\"line\">\t@include element(\"header\") &#123;&#125;</div><div class=\"line\">\t@include element(\"body\") &#123;&#125;</div><div class=\"line\">\t@include element(\"footer\") &#123;&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來簡單的 BEM mixins 就製作完成了。注意到這邊我們使用 <code>at-root</code> 的方式來避免巢狀 class。</p>\n<p>可以按照自己的喜好來調整命名方式，或者嚴謹一點對參數做一些處理（轉為小寫等等）、加入判斷式等等，或者今天你想要使用巢狀 class 的話可以加入額外的判斷參數。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin element($element_name, $at-root: true) &#123; </div><div class=\"line\">  @if($at-root) &#123;</div><div class=\"line\">    @at-root &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  @else &#123;</div><div class=\"line\">    &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"util-mixin\"><a href=\"#util-mixin\" class=\"headerlink\" title=\"util mixin\"></a>util mixin</h3><p>舉例來說，在設置 padding margin 的時候，我們常常會將上下或是左右的值設為一樣。寫久了難免會嫌麻煩，這時候就可以拜託 mixin 了。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">// before</div><div class=\"line\">.classA &#123;</div><div class=\"line\">\tmargin-right: 10px;</div><div class=\"line\">\tmargin-left: 10px;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// after</div><div class=\"line\"></div><div class=\"line\">/*</div><div class=\"line\"> * lr Alias for left right</div><div class=\"line\"> */</div><div class=\"line\">@mixin lr($box_model, $value) &#123;</div><div class=\"line\">\t#&#123;$box_model&#125;-left: $value;</div><div class=\"line\">\t#&#123;$box_model&#125;-right: $value;</div><div class=\"line\">&#125;;</div><div class=\"line\">.classA &#123;</div><div class=\"line\">\t@include lr(\"margin\", 10px);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊沒有寫得很嚴謹，你可以另外加入判斷式來保證輸入的值是合法的，類似的概念也能套用到 top left 設值上。</p>\n<p>或是常常遇到的 clearfix。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin clearfix() &#123;</div><div class=\"line\">\t&amp;:before, &amp;:after &#123;</div><div class=\"line\">    display: table;</div><div class=\"line\">    content: \"\";</div><div class=\"line\">\t\tclear: both;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.column &#123;</div><div class=\"line\">\t@include clearfix;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"child-selector-mixin\"><a href=\"#child-selector-mixin\" class=\"headerlink\" title=\"child selector mixin\"></a>child selector mixin</h3><p>常常會遇到使用 child selector 的情境。我們可以用 mixin 進一步包裝起來。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">// before</div><div class=\"line\">.list &#123;</div><div class=\"line\">\t&amp;:first-child &#123;</div><div class=\"line\">\t  //bla</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t&amp;:nth-child(2n) &#123;</div><div class=\"line\">\t  //bla</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">// after </div><div class=\"line\">@mixin first() &#123;</div><div class=\"line\">\t&amp;:first-child &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">.list &#123;</div><div class=\"line\">\t@include first() &#123;&#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊推薦 <a href=\"http://lukyvj.github.io/family.scss/\" target=\"_blank\" rel=\"external\">Family.scss</a>，搜集了許多好用 child selector mixin。</p>\n<p><strong>p.s：我認為剛入門 CSS 的人還是從純 CSS 開始學習比較好，以免被 SCSS 的語法糖給寵壞了</strong></p>\n<h2 id=\"善用-Comment\"><a href=\"#善用-Comment\" class=\"headerlink\" title=\"善用 Comment\"></a>善用 Comment</h2><p>在缺乏 function 的 css 下，使用 comment 來解釋 class 更為重要。這邊提供一些，comment 的技巧。</p>\n<p>註解不但方便自己閱讀，之後別人接手也會比較快理解這個 class 該如何使用、在哪個場景使用。</p>\n<h3 id=\"目錄\"><a href=\"#目錄\" class=\"headerlink\" title=\"目錄\"></a>目錄</h3><p>如果文件包含的 class 較多，可以考慮在文件最前面加入目錄，方便之後查找。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * INPUT</div><div class=\"line\"> *  text</div><div class=\"line\"> *  select</div><div class=\"line\"> *  number</div><div class=\"line\"> * BUTTON</div><div class=\"line\"> *  primary</div><div class=\"line\"> *  warn</div><div class=\"line\"> */</div></pre></td></tr></table></figure>\n<h3 id=\"魔術數字、HACK、使用方式\"><a href=\"#魔術數字、HACK、使用方式\" class=\"headerlink\" title=\"魔術數字、HACK、使用方式\"></a>魔術數字、HACK、使用方式</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">/*</div><div class=\"line\"> * for input[type=\"text\"]</div><div class=\"line\"> * e.g: &lt;input type=\"text\" /&gt;</div><div class=\"line\"> */</div><div class=\"line\"> </div><div class=\"line\">.text-input[type=\"text\"] &#123;</div><div class=\"line\">  padding: 20px;</div><div class=\"line\"></div><div class=\"line\">  /* page offset */</div><div class=\"line\">\ttop: 27px;</div><div class=\"line\">  /* IE 8+ hack */</div><div class=\"line\">  // ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"CSS-結構\"><a href=\"#CSS-結構\" class=\"headerlink\" title=\"CSS 結構\"></a>CSS 結構</h2><p>基本上分成幾個大方向：<code>module</code> <code>base</code> <code>config</code> <code>helper</code></p>\n<h3 id=\"module\"><a href=\"#module\" class=\"headerlink\" title=\"module\"></a>module</h3><p>module 資料夾裡存放所有模組化的元件，像是 button input modal 等等。如果元件拆得更細的話，可以再另外開資料夾，像是 button 有可能樣式比較多，這時候我們可以另外開一個 <code>button</code> 資料夾，裡頭存放所有 button 的樣式。</p>\n<h3 id=\"base\"><a href=\"#base\" class=\"headerlink\" title=\"base\"></a>base</h3><p>base 裡頭放置了像是 <code>grid</code> <code>normalize</code> <code>reset</code> <code>typography</code> 等比較基本的架構。</p>\n<h3 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h3><p>存放變數跟 color 的地方，設定的內容統一存放在這個資料夾統一管理。</p>\n<h3 id=\"helper\"><a href=\"#helper\" class=\"headerlink\" title=\"helper\"></a>helper</h3><p>存放客製化的 function 跟 mixin。</p>\n<h2 id=\"寫在最後\"><a href=\"#寫在最後\" class=\"headerlink\" title=\"寫在最後\"></a>寫在最後</h2><p>如果你有額外的時間，建議你還是可以去看看像是 <a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">postCSS</a>、<a href=\"https://github.com/css-modules/css-modules\" target=\"_blank\" rel=\"external\">css-modules</a>、<a href=\"https://github.com/webpack/webpack\" target=\"_blank\" rel=\"external\">webpack</a> 等優秀的開源工具。<br>不然整天跟 CSS 打架總有一天會精神耗弱的XD。</p>\n<p>做了一個<a href=\"https://github.com/kjj6198/css-structure-example\" target=\"_blank\" rel=\"external\">DEMO</a>，非常陽春。</p>\n<p>如果你也想分享自己在前端跟 legacy code 奮鬥的過程，或是有更好的解決方案，歡迎在下面留言。</p>\n<h2 id=\"持續關注前端趨勢\"><a href=\"#持續關注前端趨勢\" class=\"headerlink\" title=\"持續關注前端趨勢\"></a>持續關注前端趨勢</h2><p>這裡分享幾個覺得蠻優質的資源。</p>\n<p><a href=\"http://gold.xitu.io/\" target=\"_blank\" rel=\"external\">掘金網</a></p>\n<p><a href=\"http://weekly.codetengu.com/\" target=\"_blank\" rel=\"external\">碼天狗（但最近前端的分享不多）</a></p>\n<p><a href=\"https://www.techbridge.cc/\" target=\"_blank\" rel=\"external\">TechBrige</a></p>\n<p><a href=\"http://csswizardry.com/\" target=\"_blank\" rel=\"external\">CSS wizard</a></p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"http://cssguidelin.es/\" target=\"_blank\" rel=\"external\">CSS guideline</a></p>\n<p><a href=\"https://www.smashingmagazine.com/2016/05/stylelint-the-style-sheet-linter-weve-always-wanted/\" target=\"_blank\" rel=\"external\">Why Stylelint</a></p>\n<p><a href=\"https://hacks.mozilla.org/2016/05/css-coding-techniques/?utm_campaign=CodeTengu&amp;utm_medium=email&amp;utm_source=CodeTengu_44\" target=\"_blank\" rel=\"external\">CSS coding techniques</a></p>\n<p><a href=\"http://seesparkbox.com/foundry/why_you_need_to_refactor_your_css\" target=\"_blank\" rel=\"external\">why you should refactor your css</a></p>\n<p><a href=\"http://rscss.io/\" target=\"_blank\" rel=\"external\">rsscss.io</a></p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/11/legacy-code/\" title=\"從 legacy code 中尋找出口（上）\">從 legacy code 中尋找出口（上）</a></li>\n<li><a href=\"/2016/09/17/legacy-code3/\" title=\"從 legacy code 中尋找出口（中）- HTML 篇\">從 legacy code 中尋找出口（中）- HTML 篇</a>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>我們的第一步是先從 CSS 下手，因為 css 是相對於其他前端部分來說比較容易重構的部分。很容易髒亂的 code 也是 CSS。</p>\n<p>上一篇描述了在大型專案中引入新框架及技術的困難點，這一篇主要會專注在如何透過現有的工具及框架來重構現有的代碼。</p>\n<p>本次的重構技巧會以 SCSS 為主，所以在閱讀本文之前，我先假設你已經有基本的 SCSS 以及 CSS 的基礎。其他預處理器的概念應該是相通的。</p>\n<h2 id=\"引入-style-linter-及-editorconfig\"><a href=\"#引入-style-linter-及-editorconfig\" class=\"headerlink\" title=\"引入 style linter 及 editorconfig\"></a>引入 style linter 及 editorconfig</h2><p>我們採取的第一步是先引入審查代碼工具。目前比較流行的 css linter 是 stylelinter，他能夠針對 scss sass 語法做 lint。也可以搭配其他 IDE、文字編輯器 plugin。這邊的範例是使用 sublime，其他的 IDE 應該也有類似的功能。</p>\n<h3 id=\"1-加入-stylelint\"><a href=\"#1-加入-stylelint\" class=\"headerlink\" title=\"1. 加入 stylelint\"></a>1. 加入 stylelint</h3><p>stylelint 除了可以針對 scss 語法做 lint 之外。由於其本身是用 js 撰寫的，可以客製化自己的 rule 跟加入其他開源的 plugin。</p>\n<p>因為 stylelint 是以 AST 的方式解析，所以可以很容易的對文件中的節點做操作。</p>\n<p>關於 stylelint 的深入使用，已經超過本文篇幅，有興趣的人可以參考 css trick 的<a href=\"https://css-tricks.com/stylelint/\" target=\"_blank\" rel=\"external\">教學</a></p>\n<p>首先，先來安裝 <code>stylelint</code>，run <code>npm install -g stylelint</code>。</p>\n<p>再來設置 .stylelintrc 檔，詳細的 rules 可以到<a href=\"http://stylelint.io/user-guide/rules/\" target=\"_blank\" rel=\"external\">這裡</a> 查看。如果你不想要那麼麻煩自己手動一個一個設定的話。可以考慮使用 <a href=\"https://github.com/stylelint/stylelint-config-standard\" target=\"_blank\" rel=\"external\">stylelint-config-standard</a> 這個插件，再根據自己的需求做調整。</p>\n<p><code>npm install --save-dev stylelint-config-standard</code></p>\n<p><strong>這邊還是建議花時間瞭解一下專案的需求來制定 rule，不然有時候太嚴格的 rule，滿江紅看到也懶得改了。</strong></p>\n<h3 id=\"2-加入-editorconfig\"><a href=\"#2-加入-editorconfig\" class=\"headerlink\" title=\"2. 加入 .editorconfig\"></a>2. 加入 .editorconfig</h3><p>EditorConfig 是一個為了統一代碼風格的解決方案。每個人文字編輯器的環境可能不盡相同，為了統一彼此之間的環境，這邊我們採用的 <code>editorconfig</code></p>\n<p>設定非常簡單，只要新增一個檔案就好。<a href=\"http://EditorConfig.org\" target=\"_blank\" rel=\"external\">editorconfig</a>。</p>\n<p>目前幾乎主流的文字編輯器都有支援 editorconfig。</p>\n<h2 id=\"常見的-code-smell-以及-refactor-方式\"><a href=\"#常見的-code-smell-以及-refactor-方式\" class=\"headerlink\" title=\"常見的 code smell 以及 refactor 方式\"></a>常見的 code smell 以及 refactor 方式</h2><p>在開始捲起袖子做事之前，還是先來確認一下目前的專案是否需要 refactor：</p>\n<ul>\n<li>許多元件（如 button input）等放在同一個檔案內，查找非常不易。</li>\n<li>覆寫了許多 class 造成預期之外的行為發生</li>\n<li>早期沒有統一的代碼規範，tab、空白夾雜在一起，閱讀性大幅降低</li>\n<li>!important 四散各處</li>\n<li>變數的命名跟管理不夠統一</li>\n<li>團隊開始擴增</li>\n<li>相關的文件不足</li>\n</ul>\n<p>接下來介紹一些比較常見的 code smell</p>\n<h3 id=\"Order\"><a href=\"#Order\" class=\"headerlink\" title=\"Order\"></a>Order</h3><p>class 變多之後，如果 rule 裡面沒有一定的排列順序的話，其實查找很不方便。而且易讀性並不高，像是下列的 code</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.class</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</div><div class=\"line\">\t<span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">\t<span class=\"attribute\">list-style</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\">\t<span class=\"attribute\">background</span>: white;</div><div class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</div><div class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">15px</span>;</div><div class=\"line\">\t<span class=\"attribute\">overflow-y</span>: scroll;</div><div class=\"line\">\t<span class=\"attribute\">overflow-x</span>: hidden;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid $hr-gray;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">9999999</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>那麼要怎樣排序會比較好呢？這邊提供幾個大原則：</p>\n<ol>\n<li>display、position</li>\n<li>box-model</li>\n<li>font、typography</li>\n<li>layout(包含 color、border-radius 等)</li>\n<li>其他屬性(如animation)</li>\n</ol>\n<p>原因：對一個 class 來說，最重要的就是 display 與 position ，所以應該擺在最上面。而其次重要的內容是文字，所以擺第二，最後才是 <code>layout</code> 與其他屬性。<br>至於屬於同屬性的話不限制順序，例如 padding margin 順序調換沒有關係，因為找起來都很方便。只要維持一定的邏輯即可。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.class</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">\t<span class=\"attribute\">top</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">left</span>:<span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"number\">9999999</span>;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">250px</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">padding</span>: <span class=\"number\">30px</span>;</div><div class=\"line\">\t<span class=\"attribute\">padding-left</span>: <span class=\"number\">15px</span>;</div><div class=\"line\">\t<span class=\"attribute\">margin</span>:<span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">background</span>: white;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"attribute\">list-style</span>: none;</div><div class=\"line\">\t<span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">\t</div><div class=\"line\">\t<span class=\"attribute\">overflow-y</span>: scroll;</div><div class=\"line\">\t<span class=\"attribute\">overflow-x</span>: hidden;\t</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"善用-sass-map-管理變數\"><a href=\"#善用-sass-map-管理變數\" class=\"headerlink\" title=\"善用 sass map 管理變數\"></a>善用 sass map 管理變數</h3><p>style 檔案變多了之後，相對的要管理的變數也會變得越來越多。<br>除了在命名時加上前綴之外，我們也可以利用 sass map 的方式來統一管理。而且 sass map 提供了一些很方便的 <a href=\"http://sass-lang.com/documentation/Sass/Script/Functions.html\" target=\"_blank\" rel=\"external\">function</a> 來操作，像是 <code>map-get</code> <code>map-has-key</code>等等，可以很有效地把變數 group 起來。很像 js 的 object。</p>\n<p>以 <code>z-index</code> 來說，我們可以改寫下面的 code</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">/* before */</div><div class=\"line\">$zindex-navbar: 100;</div><div class=\"line\">$zindex-dropdown: 200;</div><div class=\"line\">$zindex-tooltip: 300;</div><div class=\"line\">$zindex-modal: 400;</div><div class=\"line\"></div><div class=\"line\">.navbar &#123;</div><div class=\"line\">\tz-index: $zindex-navbar;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">/* after */</div><div class=\"line\">$zindex: (</div><div class=\"line\">  navbar: 100,</div><div class=\"line\">  dropdown: 200,</div><div class=\"line\">  tooltip: 300,</div><div class=\"line\">  modal: 400</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">.navbar &#123;</div><div class=\"line\">\tz-index: map-get($zindex, 'navbar');</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>用 <code>map</code> 的方式取值，看起來好像比較厚工一點，我們可以用 sass 的 function 包裝起來：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * z alias for z-index</div><div class=\"line\"> * get zindex map value</div><div class=\"line\"> */</div><div class=\"line\">@<span class=\"keyword\">function</span> z($key) &#123;</div><div class=\"line\">\t@<span class=\"keyword\">if</span>(<span class=\"keyword\">map</span>-<span class=\"keyword\">has</span>-<span class=\"keyword\">key</span>($<span class=\"keyword\">zindex</span>, $key))&#123;</div><div class=\"line\">    @<span class=\"keyword\">return</span> map-get($zindex, $key);</div><div class=\"line\">  &#125; @<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    @<span class=\"keyword\">error</span> <span class=\"string\">\"unknown key #&#123;$key&#125;\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"selector-class\">.navbar</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: <span class=\"built_in\">z</span>($zindex, <span class=\"string\">'navbar'</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>當然還有其他的應用像是 <code>color</code> <code>typography</code> 等等，都可以搭配 sass map 的方式來操作。</p>\n<p>如果你認為上述的方式跟用前綴的方式分類變數沒有什麼不同的話，不套用也沒關係，重構是為了讓之後的開發更舒服。</p>\n<h3 id=\"大量的巢狀-class\"><a href=\"#大量的巢狀-class\" class=\"headerlink\" title=\"大量的巢狀 class\"></a>大量的巢狀 class</h3><p>我的建議是不要超過三層，第一是易讀性非常低，再來很容易覆蓋到權重。<br>可以採用一些目前比較熱門的 css 命名規範如 OOCSS 或是 BEM，或者搭配兩者一起使用。</p>\n<p>但最重要的一點是自己寫起來的感覺，不要讓規範箝制你了。</p>\n<p>如果想要使用 scss 的巢狀功能方便閱讀，又不想要讓巢狀 class 覆蓋權重的話，可以使用 @at-root，@at-root 在編譯的時候會幫你把巢狀拆出來到 root。</p>\n<p>另外可以使用 <code>&gt;</code> 子元素選擇器來取代後代選擇器。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">.classA &#123;</div><div class=\"line\">\t@at-root .classB &#123;</div><div class=\"line\">    // bla</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// compiled</div><div class=\"line\"></div><div class=\"line\">.classA &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;</div><div class=\"line\">  .classB &#123;</div><div class=\"line\">    // bla</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>實際的 use case 如下：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">.alert-modal &#123;</div><div class=\"line\">  @at-root &amp;__header &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__body &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__footer &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>以上的代碼好像沒有想像中的好看，等下可以搭配 mixin 把它進一步做簡化。</p>\n<h2 id=\"善用-Mixin-簡化程式\"><a href=\"#善用-Mixin-簡化程式\" class=\"headerlink\" title=\"善用 Mixin 簡化程式\"></a>善用 Mixin 簡化程式</h2><p>除了一般使用 mixin 來加入 <code>prefixer</code> 之外，mixin 能夠做的事情還有很多，這邊提出幾個方法給大家參考。</p>\n<h3 id=\"BEM-mixin\"><a href=\"#BEM-mixin\" class=\"headerlink\" title=\"BEM mixin\"></a>BEM mixin</h3><p>BEM 的命名方式，如果一直手動 key 的話，感覺也挺麻煩的，而且 key 錯的機率也蠻高的，我們可以利用 mixin 來簡化他。</p>\n<p>順便一提，如果你的專案已經套用了 <code>postCSS</code>，可以使用 <a href=\"https://www.npmjs.com/package/postcss-bem\" target=\"_blank\" rel=\"external\">postcss-bem</a> 來幫助命名。</p>\n<p>如果你不喜歡他的命名方式，或是當前還無法套用 postCSS 的話也沒關係，我們可以自己做一個。</p>\n<p>上面的 code 可以改成下面的形式：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin block($block_name) &#123;</div><div class=\"line\">  .#&#123;$block_name&#125; &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin element($element_name) &#123; </div><div class=\"line\">  @at-root &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin modifier($modifier_name) &#123;</div><div class=\"line\">  @at-root &amp;-#&#123;$modifier_name&#125; &#123; @content; &#125;\t</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@mixin state($state_name) &#123;</div><div class=\"line\">\t&amp;.is-$&#123;#state_name&#125; &#123;@content;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// modal.scss</div><div class=\"line\"></div><div class=\"line\">// before</div><div class=\"line\">.alert-modal &#123;</div><div class=\"line\">  @at-root &amp;__header &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__body &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @at-root &amp;__footer &#123;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// after</div><div class=\"line\">@include block(\"alert-modal\") &#123;</div><div class=\"line\">\t@include element(\"header\") &#123;&#125;</div><div class=\"line\">\t@include element(\"body\") &#123;&#125;</div><div class=\"line\">\t@include element(\"footer\") &#123;&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣一來簡單的 BEM mixins 就製作完成了。注意到這邊我們使用 <code>at-root</code> 的方式來避免巢狀 class。</p>\n<p>可以按照自己的喜好來調整命名方式，或者嚴謹一點對參數做一些處理（轉為小寫等等）、加入判斷式等等，或者今天你想要使用巢狀 class 的話可以加入額外的判斷參數。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin element($element_name, $at-root: true) &#123; </div><div class=\"line\">  @if($at-root) &#123;</div><div class=\"line\">    @at-root &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  @else &#123;</div><div class=\"line\">    &amp;__#&#123;$element_name&#125; &#123; @content; &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"util-mixin\"><a href=\"#util-mixin\" class=\"headerlink\" title=\"util mixin\"></a>util mixin</h3><p>舉例來說，在設置 padding margin 的時候，我們常常會將上下或是左右的值設為一樣。寫久了難免會嫌麻煩，這時候就可以拜託 mixin 了。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">// before</div><div class=\"line\">.classA &#123;</div><div class=\"line\">\tmargin-right: 10px;</div><div class=\"line\">\tmargin-left: 10px;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">// after</div><div class=\"line\"></div><div class=\"line\">/*</div><div class=\"line\"> * lr Alias for left right</div><div class=\"line\"> */</div><div class=\"line\">@mixin lr($box_model, $value) &#123;</div><div class=\"line\">\t#&#123;$box_model&#125;-left: $value;</div><div class=\"line\">\t#&#123;$box_model&#125;-right: $value;</div><div class=\"line\">&#125;;</div><div class=\"line\">.classA &#123;</div><div class=\"line\">\t@include lr(\"margin\", 10px);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊沒有寫得很嚴謹，你可以另外加入判斷式來保證輸入的值是合法的，類似的概念也能套用到 top left 設值上。</p>\n<p>或是常常遇到的 clearfix。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">@mixin clearfix() &#123;</div><div class=\"line\">\t&amp;:before, &amp;:after &#123;</div><div class=\"line\">    display: table;</div><div class=\"line\">    content: \"\";</div><div class=\"line\">\t\tclear: both;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">.column &#123;</div><div class=\"line\">\t@include clearfix;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"child-selector-mixin\"><a href=\"#child-selector-mixin\" class=\"headerlink\" title=\"child selector mixin\"></a>child selector mixin</h3><p>常常會遇到使用 child selector 的情境。我們可以用 mixin 進一步包裝起來。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">// before</div><div class=\"line\">.list &#123;</div><div class=\"line\">\t&amp;:first-child &#123;</div><div class=\"line\">\t  //bla</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t&amp;:nth-child(2n) &#123;</div><div class=\"line\">\t  //bla</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">// after </div><div class=\"line\">@mixin first() &#123;</div><div class=\"line\">\t&amp;:first-child &#123; @content; &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">.list &#123;</div><div class=\"line\">\t@include first() &#123;&#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊推薦 <a href=\"http://lukyvj.github.io/family.scss/\" target=\"_blank\" rel=\"external\">Family.scss</a>，搜集了許多好用 child selector mixin。</p>\n<p><strong>p.s：我認為剛入門 CSS 的人還是從純 CSS 開始學習比較好，以免被 SCSS 的語法糖給寵壞了</strong></p>\n<h2 id=\"善用-Comment\"><a href=\"#善用-Comment\" class=\"headerlink\" title=\"善用 Comment\"></a>善用 Comment</h2><p>在缺乏 function 的 css 下，使用 comment 來解釋 class 更為重要。這邊提供一些，comment 的技巧。</p>\n<p>註解不但方便自己閱讀，之後別人接手也會比較快理解這個 class 該如何使用、在哪個場景使用。</p>\n<h3 id=\"目錄\"><a href=\"#目錄\" class=\"headerlink\" title=\"目錄\"></a>目錄</h3><p>如果文件包含的 class 較多，可以考慮在文件最前面加入目錄，方便之後查找。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * INPUT</div><div class=\"line\"> *  text</div><div class=\"line\"> *  select</div><div class=\"line\"> *  number</div><div class=\"line\"> * BUTTON</div><div class=\"line\"> *  primary</div><div class=\"line\"> *  warn</div><div class=\"line\"> */</div></pre></td></tr></table></figure>\n<h3 id=\"魔術數字、HACK、使用方式\"><a href=\"#魔術數字、HACK、使用方式\" class=\"headerlink\" title=\"魔術數字、HACK、使用方式\"></a>魔術數字、HACK、使用方式</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">/*</div><div class=\"line\"> * for input[type=\"text\"]</div><div class=\"line\"> * e.g: &lt;input type=\"text\" /&gt;</div><div class=\"line\"> */</div><div class=\"line\"> </div><div class=\"line\">.text-input[type=\"text\"] &#123;</div><div class=\"line\">  padding: 20px;</div><div class=\"line\"></div><div class=\"line\">  /* page offset */</div><div class=\"line\">\ttop: 27px;</div><div class=\"line\">  /* IE 8+ hack */</div><div class=\"line\">  // ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"CSS-結構\"><a href=\"#CSS-結構\" class=\"headerlink\" title=\"CSS 結構\"></a>CSS 結構</h2><p>基本上分成幾個大方向：<code>module</code> <code>base</code> <code>config</code> <code>helper</code></p>\n<h3 id=\"module\"><a href=\"#module\" class=\"headerlink\" title=\"module\"></a>module</h3><p>module 資料夾裡存放所有模組化的元件，像是 button input modal 等等。如果元件拆得更細的話，可以再另外開資料夾，像是 button 有可能樣式比較多，這時候我們可以另外開一個 <code>button</code> 資料夾，裡頭存放所有 button 的樣式。</p>\n<h3 id=\"base\"><a href=\"#base\" class=\"headerlink\" title=\"base\"></a>base</h3><p>base 裡頭放置了像是 <code>grid</code> <code>normalize</code> <code>reset</code> <code>typography</code> 等比較基本的架構。</p>\n<h3 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h3><p>存放變數跟 color 的地方，設定的內容統一存放在這個資料夾統一管理。</p>\n<h3 id=\"helper\"><a href=\"#helper\" class=\"headerlink\" title=\"helper\"></a>helper</h3><p>存放客製化的 function 跟 mixin。</p>\n<h2 id=\"寫在最後\"><a href=\"#寫在最後\" class=\"headerlink\" title=\"寫在最後\"></a>寫在最後</h2><p>如果你有額外的時間，建議你還是可以去看看像是 <a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">postCSS</a>、<a href=\"https://github.com/css-modules/css-modules\" target=\"_blank\" rel=\"external\">css-modules</a>、<a href=\"https://github.com/webpack/webpack\" target=\"_blank\" rel=\"external\">webpack</a> 等優秀的開源工具。<br>不然整天跟 CSS 打架總有一天會精神耗弱的XD。</p>\n<p>做了一個<a href=\"https://github.com/kjj6198/css-structure-example\" target=\"_blank\" rel=\"external\">DEMO</a>，非常陽春。</p>\n<p>如果你也想分享自己在前端跟 legacy code 奮鬥的過程，或是有更好的解決方案，歡迎在下面留言。</p>\n<h2 id=\"持續關注前端趨勢\"><a href=\"#持續關注前端趨勢\" class=\"headerlink\" title=\"持續關注前端趨勢\"></a>持續關注前端趨勢</h2><p>這裡分享幾個覺得蠻優質的資源。</p>\n<p><a href=\"http://gold.xitu.io/\" target=\"_blank\" rel=\"external\">掘金網</a></p>\n<p><a href=\"http://weekly.codetengu.com/\" target=\"_blank\" rel=\"external\">碼天狗（但最近前端的分享不多）</a></p>\n<p><a href=\"https://www.techbridge.cc/\" target=\"_blank\" rel=\"external\">TechBrige</a></p>\n<p><a href=\"http://csswizardry.com/\" target=\"_blank\" rel=\"external\">CSS wizard</a></p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"http://cssguidelin.es/\" target=\"_blank\" rel=\"external\">CSS guideline</a></p>\n<p><a href=\"https://www.smashingmagazine.com/2016/05/stylelint-the-style-sheet-linter-weve-always-wanted/\" target=\"_blank\" rel=\"external\">Why Stylelint</a></p>\n<p><a href=\"https://hacks.mozilla.org/2016/05/css-coding-techniques/?utm_campaign=CodeTengu&amp;utm_medium=email&amp;utm_source=CodeTengu_44\" target=\"_blank\" rel=\"external\">CSS coding techniques</a></p>\n<p><a href=\"http://seesparkbox.com/foundry/why_you_need_to_refactor_your_css\" target=\"_blank\" rel=\"external\">why you should refactor your css</a></p>\n<p><a href=\"http://rscss.io/\" target=\"_blank\" rel=\"external\">rsscss.io</a></p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/11/legacy-code/\" title=\"從 legacy code 中尋找出口（上）\">從 legacy code 中尋找出口（上）</a></li>\n<li><a href=\"/2016/09/17/legacy-code3/\" title=\"從 legacy code 中尋找出口（中）- HTML 篇\">從 legacy code 中尋找出口（中）- HTML 篇</a>\n</li>\n</ul>\n"},{"title":"從 legacy code 中尋找出口（中）- HTML 篇","date":"2016-09-17T02:40:16.000Z","_content":"\n\n講完 CSS 的重構技巧之後，接下來會專注在 HTML 的重構技巧上。本系列的文章將不會談論 js 的重構部分，因為牽扯到較多的程式撰寫技巧，而且網路上類似的文章應該是不勝枚舉。\n\n## 前言\n\n其實 HTML 能夠重構的點並不多，主要就是標籤的正確使用以及顧慮 accessibility 等小細節。\n\n所以這篇文章會著重在如何使用正確的標籤以及語義化；基本的 accessiblity 認識跟 aria 標籤的使用，不僅對 screen reader 較友善，語義化的標籤使用也能夠在之後修改 HTML 時更有效率；最後是模板語言的技巧應用，這邊會用 rails 的 views 為例，不過概念的部分應該是相通的。 \n\n---\n\n### 語義化\n\n首先，我們先來看看 HTML5 新增的 tag 有哪些\n\n#### section\n\n* 用來表示網頁裡的一個**段落**，常見的誤解是用來表示一篇文章。\n\n* 基本上跟 div 沒有太大的差別，只有語義化的表現。\n\n#### article\n\n* 用來表示一篇**文章**\n\n#### datalist\n\n#### dl dt dd\n\n* 如果資訊是以條列式來呈現，可以使用 dt, dd 來區分。\n\n  > Definition lists, created using the DL element, generally consist of a series of term\\/definition pairs \\(although definition lists may have other applications\\). Thus, when advertising a product, one might use a definition list:\n\n```html\n\n<dl class=\"information\">\n\n  <dt>薪水：</dt>\n\n  <dd>100000 ~ 300000<dd>\n\n  <dt>工作地點：</dt>\n\n  <dd>台北市</dd>\n\n</dl>\n```\n\n任何以成對方式呈現的資訊都可以使用 dt, dd 包裝，像是範例中的：薪水搭配 100000 ~ 300000、工作地點搭配台北市。不過要注意的一點是 dl 預設會將內容縮排（就跟 ul, ol 一樣）。可以將 padding 設置為 0 來解決。\n\n#### figure figcaption\n\n* 使用在和主內容相關的圖片、代碼，或其他資訊，不一定只能放圖而已\n\n* 搭配 figcaption 來定義標題\n\n#### legend\n\n* 搭配 fieldset 使用，用來表示輸入表單的內容\n\n* 預設的邊框很醜，如果要使用這樣的結構可能要重置一下 CSS\n\n<iframe height='265' scrolling='no' src='//codepen.io/kjj6198/embed/LRkQAB/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/kjj6198/pen/LRkQAB/'>fieldset</a> by 愷開 (<a href='http://codepen.io/kjj6198'>@kjj6198</a>) on <a href='http://codepen.io'>CodePen</a>.\n</iframe>\n\n族繁不及備載，tag 的部分就在此告一段落。我個人覺得有一大部分是因為**不知道**才沒有使用這些 tag 的，詳情可以到[w3c](http://www.w3school.com.cn/tags/tag_legend.asp) 的網站看看。之後會再將其他 tag 的使用方式補上。\n\n#### 如果都沒辦法滿足怎麼辦？\n\n如果以上的 tag 都沒有辦法滿足你的需求，最常見的做法就是用純 div。而 HTML 為了因應這樣的需求，也提出的 ARIA 的 spec，讓開發者可以更容易製作客製化的元件。如果我們想要使用 div 來模擬按鈕的行為，除了在 class 加上 `btn` 之外，我們同時可以加上 role attribute，並且使用相對應的 aria-\\* 標籤來做對應的狀態處理（是否按下、disabled、haspopup 等等），除了更加語義化之外，這些看起來有點麻煩的細節，都會大幅地改善使用 screen reader 的體驗。\n\n但是，盡量不要取代原本語義化的標籤的含義，例如將 button 標籤加入 `role=\"modal\"`  之後當作 modal 使用。\n\n> Web developers _must not_ use the ARIA `role` and `aria-*` attributes in a manner that conflicts with the semantics described in the [Document conformance requirements for use of ARIA attributes in HTML](https://www.w3.org/TR/html-aria/#docconformance)table. Web developers _should not_ set the ARIA `role` and `aria-*` attributes to values that match the default implicit ARIA semantics defined in the table. - [w3c spec](https://www.w3.org/TR/html-aria/#rules-wd)\n\n當然，雖然 spec 這麼說，但某些 tag 像是 `input + label` 的 hack 對前端開發來講真的很方便。這部分或許就看大家的取捨了。\n\n```html\n\n<div class=\"btn\" role=\"button\" aria-disabled=\"false\">Click to Signup</div>\n\n```\n\n### Accessibility\n\naccessibility 其實可以另外再寫一篇文章來討論，但因為不再本篇的討論範圍內，這邊只列幾點關於 accessibility 的注意要點。\n\n* 文字的大小\n\n* 顏色的對比\n\n* 是否加入適當的 attr。（img 的 alt, link 的 title 等）\n\n* 適當的 aria-\\* 使用\n\n如果對 accessility 有興趣，建議大家看看：\n\n- [ARIA](https://www.w3.org/TR/html-aria/) w3c 的 aria 標準。\n\n- [WebAIM checklist](http://webaim.org/standards/wcag/checklist) WCAG 的 checklist\n\n- [WebAIM inviblecontent](http://webaim.org/techniques/css/invisiblecontent/) 關於 CSS invisible content 的介紹\n\n### 模板語言（已 rails views 為例）\n\n目前市面上有很多模板引擎，像是 `ejs` `erb` `handlebar` `jade` 等等，都有一套特定的語法、partial、客製化的函數等等幫助你簡化冗長的 HTML。\n\n就 rails views 來說\n\n```html\n\n<%= render 'partial/buttons/primary', locals: {\n\n  :name => 'foo'\n\n  :title => 'bar'\n\n} %>\n\n```\n\n將常用的元件拆成 partial，並且放在對應的資料夾（我的習慣是將所有 partial 檔統一資料夾管理，除非那個 partial 只有在某一個特定頁面使用）。這樣一來就可以很容易地引入已經撰寫好的 HTML 架構。\n\n```html\n\n<%= render 'partial/modal', locals: {\n :name => 'foo',\n :title => 'bar',\n :image => image_path('a.png')\n} %>\n```\n\n## 結論\n\nHTML 的重構比起 CSS 跟 JS，算是簡單許多（只要 css 撰寫的時候不用 tag 做 styling），不過從頭看下來，要顧慮的事情也不少。正確的使用 tag 以及顧慮 accessibility，能夠有效地增加 UX，同時自己在修改的時候也不會看到一大堆 div 看到心癢癢。\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code' %}\n- {% post_link 'legacy-code2' %}\n","source":"_posts/legacy-code3.md","raw":"---\ntitle: 從 legacy code 中尋找出口（中）- HTML 篇\ncategories: 前端\ntags:\n  - HTML\n  - 重構\n  - aria\ndate: 2016-09-17 10:40:16\n---\n\n\n講完 CSS 的重構技巧之後，接下來會專注在 HTML 的重構技巧上。本系列的文章將不會談論 js 的重構部分，因為牽扯到較多的程式撰寫技巧，而且網路上類似的文章應該是不勝枚舉。\n\n## 前言\n\n其實 HTML 能夠重構的點並不多，主要就是標籤的正確使用以及顧慮 accessibility 等小細節。\n\n所以這篇文章會著重在如何使用正確的標籤以及語義化；基本的 accessiblity 認識跟 aria 標籤的使用，不僅對 screen reader 較友善，語義化的標籤使用也能夠在之後修改 HTML 時更有效率；最後是模板語言的技巧應用，這邊會用 rails 的 views 為例，不過概念的部分應該是相通的。 \n\n---\n\n### 語義化\n\n首先，我們先來看看 HTML5 新增的 tag 有哪些\n\n#### section\n\n* 用來表示網頁裡的一個**段落**，常見的誤解是用來表示一篇文章。\n\n* 基本上跟 div 沒有太大的差別，只有語義化的表現。\n\n#### article\n\n* 用來表示一篇**文章**\n\n#### datalist\n\n#### dl dt dd\n\n* 如果資訊是以條列式來呈現，可以使用 dt, dd 來區分。\n\n  > Definition lists, created using the DL element, generally consist of a series of term\\/definition pairs \\(although definition lists may have other applications\\). Thus, when advertising a product, one might use a definition list:\n\n```html\n\n<dl class=\"information\">\n\n  <dt>薪水：</dt>\n\n  <dd>100000 ~ 300000<dd>\n\n  <dt>工作地點：</dt>\n\n  <dd>台北市</dd>\n\n</dl>\n```\n\n任何以成對方式呈現的資訊都可以使用 dt, dd 包裝，像是範例中的：薪水搭配 100000 ~ 300000、工作地點搭配台北市。不過要注意的一點是 dl 預設會將內容縮排（就跟 ul, ol 一樣）。可以將 padding 設置為 0 來解決。\n\n#### figure figcaption\n\n* 使用在和主內容相關的圖片、代碼，或其他資訊，不一定只能放圖而已\n\n* 搭配 figcaption 來定義標題\n\n#### legend\n\n* 搭配 fieldset 使用，用來表示輸入表單的內容\n\n* 預設的邊框很醜，如果要使用這樣的結構可能要重置一下 CSS\n\n<iframe height='265' scrolling='no' src='//codepen.io/kjj6198/embed/LRkQAB/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/kjj6198/pen/LRkQAB/'>fieldset</a> by 愷開 (<a href='http://codepen.io/kjj6198'>@kjj6198</a>) on <a href='http://codepen.io'>CodePen</a>.\n</iframe>\n\n族繁不及備載，tag 的部分就在此告一段落。我個人覺得有一大部分是因為**不知道**才沒有使用這些 tag 的，詳情可以到[w3c](http://www.w3school.com.cn/tags/tag_legend.asp) 的網站看看。之後會再將其他 tag 的使用方式補上。\n\n#### 如果都沒辦法滿足怎麼辦？\n\n如果以上的 tag 都沒有辦法滿足你的需求，最常見的做法就是用純 div。而 HTML 為了因應這樣的需求，也提出的 ARIA 的 spec，讓開發者可以更容易製作客製化的元件。如果我們想要使用 div 來模擬按鈕的行為，除了在 class 加上 `btn` 之外，我們同時可以加上 role attribute，並且使用相對應的 aria-\\* 標籤來做對應的狀態處理（是否按下、disabled、haspopup 等等），除了更加語義化之外，這些看起來有點麻煩的細節，都會大幅地改善使用 screen reader 的體驗。\n\n但是，盡量不要取代原本語義化的標籤的含義，例如將 button 標籤加入 `role=\"modal\"`  之後當作 modal 使用。\n\n> Web developers _must not_ use the ARIA `role` and `aria-*` attributes in a manner that conflicts with the semantics described in the [Document conformance requirements for use of ARIA attributes in HTML](https://www.w3.org/TR/html-aria/#docconformance)table. Web developers _should not_ set the ARIA `role` and `aria-*` attributes to values that match the default implicit ARIA semantics defined in the table. - [w3c spec](https://www.w3.org/TR/html-aria/#rules-wd)\n\n當然，雖然 spec 這麼說，但某些 tag 像是 `input + label` 的 hack 對前端開發來講真的很方便。這部分或許就看大家的取捨了。\n\n```html\n\n<div class=\"btn\" role=\"button\" aria-disabled=\"false\">Click to Signup</div>\n\n```\n\n### Accessibility\n\naccessibility 其實可以另外再寫一篇文章來討論，但因為不再本篇的討論範圍內，這邊只列幾點關於 accessibility 的注意要點。\n\n* 文字的大小\n\n* 顏色的對比\n\n* 是否加入適當的 attr。（img 的 alt, link 的 title 等）\n\n* 適當的 aria-\\* 使用\n\n如果對 accessility 有興趣，建議大家看看：\n\n- [ARIA](https://www.w3.org/TR/html-aria/) w3c 的 aria 標準。\n\n- [WebAIM checklist](http://webaim.org/standards/wcag/checklist) WCAG 的 checklist\n\n- [WebAIM inviblecontent](http://webaim.org/techniques/css/invisiblecontent/) 關於 CSS invisible content 的介紹\n\n### 模板語言（已 rails views 為例）\n\n目前市面上有很多模板引擎，像是 `ejs` `erb` `handlebar` `jade` 等等，都有一套特定的語法、partial、客製化的函數等等幫助你簡化冗長的 HTML。\n\n就 rails views 來說\n\n```html\n\n<%= render 'partial/buttons/primary', locals: {\n\n  :name => 'foo'\n\n  :title => 'bar'\n\n} %>\n\n```\n\n將常用的元件拆成 partial，並且放在對應的資料夾（我的習慣是將所有 partial 檔統一資料夾管理，除非那個 partial 只有在某一個特定頁面使用）。這樣一來就可以很容易地引入已經撰寫好的 HTML 架構。\n\n```html\n\n<%= render 'partial/modal', locals: {\n :name => 'foo',\n :title => 'bar',\n :image => image_path('a.png')\n} %>\n```\n\n## 結論\n\nHTML 的重構比起 CSS 跟 JS，算是簡單許多（只要 css 撰寫的時候不用 tag 做 styling），不過從頭看下來，要顧慮的事情也不少。正確的使用 tag 以及顧慮 accessibility，能夠有效地增加 UX，同時自己在修改的時候也不會看到一大堆 div 看到心癢癢。\n\n#### Legacy Code 專欄\n\n- {% post_link 'legacy-code' %}\n- {% post_link 'legacy-code2' %}\n","slug":"legacy-code3","published":1,"updated":"2016-10-18T11:32:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitrf001tiw5tc0yr10ue","content":"<p>講完 CSS 的重構技巧之後，接下來會專注在 HTML 的重構技巧上。本系列的文章將不會談論 js 的重構部分，因為牽扯到較多的程式撰寫技巧，而且網路上類似的文章應該是不勝枚舉。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>其實 HTML 能夠重構的點並不多，主要就是標籤的正確使用以及顧慮 accessibility 等小細節。</p>\n<p>所以這篇文章會著重在如何使用正確的標籤以及語義化；基本的 accessiblity 認識跟 aria 標籤的使用，不僅對 screen reader 較友善，語義化的標籤使用也能夠在之後修改 HTML 時更有效率；最後是模板語言的技巧應用，這邊會用 rails 的 views 為例，不過概念的部分應該是相通的。 </p>\n<hr>\n<h3 id=\"語義化\"><a href=\"#語義化\" class=\"headerlink\" title=\"語義化\"></a>語義化</h3><p>首先，我們先來看看 HTML5 新增的 tag 有哪些</p>\n<h4 id=\"section\"><a href=\"#section\" class=\"headerlink\" title=\"section\"></a>section</h4><ul>\n<li><p>用來表示網頁裡的一個<strong>段落</strong>，常見的誤解是用來表示一篇文章。</p>\n</li>\n<li><p>基本上跟 div 沒有太大的差別，只有語義化的表現。</p>\n</li>\n</ul>\n<h4 id=\"article\"><a href=\"#article\" class=\"headerlink\" title=\"article\"></a>article</h4><ul>\n<li>用來表示一篇<strong>文章</strong></li>\n</ul>\n<h4 id=\"datalist\"><a href=\"#datalist\" class=\"headerlink\" title=\"datalist\"></a>datalist</h4><h4 id=\"dl-dt-dd\"><a href=\"#dl-dt-dd\" class=\"headerlink\" title=\"dl dt dd\"></a>dl dt dd</h4><ul>\n<li><p>如果資訊是以條列式來呈現，可以使用 dt, dd 來區分。</p>\n<blockquote>\n<p>Definition lists, created using the DL element, generally consist of a series of term\\/definition pairs (although definition lists may have other applications). Thus, when advertising a product, one might use a definition list:</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span> <span class=\"attr\">class</span>=<span class=\"string\">\"information\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>薪水：<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>100000 ~ 300000<span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>工作地點：<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>台北市<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>任何以成對方式呈現的資訊都可以使用 dt, dd 包裝，像是範例中的：薪水搭配 100000 ~ 300000、工作地點搭配台北市。不過要注意的一點是 dl 預設會將內容縮排（就跟 ul, ol 一樣）。可以將 padding 設置為 0 來解決。</p>\n<h4 id=\"figure-figcaption\"><a href=\"#figure-figcaption\" class=\"headerlink\" title=\"figure figcaption\"></a>figure figcaption</h4><ul>\n<li><p>使用在和主內容相關的圖片、代碼，或其他資訊，不一定只能放圖而已</p>\n</li>\n<li><p>搭配 figcaption 來定義標題</p>\n</li>\n</ul>\n<h4 id=\"legend\"><a href=\"#legend\" class=\"headerlink\" title=\"legend\"></a>legend</h4><ul>\n<li><p>搭配 fieldset 使用，用來表示輸入表單的內容</p>\n</li>\n<li><p>預設的邊框很醜，如果要使用這樣的結構可能要重置一下 CSS</p>\n</li>\n</ul>\n<iframe height=\"265\" scrolling=\"no\" src=\"//codepen.io/kjj6198/embed/LRkQAB/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"http://codepen.io/kjj6198/pen/LRkQAB/\" target=\"_blank\" rel=\"external\">fieldset</a> by 愷開 (<a href=\"http://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"http://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.<br></iframe>\n\n<p>族繁不及備載，tag 的部分就在此告一段落。我個人覺得有一大部分是因為<strong>不知道</strong>才沒有使用這些 tag 的，詳情可以到<a href=\"http://www.w3school.com.cn/tags/tag_legend.asp\" target=\"_blank\" rel=\"external\">w3c</a> 的網站看看。之後會再將其他 tag 的使用方式補上。</p>\n<h4 id=\"如果都沒辦法滿足怎麼辦？\"><a href=\"#如果都沒辦法滿足怎麼辦？\" class=\"headerlink\" title=\"如果都沒辦法滿足怎麼辦？\"></a>如果都沒辦法滿足怎麼辦？</h4><p>如果以上的 tag 都沒有辦法滿足你的需求，最常見的做法就是用純 div。而 HTML 為了因應這樣的需求，也提出的 ARIA 的 spec，讓開發者可以更容易製作客製化的元件。如果我們想要使用 div 來模擬按鈕的行為，除了在 class 加上 <code>btn</code> 之外，我們同時可以加上 role attribute，並且使用相對應的 aria-* 標籤來做對應的狀態處理（是否按下、disabled、haspopup 等等），除了更加語義化之外，這些看起來有點麻煩的細節，都會大幅地改善使用 screen reader 的體驗。</p>\n<p>但是，盡量不要取代原本語義化的標籤的含義，例如將 button 標籤加入 <code>role=&quot;modal&quot;</code>  之後當作 modal 使用。</p>\n<blockquote>\n<p>Web developers <em>must not</em> use the ARIA <code>role</code> and <code>aria-*</code> attributes in a manner that conflicts with the semantics described in the <a href=\"https://www.w3.org/TR/html-aria/#docconformance\" target=\"_blank\" rel=\"external\">Document conformance requirements for use of ARIA attributes in HTML</a>table. Web developers <em>should not</em> set the ARIA <code>role</code> and <code>aria-*</code> attributes to values that match the default implicit ARIA semantics defined in the table. - <a href=\"https://www.w3.org/TR/html-aria/#rules-wd\" target=\"_blank\" rel=\"external\">w3c spec</a></p>\n</blockquote>\n<p>當然，雖然 spec 這麼說，但某些 tag 像是 <code>input + label</code> 的 hack 對前端開發來講真的很方便。這部分或許就看大家的取捨了。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">role</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">aria-disabled</span>=<span class=\"string\">\"false\"</span>&gt;</span>Click to Signup<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Accessibility\"><a href=\"#Accessibility\" class=\"headerlink\" title=\"Accessibility\"></a>Accessibility</h3><p>accessibility 其實可以另外再寫一篇文章來討論，但因為不再本篇的討論範圍內，這邊只列幾點關於 accessibility 的注意要點。</p>\n<ul>\n<li><p>文字的大小</p>\n</li>\n<li><p>顏色的對比</p>\n</li>\n<li><p>是否加入適當的 attr。（img 的 alt, link 的 title 等）</p>\n</li>\n<li><p>適當的 aria-* 使用</p>\n</li>\n</ul>\n<p>如果對 accessility 有興趣，建議大家看看：</p>\n<ul>\n<li><p><a href=\"https://www.w3.org/TR/html-aria/\" target=\"_blank\" rel=\"external\">ARIA</a> w3c 的 aria 標準。</p>\n</li>\n<li><p><a href=\"http://webaim.org/standards/wcag/checklist\" target=\"_blank\" rel=\"external\">WebAIM checklist</a> WCAG 的 checklist</p>\n</li>\n<li><p><a href=\"http://webaim.org/techniques/css/invisiblecontent/\" target=\"_blank\" rel=\"external\">WebAIM inviblecontent</a> 關於 CSS invisible content 的介紹</p>\n</li>\n</ul>\n<h3 id=\"模板語言（已-rails-views-為例）\"><a href=\"#模板語言（已-rails-views-為例）\" class=\"headerlink\" title=\"模板語言（已 rails views 為例）\"></a>模板語言（已 rails views 為例）</h3><p>目前市面上有很多模板引擎，像是 <code>ejs</code> <code>erb</code> <code>handlebar</code> <code>jade</code> 等等，都有一套特定的語法、partial、客製化的函數等等幫助你簡化冗長的 HTML。</p>\n<p>就 rails views 來說</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">render</span> '<span class=\"attr\">partial</span>/<span class=\"attr\">buttons</span>/<span class=\"attr\">primary</span>', <span class=\"attr\">locals:</span> &#123;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"attr\">:name</span> =&gt; 'foo'</div><div class=\"line\"></div><div class=\"line\">  :title =&gt; 'bar'</div><div class=\"line\"></div><div class=\"line\">&#125; %&gt;</div></pre></td></tr></table></figure>\n<p>將常用的元件拆成 partial，並且放在對應的資料夾（我的習慣是將所有 partial 檔統一資料夾管理，除非那個 partial 只有在某一個特定頁面使用）。這樣一來就可以很容易地引入已經撰寫好的 HTML 架構。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">render</span> '<span class=\"attr\">partial</span>/<span class=\"attr\">modal</span>', <span class=\"attr\">locals:</span> &#123;</span></div><div class=\"line\"> <span class=\"attr\">:name</span> =&gt; 'foo',</div><div class=\"line\"> :title =&gt; 'bar',</div><div class=\"line\"> :image =&gt; image_path('a.png')</div><div class=\"line\">&#125; %&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>HTML 的重構比起 CSS 跟 JS，算是簡單許多（只要 css 撰寫的時候不用 tag 做 styling），不過從頭看下來，要顧慮的事情也不少。正確的使用 tag 以及顧慮 accessibility，能夠有效地增加 UX，同時自己在修改的時候也不會看到一大堆 div 看到心癢癢。</p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/11/legacy-code/\" title=\"從 legacy code 中尋找出口（上）\">從 legacy code 中尋找出口（上）</a></li>\n<li><a href=\"/2016/06/14/legacy-code2/\" title=\"如何從 legacy code 中尋找出口（中）- CSS 篇\">如何從 legacy code 中尋找出口（中）- CSS 篇</a>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>講完 CSS 的重構技巧之後，接下來會專注在 HTML 的重構技巧上。本系列的文章將不會談論 js 的重構部分，因為牽扯到較多的程式撰寫技巧，而且網路上類似的文章應該是不勝枚舉。</p>\n<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>其實 HTML 能夠重構的點並不多，主要就是標籤的正確使用以及顧慮 accessibility 等小細節。</p>\n<p>所以這篇文章會著重在如何使用正確的標籤以及語義化；基本的 accessiblity 認識跟 aria 標籤的使用，不僅對 screen reader 較友善，語義化的標籤使用也能夠在之後修改 HTML 時更有效率；最後是模板語言的技巧應用，這邊會用 rails 的 views 為例，不過概念的部分應該是相通的。 </p>\n<hr>\n<h3 id=\"語義化\"><a href=\"#語義化\" class=\"headerlink\" title=\"語義化\"></a>語義化</h3><p>首先，我們先來看看 HTML5 新增的 tag 有哪些</p>\n<h4 id=\"section\"><a href=\"#section\" class=\"headerlink\" title=\"section\"></a>section</h4><ul>\n<li><p>用來表示網頁裡的一個<strong>段落</strong>，常見的誤解是用來表示一篇文章。</p>\n</li>\n<li><p>基本上跟 div 沒有太大的差別，只有語義化的表現。</p>\n</li>\n</ul>\n<h4 id=\"article\"><a href=\"#article\" class=\"headerlink\" title=\"article\"></a>article</h4><ul>\n<li>用來表示一篇<strong>文章</strong></li>\n</ul>\n<h4 id=\"datalist\"><a href=\"#datalist\" class=\"headerlink\" title=\"datalist\"></a>datalist</h4><h4 id=\"dl-dt-dd\"><a href=\"#dl-dt-dd\" class=\"headerlink\" title=\"dl dt dd\"></a>dl dt dd</h4><ul>\n<li><p>如果資訊是以條列式來呈現，可以使用 dt, dd 來區分。</p>\n<blockquote>\n<p>Definition lists, created using the DL element, generally consist of a series of term\\/definition pairs (although definition lists may have other applications). Thus, when advertising a product, one might use a definition list:</p>\n</blockquote>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span> <span class=\"attr\">class</span>=<span class=\"string\">\"information\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>薪水：<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>100000 ~ 300000<span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>工作地點：<span class=\"tag\">&lt;/<span class=\"name\">dt</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>台北市<span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>任何以成對方式呈現的資訊都可以使用 dt, dd 包裝，像是範例中的：薪水搭配 100000 ~ 300000、工作地點搭配台北市。不過要注意的一點是 dl 預設會將內容縮排（就跟 ul, ol 一樣）。可以將 padding 設置為 0 來解決。</p>\n<h4 id=\"figure-figcaption\"><a href=\"#figure-figcaption\" class=\"headerlink\" title=\"figure figcaption\"></a>figure figcaption</h4><ul>\n<li><p>使用在和主內容相關的圖片、代碼，或其他資訊，不一定只能放圖而已</p>\n</li>\n<li><p>搭配 figcaption 來定義標題</p>\n</li>\n</ul>\n<h4 id=\"legend\"><a href=\"#legend\" class=\"headerlink\" title=\"legend\"></a>legend</h4><ul>\n<li><p>搭配 fieldset 使用，用來表示輸入表單的內容</p>\n</li>\n<li><p>預設的邊框很醜，如果要使用這樣的結構可能要重置一下 CSS</p>\n</li>\n</ul>\n<iframe height=\"265\" scrolling=\"no\" src=\"//codepen.io/kjj6198/embed/LRkQAB/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"http://codepen.io/kjj6198/pen/LRkQAB/\" target=\"_blank\" rel=\"external\">fieldset</a> by 愷開 (<a href=\"http://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"http://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.<br></iframe>\n\n<p>族繁不及備載，tag 的部分就在此告一段落。我個人覺得有一大部分是因為<strong>不知道</strong>才沒有使用這些 tag 的，詳情可以到<a href=\"http://www.w3school.com.cn/tags/tag_legend.asp\" target=\"_blank\" rel=\"external\">w3c</a> 的網站看看。之後會再將其他 tag 的使用方式補上。</p>\n<h4 id=\"如果都沒辦法滿足怎麼辦？\"><a href=\"#如果都沒辦法滿足怎麼辦？\" class=\"headerlink\" title=\"如果都沒辦法滿足怎麼辦？\"></a>如果都沒辦法滿足怎麼辦？</h4><p>如果以上的 tag 都沒有辦法滿足你的需求，最常見的做法就是用純 div。而 HTML 為了因應這樣的需求，也提出的 ARIA 的 spec，讓開發者可以更容易製作客製化的元件。如果我們想要使用 div 來模擬按鈕的行為，除了在 class 加上 <code>btn</code> 之外，我們同時可以加上 role attribute，並且使用相對應的 aria-* 標籤來做對應的狀態處理（是否按下、disabled、haspopup 等等），除了更加語義化之外，這些看起來有點麻煩的細節，都會大幅地改善使用 screen reader 的體驗。</p>\n<p>但是，盡量不要取代原本語義化的標籤的含義，例如將 button 標籤加入 <code>role=&quot;modal&quot;</code>  之後當作 modal 使用。</p>\n<blockquote>\n<p>Web developers <em>must not</em> use the ARIA <code>role</code> and <code>aria-*</code> attributes in a manner that conflicts with the semantics described in the <a href=\"https://www.w3.org/TR/html-aria/#docconformance\" target=\"_blank\" rel=\"external\">Document conformance requirements for use of ARIA attributes in HTML</a>table. Web developers <em>should not</em> set the ARIA <code>role</code> and <code>aria-*</code> attributes to values that match the default implicit ARIA semantics defined in the table. - <a href=\"https://www.w3.org/TR/html-aria/#rules-wd\" target=\"_blank\" rel=\"external\">w3c spec</a></p>\n</blockquote>\n<p>當然，雖然 spec 這麼說，但某些 tag 像是 <code>input + label</code> 的 hack 對前端開發來講真的很方便。這部分或許就看大家的取捨了。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"btn\"</span> <span class=\"attr\">role</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">aria-disabled</span>=<span class=\"string\">\"false\"</span>&gt;</span>Click to Signup<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Accessibility\"><a href=\"#Accessibility\" class=\"headerlink\" title=\"Accessibility\"></a>Accessibility</h3><p>accessibility 其實可以另外再寫一篇文章來討論，但因為不再本篇的討論範圍內，這邊只列幾點關於 accessibility 的注意要點。</p>\n<ul>\n<li><p>文字的大小</p>\n</li>\n<li><p>顏色的對比</p>\n</li>\n<li><p>是否加入適當的 attr。（img 的 alt, link 的 title 等）</p>\n</li>\n<li><p>適當的 aria-* 使用</p>\n</li>\n</ul>\n<p>如果對 accessility 有興趣，建議大家看看：</p>\n<ul>\n<li><p><a href=\"https://www.w3.org/TR/html-aria/\" target=\"_blank\" rel=\"external\">ARIA</a> w3c 的 aria 標準。</p>\n</li>\n<li><p><a href=\"http://webaim.org/standards/wcag/checklist\" target=\"_blank\" rel=\"external\">WebAIM checklist</a> WCAG 的 checklist</p>\n</li>\n<li><p><a href=\"http://webaim.org/techniques/css/invisiblecontent/\" target=\"_blank\" rel=\"external\">WebAIM inviblecontent</a> 關於 CSS invisible content 的介紹</p>\n</li>\n</ul>\n<h3 id=\"模板語言（已-rails-views-為例）\"><a href=\"#模板語言（已-rails-views-為例）\" class=\"headerlink\" title=\"模板語言（已 rails views 為例）\"></a>模板語言（已 rails views 為例）</h3><p>目前市面上有很多模板引擎，像是 <code>ejs</code> <code>erb</code> <code>handlebar</code> <code>jade</code> 等等，都有一套特定的語法、partial、客製化的函數等等幫助你簡化冗長的 HTML。</p>\n<p>就 rails views 來說</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">render</span> '<span class=\"attr\">partial</span>/<span class=\"attr\">buttons</span>/<span class=\"attr\">primary</span>', <span class=\"attr\">locals:</span> &#123;</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"attr\">:name</span> =&gt; 'foo'</div><div class=\"line\"></div><div class=\"line\">  :title =&gt; 'bar'</div><div class=\"line\"></div><div class=\"line\">&#125; %&gt;</div></pre></td></tr></table></figure>\n<p>將常用的元件拆成 partial，並且放在對應的資料夾（我的習慣是將所有 partial 檔統一資料夾管理，除非那個 partial 只有在某一個特定頁面使用）。這樣一來就可以很容易地引入已經撰寫好的 HTML 架構。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">render</span> '<span class=\"attr\">partial</span>/<span class=\"attr\">modal</span>', <span class=\"attr\">locals:</span> &#123;</span></div><div class=\"line\"> <span class=\"attr\">:name</span> =&gt; 'foo',</div><div class=\"line\"> :title =&gt; 'bar',</div><div class=\"line\"> :image =&gt; image_path('a.png')</div><div class=\"line\">&#125; %&gt;</div></pre></td></tr></table></figure>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>HTML 的重構比起 CSS 跟 JS，算是簡單許多（只要 css 撰寫的時候不用 tag 做 styling），不過從頭看下來，要顧慮的事情也不少。正確的使用 tag 以及顧慮 accessibility，能夠有效地增加 UX，同時自己在修改的時候也不會看到一大堆 div 看到心癢癢。</p>\n<h4 id=\"Legacy-Code-專欄\"><a href=\"#Legacy-Code-專欄\" class=\"headerlink\" title=\"Legacy Code 專欄\"></a>Legacy Code 專欄</h4><ul>\n<li><a href=\"/2016/06/11/legacy-code/\" title=\"從 legacy code 中尋找出口（上）\">從 legacy code 中尋找出口（上）</a></li>\n<li><a href=\"/2016/06/14/legacy-code2/\" title=\"如何從 legacy code 中尋找出口（中）- CSS 篇\">如何從 legacy code 中尋找出口（中）- CSS 篇</a>\n</li>\n</ul>\n"},{"title":"用 Canvas 實作 low-poly art 心得","date":"2016-11-01T03:40:41.000Z","_content":"\n文章待補，圖片。\n\n### 前言\n\n說到 low poly，最讓我驚豔的是 [species in pieces](http://species-in-pieces.com/) 這個網站，他使用 low-poly 的方式畫出 30 種現在地球上瀕臨絕種的動物，是用 CSS 的 clip-path 做出來的，為了兼容瀏覽器，甚至還有做 fallback 的圖片，非常的用心。\n\n之前有在知乎上有看見 low poly 的實作方式，但看了一下原始碼，回答是用 THREE.js 做的。一來我對 three 的掌握程度還太低，再來是 2D 的圖形用 WebGL 加速實在有點奢侈啊。這邊記錄一下思路跟實現過程。\n\n其實要做到 low poly 的效果並不難，最直覺的方式就是在畫面上取點，然後把點連接成三角形。再把三角形著色就完成了。不過隨機取點的方式會造成圖片很大的失真。\n\n有以下四大步驟：\n\n- 轉為灰階\n- 使用 sobel 做邊緣偵測\n- 選擇 vertices\n- 使用 Delaunay 三角化\n- 幫三角形上色\n\n#### 圖片轉灰階\n\n有了 canvas 之後，我們可以使用 `getImageData` 這個 API 對圖片中的任何 pixel 做操作，這給 canvas 更大的彈性跟靈活度，代表圖片的操作有更多的可能性了。\n\n而灰階的實現並不難，將圖片中的 r g b 相加取平均即可。示意的程式碼大概像這樣：\n\n```javascript\nvar resultArr = [];\nfor (var row = 0; row < height; y++) {\n  var i = row * width * 4 + 4;\n  for(var col = 1; col < width; col++, i+=4) {\n    \n  }\n}\n```\n\n其實在實際應用中，要取得邊緣的方式並不是那麼簡單，有可能會影響的因素有：\n\n- 陰影\n- 聚焦模糊\n\n#### Sobel 取邊緣\n\n通常檢測邊界的算法原理在於，將此像素的資料與其他像素比較，如果比較起來發現差距很大（顏色），那麼即可判斷這一點是邊緣。取邊界的算法有很多種，一般最暴力也最直接的方法就是 Sobel。\n\n這邊就不解釋 Sobel 的原理了，[維基百科](https://www.wikiwand.com/zh-tw/%E7%B4%A2%E8%B2%9D%E7%88%BE%E7%AE%97%E5%AD%90)上面寫得蠻清楚的。\n{% math %}\nGx = \\begin{vmatrix} \n\\mathbf{-1} & \\mathbf{0} & \\mathbf{1} \\\\\n\\mathbf{-2} & \\mathbf{0} & \\mathbf{2} \\\\\n\\mathbf{-1} & \\mathbf{0} & \\mathbf{1}\n\\end{vmatrix}\nGy = \\begin{vmatrix} \n\\mathbf{-1} & \\mathbf{-2} & \\mathbf{-1} \\\\\n\\mathbf{0} & \\mathbf{0} & \\mathbf{0} \\\\\n\\mathbf{1} & \\mathbf{2} & \\mathbf{1}\n\\end{vmatrix}\n{% endmath %}\n將矩陣做乘法之後就可以得到梯度大小了。\n\n取完邊界之後，重頭戲就是如何將它三角化了！\n\n#### 取點\n\n如果是隨機取點，很快就會發現一些盲點，邊緣常常沒有辦法很完整的保存下來，因為取點的方式隨機，三角形就會破壞邊緣的形狀，所以這邊的思路是三角形盡量不要出現在邊緣上，而是用邊緣當做三角形的點，這樣才能將邊緣比較完整的保存下來。\n\n但取邊緣的點也不能全部都取，不然這張圖就根本沒有任何藝術效果了，像這個樣子。\n\n醜不拉機，而且裡頭還有很多過小的三角形造成瑣碎的效果，這顯然不是我們想的樣子。那麼，如果都用邊緣的點當作組成三角形的點呢？\n\n我們來看看效果，因為都是用邊緣取點，很容易造成三角形過於尖銳的效果，為了避免這樣的情形發生，我們必須**有限制地**取邊緣的點。所以，除了邊緣上的點會被選中之外，我們也加入一些邊緣外的點，避免銳角三角形的情況發生。\n\n此外，為了更有效的避免銳角三角形發生，我們可以使用 Delaunay 三角化的算法更有效率的取點。這樣子的效果就更完美了，但顯然我的實作上還有一些小問題：\n\n- 在一些細節當中，如何保存比較完整的圖片訊息\n- 失真太大，有些圖片被三角化之後會完全走樣\n\n#### 結論\n\n關於圖學領域真的是一門很深奧的學問啊…，不但要有一定的數學基礎與背景，還需要跟 openCV 或是 webGL、canvas 打交道，而最重要的是創意。\n\n光是圖形的轉換跟變化，就足以寫一本厚厚的教科書了，更何況是用程式語言實作。不過第一次接觸這個領域，挺好玩的。\n\n這個演算法最重要的部分在於選取點的方式，如果更有技巧地取點，那麼三角化後的圖形失真會越少。許多論文跟網路上的實現都比我胡亂湊出來的算法屌多了。\n\n\n\n","source":"_posts/low-poly-art.md","raw":"---\ntitle: 用 Canvas 實作 low-poly art 心得\ntags:\n  - canvas\n  - low poly\ncategory: 前端\ndate: 2016-11-01 11:40:41\n---\n\n文章待補，圖片。\n\n### 前言\n\n說到 low poly，最讓我驚豔的是 [species in pieces](http://species-in-pieces.com/) 這個網站，他使用 low-poly 的方式畫出 30 種現在地球上瀕臨絕種的動物，是用 CSS 的 clip-path 做出來的，為了兼容瀏覽器，甚至還有做 fallback 的圖片，非常的用心。\n\n之前有在知乎上有看見 low poly 的實作方式，但看了一下原始碼，回答是用 THREE.js 做的。一來我對 three 的掌握程度還太低，再來是 2D 的圖形用 WebGL 加速實在有點奢侈啊。這邊記錄一下思路跟實現過程。\n\n其實要做到 low poly 的效果並不難，最直覺的方式就是在畫面上取點，然後把點連接成三角形。再把三角形著色就完成了。不過隨機取點的方式會造成圖片很大的失真。\n\n有以下四大步驟：\n\n- 轉為灰階\n- 使用 sobel 做邊緣偵測\n- 選擇 vertices\n- 使用 Delaunay 三角化\n- 幫三角形上色\n\n#### 圖片轉灰階\n\n有了 canvas 之後，我們可以使用 `getImageData` 這個 API 對圖片中的任何 pixel 做操作，這給 canvas 更大的彈性跟靈活度，代表圖片的操作有更多的可能性了。\n\n而灰階的實現並不難，將圖片中的 r g b 相加取平均即可。示意的程式碼大概像這樣：\n\n```javascript\nvar resultArr = [];\nfor (var row = 0; row < height; y++) {\n  var i = row * width * 4 + 4;\n  for(var col = 1; col < width; col++, i+=4) {\n    \n  }\n}\n```\n\n其實在實際應用中，要取得邊緣的方式並不是那麼簡單，有可能會影響的因素有：\n\n- 陰影\n- 聚焦模糊\n\n#### Sobel 取邊緣\n\n通常檢測邊界的算法原理在於，將此像素的資料與其他像素比較，如果比較起來發現差距很大（顏色），那麼即可判斷這一點是邊緣。取邊界的算法有很多種，一般最暴力也最直接的方法就是 Sobel。\n\n這邊就不解釋 Sobel 的原理了，[維基百科](https://www.wikiwand.com/zh-tw/%E7%B4%A2%E8%B2%9D%E7%88%BE%E7%AE%97%E5%AD%90)上面寫得蠻清楚的。\n{% math %}\nGx = \\begin{vmatrix} \n\\mathbf{-1} & \\mathbf{0} & \\mathbf{1} \\\\\n\\mathbf{-2} & \\mathbf{0} & \\mathbf{2} \\\\\n\\mathbf{-1} & \\mathbf{0} & \\mathbf{1}\n\\end{vmatrix}\nGy = \\begin{vmatrix} \n\\mathbf{-1} & \\mathbf{-2} & \\mathbf{-1} \\\\\n\\mathbf{0} & \\mathbf{0} & \\mathbf{0} \\\\\n\\mathbf{1} & \\mathbf{2} & \\mathbf{1}\n\\end{vmatrix}\n{% endmath %}\n將矩陣做乘法之後就可以得到梯度大小了。\n\n取完邊界之後，重頭戲就是如何將它三角化了！\n\n#### 取點\n\n如果是隨機取點，很快就會發現一些盲點，邊緣常常沒有辦法很完整的保存下來，因為取點的方式隨機，三角形就會破壞邊緣的形狀，所以這邊的思路是三角形盡量不要出現在邊緣上，而是用邊緣當做三角形的點，這樣才能將邊緣比較完整的保存下來。\n\n但取邊緣的點也不能全部都取，不然這張圖就根本沒有任何藝術效果了，像這個樣子。\n\n醜不拉機，而且裡頭還有很多過小的三角形造成瑣碎的效果，這顯然不是我們想的樣子。那麼，如果都用邊緣的點當作組成三角形的點呢？\n\n我們來看看效果，因為都是用邊緣取點，很容易造成三角形過於尖銳的效果，為了避免這樣的情形發生，我們必須**有限制地**取邊緣的點。所以，除了邊緣上的點會被選中之外，我們也加入一些邊緣外的點，避免銳角三角形的情況發生。\n\n此外，為了更有效的避免銳角三角形發生，我們可以使用 Delaunay 三角化的算法更有效率的取點。這樣子的效果就更完美了，但顯然我的實作上還有一些小問題：\n\n- 在一些細節當中，如何保存比較完整的圖片訊息\n- 失真太大，有些圖片被三角化之後會完全走樣\n\n#### 結論\n\n關於圖學領域真的是一門很深奧的學問啊…，不但要有一定的數學基礎與背景，還需要跟 openCV 或是 webGL、canvas 打交道，而最重要的是創意。\n\n光是圖形的轉換跟變化，就足以寫一本厚厚的教科書了，更何況是用程式語言實作。不過第一次接觸這個領域，挺好玩的。\n\n這個演算法最重要的部分在於選取點的方式，如果更有技巧地取點，那麼三角化後的圖形失真會越少。許多論文跟網路上的實現都比我胡亂湊出來的算法屌多了。\n\n\n\n","slug":"low-poly-art","published":1,"updated":"2017-02-28T15:41:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitrh001viw5tt9bxcid2","content":"<p>文章待補，圖片。</p>\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>說到 low poly，最讓我驚豔的是 <a href=\"http://species-in-pieces.com/\" target=\"_blank\" rel=\"external\">species in pieces</a> 這個網站，他使用 low-poly 的方式畫出 30 種現在地球上瀕臨絕種的動物，是用 CSS 的 clip-path 做出來的，為了兼容瀏覽器，甚至還有做 fallback 的圖片，非常的用心。</p>\n<p>之前有在知乎上有看見 low poly 的實作方式，但看了一下原始碼，回答是用 THREE.js 做的。一來我對 three 的掌握程度還太低，再來是 2D 的圖形用 WebGL 加速實在有點奢侈啊。這邊記錄一下思路跟實現過程。</p>\n<p>其實要做到 low poly 的效果並不難，最直覺的方式就是在畫面上取點，然後把點連接成三角形。再把三角形著色就完成了。不過隨機取點的方式會造成圖片很大的失真。</p>\n<p>有以下四大步驟：</p>\n<ul>\n<li>轉為灰階</li>\n<li>使用 sobel 做邊緣偵測</li>\n<li>選擇 vertices</li>\n<li>使用 Delaunay 三角化</li>\n<li>幫三角形上色</li>\n</ul>\n<h4 id=\"圖片轉灰階\"><a href=\"#圖片轉灰階\" class=\"headerlink\" title=\"圖片轉灰階\"></a>圖片轉灰階</h4><p>有了 canvas 之後，我們可以使用 <code>getImageData</code> 這個 API 對圖片中的任何 pixel 做操作，這給 canvas 更大的彈性跟靈活度，代表圖片的操作有更多的可能性了。</p>\n<p>而灰階的實現並不難，將圖片中的 r g b 相加取平均即可。示意的程式碼大概像這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> resultArr = [];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> row = <span class=\"number\">0</span>; row &lt; height; y++) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> i = row * width * <span class=\"number\">4</span> + <span class=\"number\">4</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> col = <span class=\"number\">1</span>; col &lt; width; col++, i+=<span class=\"number\">4</span>) &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>其實在實際應用中，要取得邊緣的方式並不是那麼簡單，有可能會影響的因素有：</p>\n<ul>\n<li>陰影</li>\n<li>聚焦模糊</li>\n</ul>\n<h4 id=\"Sobel-取邊緣\"><a href=\"#Sobel-取邊緣\" class=\"headerlink\" title=\"Sobel 取邊緣\"></a>Sobel 取邊緣</h4><p>通常檢測邊界的算法原理在於，將此像素的資料與其他像素比較，如果比較起來發現差距很大（顏色），那麼即可判斷這一點是邊緣。取邊界的算法有很多種，一般最暴力也最直接的方法就是 Sobel。</p>\n<p>這邊就不解釋 Sobel 的原理了，<a href=\"https://www.wikiwand.com/zh-tw/%E7%B4%A2%E8%B2%9D%E7%88%BE%E7%AE%97%E5%AD%90\" target=\"_blank\" rel=\"external\">維基百科</a>上面寫得蠻清楚的。<br><span>$$Gx = \\begin{vmatrix} \n\\mathbf{-1} &amp; \\mathbf{0} &amp; \\mathbf{1} \\\\\n\\mathbf{-2} &amp; \\mathbf{0} &amp; \\mathbf{2} \\\\\n\\mathbf{-1} &amp; \\mathbf{0} &amp; \\mathbf{1}\n\\end{vmatrix}\nGy = \\begin{vmatrix} \n\\mathbf{-1} &amp; \\mathbf{-2} &amp; \\mathbf{-1} \\\\\n\\mathbf{0} &amp; \\mathbf{0} &amp; \\mathbf{0} \\\\\n\\mathbf{1} &amp; \\mathbf{2} &amp; \\mathbf{1}\n\\end{vmatrix}$$</span><!-- Has MathJax --><br>將矩陣做乘法之後就可以得到梯度大小了。</p>\n<p>取完邊界之後，重頭戲就是如何將它三角化了！</p>\n<h4 id=\"取點\"><a href=\"#取點\" class=\"headerlink\" title=\"取點\"></a>取點</h4><p>如果是隨機取點，很快就會發現一些盲點，邊緣常常沒有辦法很完整的保存下來，因為取點的方式隨機，三角形就會破壞邊緣的形狀，所以這邊的思路是三角形盡量不要出現在邊緣上，而是用邊緣當做三角形的點，這樣才能將邊緣比較完整的保存下來。</p>\n<p>但取邊緣的點也不能全部都取，不然這張圖就根本沒有任何藝術效果了，像這個樣子。</p>\n<p>醜不拉機，而且裡頭還有很多過小的三角形造成瑣碎的效果，這顯然不是我們想的樣子。那麼，如果都用邊緣的點當作組成三角形的點呢？</p>\n<p>我們來看看效果，因為都是用邊緣取點，很容易造成三角形過於尖銳的效果，為了避免這樣的情形發生，我們必須<strong>有限制地</strong>取邊緣的點。所以，除了邊緣上的點會被選中之外，我們也加入一些邊緣外的點，避免銳角三角形的情況發生。</p>\n<p>此外，為了更有效的避免銳角三角形發生，我們可以使用 Delaunay 三角化的算法更有效率的取點。這樣子的效果就更完美了，但顯然我的實作上還有一些小問題：</p>\n<ul>\n<li>在一些細節當中，如何保存比較完整的圖片訊息</li>\n<li>失真太大，有些圖片被三角化之後會完全走樣</li>\n</ul>\n<h4 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h4><p>關於圖學領域真的是一門很深奧的學問啊…，不但要有一定的數學基礎與背景，還需要跟 openCV 或是 webGL、canvas 打交道，而最重要的是創意。</p>\n<p>光是圖形的轉換跟變化，就足以寫一本厚厚的教科書了，更何況是用程式語言實作。不過第一次接觸這個領域，挺好玩的。</p>\n<p>這個演算法最重要的部分在於選取點的方式，如果更有技巧地取點，那麼三角化後的圖形失真會越少。許多論文跟網路上的實現都比我胡亂湊出來的算法屌多了。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>文章待補，圖片。</p>\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>說到 low poly，最讓我驚豔的是 <a href=\"http://species-in-pieces.com/\" target=\"_blank\" rel=\"external\">species in pieces</a> 這個網站，他使用 low-poly 的方式畫出 30 種現在地球上瀕臨絕種的動物，是用 CSS 的 clip-path 做出來的，為了兼容瀏覽器，甚至還有做 fallback 的圖片，非常的用心。</p>\n<p>之前有在知乎上有看見 low poly 的實作方式，但看了一下原始碼，回答是用 THREE.js 做的。一來我對 three 的掌握程度還太低，再來是 2D 的圖形用 WebGL 加速實在有點奢侈啊。這邊記錄一下思路跟實現過程。</p>\n<p>其實要做到 low poly 的效果並不難，最直覺的方式就是在畫面上取點，然後把點連接成三角形。再把三角形著色就完成了。不過隨機取點的方式會造成圖片很大的失真。</p>\n<p>有以下四大步驟：</p>\n<ul>\n<li>轉為灰階</li>\n<li>使用 sobel 做邊緣偵測</li>\n<li>選擇 vertices</li>\n<li>使用 Delaunay 三角化</li>\n<li>幫三角形上色</li>\n</ul>\n<h4 id=\"圖片轉灰階\"><a href=\"#圖片轉灰階\" class=\"headerlink\" title=\"圖片轉灰階\"></a>圖片轉灰階</h4><p>有了 canvas 之後，我們可以使用 <code>getImageData</code> 這個 API 對圖片中的任何 pixel 做操作，這給 canvas 更大的彈性跟靈活度，代表圖片的操作有更多的可能性了。</p>\n<p>而灰階的實現並不難，將圖片中的 r g b 相加取平均即可。示意的程式碼大概像這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> resultArr = [];</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> row = <span class=\"number\">0</span>; row &lt; height; y++) &#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> i = row * width * <span class=\"number\">4</span> + <span class=\"number\">4</span>;</div><div class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> col = <span class=\"number\">1</span>; col &lt; width; col++, i+=<span class=\"number\">4</span>) &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>其實在實際應用中，要取得邊緣的方式並不是那麼簡單，有可能會影響的因素有：</p>\n<ul>\n<li>陰影</li>\n<li>聚焦模糊</li>\n</ul>\n<h4 id=\"Sobel-取邊緣\"><a href=\"#Sobel-取邊緣\" class=\"headerlink\" title=\"Sobel 取邊緣\"></a>Sobel 取邊緣</h4><p>通常檢測邊界的算法原理在於，將此像素的資料與其他像素比較，如果比較起來發現差距很大（顏色），那麼即可判斷這一點是邊緣。取邊界的算法有很多種，一般最暴力也最直接的方法就是 Sobel。</p>\n<p>這邊就不解釋 Sobel 的原理了，<a href=\"https://www.wikiwand.com/zh-tw/%E7%B4%A2%E8%B2%9D%E7%88%BE%E7%AE%97%E5%AD%90\" target=\"_blank\" rel=\"external\">維基百科</a>上面寫得蠻清楚的。<br><span>$$Gx = \\begin{vmatrix} \n\\mathbf{-1} &amp; \\mathbf{0} &amp; \\mathbf{1} \\\\\n\\mathbf{-2} &amp; \\mathbf{0} &amp; \\mathbf{2} \\\\\n\\mathbf{-1} &amp; \\mathbf{0} &amp; \\mathbf{1}\n\\end{vmatrix}\nGy = \\begin{vmatrix} \n\\mathbf{-1} &amp; \\mathbf{-2} &amp; \\mathbf{-1} \\\\\n\\mathbf{0} &amp; \\mathbf{0} &amp; \\mathbf{0} \\\\\n\\mathbf{1} &amp; \\mathbf{2} &amp; \\mathbf{1}\n\\end{vmatrix}$$</span><!-- Has MathJax --><br>將矩陣做乘法之後就可以得到梯度大小了。</p>\n<p>取完邊界之後，重頭戲就是如何將它三角化了！</p>\n<h4 id=\"取點\"><a href=\"#取點\" class=\"headerlink\" title=\"取點\"></a>取點</h4><p>如果是隨機取點，很快就會發現一些盲點，邊緣常常沒有辦法很完整的保存下來，因為取點的方式隨機，三角形就會破壞邊緣的形狀，所以這邊的思路是三角形盡量不要出現在邊緣上，而是用邊緣當做三角形的點，這樣才能將邊緣比較完整的保存下來。</p>\n<p>但取邊緣的點也不能全部都取，不然這張圖就根本沒有任何藝術效果了，像這個樣子。</p>\n<p>醜不拉機，而且裡頭還有很多過小的三角形造成瑣碎的效果，這顯然不是我們想的樣子。那麼，如果都用邊緣的點當作組成三角形的點呢？</p>\n<p>我們來看看效果，因為都是用邊緣取點，很容易造成三角形過於尖銳的效果，為了避免這樣的情形發生，我們必須<strong>有限制地</strong>取邊緣的點。所以，除了邊緣上的點會被選中之外，我們也加入一些邊緣外的點，避免銳角三角形的情況發生。</p>\n<p>此外，為了更有效的避免銳角三角形發生，我們可以使用 Delaunay 三角化的算法更有效率的取點。這樣子的效果就更完美了，但顯然我的實作上還有一些小問題：</p>\n<ul>\n<li>在一些細節當中，如何保存比較完整的圖片訊息</li>\n<li>失真太大，有些圖片被三角化之後會完全走樣</li>\n</ul>\n<h4 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h4><p>關於圖學領域真的是一門很深奧的學問啊…，不但要有一定的數學基礎與背景，還需要跟 openCV 或是 webGL、canvas 打交道，而最重要的是創意。</p>\n<p>光是圖形的轉換跟變化，就足以寫一本厚厚的教科書了，更何況是用程式語言實作。不過第一次接觸這個領域，挺好玩的。</p>\n<p>這個演算法最重要的部分在於選取點的方式，如果更有技巧地取點，那麼三角化後的圖形失真會越少。許多論文跟網路上的實現都比我胡亂湊出來的算法屌多了。</p>\n"},{"title":"伊坂幸太郎 - 摩登時代","date":"2017-02-21T16:00:00.000Z","_content":"\n《摩登時代》原本是喜劇天王卓別林最著名的一部默劇電影。並且被認為是美國史上最偉大的電影之一。\n\n在討論社會學以及國家、個人、家庭之間的關係時，這部電影也常常會被拿出來討論。\n\n雖然是用戲謔而滑稽的手法詮釋的電影，卻將殘忍的事實完整的描述出來。\n\n從卓別林的眼中看見這個國家所隱含的殘酷現實，這就是我們所知的城市，儘管醜陋，卻是我們必須賴以維生的重要場所。這樣令人哭笑不得的劇情，是卓別林突出的功力。![getImage](https://lh6.googleusercontent.com/gIDqGR6FPGQIX2h1DYM4Z7-Yr1geftISfKU6spUKKljcnAk8zyOThE0vbPmUXREVRRD5q6pOX6ugUpThHOf1X3tQTDRz14ZP75OR085AH2G6uNxEzHepY3sAK7pJhONplNnD8_4) \n\n## 摩登時代\n\n這本書是伊坂幸太郎在2010發表的長篇小說，配上花澤健吾的插畫，更富有戲謔感。\n\n伊坂幸太郎將這個故事從頭說起，主軸仍然是在討論這個國家、組織的運作，卻更有戲劇性，雖然也有不少湊篇幅而出現的情節，不過這部小說是連載之後才出版成小說的。\n\n這次連伊坂幸太郎都跳入這個故事中，「我的小說無法改變世界」、「小說啊！只能滲進讀者的體內，然後溶解」似乎隱約道出他的無奈。但不管如何，唯一能確定的是，他深厚的寫作功力以及架構，的確讓這篇故事相當精彩。\n\n「你有沒有勇氣？」是讀完小說後，最深刻的印象之一，男主角平凡的要命，膽小怕死又背著老婆外遇，這樣一位平凡人，就跟螺絲釘一樣。\n\n故事從一位系統工程師發現某個交友網站的程式內部隱藏著某種驚人的事實，愈是深入了解，愈發覺事情的不對勁，因為鍵入特定的關鍵字而受害，這位工程師開始深入調查，然後開始展開了一連串的故事。\n\n書中寫到了許多小故事，也是伊坂的特有風格之一。\n\n每本作品都會有個人物串場，而且不限於人而已，連湯瑪士小火車也曾出現在伊坂的筆中。不僅和劇情有呼應，也似乎在傳達著這個社會下所顯現出來的殘酷。\n\n### 漢娜鄂蘭\n\n![content_womany_ying_mu_kuai_zhao_2014_10_14__shang_wu_9_58_57_1413255831-28769-9510](https://lh5.googleusercontent.com/G_oMnIcF7R2uLH7YLqWT20RPt33rObkd7RBx1TrSzhj_ASrLbCRjio5TEQCmasUq1ZGIjRv4WyZUSyCTgoSXRrjwSfTFppvMwy83g0yETqgH2F7j84tDj07NTptCyiSO7NL3BD4)\n\n「邪惡的平庸」，強調平庸才是邪惡的源頭。\n\n事情拉回到二次世界大戰，猶太人被納粹黨大量屠殺的喋血事件。\n\n當時的劊子手「艾西曼」被批評為惡魔。後來發現，他並不是懷抱著對猶太人的憎恨而屠殺，**而是依照著上級命令行事罷了。**\n\n然後呢？他就不需要懷有內疚感或是責任感，一切都只是遵照指示，不需要受到良心的譴責。\n\n每個人都只是機械性地完成工作，卻對整個工作流程一無所知。只是遵守著龐大的組織運作而已。然而這樣的思想並不只存在於當時。\n\n這是巧合嗎？\n\n還是一種帶有歷史性、諷刺的無奈輪迴？漢娜鄂蘭、伊坂幸太郎所要表達的觀念竟然不約而同地出現在現代。\n\n這是伊坂幸太郎的答案「如果因此做什麼都不會覺得不痛不癢的話，這個人就完了」。\n\n在這個資本過剩的年代，生活雖然不容易，卻已經比之前好太多了。更何況年輕時的機會成本出乎意料地低，真的要讓賺錢、找工作這件事變成放棄思考的藉口嗎？就算真的努力工作，存到不錯的存款，又能夠這樣認定這就是正確的嗎？\n\n邏輯上的確說得通，畢竟別人怎麼活是他們的事，能夠做自己喜歡、有回報、擅長的的事當然是個大幸運，但大部分的人都只能擇其一，並且這樣活下去。\n\n既然有實現夢想的人，那就有不得不放棄夢想的人在。\n\n但是，拿自己的職業做比喻好了。我是一個前端工程師，工作就是從實現設計師所產出的 mockup，儘管頭銜好聽了一點，但本質上也跟擰螺絲的卓别林沒什麼不同。\n\n任何重複性的工作，久了就會覺得枯燥，劇中的卓别林擰啊擰著，擰出病來，甚至把女生的胸部當作螺絲擰下去，結果被抓去監牢。\n\n從早打晚埋頭敲鍵盤，不去思考需求、不去思考這樣做對不對、功能的必要性，那麼的確就跟擰螺絲的工人差不多。\n\n「我只是按照上級指示行動。」這句話聽起來多令人心寒。很多人為了生活跟賺錢放棄思考。捨棄思考的我們、努力（而盲目？）工作的我們，真的只是完成工作就好了嗎？在這樣下去豈不是就像被操控的小丑一樣？\n\n在這個百花齊放的時代，更要不斷提醒自己，我是個活生生的人，有血肉之軀，被打會痛、開心會笑，而不是他人的工具，被動地為他人所用，而是應該要有自己的價值。\n\n### 人是會習慣的動物\n\n工作久了會習慣、反覆練習而純熟。面對不熟悉的領域最原始的情緒就是恐懼跟害怕，如果因為這樣而不敢接觸世界的話，未來也一定會更膽怯的吧！\n\n### 總結\n\n想說的很多，但最完整能表現的大概是這一句吧！\n\n> 「比起支配人，我更想要幫助人」卓別林 -《大獨裁者》\n\n至少在年輕的時候，做什麼事情機會成本都還小的可以時，趕快接觸世界。\n","source":"_posts/morden-time.md","raw":"---\ntitle: 伊坂幸太郎 - 摩登時代\ncategories: 讀書心得\ntags:\n  - 伊坂幸太郎\n  - 卓别林\n  - 摩登時代\ndate: 2017-2-22\n---\n\n《摩登時代》原本是喜劇天王卓別林最著名的一部默劇電影。並且被認為是美國史上最偉大的電影之一。\n\n在討論社會學以及國家、個人、家庭之間的關係時，這部電影也常常會被拿出來討論。\n\n雖然是用戲謔而滑稽的手法詮釋的電影，卻將殘忍的事實完整的描述出來。\n\n從卓別林的眼中看見這個國家所隱含的殘酷現實，這就是我們所知的城市，儘管醜陋，卻是我們必須賴以維生的重要場所。這樣令人哭笑不得的劇情，是卓別林突出的功力。![getImage](https://lh6.googleusercontent.com/gIDqGR6FPGQIX2h1DYM4Z7-Yr1geftISfKU6spUKKljcnAk8zyOThE0vbPmUXREVRRD5q6pOX6ugUpThHOf1X3tQTDRz14ZP75OR085AH2G6uNxEzHepY3sAK7pJhONplNnD8_4) \n\n## 摩登時代\n\n這本書是伊坂幸太郎在2010發表的長篇小說，配上花澤健吾的插畫，更富有戲謔感。\n\n伊坂幸太郎將這個故事從頭說起，主軸仍然是在討論這個國家、組織的運作，卻更有戲劇性，雖然也有不少湊篇幅而出現的情節，不過這部小說是連載之後才出版成小說的。\n\n這次連伊坂幸太郎都跳入這個故事中，「我的小說無法改變世界」、「小說啊！只能滲進讀者的體內，然後溶解」似乎隱約道出他的無奈。但不管如何，唯一能確定的是，他深厚的寫作功力以及架構，的確讓這篇故事相當精彩。\n\n「你有沒有勇氣？」是讀完小說後，最深刻的印象之一，男主角平凡的要命，膽小怕死又背著老婆外遇，這樣一位平凡人，就跟螺絲釘一樣。\n\n故事從一位系統工程師發現某個交友網站的程式內部隱藏著某種驚人的事實，愈是深入了解，愈發覺事情的不對勁，因為鍵入特定的關鍵字而受害，這位工程師開始深入調查，然後開始展開了一連串的故事。\n\n書中寫到了許多小故事，也是伊坂的特有風格之一。\n\n每本作品都會有個人物串場，而且不限於人而已，連湯瑪士小火車也曾出現在伊坂的筆中。不僅和劇情有呼應，也似乎在傳達著這個社會下所顯現出來的殘酷。\n\n### 漢娜鄂蘭\n\n![content_womany_ying_mu_kuai_zhao_2014_10_14__shang_wu_9_58_57_1413255831-28769-9510](https://lh5.googleusercontent.com/G_oMnIcF7R2uLH7YLqWT20RPt33rObkd7RBx1TrSzhj_ASrLbCRjio5TEQCmasUq1ZGIjRv4WyZUSyCTgoSXRrjwSfTFppvMwy83g0yETqgH2F7j84tDj07NTptCyiSO7NL3BD4)\n\n「邪惡的平庸」，強調平庸才是邪惡的源頭。\n\n事情拉回到二次世界大戰，猶太人被納粹黨大量屠殺的喋血事件。\n\n當時的劊子手「艾西曼」被批評為惡魔。後來發現，他並不是懷抱著對猶太人的憎恨而屠殺，**而是依照著上級命令行事罷了。**\n\n然後呢？他就不需要懷有內疚感或是責任感，一切都只是遵照指示，不需要受到良心的譴責。\n\n每個人都只是機械性地完成工作，卻對整個工作流程一無所知。只是遵守著龐大的組織運作而已。然而這樣的思想並不只存在於當時。\n\n這是巧合嗎？\n\n還是一種帶有歷史性、諷刺的無奈輪迴？漢娜鄂蘭、伊坂幸太郎所要表達的觀念竟然不約而同地出現在現代。\n\n這是伊坂幸太郎的答案「如果因此做什麼都不會覺得不痛不癢的話，這個人就完了」。\n\n在這個資本過剩的年代，生活雖然不容易，卻已經比之前好太多了。更何況年輕時的機會成本出乎意料地低，真的要讓賺錢、找工作這件事變成放棄思考的藉口嗎？就算真的努力工作，存到不錯的存款，又能夠這樣認定這就是正確的嗎？\n\n邏輯上的確說得通，畢竟別人怎麼活是他們的事，能夠做自己喜歡、有回報、擅長的的事當然是個大幸運，但大部分的人都只能擇其一，並且這樣活下去。\n\n既然有實現夢想的人，那就有不得不放棄夢想的人在。\n\n但是，拿自己的職業做比喻好了。我是一個前端工程師，工作就是從實現設計師所產出的 mockup，儘管頭銜好聽了一點，但本質上也跟擰螺絲的卓别林沒什麼不同。\n\n任何重複性的工作，久了就會覺得枯燥，劇中的卓别林擰啊擰著，擰出病來，甚至把女生的胸部當作螺絲擰下去，結果被抓去監牢。\n\n從早打晚埋頭敲鍵盤，不去思考需求、不去思考這樣做對不對、功能的必要性，那麼的確就跟擰螺絲的工人差不多。\n\n「我只是按照上級指示行動。」這句話聽起來多令人心寒。很多人為了生活跟賺錢放棄思考。捨棄思考的我們、努力（而盲目？）工作的我們，真的只是完成工作就好了嗎？在這樣下去豈不是就像被操控的小丑一樣？\n\n在這個百花齊放的時代，更要不斷提醒自己，我是個活生生的人，有血肉之軀，被打會痛、開心會笑，而不是他人的工具，被動地為他人所用，而是應該要有自己的價值。\n\n### 人是會習慣的動物\n\n工作久了會習慣、反覆練習而純熟。面對不熟悉的領域最原始的情緒就是恐懼跟害怕，如果因為這樣而不敢接觸世界的話，未來也一定會更膽怯的吧！\n\n### 總結\n\n想說的很多，但最完整能表現的大概是這一句吧！\n\n> 「比起支配人，我更想要幫助人」卓別林 -《大獨裁者》\n\n至少在年輕的時候，做什麼事情機會成本都還小的可以時，趕快接觸世界。\n","slug":"morden-time","published":1,"updated":"2017-03-01T06:03:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitrm001ziw5t5sylhv8h","content":"<p>《摩登時代》原本是喜劇天王卓別林最著名的一部默劇電影。並且被認為是美國史上最偉大的電影之一。</p>\n<p>在討論社會學以及國家、個人、家庭之間的關係時，這部電影也常常會被拿出來討論。</p>\n<p>雖然是用戲謔而滑稽的手法詮釋的電影，卻將殘忍的事實完整的描述出來。</p>\n<p>從卓別林的眼中看見這個國家所隱含的殘酷現實，這就是我們所知的城市，儘管醜陋，卻是我們必須賴以維生的重要場所。這樣令人哭笑不得的劇情，是卓別林突出的功力。<img src=\"https://lh6.googleusercontent.com/gIDqGR6FPGQIX2h1DYM4Z7-Yr1geftISfKU6spUKKljcnAk8zyOThE0vbPmUXREVRRD5q6pOX6ugUpThHOf1X3tQTDRz14ZP75OR085AH2G6uNxEzHepY3sAK7pJhONplNnD8_4\" alt=\"getImage\"> </p>\n<h2 id=\"摩登時代\"><a href=\"#摩登時代\" class=\"headerlink\" title=\"摩登時代\"></a>摩登時代</h2><p>這本書是伊坂幸太郎在2010發表的長篇小說，配上花澤健吾的插畫，更富有戲謔感。</p>\n<p>伊坂幸太郎將這個故事從頭說起，主軸仍然是在討論這個國家、組織的運作，卻更有戲劇性，雖然也有不少湊篇幅而出現的情節，不過這部小說是連載之後才出版成小說的。</p>\n<p>這次連伊坂幸太郎都跳入這個故事中，「我的小說無法改變世界」、「小說啊！只能滲進讀者的體內，然後溶解」似乎隱約道出他的無奈。但不管如何，唯一能確定的是，他深厚的寫作功力以及架構，的確讓這篇故事相當精彩。</p>\n<p>「你有沒有勇氣？」是讀完小說後，最深刻的印象之一，男主角平凡的要命，膽小怕死又背著老婆外遇，這樣一位平凡人，就跟螺絲釘一樣。</p>\n<p>故事從一位系統工程師發現某個交友網站的程式內部隱藏著某種驚人的事實，愈是深入了解，愈發覺事情的不對勁，因為鍵入特定的關鍵字而受害，這位工程師開始深入調查，然後開始展開了一連串的故事。</p>\n<p>書中寫到了許多小故事，也是伊坂的特有風格之一。</p>\n<p>每本作品都會有個人物串場，而且不限於人而已，連湯瑪士小火車也曾出現在伊坂的筆中。不僅和劇情有呼應，也似乎在傳達著這個社會下所顯現出來的殘酷。</p>\n<h3 id=\"漢娜鄂蘭\"><a href=\"#漢娜鄂蘭\" class=\"headerlink\" title=\"漢娜鄂蘭\"></a>漢娜鄂蘭</h3><p><img src=\"https://lh5.googleusercontent.com/G_oMnIcF7R2uLH7YLqWT20RPt33rObkd7RBx1TrSzhj_ASrLbCRjio5TEQCmasUq1ZGIjRv4WyZUSyCTgoSXRrjwSfTFppvMwy83g0yETqgH2F7j84tDj07NTptCyiSO7NL3BD4\" alt=\"content_womany_ying_mu_kuai_zhao_2014_10_14__shang_wu_9_58_57_1413255831-28769-9510\"></p>\n<p>「邪惡的平庸」，強調平庸才是邪惡的源頭。</p>\n<p>事情拉回到二次世界大戰，猶太人被納粹黨大量屠殺的喋血事件。</p>\n<p>當時的劊子手「艾西曼」被批評為惡魔。後來發現，他並不是懷抱著對猶太人的憎恨而屠殺，<strong>而是依照著上級命令行事罷了。</strong></p>\n<p>然後呢？他就不需要懷有內疚感或是責任感，一切都只是遵照指示，不需要受到良心的譴責。</p>\n<p>每個人都只是機械性地完成工作，卻對整個工作流程一無所知。只是遵守著龐大的組織運作而已。然而這樣的思想並不只存在於當時。</p>\n<p>這是巧合嗎？</p>\n<p>還是一種帶有歷史性、諷刺的無奈輪迴？漢娜鄂蘭、伊坂幸太郎所要表達的觀念竟然不約而同地出現在現代。</p>\n<p>這是伊坂幸太郎的答案「如果因此做什麼都不會覺得不痛不癢的話，這個人就完了」。</p>\n<p>在這個資本過剩的年代，生活雖然不容易，卻已經比之前好太多了。更何況年輕時的機會成本出乎意料地低，真的要讓賺錢、找工作這件事變成放棄思考的藉口嗎？就算真的努力工作，存到不錯的存款，又能夠這樣認定這就是正確的嗎？</p>\n<p>邏輯上的確說得通，畢竟別人怎麼活是他們的事，能夠做自己喜歡、有回報、擅長的的事當然是個大幸運，但大部分的人都只能擇其一，並且這樣活下去。</p>\n<p>既然有實現夢想的人，那就有不得不放棄夢想的人在。</p>\n<p>但是，拿自己的職業做比喻好了。我是一個前端工程師，工作就是從實現設計師所產出的 mockup，儘管頭銜好聽了一點，但本質上也跟擰螺絲的卓别林沒什麼不同。</p>\n<p>任何重複性的工作，久了就會覺得枯燥，劇中的卓别林擰啊擰著，擰出病來，甚至把女生的胸部當作螺絲擰下去，結果被抓去監牢。</p>\n<p>從早打晚埋頭敲鍵盤，不去思考需求、不去思考這樣做對不對、功能的必要性，那麼的確就跟擰螺絲的工人差不多。</p>\n<p>「我只是按照上級指示行動。」這句話聽起來多令人心寒。很多人為了生活跟賺錢放棄思考。捨棄思考的我們、努力（而盲目？）工作的我們，真的只是完成工作就好了嗎？在這樣下去豈不是就像被操控的小丑一樣？</p>\n<p>在這個百花齊放的時代，更要不斷提醒自己，我是個活生生的人，有血肉之軀，被打會痛、開心會笑，而不是他人的工具，被動地為他人所用，而是應該要有自己的價值。</p>\n<h3 id=\"人是會習慣的動物\"><a href=\"#人是會習慣的動物\" class=\"headerlink\" title=\"人是會習慣的動物\"></a>人是會習慣的動物</h3><p>工作久了會習慣、反覆練習而純熟。面對不熟悉的領域最原始的情緒就是恐懼跟害怕，如果因為這樣而不敢接觸世界的話，未來也一定會更膽怯的吧！</p>\n<h3 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h3><p>想說的很多，但最完整能表現的大概是這一句吧！</p>\n<blockquote>\n<p>「比起支配人，我更想要幫助人」卓別林 -《大獨裁者》</p>\n</blockquote>\n<p>至少在年輕的時候，做什麼事情機會成本都還小的可以時，趕快接觸世界。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>《摩登時代》原本是喜劇天王卓別林最著名的一部默劇電影。並且被認為是美國史上最偉大的電影之一。</p>\n<p>在討論社會學以及國家、個人、家庭之間的關係時，這部電影也常常會被拿出來討論。</p>\n<p>雖然是用戲謔而滑稽的手法詮釋的電影，卻將殘忍的事實完整的描述出來。</p>\n<p>從卓別林的眼中看見這個國家所隱含的殘酷現實，這就是我們所知的城市，儘管醜陋，卻是我們必須賴以維生的重要場所。這樣令人哭笑不得的劇情，是卓別林突出的功力。<img src=\"https://lh6.googleusercontent.com/gIDqGR6FPGQIX2h1DYM4Z7-Yr1geftISfKU6spUKKljcnAk8zyOThE0vbPmUXREVRRD5q6pOX6ugUpThHOf1X3tQTDRz14ZP75OR085AH2G6uNxEzHepY3sAK7pJhONplNnD8_4\" alt=\"getImage\"> </p>\n<h2 id=\"摩登時代\"><a href=\"#摩登時代\" class=\"headerlink\" title=\"摩登時代\"></a>摩登時代</h2><p>這本書是伊坂幸太郎在2010發表的長篇小說，配上花澤健吾的插畫，更富有戲謔感。</p>\n<p>伊坂幸太郎將這個故事從頭說起，主軸仍然是在討論這個國家、組織的運作，卻更有戲劇性，雖然也有不少湊篇幅而出現的情節，不過這部小說是連載之後才出版成小說的。</p>\n<p>這次連伊坂幸太郎都跳入這個故事中，「我的小說無法改變世界」、「小說啊！只能滲進讀者的體內，然後溶解」似乎隱約道出他的無奈。但不管如何，唯一能確定的是，他深厚的寫作功力以及架構，的確讓這篇故事相當精彩。</p>\n<p>「你有沒有勇氣？」是讀完小說後，最深刻的印象之一，男主角平凡的要命，膽小怕死又背著老婆外遇，這樣一位平凡人，就跟螺絲釘一樣。</p>\n<p>故事從一位系統工程師發現某個交友網站的程式內部隱藏著某種驚人的事實，愈是深入了解，愈發覺事情的不對勁，因為鍵入特定的關鍵字而受害，這位工程師開始深入調查，然後開始展開了一連串的故事。</p>\n<p>書中寫到了許多小故事，也是伊坂的特有風格之一。</p>\n<p>每本作品都會有個人物串場，而且不限於人而已，連湯瑪士小火車也曾出現在伊坂的筆中。不僅和劇情有呼應，也似乎在傳達著這個社會下所顯現出來的殘酷。</p>\n<h3 id=\"漢娜鄂蘭\"><a href=\"#漢娜鄂蘭\" class=\"headerlink\" title=\"漢娜鄂蘭\"></a>漢娜鄂蘭</h3><p><img src=\"https://lh5.googleusercontent.com/G_oMnIcF7R2uLH7YLqWT20RPt33rObkd7RBx1TrSzhj_ASrLbCRjio5TEQCmasUq1ZGIjRv4WyZUSyCTgoSXRrjwSfTFppvMwy83g0yETqgH2F7j84tDj07NTptCyiSO7NL3BD4\" alt=\"content_womany_ying_mu_kuai_zhao_2014_10_14__shang_wu_9_58_57_1413255831-28769-9510\"></p>\n<p>「邪惡的平庸」，強調平庸才是邪惡的源頭。</p>\n<p>事情拉回到二次世界大戰，猶太人被納粹黨大量屠殺的喋血事件。</p>\n<p>當時的劊子手「艾西曼」被批評為惡魔。後來發現，他並不是懷抱著對猶太人的憎恨而屠殺，<strong>而是依照著上級命令行事罷了。</strong></p>\n<p>然後呢？他就不需要懷有內疚感或是責任感，一切都只是遵照指示，不需要受到良心的譴責。</p>\n<p>每個人都只是機械性地完成工作，卻對整個工作流程一無所知。只是遵守著龐大的組織運作而已。然而這樣的思想並不只存在於當時。</p>\n<p>這是巧合嗎？</p>\n<p>還是一種帶有歷史性、諷刺的無奈輪迴？漢娜鄂蘭、伊坂幸太郎所要表達的觀念竟然不約而同地出現在現代。</p>\n<p>這是伊坂幸太郎的答案「如果因此做什麼都不會覺得不痛不癢的話，這個人就完了」。</p>\n<p>在這個資本過剩的年代，生活雖然不容易，卻已經比之前好太多了。更何況年輕時的機會成本出乎意料地低，真的要讓賺錢、找工作這件事變成放棄思考的藉口嗎？就算真的努力工作，存到不錯的存款，又能夠這樣認定這就是正確的嗎？</p>\n<p>邏輯上的確說得通，畢竟別人怎麼活是他們的事，能夠做自己喜歡、有回報、擅長的的事當然是個大幸運，但大部分的人都只能擇其一，並且這樣活下去。</p>\n<p>既然有實現夢想的人，那就有不得不放棄夢想的人在。</p>\n<p>但是，拿自己的職業做比喻好了。我是一個前端工程師，工作就是從實現設計師所產出的 mockup，儘管頭銜好聽了一點，但本質上也跟擰螺絲的卓别林沒什麼不同。</p>\n<p>任何重複性的工作，久了就會覺得枯燥，劇中的卓别林擰啊擰著，擰出病來，甚至把女生的胸部當作螺絲擰下去，結果被抓去監牢。</p>\n<p>從早打晚埋頭敲鍵盤，不去思考需求、不去思考這樣做對不對、功能的必要性，那麼的確就跟擰螺絲的工人差不多。</p>\n<p>「我只是按照上級指示行動。」這句話聽起來多令人心寒。很多人為了生活跟賺錢放棄思考。捨棄思考的我們、努力（而盲目？）工作的我們，真的只是完成工作就好了嗎？在這樣下去豈不是就像被操控的小丑一樣？</p>\n<p>在這個百花齊放的時代，更要不斷提醒自己，我是個活生生的人，有血肉之軀，被打會痛、開心會笑，而不是他人的工具，被動地為他人所用，而是應該要有自己的價值。</p>\n<h3 id=\"人是會習慣的動物\"><a href=\"#人是會習慣的動物\" class=\"headerlink\" title=\"人是會習慣的動物\"></a>人是會習慣的動物</h3><p>工作久了會習慣、反覆練習而純熟。面對不熟悉的領域最原始的情緒就是恐懼跟害怕，如果因為這樣而不敢接觸世界的話，未來也一定會更膽怯的吧！</p>\n<h3 id=\"總結\"><a href=\"#總結\" class=\"headerlink\" title=\"總結\"></a>總結</h3><p>想說的很多，但最完整能表現的大概是這一句吧！</p>\n<blockquote>\n<p>「比起支配人，我更想要幫助人」卓別林 -《大獨裁者》</p>\n</blockquote>\n<p>至少在年輕的時候，做什麼事情機會成本都還小的可以時，趕快接觸世界。</p>\n"},{"date":"2017-08-24T16:14:45.000Z","title":"淺談 ramda 中的幾個 API","_content":"\n### 前言\n\nramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 **functional programming** 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。\n\n比如說在 lodash 當中，API 常見的使用方式為：\n\n```javascript\n_.map([1,2,3], (n) => n * 2); // [2, 4, 6]\n```\n\n而在 ramda 當中則是：\n\n```javascript\nR.map((n) => n * 2, [1,2,3]); // [2, 4, 6]\n```\n\n或者你可以這樣寫：\n\n```javascript\nconst times2 = R.map((n) => n * 2); // return function\ntimes2([1,2,3]); // [2, 4, 6]\n```\n\n這種方式讓我們不用被資料綁死，可以提高復用性。\n\n如果你想要瞭解更多有關於 FP 的資訊，我推薦這篇文章：[函數式程序設計為什麼至關重要](https://www.byvoid.com/zhs/blog/why-functional-programming)\n\n### 直觀 functional programming\n\n- 一樣的 input 會輸出一樣的 output，不會受到外在狀態而改變結果\n- 沒有副作用\n\n###為什麼選擇 Ramda\n\nramda 的 API 相當多，大部分的 API 也都非常直觀，所以我們也不需要一一細談。不過 ramda 中有許多優秀的 API 或許可以幫助你減少開發上的複雜度，以下介紹幾個我覺得值得一看的 API\n\n#### propEq\n\n接受字串當作屬性，比對傳入的物件屬性值是否相等。\n\n```javascript\nconst obj = {\n  name: 'kalan'\n}\n\npropEq('name', 'kalan')(obj); // true\n\n// 等價於\nconst propEq = (name, value) => (obj) => {\n  return obj[name] === value;\n}\n```\n\n#### zipObj\n\n將傳入的參數壓縮為 `object`。\n\n```javascript\nR.zipObj(['id', 'title'], ['2', 'mytitle']);\n/*\n{\n  id: '2',\n  title: 'mytitle'\n}\n*/\n```\n\n\n\n#### ifElse\n\n在做 branch 的邏輯時相當好用，你可能會問，幹嘛不直接用 `if…else` 就好？ramda 當中的 API 都是回傳函數，這代表你可以用 compose 來組裝其他 API。\n\n#### compose\n\n將函式組合，執行的順序是由內到外。可以把它聯想為國高中很常見的函數題 `f(g(h(x)))`。所以要先計算 `h(x)` 的值，再依序下去。\n\n```javascript\nconst a = compose(\n  toInteger,\n  toCurrency('TWD'),\n  toUppercase\n)(\"125000\")\n```\n\n\n\n#### useWith\n\n接收一個函數跟函數陣列。將資料丟入函數陣列運算出來的結果，再丟入第一個函數當中。\n\n善用 `useWith` 可以幫助我們達到 point free 的效果。\n\n```javascript\nconst currencies = [\n  { name: 'TWD', shape: '$' },\n  { name: 'USD', shape: '$' },\n  { name: 'JPY', shape: '¥' },\n  { name: 'CAD', shape: '$' }\n];\n\n// without useWith\nconst getCurrency = (name, dic) => R.find(\n  R.propEq('name', name),\n  dic\n);\n\ngetCurrency('TWD', currencies); // $\n\n// with useWith\nconst getCurrency = R.useWith(\n  R.find,\n  [R.propEq('name'), R.identity]\n); // 將第一個參數傳入 R.propEq，第二個參數傳入 R.identity，運算後的結果分別丟給 R.find 的第一與第二個參數。\n\ngetCurrency('TWD', currencies);\n```\n\n使用 `useWith` 後消除了 `name` `dic` 這兩個參數。\n\n![fn1](/Users/kalan/Desktop/fn1.png)\n\n#### converge\n\n這個函數跟上面的 `useWith` 有點類似，不過 converge 只接收一個參數。下面這張圖可以很直觀地看出這兩者的差別。\n\n```javascript\nconst numbers = [1,2,5,8,10];\n\nconst getRange = R.converge(substract, [getFirst, getLast])(numbers); // return 9\n```\n\n\n\n\n\n![fn2](/Users/kalan/Desktop/fn2.png)\n\n#### identity\n\n有點太直觀了......，反而不知道怎麼解釋。直接用程式碼解釋比較快。\n\n```javascript\nconst identify = (arg) => arg\n```\n\n至於為什麼要這樣做呢？有時你可能需要組織你的函數達到 chainable，這時 `identity` 這個函數就能夠派上用場。\n\n#### tap\n\n傳入參數給指定的函數，然後回傳值。這在 debug 或是串接其他第三方的時候相當好用。\n\n```javascript\ntap(console.log)('hello world'); // 傳入 hello world 給 console.log，並且回傳 hello world 這個值\n```\n\n上面的例子可能看不出來 `tap` 的用處，我們用搭配 `compose` 一起使用\n\n```javascript\nconst uploadToMedium = article => API.postArticle(article);\nconst notifyAdmin    = article => API.notify(article, subscribers);\nconst log = article => Logger.log(article)\nconst preprocessArticle = article => article.toLowerCase()\n\nconst publishPostFlow = (article) => compose(\n  preprocessArticle,\n  R.tap(uploadToMedium),\n  R.tap(notifyAdmin),\n  R.tap(log)\n);\n\npublishPostFlow(article);\n```\n\n這樣一來我們可以很方便地串接其他服務，而不必再撰寫類似 `return article` 這樣的程式碼，一方面可以減少樣板代碼的麻煩，一方面可以減少出錯的機率。\n\n#### pluck\n\n跟字面上的意思差不多，將指定參數的 value 摘取下來變成新的值。在巢狀物件取值時很有幫助，例如：\n\n```javascript\nconst data = [\n{\n  id: '1',\n  content: 'content...'\n}, {\n  id: '2',\n  content: 'content...'\n},\n{\n  id: '3',\n  content: 'content...'\n}];\n\nconst getIds = R.pluck('id', data); // return ['1','2','3']\n```\n\n#### pick, pickBy, pickAll\n\n實務上我們可能不會用到物件當中所有的屬性，可能只要取出一些屬性來使用而已，這三個 `pick` 系列的函數可以很方便做到這件事：\n\n```javascript\nconst data = {\n  \"url\": \"https://api.github.com/repos/example/magazine/issues/1\",\n  \"repository_url\": \"https://api.github.com/repos/example/magazine\",\n  \"labels_url\": \"https://api.github.com/repos/example/magazine/issues/1/labels{/name}\",\n  \"comments_url\": \"https://api.github.com/repos/example/magazine/issues/1/comments\",\n  \"events_url\": \"https://api.github.com/repos/example/magazine/issues/1/events\",\n  \"html_url\": \"https://github.com/example/magazine/issues/1\",\n  \"id\": 252372781,\n  \"number\": 1,\n  \"title\": \"test issue\",\n}\n\nR.pick(['url', 'repository_url', 'id', 'name'], data); // 回傳這三個屬性的值，如果找不到此屬性直接忽略\n\nR.pickAll(['url', 'repository_url', 'name'], data) // 回傳值如果屬性存在，沒有的話會回傳 undefined\n\nconst isURL = (value, key) => key.indexOf('_url') !== -1\nR.pickBy(isURL, data); // 回傳任何屬性含有 _url\n```\n\n\n\n#### pathOr\n\n前端在呼叫後端 API 時，回傳的 JSON 有時會有相當深層的結構，如果用一般的方式 `a && a.b && a.b.c` 的方式取值，不僅程式碼相當雜亂，而且一旦結構過深，就要寫更多的判斷式。\n\n`pathOr` 接受陣列當作取值的順序，一旦取值回傳 `undefined` 就會回傳預設值。\n\n```javascript\nconst article = {\n  id: \"116208916\",\n  author: {\n    information: {\n      birthday: \"1994-11-11\",\n      name: 'kalan',\n    },\n    subscribers_count: 1239\n  },\n  content: {\n  \ttitle: 'title',\n\tbody: 'body'\n  }\n}\n```\n\n如果後端回傳的欄位不齊全，很有可能造成錯誤發生，這個時候就能透過 `pathOr` 來做處理。這樣一來如果生日沒有值的話就會用「未提供生日」這個字串取代。\n\n```javascript\nconst getBirthday = R.pathOr(['author', 'information', 'birthday'], '未提供生日');\ngetBirthday(article);\n```\n\n#### memoize\n\n在計算質數、階層等運算量比較大情景，為了不在每次求值時重新運算一次，可以用 memoize 函數快取已經運算過的結果。\n\n### 結論\n\nramda 是個相當好用函式庫，這篇文章提出一些在一般操作比較少見的 API，不過 ramda 本身的 [API](http://ramdajs.com/docs/) 相當豐富，搭配 `compose` 你可以自由組裝自己的 function，並且利用以上提到方法來簡化你的函數。\n\n如果你也喜歡這種程式碼風格，歡迎踏入 functional programming 的世界。\n\n\n\n\n\n\n\n","source":"_posts/ramda-introduction.md","raw":"---\ncategories: 前端\ndate: 2017-08-25 00:14:45\ntitle: 淺談 ramda 中的幾個 API\ntags:\n  - ramda\n  - javascript\n  - function programming\n---\n\n### 前言\n\nramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 **functional programming** 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。\n\n比如說在 lodash 當中，API 常見的使用方式為：\n\n```javascript\n_.map([1,2,3], (n) => n * 2); // [2, 4, 6]\n```\n\n而在 ramda 當中則是：\n\n```javascript\nR.map((n) => n * 2, [1,2,3]); // [2, 4, 6]\n```\n\n或者你可以這樣寫：\n\n```javascript\nconst times2 = R.map((n) => n * 2); // return function\ntimes2([1,2,3]); // [2, 4, 6]\n```\n\n這種方式讓我們不用被資料綁死，可以提高復用性。\n\n如果你想要瞭解更多有關於 FP 的資訊，我推薦這篇文章：[函數式程序設計為什麼至關重要](https://www.byvoid.com/zhs/blog/why-functional-programming)\n\n### 直觀 functional programming\n\n- 一樣的 input 會輸出一樣的 output，不會受到外在狀態而改變結果\n- 沒有副作用\n\n###為什麼選擇 Ramda\n\nramda 的 API 相當多，大部分的 API 也都非常直觀，所以我們也不需要一一細談。不過 ramda 中有許多優秀的 API 或許可以幫助你減少開發上的複雜度，以下介紹幾個我覺得值得一看的 API\n\n#### propEq\n\n接受字串當作屬性，比對傳入的物件屬性值是否相等。\n\n```javascript\nconst obj = {\n  name: 'kalan'\n}\n\npropEq('name', 'kalan')(obj); // true\n\n// 等價於\nconst propEq = (name, value) => (obj) => {\n  return obj[name] === value;\n}\n```\n\n#### zipObj\n\n將傳入的參數壓縮為 `object`。\n\n```javascript\nR.zipObj(['id', 'title'], ['2', 'mytitle']);\n/*\n{\n  id: '2',\n  title: 'mytitle'\n}\n*/\n```\n\n\n\n#### ifElse\n\n在做 branch 的邏輯時相當好用，你可能會問，幹嘛不直接用 `if…else` 就好？ramda 當中的 API 都是回傳函數，這代表你可以用 compose 來組裝其他 API。\n\n#### compose\n\n將函式組合，執行的順序是由內到外。可以把它聯想為國高中很常見的函數題 `f(g(h(x)))`。所以要先計算 `h(x)` 的值，再依序下去。\n\n```javascript\nconst a = compose(\n  toInteger,\n  toCurrency('TWD'),\n  toUppercase\n)(\"125000\")\n```\n\n\n\n#### useWith\n\n接收一個函數跟函數陣列。將資料丟入函數陣列運算出來的結果，再丟入第一個函數當中。\n\n善用 `useWith` 可以幫助我們達到 point free 的效果。\n\n```javascript\nconst currencies = [\n  { name: 'TWD', shape: '$' },\n  { name: 'USD', shape: '$' },\n  { name: 'JPY', shape: '¥' },\n  { name: 'CAD', shape: '$' }\n];\n\n// without useWith\nconst getCurrency = (name, dic) => R.find(\n  R.propEq('name', name),\n  dic\n);\n\ngetCurrency('TWD', currencies); // $\n\n// with useWith\nconst getCurrency = R.useWith(\n  R.find,\n  [R.propEq('name'), R.identity]\n); // 將第一個參數傳入 R.propEq，第二個參數傳入 R.identity，運算後的結果分別丟給 R.find 的第一與第二個參數。\n\ngetCurrency('TWD', currencies);\n```\n\n使用 `useWith` 後消除了 `name` `dic` 這兩個參數。\n\n![fn1](/Users/kalan/Desktop/fn1.png)\n\n#### converge\n\n這個函數跟上面的 `useWith` 有點類似，不過 converge 只接收一個參數。下面這張圖可以很直觀地看出這兩者的差別。\n\n```javascript\nconst numbers = [1,2,5,8,10];\n\nconst getRange = R.converge(substract, [getFirst, getLast])(numbers); // return 9\n```\n\n\n\n\n\n![fn2](/Users/kalan/Desktop/fn2.png)\n\n#### identity\n\n有點太直觀了......，反而不知道怎麼解釋。直接用程式碼解釋比較快。\n\n```javascript\nconst identify = (arg) => arg\n```\n\n至於為什麼要這樣做呢？有時你可能需要組織你的函數達到 chainable，這時 `identity` 這個函數就能夠派上用場。\n\n#### tap\n\n傳入參數給指定的函數，然後回傳值。這在 debug 或是串接其他第三方的時候相當好用。\n\n```javascript\ntap(console.log)('hello world'); // 傳入 hello world 給 console.log，並且回傳 hello world 這個值\n```\n\n上面的例子可能看不出來 `tap` 的用處，我們用搭配 `compose` 一起使用\n\n```javascript\nconst uploadToMedium = article => API.postArticle(article);\nconst notifyAdmin    = article => API.notify(article, subscribers);\nconst log = article => Logger.log(article)\nconst preprocessArticle = article => article.toLowerCase()\n\nconst publishPostFlow = (article) => compose(\n  preprocessArticle,\n  R.tap(uploadToMedium),\n  R.tap(notifyAdmin),\n  R.tap(log)\n);\n\npublishPostFlow(article);\n```\n\n這樣一來我們可以很方便地串接其他服務，而不必再撰寫類似 `return article` 這樣的程式碼，一方面可以減少樣板代碼的麻煩，一方面可以減少出錯的機率。\n\n#### pluck\n\n跟字面上的意思差不多，將指定參數的 value 摘取下來變成新的值。在巢狀物件取值時很有幫助，例如：\n\n```javascript\nconst data = [\n{\n  id: '1',\n  content: 'content...'\n}, {\n  id: '2',\n  content: 'content...'\n},\n{\n  id: '3',\n  content: 'content...'\n}];\n\nconst getIds = R.pluck('id', data); // return ['1','2','3']\n```\n\n#### pick, pickBy, pickAll\n\n實務上我們可能不會用到物件當中所有的屬性，可能只要取出一些屬性來使用而已，這三個 `pick` 系列的函數可以很方便做到這件事：\n\n```javascript\nconst data = {\n  \"url\": \"https://api.github.com/repos/example/magazine/issues/1\",\n  \"repository_url\": \"https://api.github.com/repos/example/magazine\",\n  \"labels_url\": \"https://api.github.com/repos/example/magazine/issues/1/labels{/name}\",\n  \"comments_url\": \"https://api.github.com/repos/example/magazine/issues/1/comments\",\n  \"events_url\": \"https://api.github.com/repos/example/magazine/issues/1/events\",\n  \"html_url\": \"https://github.com/example/magazine/issues/1\",\n  \"id\": 252372781,\n  \"number\": 1,\n  \"title\": \"test issue\",\n}\n\nR.pick(['url', 'repository_url', 'id', 'name'], data); // 回傳這三個屬性的值，如果找不到此屬性直接忽略\n\nR.pickAll(['url', 'repository_url', 'name'], data) // 回傳值如果屬性存在，沒有的話會回傳 undefined\n\nconst isURL = (value, key) => key.indexOf('_url') !== -1\nR.pickBy(isURL, data); // 回傳任何屬性含有 _url\n```\n\n\n\n#### pathOr\n\n前端在呼叫後端 API 時，回傳的 JSON 有時會有相當深層的結構，如果用一般的方式 `a && a.b && a.b.c` 的方式取值，不僅程式碼相當雜亂，而且一旦結構過深，就要寫更多的判斷式。\n\n`pathOr` 接受陣列當作取值的順序，一旦取值回傳 `undefined` 就會回傳預設值。\n\n```javascript\nconst article = {\n  id: \"116208916\",\n  author: {\n    information: {\n      birthday: \"1994-11-11\",\n      name: 'kalan',\n    },\n    subscribers_count: 1239\n  },\n  content: {\n  \ttitle: 'title',\n\tbody: 'body'\n  }\n}\n```\n\n如果後端回傳的欄位不齊全，很有可能造成錯誤發生，這個時候就能透過 `pathOr` 來做處理。這樣一來如果生日沒有值的話就會用「未提供生日」這個字串取代。\n\n```javascript\nconst getBirthday = R.pathOr(['author', 'information', 'birthday'], '未提供生日');\ngetBirthday(article);\n```\n\n#### memoize\n\n在計算質數、階層等運算量比較大情景，為了不在每次求值時重新運算一次，可以用 memoize 函數快取已經運算過的結果。\n\n### 結論\n\nramda 是個相當好用函式庫，這篇文章提出一些在一般操作比較少見的 API，不過 ramda 本身的 [API](http://ramdajs.com/docs/) 相當豐富，搭配 `compose` 你可以自由組裝自己的 function，並且利用以上提到方法來簡化你的函數。\n\n如果你也喜歡這種程式碼風格，歡迎踏入 functional programming 的世界。\n\n\n\n\n\n\n\n","slug":"ramda-introduction","published":1,"updated":"2017-08-24T16:15:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitro0022iw5tls5yvtfn","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 <strong>functional programming</strong> 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。</p>\n<p>比如說在 lodash 當中，API 常見的使用方式為：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">_.map([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>], (n) =&gt; n * <span class=\"number\">2</span>); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>而在 ramda 當中則是：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">R.map(<span class=\"function\">(<span class=\"params\">n</span>) =&gt;</span> n * <span class=\"number\">2</span>, [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>或者你可以這樣寫：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> times2 = R.map(<span class=\"function\">(<span class=\"params\">n</span>) =&gt;</span> n * <span class=\"number\">2</span>); <span class=\"comment\">// return function</span></div><div class=\"line\">times2([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>這種方式讓我們不用被資料綁死，可以提高復用性。</p>\n<p>如果你想要瞭解更多有關於 FP 的資訊，我推薦這篇文章：<a href=\"https://www.byvoid.com/zhs/blog/why-functional-programming\" target=\"_blank\" rel=\"external\">函數式程序設計為什麼至關重要</a></p>\n<h3 id=\"直觀-functional-programming\"><a href=\"#直觀-functional-programming\" class=\"headerlink\" title=\"直觀 functional programming\"></a>直觀 functional programming</h3><ul>\n<li>一樣的 input 會輸出一樣的 output，不會受到外在狀態而改變結果</li>\n<li>沒有副作用</li>\n</ul>\n<p>###為什麼選擇 Ramda</p>\n<p>ramda 的 API 相當多，大部分的 API 也都非常直觀，所以我們也不需要一一細談。不過 ramda 中有許多優秀的 API 或許可以幫助你減少開發上的複雜度，以下介紹幾個我覺得值得一看的 API</p>\n<h4 id=\"propEq\"><a href=\"#propEq\" class=\"headerlink\" title=\"propEq\"></a>propEq</h4><p>接受字串當作屬性，比對傳入的物件屬性值是否相等。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'kalan'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">propEq(<span class=\"string\">'name'</span>, <span class=\"string\">'kalan'</span>)(obj); <span class=\"comment\">// true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 等價於</span></div><div class=\"line\"><span class=\"keyword\">const</span> propEq = <span class=\"function\">(<span class=\"params\">name, value</span>) =&gt;</span> (obj) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> obj[name] === value;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"zipObj\"><a href=\"#zipObj\" class=\"headerlink\" title=\"zipObj\"></a>zipObj</h4><p>將傳入的參數壓縮為 <code>object</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">R.zipObj([<span class=\"string\">'id'</span>, <span class=\"string\">'title'</span>], [<span class=\"string\">'2'</span>, <span class=\"string\">'mytitle'</span>]);</div><div class=\"line\"><span class=\"comment\">/*</span></div><div class=\"line\">&#123;</div><div class=\"line\">  id: '2',</div><div class=\"line\">  title: 'mytitle'</div><div class=\"line\">&#125;</div><div class=\"line\">*/</div></pre></td></tr></table></figure>\n<h4 id=\"ifElse\"><a href=\"#ifElse\" class=\"headerlink\" title=\"ifElse\"></a>ifElse</h4><p>在做 branch 的邏輯時相當好用，你可能會問，幹嘛不直接用 <code>if…else</code> 就好？ramda 當中的 API 都是回傳函數，這代表你可以用 compose 來組裝其他 API。</p>\n<h4 id=\"compose\"><a href=\"#compose\" class=\"headerlink\" title=\"compose\"></a>compose</h4><p>將函式組合，執行的順序是由內到外。可以把它聯想為國高中很常見的函數題 <code>f(g(h(x)))</code>。所以要先計算 <code>h(x)</code> 的值，再依序下去。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> a = compose(</div><div class=\"line\">  toInteger,</div><div class=\"line\">  toCurrency(<span class=\"string\">'TWD'</span>),</div><div class=\"line\">  toUppercase</div><div class=\"line\">)(<span class=\"string\">\"125000\"</span>)</div></pre></td></tr></table></figure>\n<h4 id=\"useWith\"><a href=\"#useWith\" class=\"headerlink\" title=\"useWith\"></a>useWith</h4><p>接收一個函數跟函數陣列。將資料丟入函數陣列運算出來的結果，再丟入第一個函數當中。</p>\n<p>善用 <code>useWith</code> 可以幫助我們達到 point free 的效果。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> currencies = [</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'TWD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'USD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'JPY'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'¥'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'CAD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// without useWith</span></div><div class=\"line\"><span class=\"keyword\">const</span> getCurrency = <span class=\"function\">(<span class=\"params\">name, dic</span>) =&gt;</span> R.find(</div><div class=\"line\">  R.propEq(<span class=\"string\">'name'</span>, name),</div><div class=\"line\">  dic</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">getCurrency(<span class=\"string\">'TWD'</span>, currencies); <span class=\"comment\">// $</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// with useWith</span></div><div class=\"line\"><span class=\"keyword\">const</span> getCurrency = R.useWith(</div><div class=\"line\">  R.find,</div><div class=\"line\">  [R.propEq(<span class=\"string\">'name'</span>), R.identity]</div><div class=\"line\">); <span class=\"comment\">// 將第一個參數傳入 R.propEq，第二個參數傳入 R.identity，運算後的結果分別丟給 R.find 的第一與第二個參數。</span></div><div class=\"line\"></div><div class=\"line\">getCurrency(<span class=\"string\">'TWD'</span>, currencies);</div></pre></td></tr></table></figure>\n<p>使用 <code>useWith</code> 後消除了 <code>name</code> <code>dic</code> 這兩個參數。</p>\n<p><img src=\"/Users/kalan/Desktop/fn1.png\" alt=\"fn1\"></p>\n<h4 id=\"converge\"><a href=\"#converge\" class=\"headerlink\" title=\"converge\"></a>converge</h4><p>這個函數跟上面的 <code>useWith</code> 有點類似，不過 converge 只接收一個參數。下面這張圖可以很直觀地看出這兩者的差別。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> numbers = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>,<span class=\"number\">10</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> getRange = R.converge(substract, [getFirst, getLast])(numbers); <span class=\"comment\">// return 9</span></div></pre></td></tr></table></figure>\n<p><img src=\"/Users/kalan/Desktop/fn2.png\" alt=\"fn2\"></p>\n<h4 id=\"identity\"><a href=\"#identity\" class=\"headerlink\" title=\"identity\"></a>identity</h4><p>有點太直觀了……，反而不知道怎麼解釋。直接用程式碼解釋比較快。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> identify = <span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> arg</div></pre></td></tr></table></figure>\n<p>至於為什麼要這樣做呢？有時你可能需要組織你的函數達到 chainable，這時 <code>identity</code> 這個函數就能夠派上用場。</p>\n<h4 id=\"tap\"><a href=\"#tap\" class=\"headerlink\" title=\"tap\"></a>tap</h4><p>傳入參數給指定的函數，然後回傳值。這在 debug 或是串接其他第三方的時候相當好用。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">tap(<span class=\"built_in\">console</span>.log)(<span class=\"string\">'hello world'</span>); <span class=\"comment\">// 傳入 hello world 給 console.log，並且回傳 hello world 這個值</span></div></pre></td></tr></table></figure>\n<p>上面的例子可能看不出來 <code>tap</code> 的用處，我們用搭配 <code>compose</code> 一起使用</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> uploadToMedium = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> API.postArticle(article);</div><div class=\"line\"><span class=\"keyword\">const</span> notifyAdmin    = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> API.notify(article, subscribers);</div><div class=\"line\"><span class=\"keyword\">const</span> log = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> Logger.log(article)</div><div class=\"line\"><span class=\"keyword\">const</span> preprocessArticle = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> article.toLowerCase()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> publishPostFlow = <span class=\"function\">(<span class=\"params\">article</span>) =&gt;</span> compose(</div><div class=\"line\">  preprocessArticle,</div><div class=\"line\">  R.tap(uploadToMedium),</div><div class=\"line\">  R.tap(notifyAdmin),</div><div class=\"line\">  R.tap(log)</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">publishPostFlow(article);</div></pre></td></tr></table></figure>\n<p>這樣一來我們可以很方便地串接其他服務，而不必再撰寫類似 <code>return article</code> 這樣的程式碼，一方面可以減少樣板代碼的麻煩，一方面可以減少出錯的機率。</p>\n<h4 id=\"pluck\"><a href=\"#pluck\" class=\"headerlink\" title=\"pluck\"></a>pluck</h4><p>跟字面上的意思差不多，將指定參數的 value 摘取下來變成新的值。在巢狀物件取值時很有幫助，例如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> data = [</div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'1'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'2'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;,</div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'3'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> getIds = R.pluck(<span class=\"string\">'id'</span>, data); <span class=\"comment\">// return ['1','2','3']</span></div></pre></td></tr></table></figure>\n<h4 id=\"pick-pickBy-pickAll\"><a href=\"#pick-pickBy-pickAll\" class=\"headerlink\" title=\"pick, pickBy, pickAll\"></a>pick, pickBy, pickAll</h4><p>實務上我們可能不會用到物件當中所有的屬性，可能只要取出一些屬性來使用而已，這三個 <code>pick</code> 系列的函數可以很方便做到這件事：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> data = &#123;</div><div class=\"line\">  <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"repository_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine\"</span>,</div><div class=\"line\">  <span class=\"string\">\"labels_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/labels&#123;/name&#125;\"</span>,</div><div class=\"line\">  <span class=\"string\">\"comments_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/comments\"</span>,</div><div class=\"line\">  <span class=\"string\">\"events_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/events\"</span>,</div><div class=\"line\">  <span class=\"string\">\"html_url\"</span>: <span class=\"string\">\"https://github.com/example/magazine/issues/1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"id\"</span>: <span class=\"number\">252372781</span>,</div><div class=\"line\">  <span class=\"string\">\"number\"</span>: <span class=\"number\">1</span>,</div><div class=\"line\">  <span class=\"string\">\"title\"</span>: <span class=\"string\">\"test issue\"</span>,</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">R.pick([<span class=\"string\">'url'</span>, <span class=\"string\">'repository_url'</span>, <span class=\"string\">'id'</span>, <span class=\"string\">'name'</span>], data); <span class=\"comment\">// 回傳這三個屬性的值，如果找不到此屬性直接忽略</span></div><div class=\"line\"></div><div class=\"line\">R.pickAll([<span class=\"string\">'url'</span>, <span class=\"string\">'repository_url'</span>, <span class=\"string\">'name'</span>], data) <span class=\"comment\">// 回傳值如果屬性存在，沒有的話會回傳 undefined</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> isURL = <span class=\"function\">(<span class=\"params\">value, key</span>) =&gt;</span> key.indexOf(<span class=\"string\">'_url'</span>) !== <span class=\"number\">-1</span></div><div class=\"line\">R.pickBy(isURL, data); <span class=\"comment\">// 回傳任何屬性含有 _url</span></div></pre></td></tr></table></figure>\n<h4 id=\"pathOr\"><a href=\"#pathOr\" class=\"headerlink\" title=\"pathOr\"></a>pathOr</h4><p>前端在呼叫後端 API 時，回傳的 JSON 有時會有相當深層的結構，如果用一般的方式 <code>a &amp;&amp; a.b &amp;&amp; a.b.c</code> 的方式取值，不僅程式碼相當雜亂，而且一旦結構過深，就要寫更多的判斷式。</p>\n<p><code>pathOr</code> 接受陣列當作取值的順序，一旦取值回傳 <code>undefined</code> 就會回傳預設值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> article = &#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">\"116208916\"</span>,</div><div class=\"line\">  <span class=\"attr\">author</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">information</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">birthday</span>: <span class=\"string\">\"1994-11-11\"</span>,</div><div class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">'kalan'</span>,</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">subscribers_count</span>: <span class=\"number\">1239</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">content</span>: &#123;</div><div class=\"line\">  \t<span class=\"attr\">title</span>: <span class=\"string\">'title'</span>,</div><div class=\"line\">\t<span class=\"attr\">body</span>: <span class=\"string\">'body'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果後端回傳的欄位不齊全，很有可能造成錯誤發生，這個時候就能透過 <code>pathOr</code> 來做處理。這樣一來如果生日沒有值的話就會用「未提供生日」這個字串取代。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> getBirthday = R.pathOr([<span class=\"string\">'author'</span>, <span class=\"string\">'information'</span>, <span class=\"string\">'birthday'</span>], <span class=\"string\">'未提供生日'</span>);</div><div class=\"line\">getBirthday(article);</div></pre></td></tr></table></figure>\n<h4 id=\"memoize\"><a href=\"#memoize\" class=\"headerlink\" title=\"memoize\"></a>memoize</h4><p>在計算質數、階層等運算量比較大情景，為了不在每次求值時重新運算一次，可以用 memoize 函數快取已經運算過的結果。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>ramda 是個相當好用函式庫，這篇文章提出一些在一般操作比較少見的 API，不過 ramda 本身的 <a href=\"http://ramdajs.com/docs/\" target=\"_blank\" rel=\"external\">API</a> 相當豐富，搭配 <code>compose</code> 你可以自由組裝自己的 function，並且利用以上提到方法來簡化你的函數。</p>\n<p>如果你也喜歡這種程式碼風格，歡迎踏入 functional programming 的世界。</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>ramda 是個相當好用的函式庫，如果聽過 lodash 或是 underscore 的話，可以將 ramda 想成 <strong>functional programming</strong> 的 lodash，他們的 API 有許多相似性，差別在於 ramda 本身有 FP 的功能，任何的 API 只要你沒有傳入參數，ramda 就會自動幫你做 curry，這提供了相當大的彈性。</p>\n<p>比如說在 lodash 當中，API 常見的使用方式為：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">_.map([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>], (n) =&gt; n * <span class=\"number\">2</span>); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>而在 ramda 當中則是：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">R.map(<span class=\"function\">(<span class=\"params\">n</span>) =&gt;</span> n * <span class=\"number\">2</span>, [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>或者你可以這樣寫：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> times2 = R.map(<span class=\"function\">(<span class=\"params\">n</span>) =&gt;</span> n * <span class=\"number\">2</span>); <span class=\"comment\">// return function</span></div><div class=\"line\">times2([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]); <span class=\"comment\">// [2, 4, 6]</span></div></pre></td></tr></table></figure>\n<p>這種方式讓我們不用被資料綁死，可以提高復用性。</p>\n<p>如果你想要瞭解更多有關於 FP 的資訊，我推薦這篇文章：<a href=\"https://www.byvoid.com/zhs/blog/why-functional-programming\" target=\"_blank\" rel=\"external\">函數式程序設計為什麼至關重要</a></p>\n<h3 id=\"直觀-functional-programming\"><a href=\"#直觀-functional-programming\" class=\"headerlink\" title=\"直觀 functional programming\"></a>直觀 functional programming</h3><ul>\n<li>一樣的 input 會輸出一樣的 output，不會受到外在狀態而改變結果</li>\n<li>沒有副作用</li>\n</ul>\n<p>###為什麼選擇 Ramda</p>\n<p>ramda 的 API 相當多，大部分的 API 也都非常直觀，所以我們也不需要一一細談。不過 ramda 中有許多優秀的 API 或許可以幫助你減少開發上的複雜度，以下介紹幾個我覺得值得一看的 API</p>\n<h4 id=\"propEq\"><a href=\"#propEq\" class=\"headerlink\" title=\"propEq\"></a>propEq</h4><p>接受字串當作屬性，比對傳入的物件屬性值是否相等。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> obj = &#123;</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'kalan'</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">propEq(<span class=\"string\">'name'</span>, <span class=\"string\">'kalan'</span>)(obj); <span class=\"comment\">// true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 等價於</span></div><div class=\"line\"><span class=\"keyword\">const</span> propEq = <span class=\"function\">(<span class=\"params\">name, value</span>) =&gt;</span> (obj) =&gt; &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> obj[name] === value;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"zipObj\"><a href=\"#zipObj\" class=\"headerlink\" title=\"zipObj\"></a>zipObj</h4><p>將傳入的參數壓縮為 <code>object</code>。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">R.zipObj([<span class=\"string\">'id'</span>, <span class=\"string\">'title'</span>], [<span class=\"string\">'2'</span>, <span class=\"string\">'mytitle'</span>]);</div><div class=\"line\"><span class=\"comment\">/*</span></div><div class=\"line\">&#123;</div><div class=\"line\">  id: '2',</div><div class=\"line\">  title: 'mytitle'</div><div class=\"line\">&#125;</div><div class=\"line\">*/</div></pre></td></tr></table></figure>\n<h4 id=\"ifElse\"><a href=\"#ifElse\" class=\"headerlink\" title=\"ifElse\"></a>ifElse</h4><p>在做 branch 的邏輯時相當好用，你可能會問，幹嘛不直接用 <code>if…else</code> 就好？ramda 當中的 API 都是回傳函數，這代表你可以用 compose 來組裝其他 API。</p>\n<h4 id=\"compose\"><a href=\"#compose\" class=\"headerlink\" title=\"compose\"></a>compose</h4><p>將函式組合，執行的順序是由內到外。可以把它聯想為國高中很常見的函數題 <code>f(g(h(x)))</code>。所以要先計算 <code>h(x)</code> 的值，再依序下去。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> a = compose(</div><div class=\"line\">  toInteger,</div><div class=\"line\">  toCurrency(<span class=\"string\">'TWD'</span>),</div><div class=\"line\">  toUppercase</div><div class=\"line\">)(<span class=\"string\">\"125000\"</span>)</div></pre></td></tr></table></figure>\n<h4 id=\"useWith\"><a href=\"#useWith\" class=\"headerlink\" title=\"useWith\"></a>useWith</h4><p>接收一個函數跟函數陣列。將資料丟入函數陣列運算出來的結果，再丟入第一個函數當中。</p>\n<p>善用 <code>useWith</code> 可以幫助我們達到 point free 的效果。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> currencies = [</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'TWD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'USD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'JPY'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'¥'</span> &#125;,</div><div class=\"line\">  &#123; <span class=\"attr\">name</span>: <span class=\"string\">'CAD'</span>, <span class=\"attr\">shape</span>: <span class=\"string\">'$'</span> &#125;</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// without useWith</span></div><div class=\"line\"><span class=\"keyword\">const</span> getCurrency = <span class=\"function\">(<span class=\"params\">name, dic</span>) =&gt;</span> R.find(</div><div class=\"line\">  R.propEq(<span class=\"string\">'name'</span>, name),</div><div class=\"line\">  dic</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">getCurrency(<span class=\"string\">'TWD'</span>, currencies); <span class=\"comment\">// $</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// with useWith</span></div><div class=\"line\"><span class=\"keyword\">const</span> getCurrency = R.useWith(</div><div class=\"line\">  R.find,</div><div class=\"line\">  [R.propEq(<span class=\"string\">'name'</span>), R.identity]</div><div class=\"line\">); <span class=\"comment\">// 將第一個參數傳入 R.propEq，第二個參數傳入 R.identity，運算後的結果分別丟給 R.find 的第一與第二個參數。</span></div><div class=\"line\"></div><div class=\"line\">getCurrency(<span class=\"string\">'TWD'</span>, currencies);</div></pre></td></tr></table></figure>\n<p>使用 <code>useWith</code> 後消除了 <code>name</code> <code>dic</code> 這兩個參數。</p>\n<p><img src=\"/Users/kalan/Desktop/fn1.png\" alt=\"fn1\"></p>\n<h4 id=\"converge\"><a href=\"#converge\" class=\"headerlink\" title=\"converge\"></a>converge</h4><p>這個函數跟上面的 <code>useWith</code> 有點類似，不過 converge 只接收一個參數。下面這張圖可以很直觀地看出這兩者的差別。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> numbers = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>,<span class=\"number\">10</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> getRange = R.converge(substract, [getFirst, getLast])(numbers); <span class=\"comment\">// return 9</span></div></pre></td></tr></table></figure>\n<p><img src=\"/Users/kalan/Desktop/fn2.png\" alt=\"fn2\"></p>\n<h4 id=\"identity\"><a href=\"#identity\" class=\"headerlink\" title=\"identity\"></a>identity</h4><p>有點太直觀了……，反而不知道怎麼解釋。直接用程式碼解釋比較快。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> identify = <span class=\"function\">(<span class=\"params\">arg</span>) =&gt;</span> arg</div></pre></td></tr></table></figure>\n<p>至於為什麼要這樣做呢？有時你可能需要組織你的函數達到 chainable，這時 <code>identity</code> 這個函數就能夠派上用場。</p>\n<h4 id=\"tap\"><a href=\"#tap\" class=\"headerlink\" title=\"tap\"></a>tap</h4><p>傳入參數給指定的函數，然後回傳值。這在 debug 或是串接其他第三方的時候相當好用。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">tap(<span class=\"built_in\">console</span>.log)(<span class=\"string\">'hello world'</span>); <span class=\"comment\">// 傳入 hello world 給 console.log，並且回傳 hello world 這個值</span></div></pre></td></tr></table></figure>\n<p>上面的例子可能看不出來 <code>tap</code> 的用處，我們用搭配 <code>compose</code> 一起使用</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> uploadToMedium = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> API.postArticle(article);</div><div class=\"line\"><span class=\"keyword\">const</span> notifyAdmin    = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> API.notify(article, subscribers);</div><div class=\"line\"><span class=\"keyword\">const</span> log = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> Logger.log(article)</div><div class=\"line\"><span class=\"keyword\">const</span> preprocessArticle = <span class=\"function\"><span class=\"params\">article</span> =&gt;</span> article.toLowerCase()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> publishPostFlow = <span class=\"function\">(<span class=\"params\">article</span>) =&gt;</span> compose(</div><div class=\"line\">  preprocessArticle,</div><div class=\"line\">  R.tap(uploadToMedium),</div><div class=\"line\">  R.tap(notifyAdmin),</div><div class=\"line\">  R.tap(log)</div><div class=\"line\">);</div><div class=\"line\"></div><div class=\"line\">publishPostFlow(article);</div></pre></td></tr></table></figure>\n<p>這樣一來我們可以很方便地串接其他服務，而不必再撰寫類似 <code>return article</code> 這樣的程式碼，一方面可以減少樣板代碼的麻煩，一方面可以減少出錯的機率。</p>\n<h4 id=\"pluck\"><a href=\"#pluck\" class=\"headerlink\" title=\"pluck\"></a>pluck</h4><p>跟字面上的意思差不多，將指定參數的 value 摘取下來變成新的值。在巢狀物件取值時很有幫助，例如：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> data = [</div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'1'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;, &#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'2'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;,</div><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">'3'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'content...'</span></div><div class=\"line\">&#125;];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> getIds = R.pluck(<span class=\"string\">'id'</span>, data); <span class=\"comment\">// return ['1','2','3']</span></div></pre></td></tr></table></figure>\n<h4 id=\"pick-pickBy-pickAll\"><a href=\"#pick-pickBy-pickAll\" class=\"headerlink\" title=\"pick, pickBy, pickAll\"></a>pick, pickBy, pickAll</h4><p>實務上我們可能不會用到物件當中所有的屬性，可能只要取出一些屬性來使用而已，這三個 <code>pick</code> 系列的函數可以很方便做到這件事：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> data = &#123;</div><div class=\"line\">  <span class=\"string\">\"url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"repository_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine\"</span>,</div><div class=\"line\">  <span class=\"string\">\"labels_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/labels&#123;/name&#125;\"</span>,</div><div class=\"line\">  <span class=\"string\">\"comments_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/comments\"</span>,</div><div class=\"line\">  <span class=\"string\">\"events_url\"</span>: <span class=\"string\">\"https://api.github.com/repos/example/magazine/issues/1/events\"</span>,</div><div class=\"line\">  <span class=\"string\">\"html_url\"</span>: <span class=\"string\">\"https://github.com/example/magazine/issues/1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"id\"</span>: <span class=\"number\">252372781</span>,</div><div class=\"line\">  <span class=\"string\">\"number\"</span>: <span class=\"number\">1</span>,</div><div class=\"line\">  <span class=\"string\">\"title\"</span>: <span class=\"string\">\"test issue\"</span>,</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">R.pick([<span class=\"string\">'url'</span>, <span class=\"string\">'repository_url'</span>, <span class=\"string\">'id'</span>, <span class=\"string\">'name'</span>], data); <span class=\"comment\">// 回傳這三個屬性的值，如果找不到此屬性直接忽略</span></div><div class=\"line\"></div><div class=\"line\">R.pickAll([<span class=\"string\">'url'</span>, <span class=\"string\">'repository_url'</span>, <span class=\"string\">'name'</span>], data) <span class=\"comment\">// 回傳值如果屬性存在，沒有的話會回傳 undefined</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> isURL = <span class=\"function\">(<span class=\"params\">value, key</span>) =&gt;</span> key.indexOf(<span class=\"string\">'_url'</span>) !== <span class=\"number\">-1</span></div><div class=\"line\">R.pickBy(isURL, data); <span class=\"comment\">// 回傳任何屬性含有 _url</span></div></pre></td></tr></table></figure>\n<h4 id=\"pathOr\"><a href=\"#pathOr\" class=\"headerlink\" title=\"pathOr\"></a>pathOr</h4><p>前端在呼叫後端 API 時，回傳的 JSON 有時會有相當深層的結構，如果用一般的方式 <code>a &amp;&amp; a.b &amp;&amp; a.b.c</code> 的方式取值，不僅程式碼相當雜亂，而且一旦結構過深，就要寫更多的判斷式。</p>\n<p><code>pathOr</code> 接受陣列當作取值的順序，一旦取值回傳 <code>undefined</code> 就會回傳預設值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> article = &#123;</div><div class=\"line\">  <span class=\"attr\">id</span>: <span class=\"string\">\"116208916\"</span>,</div><div class=\"line\">  <span class=\"attr\">author</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">information</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">birthday</span>: <span class=\"string\">\"1994-11-11\"</span>,</div><div class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">'kalan'</span>,</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">subscribers_count</span>: <span class=\"number\">1239</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">content</span>: &#123;</div><div class=\"line\">  \t<span class=\"attr\">title</span>: <span class=\"string\">'title'</span>,</div><div class=\"line\">\t<span class=\"attr\">body</span>: <span class=\"string\">'body'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>如果後端回傳的欄位不齊全，很有可能造成錯誤發生，這個時候就能透過 <code>pathOr</code> 來做處理。這樣一來如果生日沒有值的話就會用「未提供生日」這個字串取代。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> getBirthday = R.pathOr([<span class=\"string\">'author'</span>, <span class=\"string\">'information'</span>, <span class=\"string\">'birthday'</span>], <span class=\"string\">'未提供生日'</span>);</div><div class=\"line\">getBirthday(article);</div></pre></td></tr></table></figure>\n<h4 id=\"memoize\"><a href=\"#memoize\" class=\"headerlink\" title=\"memoize\"></a>memoize</h4><p>在計算質數、階層等運算量比較大情景，為了不在每次求值時重新運算一次，可以用 memoize 函數快取已經運算過的結果。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>ramda 是個相當好用函式庫，這篇文章提出一些在一般操作比較少見的 API，不過 ramda 本身的 <a href=\"http://ramdajs.com/docs/\" target=\"_blank\" rel=\"external\">API</a> 相當豐富，搭配 <code>compose</code> 你可以自由組裝自己的 function，並且利用以上提到方法來簡化你的函數。</p>\n<p>如果你也喜歡這種程式碼風格，歡迎踏入 functional programming 的世界。</p>\n"},{"title":"React16 重點整理","date":"2017-10-01T16:00:00.000Z","_content":"\n\nreact 終於正式發佈 v16 了，其實[官方部落格](https://reactjs.org/blog/2017/09/26/react-v16.0.html)的介紹已經相當完整（而且賞心悅目）。本篇文章作為筆記與統整，精簡了部分的細節。\n\n### 1. componentDidPatch(error, info)\n\nreact16 最亮眼的部分，加入 ErrorBoundary 的功能，確保在 lifecycle 時的錯誤不會影響到整個 component。之前如果在 render 時發生錯誤，會導致整個 component 不見。\n\n**只有在 Error 在 lifecycle method 被呼叫時才會傳入 componentDidPatch**，所以在 constructor 之類的地方 throw Error 是不會被 componentDidCatch 給 catch 的。\n\n`componentDidCatch` 傳入兩個參數 error, info。可以在 componentDidCatch 內處理錯誤，fallback UI 或是呼叫第三方服務紀錄錯誤等等。\n\n```jsx\nclass Post extends Component {\n  constructor() {\n    throw new Error('oops'); // 不會傳入 componentDidCatch\n  }\n  \n  componentWillMount() {\n    this.setState(state => {\n      throw new Error('oops');\n      return {};\n    })\n  }\n}\nclass App extends Component {\n  constructor() {\n    super(props);\n    this.state = {\n      post: { content: '' }\n    }\n  }\n  \n  updatePost = () => {\n    this.setState(state => ({ ...state, post: null }));\n  }\n  \n  componentDidCatch(error, info) {\n    this.setState({ hasError: true });\n    Logger.warn(error, info);\n  }\n  \n  \n  render() {\n    return (\n      <div>\n        <Post post={this.state.post} />\n      </div>\n    )\n  }\n}\n```\n\n除了上面的範例之外，你也可以透過 higher order component 的技巧將 `componentDidCatch` 包裝，或者是設定 `ErrorBoundary` 等等的 component 統一處理 children 的錯誤。\n\n### 2. Text-Only component\n\n刪除了不必要的 span 與 react-text 節點，並且可以直接回傳字串。\n\n```jsx\nconst Text = ({ text }) => {\n  return 'pure string!';\n}\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Text /> // render 'pure string', rather than <span>pure string</span>\n      </div>\n    )\n  }\n}\n```\n\n### *3. ReactDOM.createPortal(component, dom)\n\n`createPortal` 也是我相當喜歡的新功能之一，他能夠透過在 Component Tree 裡頭另外 render 到其他 DOM 上，並且可以完全脫離 Children 也沒有關係，像是下面的結構。\n\n```html\n<div id=\"app1\">\n</div>\n<div id=\"app2\">\n</div>\n```\n\n```jsx\nclass App extends Component {\n  constructor() {\n    \n  }\n  \n  render() {\n    <div>\n      <h2>Main header</h2>\n      {ReactDOM.createPortal(<Sidebar />, document.querySelector('#app2'))}\n    </div>\n  }\n}\n\n```\n\n`App` 裡頭可以透過 `ReactDOM.createPortal() `，除了閱讀性比較好之外（不用透過 callback 或是直接操作 DOM 的方式），還能夠對 Children 以外的節點操作，對於寫像是 modal 這種可能需要 overlay 的 component 很方便。（overlay 可能要再根節點上，比較好處理）\n\n### 4. Custom Attributes\n\n```jsx\nrender() {\n  return (\n  \t<div ui-prefix-scroller='foo'>\n    </div>\n  )    \n};\n```\n\n### 5. prevent update\n\n在 setState 回傳 null 不會觸發更新（之前的版本會）。以後不想更新 component 可以透過傳入 null 來解決。\n\n### 6. SSR 的支援\n\n詳細可以參考 [What's new with serverside rendering in react16](https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67)，值得一提的是 react16 SSR 開始支援 stream，`renderToNodeStream(Component)` 回傳 stream。\n\n以及文章作者提到的：\n\n> please, please, please make sure you always set `NODE_ENV` to `production` when using React SSR in production!\n\n## 結論\n\n以上就是 React 16 的主要更動。官方部落格有更詳盡的介紹。\n","source":"_posts/react-16-features.md","raw":"---\ntitle: React16 重點整理\ndate: 2017-10-02\ncategories:\n  - 前端\ntags:\n  - react\n---\n\n\nreact 終於正式發佈 v16 了，其實[官方部落格](https://reactjs.org/blog/2017/09/26/react-v16.0.html)的介紹已經相當完整（而且賞心悅目）。本篇文章作為筆記與統整，精簡了部分的細節。\n\n### 1. componentDidPatch(error, info)\n\nreact16 最亮眼的部分，加入 ErrorBoundary 的功能，確保在 lifecycle 時的錯誤不會影響到整個 component。之前如果在 render 時發生錯誤，會導致整個 component 不見。\n\n**只有在 Error 在 lifecycle method 被呼叫時才會傳入 componentDidPatch**，所以在 constructor 之類的地方 throw Error 是不會被 componentDidCatch 給 catch 的。\n\n`componentDidCatch` 傳入兩個參數 error, info。可以在 componentDidCatch 內處理錯誤，fallback UI 或是呼叫第三方服務紀錄錯誤等等。\n\n```jsx\nclass Post extends Component {\n  constructor() {\n    throw new Error('oops'); // 不會傳入 componentDidCatch\n  }\n  \n  componentWillMount() {\n    this.setState(state => {\n      throw new Error('oops');\n      return {};\n    })\n  }\n}\nclass App extends Component {\n  constructor() {\n    super(props);\n    this.state = {\n      post: { content: '' }\n    }\n  }\n  \n  updatePost = () => {\n    this.setState(state => ({ ...state, post: null }));\n  }\n  \n  componentDidCatch(error, info) {\n    this.setState({ hasError: true });\n    Logger.warn(error, info);\n  }\n  \n  \n  render() {\n    return (\n      <div>\n        <Post post={this.state.post} />\n      </div>\n    )\n  }\n}\n```\n\n除了上面的範例之外，你也可以透過 higher order component 的技巧將 `componentDidCatch` 包裝，或者是設定 `ErrorBoundary` 等等的 component 統一處理 children 的錯誤。\n\n### 2. Text-Only component\n\n刪除了不必要的 span 與 react-text 節點，並且可以直接回傳字串。\n\n```jsx\nconst Text = ({ text }) => {\n  return 'pure string!';\n}\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Text /> // render 'pure string', rather than <span>pure string</span>\n      </div>\n    )\n  }\n}\n```\n\n### *3. ReactDOM.createPortal(component, dom)\n\n`createPortal` 也是我相當喜歡的新功能之一，他能夠透過在 Component Tree 裡頭另外 render 到其他 DOM 上，並且可以完全脫離 Children 也沒有關係，像是下面的結構。\n\n```html\n<div id=\"app1\">\n</div>\n<div id=\"app2\">\n</div>\n```\n\n```jsx\nclass App extends Component {\n  constructor() {\n    \n  }\n  \n  render() {\n    <div>\n      <h2>Main header</h2>\n      {ReactDOM.createPortal(<Sidebar />, document.querySelector('#app2'))}\n    </div>\n  }\n}\n\n```\n\n`App` 裡頭可以透過 `ReactDOM.createPortal() `，除了閱讀性比較好之外（不用透過 callback 或是直接操作 DOM 的方式），還能夠對 Children 以外的節點操作，對於寫像是 modal 這種可能需要 overlay 的 component 很方便。（overlay 可能要再根節點上，比較好處理）\n\n### 4. Custom Attributes\n\n```jsx\nrender() {\n  return (\n  \t<div ui-prefix-scroller='foo'>\n    </div>\n  )    \n};\n```\n\n### 5. prevent update\n\n在 setState 回傳 null 不會觸發更新（之前的版本會）。以後不想更新 component 可以透過傳入 null 來解決。\n\n### 6. SSR 的支援\n\n詳細可以參考 [What's new with serverside rendering in react16](https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67)，值得一提的是 react16 SSR 開始支援 stream，`renderToNodeStream(Component)` 回傳 stream。\n\n以及文章作者提到的：\n\n> please, please, please make sure you always set `NODE_ENV` to `production` when using React SSR in production!\n\n## 結論\n\n以上就是 React 16 的主要更動。官方部落格有更詳盡的介紹。\n","slug":"react-16-features","published":1,"updated":"2017-10-07T13:45:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitrv0026iw5tdujoitdm","content":"<p>react 終於正式發佈 v16 了，其實<a href=\"https://reactjs.org/blog/2017/09/26/react-v16.0.html\" target=\"_blank\" rel=\"external\">官方部落格</a>的介紹已經相當完整（而且賞心悅目）。本篇文章作為筆記與統整，精簡了部分的細節。</p>\n<h3 id=\"1-componentDidPatch-error-info\"><a href=\"#1-componentDidPatch-error-info\" class=\"headerlink\" title=\"1. componentDidPatch(error, info)\"></a>1. componentDidPatch(error, info)</h3><p>react16 最亮眼的部分，加入 ErrorBoundary 的功能，確保在 lifecycle 時的錯誤不會影響到整個 component。之前如果在 render 時發生錯誤，會導致整個 component 不見。</p>\n<p><strong>只有在 Error 在 lifecycle method 被呼叫時才會傳入 componentDidPatch</strong>，所以在 constructor 之類的地方 throw Error 是不會被 componentDidCatch 給 catch 的。</p>\n<p><code>componentDidCatch</code> 傳入兩個參數 error, info。可以在 componentDidCatch 內處理錯誤，fallback UI 或是呼叫第三方服務紀錄錯誤等等。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Post</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oops'</span>); <span class=\"comment\">// 不會傳入 componentDidCatch</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  componentWillMount() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oops'</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;&#125;;</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      <span class=\"attr\">post</span>: &#123; <span class=\"attr\">content</span>: <span class=\"string\">''</span> &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  updatePost = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123; ...state, <span class=\"attr\">post</span>: <span class=\"literal\">null</span> &#125;));</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  componentDidCatch(error, info) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">true</span> &#125;);</div><div class=\"line\">    Logger.warn(error, info);</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Post</span> <span class=\"attr\">post</span>=<span class=\"string\">&#123;this.state.post&#125;</span> /&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>除了上面的範例之外，你也可以透過 higher order component 的技巧將 <code>componentDidCatch</code> 包裝，或者是設定 <code>ErrorBoundary</code> 等等的 component 統一處理 children 的錯誤。</p>\n<h3 id=\"2-Text-Only-component\"><a href=\"#2-Text-Only-component\" class=\"headerlink\" title=\"2. Text-Only component\"></a>2. Text-Only component</h3><p>刪除了不必要的 span 與 react-text 節點，並且可以直接回傳字串。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Text = <span class=\"function\">(<span class=\"params\">&#123; text &#125;</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'pure string!'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Text</span> /&gt;</span> // render 'pure string', rather than <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>pure string<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-ReactDOM-createPortal-component-dom\"><a href=\"#3-ReactDOM-createPortal-component-dom\" class=\"headerlink\" title=\"*3. ReactDOM.createPortal(component, dom)\"></a>*3. ReactDOM.createPortal(component, dom)</h3><p><code>createPortal</code> 也是我相當喜歡的新功能之一，他能夠透過在 Component Tree 裡頭另外 render 到其他 DOM 上，並且可以完全脫離 Children 也沒有關係，像是下面的結構。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app1\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app2\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  render() &#123;</div><div class=\"line\">    &lt;div&gt;</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Main header<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></div><div class=\"line\">      &#123;ReactDOM.createPortal(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Sidebar</span> /&gt;</span>, document.querySelector('#app2'))&#125;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>App</code> 裡頭可以透過 <code>ReactDOM.createPortal()</code>，除了閱讀性比較好之外（不用透過 callback 或是直接操作 DOM 的方式），還能夠對 Children 以外的節點操作，對於寫像是 modal 這種可能需要 overlay 的 component 很方便。（overlay 可能要再根節點上，比較好處理）</p>\n<h3 id=\"4-Custom-Attributes\"><a href=\"#4-Custom-Attributes\" class=\"headerlink\" title=\"4. Custom Attributes\"></a>4. Custom Attributes</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">render() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> (</div><div class=\"line\">  \t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ui-prefix-scroller</span>=<span class=\"string\">'foo'</span>&gt;</span></span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  )    </div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<h3 id=\"5-prevent-update\"><a href=\"#5-prevent-update\" class=\"headerlink\" title=\"5. prevent update\"></a>5. prevent update</h3><p>在 setState 回傳 null 不會觸發更新（之前的版本會）。以後不想更新 component 可以透過傳入 null 來解決。</p>\n<h3 id=\"6-SSR-的支援\"><a href=\"#6-SSR-的支援\" class=\"headerlink\" title=\"6. SSR 的支援\"></a>6. SSR 的支援</h3><p>詳細可以參考 <a href=\"https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67\" target=\"_blank\" rel=\"external\">What’s new with serverside rendering in react16</a>，值得一提的是 react16 SSR 開始支援 stream，<code>renderToNodeStream(Component)</code> 回傳 stream。</p>\n<p>以及文章作者提到的：</p>\n<blockquote>\n<p>please, please, please make sure you always set <code>NODE_ENV</code> to <code>production</code> when using React SSR in production!</p>\n</blockquote>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>以上就是 React 16 的主要更動。官方部落格有更詳盡的介紹。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>react 終於正式發佈 v16 了，其實<a href=\"https://reactjs.org/blog/2017/09/26/react-v16.0.html\" target=\"_blank\" rel=\"external\">官方部落格</a>的介紹已經相當完整（而且賞心悅目）。本篇文章作為筆記與統整，精簡了部分的細節。</p>\n<h3 id=\"1-componentDidPatch-error-info\"><a href=\"#1-componentDidPatch-error-info\" class=\"headerlink\" title=\"1. componentDidPatch(error, info)\"></a>1. componentDidPatch(error, info)</h3><p>react16 最亮眼的部分，加入 ErrorBoundary 的功能，確保在 lifecycle 時的錯誤不會影響到整個 component。之前如果在 render 時發生錯誤，會導致整個 component 不見。</p>\n<p><strong>只有在 Error 在 lifecycle method 被呼叫時才會傳入 componentDidPatch</strong>，所以在 constructor 之類的地方 throw Error 是不會被 componentDidCatch 給 catch 的。</p>\n<p><code>componentDidCatch</code> 傳入兩個參數 error, info。可以在 componentDidCatch 內處理錯誤，fallback UI 或是呼叫第三方服務紀錄錯誤等等。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Post</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oops'</span>); <span class=\"comment\">// 不會傳入 componentDidCatch</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  componentWillMount() &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oops'</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;&#125;;</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(props);</div><div class=\"line\">    <span class=\"keyword\">this</span>.state = &#123;</div><div class=\"line\">      <span class=\"attr\">post</span>: &#123; <span class=\"attr\">content</span>: <span class=\"string\">''</span> &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  updatePost = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">state</span> =&gt;</span> (&#123; ...state, <span class=\"attr\">post</span>: <span class=\"literal\">null</span> &#125;));</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  componentDidCatch(error, info) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">true</span> &#125;);</div><div class=\"line\">    Logger.warn(error, info);</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  </div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Post</span> <span class=\"attr\">post</span>=<span class=\"string\">&#123;this.state.post&#125;</span> /&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>除了上面的範例之外，你也可以透過 higher order component 的技巧將 <code>componentDidCatch</code> 包裝，或者是設定 <code>ErrorBoundary</code> 等等的 component 統一處理 children 的錯誤。</p>\n<h3 id=\"2-Text-Only-component\"><a href=\"#2-Text-Only-component\" class=\"headerlink\" title=\"2. Text-Only component\"></a>2. Text-Only component</h3><p>刪除了不必要的 span 與 react-text 節點，並且可以直接回傳字串。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Text = <span class=\"function\">(<span class=\"params\">&#123; text &#125;</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'pure string!'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> (</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">Text</span> /&gt;</span> // render 'pure string', rather than <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>pure string<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-ReactDOM-createPortal-component-dom\"><a href=\"#3-ReactDOM-createPortal-component-dom\" class=\"headerlink\" title=\"*3. ReactDOM.createPortal(component, dom)\"></a>*3. ReactDOM.createPortal(component, dom)</h3><p><code>createPortal</code> 也是我相當喜歡的新功能之一，他能夠透過在 Component Tree 裡頭另外 render 到其他 DOM 上，並且可以完全脫離 Children 也沒有關係，像是下面的結構。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app1\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app2\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  render() &#123;</div><div class=\"line\">    &lt;div&gt;</div><div class=\"line\">      <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Main header<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span></div><div class=\"line\">      &#123;ReactDOM.createPortal(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Sidebar</span> /&gt;</span>, document.querySelector('#app2'))&#125;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><code>App</code> 裡頭可以透過 <code>ReactDOM.createPortal()</code>，除了閱讀性比較好之外（不用透過 callback 或是直接操作 DOM 的方式），還能夠對 Children 以外的節點操作，對於寫像是 modal 這種可能需要 overlay 的 component 很方便。（overlay 可能要再根節點上，比較好處理）</p>\n<h3 id=\"4-Custom-Attributes\"><a href=\"#4-Custom-Attributes\" class=\"headerlink\" title=\"4. Custom Attributes\"></a>4. Custom Attributes</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">render() &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> (</div><div class=\"line\">  \t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ui-prefix-scroller</span>=<span class=\"string\">'foo'</span>&gt;</span></span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  )    </div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<h3 id=\"5-prevent-update\"><a href=\"#5-prevent-update\" class=\"headerlink\" title=\"5. prevent update\"></a>5. prevent update</h3><p>在 setState 回傳 null 不會觸發更新（之前的版本會）。以後不想更新 component 可以透過傳入 null 來解決。</p>\n<h3 id=\"6-SSR-的支援\"><a href=\"#6-SSR-的支援\" class=\"headerlink\" title=\"6. SSR 的支援\"></a>6. SSR 的支援</h3><p>詳細可以參考 <a href=\"https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67\" target=\"_blank\" rel=\"external\">What’s new with serverside rendering in react16</a>，值得一提的是 react16 SSR 開始支援 stream，<code>renderToNodeStream(Component)</code> 回傳 stream。</p>\n<p>以及文章作者提到的：</p>\n<blockquote>\n<p>please, please, please make sure you always set <code>NODE_ENV</code> to <code>production</code> when using React SSR in production!</p>\n</blockquote>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>以上就是 React 16 的主要更動。官方部落格有更詳盡的介紹。</p>\n"},{"title":"【筆記】易讀程式碼之美學","date":"2016-03-19T16:00:00.000Z","_content":"\n\n\n## 比較短的程式碼比較好嗎？\n\n雖然減少程式碼會提高易讀性，但**縮短讀程式碼的時間才是重點**。\n\n## 表層結構\n\n1. 清楚的命名方法跟變數名稱\n   - 方法不需要用 `do`\n   - 選擇詞彙的時候不要用模擬兩可的名稱，ex: pop popItem \n   - 在方法名稱加入更多的資訊\n\n```javascript\n  function getPage() {}\n  // 對方可能不知道 getPage 的實作方式？爬蟲？ ajax？\n\tfunction fetchPage() {}\n\t// 可能比較清楚是用 ajax 的方式並且回傳 json。\n```\n\n2. 找尋更明確的詞彙\n   - send => deliver dispatch announce route\n   - find => search extract locate recover\n   - start => launch create begin open\n   - make => create setup build generate add new compose\n\n**清楚明確比可愛更重要**\n\n3. 就算是 tmp 變數，也可以提供多一點資訊。\n   - tmpNumber\n   - tmpFile\n   - tmpUsrData\n\n4. 如果迴圈的 i,j 有意義，那麼就取個適當的名字。 ex: row col index\n\n5. 選擇具體的方法名稱。\n\n6. 如果變數具有單位，把單位放進去。\n   - startSec\n   - delayMs\n\n7. 重要屬性的變數命名\n   - plainData\n   - entryptedData\n\n8. 如果變數的作用範圍比較大的時候，用比較長（or 包含資訊較多）的變數是比較好的選擇，相反的如果只有幾行程式碼就結束，其他人可以馬上看出這個變數在做什麼，那麼就算用 `alias` 也沒關係。\n\n\n## 不被誤解的名稱\n\n1. filter 是把東西 filter 掉，還是留下？\n2. min max 前綴\n3. 布林值\n4. computeData => 比較像執行一個耗費較大的 function\n\n\n\n## 排版一致\n\n1. 符合排版一致\n2. 調整程式碼有的相似外觀\n3. 相關程式碼為一個段落。\n4. 註解的美學\n\n為什麼排版那麼重要？第一個是其他人（或者是你）以後再看程式碼的時候，至少比較容易（也比較願意）看得懂，再來是你可以花更少的時間去理解你的 code 在幹麻，何樂不為？\n\n#### 代碼品質工具\n\n- eslint\n\n- stylelint\n\n  ​\n\n## 用方法消除混亂？\n\n> 如果你發現你在做某一件事情感覺很混亂的時候，就該使用 method 包裝。\n\n用精美不實的包裝來欺騙消費者是人類的本性（誤）。能不能欺騙別人不是重點，重要的是是否能夠欺騙你自己。連你自己都不尊重的 code 別人也不尊重的。\n\n例如說：\n\n```javascript\nassert(checkTime('12:00')) === \"12:00\";\nassert(checkName('kalan', 20)) === {name: \"kalan\", age: 20};\nassert(checkPaid(20000, true)) === 20000;\n\n```\n\n仔細觀察一下上面的 code ，不難發現它們都是在做一些同樣的事情，而且還有一些重複出現的字串。而且太長了，我們需要一點時間才能知道這幾行 code 在幹嘛。\n\n這個時候就需要重構啦，我們可以用 method 把它包裝起來。\n\n```javascript\n\nfunction checkValue(type, value) {\n  if (type === \"time\") {\n\t\tassert(checkTime(value));\n  }\n\n  if (type === \"name\") {\n    assert(checkName(value) === value;\n\t}\n\n\tif (type === \"paid\") {\n\t\tassert(checkPaid(value)) === value;\n\t}\n}\n\n// checkValue(type,    value);\n//  \t\t\t\t\t[string] [depend]\ncheckValue(\"name\", kalan);\ncheckValue(\"time\", 12:00);\ncheckValue(\"paid\", 20000);\n```\n\n這樣一來 code 比較簡潔，易讀性也提升了！\n再次強調，並不是比較精簡的程式碼就是好 code ，容易讓人理解的 code 才是好 code。\n除了這些之外，還有一些好處：\n\n- 清楚呈現測試的部分。\n- 更容易加入其他測試！\n\n\n## 照順序及段落區分：\n\n落落長的程式碼不僅是別人，連自己都不會想看。在變數宣告、陳述式表達的時候，可以依照所做的行為不同拆分。這個寫文章也需要段落是同樣的道理。\n\n\n\n```javascript\n function getUserInfo(userName, age) {}\n\n\n\n getUserInfo(\"kalan\", 20);\n\n // getUserInfo(userName, age)\n // \t\t\t\t\t  [string]  [number]\n getUserInfo(\"kalan\", 20)\n\n```\n\n如果有相同的函式呼叫的話，可以讓參數對齊方便閱讀。\n\n```javascript\n\ncommand = {\n\t{ \"timeout\"      ,   null,     cmd_spec_timeout},\n\t{ \"timestamping\" ,   bull,     cmd_adj_boolean},\nf\n}\n\n```\n\n在寫註解的時候，其實不需要太拘泥，把自己當時想到的想法，以及這個 function 應該做的事情寫下來就好了，有時候過了一段時間你會忘記這個 function 在幹麻。\n\n\n--\n\n#2. 註解篇：\n\n> 註解是為了讓其他人了解程式設計者的想法而存在的。同時也讓自己了解自己當初的想法。\n\n- 如何撰寫好的註解，以及哪些東西`不需要註解`。\n- 不該註解的部分\n- 為讀者設身處地著想\n\n**不要讓註解搶走了程式該有的位置**\n\n避免寫作抗拒。這通常需要一段時間才能體會到。但當專案架構還沒有變得複雜之前就盡快寫註解絕對是件好事。不然你只能寫下違背良心的\n\n// TODO: refactor\n\n然後就再也沒有下文了。\n\n### 結語\n\n- 選用特定寫法的原因\n- 程式碼中的缺陷。\n- 使用者會對哪個部分感到疑惑\n\n\n### 維持註解簡潔\n\n- 用更精確的方式來描述自己的程式碼，並且不要用代名詞來描述參數。\n- 如果參數的行為較複雜，可以直接給範例讓使用者一目了然。\n\n\n#3. 流程控制：\n\n最常見的就是 `if/else` 的判斷。書中提供一個準則，就是肯定的條件句先擺前面、先處理簡單的狀況。\n如果你的 function / method 是有返回值的，就盡快讓他 return 吧！\n\n- 善用迪摩根定律：這個定律應該理工科都有印象吧！他可以把一些比較複雜的邏輯判斷簡化。\n\n\n### 與複雜的邏輯搏鬥：\n\n書中提到一個蠻有趣的方式，我想把它記錄下來。\n在實作 range 的時候，我們可能有一個方法 overlapWith ，來判斷兩個 range 之間是否有重疊。比起使用直接比對這兩個 range 是否有重疊，不如比對這兩個 range 是否不重疊更簡單。因為只要比對兩種狀況 => other 的 end 在 range 之前。 other 的 start 在 end 之後。\n\n\n### 將龐大的表示式用變數裝起來。\n```javascript\n\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n\n// refactor\n\nconst $thumbUp = $('.thumb_up');\nconst highLight = \"highlighted\";\n\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n\n// \n```\n\n#4. 變數：\n\n**變數存在越久，就越難 debug**\n\n- 減少不必要的變數宣告。\n\n什麼是不必要的變數？\n\n1. 無法讓意思變得更言簡意賅\n2. 本身的邏輯不複雜，不需要再用變數取代\n3. 只使用一次\n\n- 使用一次性寫入的變數\n\n在 functional programming 當中，我們希望 function 是 pure 且 immutable 的，對於變數來說也是，盡量讓你的變數為 const 或 immutable 的。這樣子不僅你對 function 可以一目了然，也比較容易掌握出錯的點在哪裡。\n\n\n## 將想法轉為程式碼：\n\n先用口語敘述行為，再把程式的行為轉換為程式碼。這樣子可以幫助程式設計師寫出更自然的程式碼。\n\n\n## 避免撰寫不必要的程式碼\n\n- 了解需求\n- 重新思考需求\n- 定期閱讀 API 以維持對標準函式庫的熟悉度\n","source":"_posts/readble-code-art.md","raw":"---\ntitle: 【筆記】易讀程式碼之美學\ncategories: 程式筆記\ndate: 2016-3-20\n---\n\n\n\n## 比較短的程式碼比較好嗎？\n\n雖然減少程式碼會提高易讀性，但**縮短讀程式碼的時間才是重點**。\n\n## 表層結構\n\n1. 清楚的命名方法跟變數名稱\n   - 方法不需要用 `do`\n   - 選擇詞彙的時候不要用模擬兩可的名稱，ex: pop popItem \n   - 在方法名稱加入更多的資訊\n\n```javascript\n  function getPage() {}\n  // 對方可能不知道 getPage 的實作方式？爬蟲？ ajax？\n\tfunction fetchPage() {}\n\t// 可能比較清楚是用 ajax 的方式並且回傳 json。\n```\n\n2. 找尋更明確的詞彙\n   - send => deliver dispatch announce route\n   - find => search extract locate recover\n   - start => launch create begin open\n   - make => create setup build generate add new compose\n\n**清楚明確比可愛更重要**\n\n3. 就算是 tmp 變數，也可以提供多一點資訊。\n   - tmpNumber\n   - tmpFile\n   - tmpUsrData\n\n4. 如果迴圈的 i,j 有意義，那麼就取個適當的名字。 ex: row col index\n\n5. 選擇具體的方法名稱。\n\n6. 如果變數具有單位，把單位放進去。\n   - startSec\n   - delayMs\n\n7. 重要屬性的變數命名\n   - plainData\n   - entryptedData\n\n8. 如果變數的作用範圍比較大的時候，用比較長（or 包含資訊較多）的變數是比較好的選擇，相反的如果只有幾行程式碼就結束，其他人可以馬上看出這個變數在做什麼，那麼就算用 `alias` 也沒關係。\n\n\n## 不被誤解的名稱\n\n1. filter 是把東西 filter 掉，還是留下？\n2. min max 前綴\n3. 布林值\n4. computeData => 比較像執行一個耗費較大的 function\n\n\n\n## 排版一致\n\n1. 符合排版一致\n2. 調整程式碼有的相似外觀\n3. 相關程式碼為一個段落。\n4. 註解的美學\n\n為什麼排版那麼重要？第一個是其他人（或者是你）以後再看程式碼的時候，至少比較容易（也比較願意）看得懂，再來是你可以花更少的時間去理解你的 code 在幹麻，何樂不為？\n\n#### 代碼品質工具\n\n- eslint\n\n- stylelint\n\n  ​\n\n## 用方法消除混亂？\n\n> 如果你發現你在做某一件事情感覺很混亂的時候，就該使用 method 包裝。\n\n用精美不實的包裝來欺騙消費者是人類的本性（誤）。能不能欺騙別人不是重點，重要的是是否能夠欺騙你自己。連你自己都不尊重的 code 別人也不尊重的。\n\n例如說：\n\n```javascript\nassert(checkTime('12:00')) === \"12:00\";\nassert(checkName('kalan', 20)) === {name: \"kalan\", age: 20};\nassert(checkPaid(20000, true)) === 20000;\n\n```\n\n仔細觀察一下上面的 code ，不難發現它們都是在做一些同樣的事情，而且還有一些重複出現的字串。而且太長了，我們需要一點時間才能知道這幾行 code 在幹嘛。\n\n這個時候就需要重構啦，我們可以用 method 把它包裝起來。\n\n```javascript\n\nfunction checkValue(type, value) {\n  if (type === \"time\") {\n\t\tassert(checkTime(value));\n  }\n\n  if (type === \"name\") {\n    assert(checkName(value) === value;\n\t}\n\n\tif (type === \"paid\") {\n\t\tassert(checkPaid(value)) === value;\n\t}\n}\n\n// checkValue(type,    value);\n//  \t\t\t\t\t[string] [depend]\ncheckValue(\"name\", kalan);\ncheckValue(\"time\", 12:00);\ncheckValue(\"paid\", 20000);\n```\n\n這樣一來 code 比較簡潔，易讀性也提升了！\n再次強調，並不是比較精簡的程式碼就是好 code ，容易讓人理解的 code 才是好 code。\n除了這些之外，還有一些好處：\n\n- 清楚呈現測試的部分。\n- 更容易加入其他測試！\n\n\n## 照順序及段落區分：\n\n落落長的程式碼不僅是別人，連自己都不會想看。在變數宣告、陳述式表達的時候，可以依照所做的行為不同拆分。這個寫文章也需要段落是同樣的道理。\n\n\n\n```javascript\n function getUserInfo(userName, age) {}\n\n\n\n getUserInfo(\"kalan\", 20);\n\n // getUserInfo(userName, age)\n // \t\t\t\t\t  [string]  [number]\n getUserInfo(\"kalan\", 20)\n\n```\n\n如果有相同的函式呼叫的話，可以讓參數對齊方便閱讀。\n\n```javascript\n\ncommand = {\n\t{ \"timeout\"      ,   null,     cmd_spec_timeout},\n\t{ \"timestamping\" ,   bull,     cmd_adj_boolean},\nf\n}\n\n```\n\n在寫註解的時候，其實不需要太拘泥，把自己當時想到的想法，以及這個 function 應該做的事情寫下來就好了，有時候過了一段時間你會忘記這個 function 在幹麻。\n\n\n--\n\n#2. 註解篇：\n\n> 註解是為了讓其他人了解程式設計者的想法而存在的。同時也讓自己了解自己當初的想法。\n\n- 如何撰寫好的註解，以及哪些東西`不需要註解`。\n- 不該註解的部分\n- 為讀者設身處地著想\n\n**不要讓註解搶走了程式該有的位置**\n\n避免寫作抗拒。這通常需要一段時間才能體會到。但當專案架構還沒有變得複雜之前就盡快寫註解絕對是件好事。不然你只能寫下違背良心的\n\n// TODO: refactor\n\n然後就再也沒有下文了。\n\n### 結語\n\n- 選用特定寫法的原因\n- 程式碼中的缺陷。\n- 使用者會對哪個部分感到疑惑\n\n\n### 維持註解簡潔\n\n- 用更精確的方式來描述自己的程式碼，並且不要用代名詞來描述參數。\n- 如果參數的行為較複雜，可以直接給範例讓使用者一目了然。\n\n\n#3. 流程控制：\n\n最常見的就是 `if/else` 的判斷。書中提供一個準則，就是肯定的條件句先擺前面、先處理簡單的狀況。\n如果你的 function / method 是有返回值的，就盡快讓他 return 吧！\n\n- 善用迪摩根定律：這個定律應該理工科都有印象吧！他可以把一些比較複雜的邏輯判斷簡化。\n\n\n### 與複雜的邏輯搏鬥：\n\n書中提到一個蠻有趣的方式，我想把它記錄下來。\n在實作 range 的時候，我們可能有一個方法 overlapWith ，來判斷兩個 range 之間是否有重疊。比起使用直接比對這兩個 range 是否有重疊，不如比對這兩個 range 是否不重疊更簡單。因為只要比對兩種狀況 => other 的 end 在 range 之前。 other 的 start 在 end 之後。\n\n\n### 將龐大的表示式用變數裝起來。\n```javascript\n\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n\n// refactor\n\nconst $thumbUp = $('.thumb_up');\nconst highLight = \"highlighted\";\n\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n$('.thumb_up').removeClass('highlighted');\n\n// \n```\n\n#4. 變數：\n\n**變數存在越久，就越難 debug**\n\n- 減少不必要的變數宣告。\n\n什麼是不必要的變數？\n\n1. 無法讓意思變得更言簡意賅\n2. 本身的邏輯不複雜，不需要再用變數取代\n3. 只使用一次\n\n- 使用一次性寫入的變數\n\n在 functional programming 當中，我們希望 function 是 pure 且 immutable 的，對於變數來說也是，盡量讓你的變數為 const 或 immutable 的。這樣子不僅你對 function 可以一目了然，也比較容易掌握出錯的點在哪裡。\n\n\n## 將想法轉為程式碼：\n\n先用口語敘述行為，再把程式的行為轉換為程式碼。這樣子可以幫助程式設計師寫出更自然的程式碼。\n\n\n## 避免撰寫不必要的程式碼\n\n- 了解需求\n- 重新思考需求\n- 定期閱讀 API 以維持對標準函式庫的熟悉度\n","slug":"readble-code-art","published":1,"updated":"2017-02-28T16:16:13.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitry0029iw5tyvwob6lb","content":"<h2 id=\"比較短的程式碼比較好嗎？\"><a href=\"#比較短的程式碼比較好嗎？\" class=\"headerlink\" title=\"比較短的程式碼比較好嗎？\"></a>比較短的程式碼比較好嗎？</h2><p>雖然減少程式碼會提高易讀性，但<strong>縮短讀程式碼的時間才是重點</strong>。</p>\n<h2 id=\"表層結構\"><a href=\"#表層結構\" class=\"headerlink\" title=\"表層結構\"></a>表層結構</h2><ol>\n<li>清楚的命名方法跟變數名稱<ul>\n<li>方法不需要用 <code>do</code></li>\n<li>選擇詞彙的時候不要用模擬兩可的名稱，ex: pop popItem </li>\n<li>在方法名稱加入更多的資訊</li>\n</ul>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPage</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"> <span class=\"comment\">// 對方可能不知道 getPage 的實作方式？爬蟲？ ajax？</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchPage</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"comment\">// 可能比較清楚是用 ajax 的方式並且回傳 json。</span></div></pre></td></tr></table></figure>\n<ol>\n<li>找尋更明確的詞彙<ul>\n<li>send =&gt; deliver dispatch announce route</li>\n<li>find =&gt; search extract locate recover</li>\n<li>start =&gt; launch create begin open</li>\n<li>make =&gt; create setup build generate add new compose</li>\n</ul>\n</li>\n</ol>\n<p><strong>清楚明確比可愛更重要</strong></p>\n<ol>\n<li><p>就算是 tmp 變數，也可以提供多一點資訊。</p>\n<ul>\n<li>tmpNumber</li>\n<li>tmpFile</li>\n<li>tmpUsrData</li>\n</ul>\n</li>\n<li><p>如果迴圈的 i,j 有意義，那麼就取個適當的名字。 ex: row col index</p>\n</li>\n<li><p>選擇具體的方法名稱。</p>\n</li>\n<li><p>如果變數具有單位，把單位放進去。</p>\n<ul>\n<li>startSec</li>\n<li>delayMs</li>\n</ul>\n</li>\n<li><p>重要屬性的變數命名</p>\n<ul>\n<li>plainData</li>\n<li>entryptedData</li>\n</ul>\n</li>\n<li><p>如果變數的作用範圍比較大的時候，用比較長（or 包含資訊較多）的變數是比較好的選擇，相反的如果只有幾行程式碼就結束，其他人可以馬上看出這個變數在做什麼，那麼就算用 <code>alias</code> 也沒關係。</p>\n</li>\n</ol>\n<h2 id=\"不被誤解的名稱\"><a href=\"#不被誤解的名稱\" class=\"headerlink\" title=\"不被誤解的名稱\"></a>不被誤解的名稱</h2><ol>\n<li>filter 是把東西 filter 掉，還是留下？</li>\n<li>min max 前綴</li>\n<li>布林值</li>\n<li>computeData =&gt; 比較像執行一個耗費較大的 function</li>\n</ol>\n<h2 id=\"排版一致\"><a href=\"#排版一致\" class=\"headerlink\" title=\"排版一致\"></a>排版一致</h2><ol>\n<li>符合排版一致</li>\n<li>調整程式碼有的相似外觀</li>\n<li>相關程式碼為一個段落。</li>\n<li>註解的美學</li>\n</ol>\n<p>為什麼排版那麼重要？第一個是其他人（或者是你）以後再看程式碼的時候，至少比較容易（也比較願意）看得懂，再來是你可以花更少的時間去理解你的 code 在幹麻，何樂不為？</p>\n<h4 id=\"代碼品質工具\"><a href=\"#代碼品質工具\" class=\"headerlink\" title=\"代碼品質工具\"></a>代碼品質工具</h4><ul>\n<li><p>eslint</p>\n</li>\n<li><p>stylelint</p>\n<p>​</p>\n</li>\n</ul>\n<h2 id=\"用方法消除混亂？\"><a href=\"#用方法消除混亂？\" class=\"headerlink\" title=\"用方法消除混亂？\"></a>用方法消除混亂？</h2><blockquote>\n<p>如果你發現你在做某一件事情感覺很混亂的時候，就該使用 method 包裝。</p>\n</blockquote>\n<p>用精美不實的包裝來欺騙消費者是人類的本性（誤）。能不能欺騙別人不是重點，重要的是是否能夠欺騙你自己。連你自己都不尊重的 code 別人也不尊重的。</p>\n<p>例如說：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">assert(checkTime(<span class=\"string\">'12:00'</span>)) === <span class=\"string\">\"12:00\"</span>;</div><div class=\"line\">assert(checkName(<span class=\"string\">'kalan'</span>, <span class=\"number\">20</span>)) === &#123;<span class=\"attr\">name</span>: <span class=\"string\">\"kalan\"</span>, <span class=\"attr\">age</span>: <span class=\"number\">20</span>&#125;;</div><div class=\"line\">assert(checkPaid(<span class=\"number\">20000</span>, <span class=\"literal\">true</span>)) === <span class=\"number\">20000</span>;</div></pre></td></tr></table></figure>\n<p>仔細觀察一下上面的 code ，不難發現它們都是在做一些同樣的事情，而且還有一些重複出現的字串。而且太長了，我們需要一點時間才能知道這幾行 code 在幹嘛。</p>\n<p>這個時候就需要重構啦，我們可以用 method 把它包裝起來。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkValue</span>(<span class=\"params\">type, value</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">\"time\"</span>) &#123;</div><div class=\"line\">\t\tassert(checkTime(value));</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">\"name\"</span>) &#123;</div><div class=\"line\">    assert(checkName(value) === value;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span> (type === <span class=\"string\">\"paid\"</span>) &#123;</div><div class=\"line\">\t\tassert(checkPaid(value)) === value;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// checkValue(type,    value);</span></div><div class=\"line\"><span class=\"comment\">//  \t\t\t\t\t[string] [depend]</span></div><div class=\"line\">checkValue(<span class=\"string\">\"name\"</span>, kalan);</div><div class=\"line\">checkValue(<span class=\"string\">\"time\"</span>, <span class=\"number\">12</span>:<span class=\"number\">00</span>);</div><div class=\"line\">checkValue(<span class=\"string\">\"paid\"</span>, <span class=\"number\">20000</span>);</div></pre></td></tr></table></figure>\n<p>這樣一來 code 比較簡潔，易讀性也提升了！<br>再次強調，並不是比較精簡的程式碼就是好 code ，容易讓人理解的 code 才是好 code。<br>除了這些之外，還有一些好處：</p>\n<ul>\n<li>清楚呈現測試的部分。</li>\n<li>更容易加入其他測試！</li>\n</ul>\n<h2 id=\"照順序及段落區分：\"><a href=\"#照順序及段落區分：\" class=\"headerlink\" title=\"照順序及段落區分：\"></a>照順序及段落區分：</h2><p>落落長的程式碼不僅是別人，連自己都不會想看。在變數宣告、陳述式表達的時候，可以依照所做的行為不同拆分。這個寫文章也需要段落是同樣的道理。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserInfo</span>(<span class=\"params\">userName, age</span>) </span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">getUserInfo(<span class=\"string\">\"kalan\"</span>, <span class=\"number\">20</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getUserInfo(userName, age)</span></div><div class=\"line\"><span class=\"comment\">// \t\t\t\t\t  [string]  [number]</span></div><div class=\"line\">getUserInfo(<span class=\"string\">\"kalan\"</span>, <span class=\"number\">20</span>)</div></pre></td></tr></table></figure>\n<p>如果有相同的函式呼叫的話，可以讓參數對齊方便閱讀。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">command = &#123;</div><div class=\"line\">\t&#123; <span class=\"string\">\"timeout\"</span>      ,   <span class=\"literal\">null</span>,     cmd_spec_timeout&#125;,</div><div class=\"line\">\t&#123; <span class=\"string\">\"timestamping\"</span> ,   bull,     cmd_adj_boolean&#125;,</div><div class=\"line\">f</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在寫註解的時候，其實不需要太拘泥，把自己當時想到的想法，以及這個 function 應該做的事情寫下來就好了，有時候過了一段時間你會忘記這個 function 在幹麻。</p>\n<p>–</p>\n<p>#2. 註解篇：</p>\n<blockquote>\n<p>註解是為了讓其他人了解程式設計者的想法而存在的。同時也讓自己了解自己當初的想法。</p>\n</blockquote>\n<ul>\n<li>如何撰寫好的註解，以及哪些東西<code>不需要註解</code>。</li>\n<li>不該註解的部分</li>\n<li>為讀者設身處地著想</li>\n</ul>\n<p><strong>不要讓註解搶走了程式該有的位置</strong></p>\n<p>避免寫作抗拒。這通常需要一段時間才能體會到。但當專案架構還沒有變得複雜之前就盡快寫註解絕對是件好事。不然你只能寫下違背良心的</p>\n<p>// TODO: refactor</p>\n<p>然後就再也沒有下文了。</p>\n<h3 id=\"結語\"><a href=\"#結語\" class=\"headerlink\" title=\"結語\"></a>結語</h3><ul>\n<li>選用特定寫法的原因</li>\n<li>程式碼中的缺陷。</li>\n<li>使用者會對哪個部分感到疑惑</li>\n</ul>\n<h3 id=\"維持註解簡潔\"><a href=\"#維持註解簡潔\" class=\"headerlink\" title=\"維持註解簡潔\"></a>維持註解簡潔</h3><ul>\n<li>用更精確的方式來描述自己的程式碼，並且不要用代名詞來描述參數。</li>\n<li>如果參數的行為較複雜，可以直接給範例讓使用者一目了然。</li>\n</ul>\n<p>#3. 流程控制：</p>\n<p>最常見的就是 <code>if/else</code> 的判斷。書中提供一個準則，就是肯定的條件句先擺前面、先處理簡單的狀況。<br>如果你的 function / method 是有返回值的，就盡快讓他 return 吧！</p>\n<ul>\n<li>善用迪摩根定律：這個定律應該理工科都有印象吧！他可以把一些比較複雜的邏輯判斷簡化。</li>\n</ul>\n<h3 id=\"與複雜的邏輯搏鬥：\"><a href=\"#與複雜的邏輯搏鬥：\" class=\"headerlink\" title=\"與複雜的邏輯搏鬥：\"></a>與複雜的邏輯搏鬥：</h3><p>書中提到一個蠻有趣的方式，我想把它記錄下來。<br>在實作 range 的時候，我們可能有一個方法 overlapWith ，來判斷兩個 range 之間是否有重疊。比起使用直接比對這兩個 range 是否有重疊，不如比對這兩個 range 是否不重疊更簡單。因為只要比對兩種狀況 =&gt; other 的 end 在 range 之前。 other 的 start 在 end 之後。</p>\n<h3 id=\"將龐大的表示式用變數裝起來。\"><a href=\"#將龐大的表示式用變數裝起來。\" class=\"headerlink\" title=\"將龐大的表示式用變數裝起來。\"></a>將龐大的表示式用變數裝起來。</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// refactor</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> $thumbUp = $(<span class=\"string\">'.thumb_up'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> highLight = <span class=\"string\">\"highlighted\"</span>;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<p>#4. 變數：</p>\n<p><strong>變數存在越久，就越難 debug</strong></p>\n<ul>\n<li>減少不必要的變數宣告。</li>\n</ul>\n<p>什麼是不必要的變數？</p>\n<ol>\n<li>無法讓意思變得更言簡意賅</li>\n<li>本身的邏輯不複雜，不需要再用變數取代</li>\n<li>只使用一次</li>\n</ol>\n<ul>\n<li>使用一次性寫入的變數</li>\n</ul>\n<p>在 functional programming 當中，我們希望 function 是 pure 且 immutable 的，對於變數來說也是，盡量讓你的變數為 const 或 immutable 的。這樣子不僅你對 function 可以一目了然，也比較容易掌握出錯的點在哪裡。</p>\n<h2 id=\"將想法轉為程式碼：\"><a href=\"#將想法轉為程式碼：\" class=\"headerlink\" title=\"將想法轉為程式碼：\"></a>將想法轉為程式碼：</h2><p>先用口語敘述行為，再把程式的行為轉換為程式碼。這樣子可以幫助程式設計師寫出更自然的程式碼。</p>\n<h2 id=\"避免撰寫不必要的程式碼\"><a href=\"#避免撰寫不必要的程式碼\" class=\"headerlink\" title=\"避免撰寫不必要的程式碼\"></a>避免撰寫不必要的程式碼</h2><ul>\n<li>了解需求</li>\n<li>重新思考需求</li>\n<li>定期閱讀 API 以維持對標準函式庫的熟悉度</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"比較短的程式碼比較好嗎？\"><a href=\"#比較短的程式碼比較好嗎？\" class=\"headerlink\" title=\"比較短的程式碼比較好嗎？\"></a>比較短的程式碼比較好嗎？</h2><p>雖然減少程式碼會提高易讀性，但<strong>縮短讀程式碼的時間才是重點</strong>。</p>\n<h2 id=\"表層結構\"><a href=\"#表層結構\" class=\"headerlink\" title=\"表層結構\"></a>表層結構</h2><ol>\n<li>清楚的命名方法跟變數名稱<ul>\n<li>方法不需要用 <code>do</code></li>\n<li>選擇詞彙的時候不要用模擬兩可的名稱，ex: pop popItem </li>\n<li>在方法名稱加入更多的資訊</li>\n</ul>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPage</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"> <span class=\"comment\">// 對方可能不知道 getPage 的實作方式？爬蟲？ ajax？</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchPage</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\"><span class=\"comment\">// 可能比較清楚是用 ajax 的方式並且回傳 json。</span></div></pre></td></tr></table></figure>\n<ol>\n<li>找尋更明確的詞彙<ul>\n<li>send =&gt; deliver dispatch announce route</li>\n<li>find =&gt; search extract locate recover</li>\n<li>start =&gt; launch create begin open</li>\n<li>make =&gt; create setup build generate add new compose</li>\n</ul>\n</li>\n</ol>\n<p><strong>清楚明確比可愛更重要</strong></p>\n<ol>\n<li><p>就算是 tmp 變數，也可以提供多一點資訊。</p>\n<ul>\n<li>tmpNumber</li>\n<li>tmpFile</li>\n<li>tmpUsrData</li>\n</ul>\n</li>\n<li><p>如果迴圈的 i,j 有意義，那麼就取個適當的名字。 ex: row col index</p>\n</li>\n<li><p>選擇具體的方法名稱。</p>\n</li>\n<li><p>如果變數具有單位，把單位放進去。</p>\n<ul>\n<li>startSec</li>\n<li>delayMs</li>\n</ul>\n</li>\n<li><p>重要屬性的變數命名</p>\n<ul>\n<li>plainData</li>\n<li>entryptedData</li>\n</ul>\n</li>\n<li><p>如果變數的作用範圍比較大的時候，用比較長（or 包含資訊較多）的變數是比較好的選擇，相反的如果只有幾行程式碼就結束，其他人可以馬上看出這個變數在做什麼，那麼就算用 <code>alias</code> 也沒關係。</p>\n</li>\n</ol>\n<h2 id=\"不被誤解的名稱\"><a href=\"#不被誤解的名稱\" class=\"headerlink\" title=\"不被誤解的名稱\"></a>不被誤解的名稱</h2><ol>\n<li>filter 是把東西 filter 掉，還是留下？</li>\n<li>min max 前綴</li>\n<li>布林值</li>\n<li>computeData =&gt; 比較像執行一個耗費較大的 function</li>\n</ol>\n<h2 id=\"排版一致\"><a href=\"#排版一致\" class=\"headerlink\" title=\"排版一致\"></a>排版一致</h2><ol>\n<li>符合排版一致</li>\n<li>調整程式碼有的相似外觀</li>\n<li>相關程式碼為一個段落。</li>\n<li>註解的美學</li>\n</ol>\n<p>為什麼排版那麼重要？第一個是其他人（或者是你）以後再看程式碼的時候，至少比較容易（也比較願意）看得懂，再來是你可以花更少的時間去理解你的 code 在幹麻，何樂不為？</p>\n<h4 id=\"代碼品質工具\"><a href=\"#代碼品質工具\" class=\"headerlink\" title=\"代碼品質工具\"></a>代碼品質工具</h4><ul>\n<li><p>eslint</p>\n</li>\n<li><p>stylelint</p>\n<p>​</p>\n</li>\n</ul>\n<h2 id=\"用方法消除混亂？\"><a href=\"#用方法消除混亂？\" class=\"headerlink\" title=\"用方法消除混亂？\"></a>用方法消除混亂？</h2><blockquote>\n<p>如果你發現你在做某一件事情感覺很混亂的時候，就該使用 method 包裝。</p>\n</blockquote>\n<p>用精美不實的包裝來欺騙消費者是人類的本性（誤）。能不能欺騙別人不是重點，重要的是是否能夠欺騙你自己。連你自己都不尊重的 code 別人也不尊重的。</p>\n<p>例如說：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">assert(checkTime(<span class=\"string\">'12:00'</span>)) === <span class=\"string\">\"12:00\"</span>;</div><div class=\"line\">assert(checkName(<span class=\"string\">'kalan'</span>, <span class=\"number\">20</span>)) === &#123;<span class=\"attr\">name</span>: <span class=\"string\">\"kalan\"</span>, <span class=\"attr\">age</span>: <span class=\"number\">20</span>&#125;;</div><div class=\"line\">assert(checkPaid(<span class=\"number\">20000</span>, <span class=\"literal\">true</span>)) === <span class=\"number\">20000</span>;</div></pre></td></tr></table></figure>\n<p>仔細觀察一下上面的 code ，不難發現它們都是在做一些同樣的事情，而且還有一些重複出現的字串。而且太長了，我們需要一點時間才能知道這幾行 code 在幹嘛。</p>\n<p>這個時候就需要重構啦，我們可以用 method 把它包裝起來。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkValue</span>(<span class=\"params\">type, value</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">\"time\"</span>) &#123;</div><div class=\"line\">\t\tassert(checkTime(value));</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">\"name\"</span>) &#123;</div><div class=\"line\">    assert(checkName(value) === value;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span> (type === <span class=\"string\">\"paid\"</span>) &#123;</div><div class=\"line\">\t\tassert(checkPaid(value)) === value;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// checkValue(type,    value);</span></div><div class=\"line\"><span class=\"comment\">//  \t\t\t\t\t[string] [depend]</span></div><div class=\"line\">checkValue(<span class=\"string\">\"name\"</span>, kalan);</div><div class=\"line\">checkValue(<span class=\"string\">\"time\"</span>, <span class=\"number\">12</span>:<span class=\"number\">00</span>);</div><div class=\"line\">checkValue(<span class=\"string\">\"paid\"</span>, <span class=\"number\">20000</span>);</div></pre></td></tr></table></figure>\n<p>這樣一來 code 比較簡潔，易讀性也提升了！<br>再次強調，並不是比較精簡的程式碼就是好 code ，容易讓人理解的 code 才是好 code。<br>除了這些之外，還有一些好處：</p>\n<ul>\n<li>清楚呈現測試的部分。</li>\n<li>更容易加入其他測試！</li>\n</ul>\n<h2 id=\"照順序及段落區分：\"><a href=\"#照順序及段落區分：\" class=\"headerlink\" title=\"照順序及段落區分：\"></a>照順序及段落區分：</h2><p>落落長的程式碼不僅是別人，連自己都不會想看。在變數宣告、陳述式表達的時候，可以依照所做的行為不同拆分。這個寫文章也需要段落是同樣的道理。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserInfo</span>(<span class=\"params\">userName, age</span>) </span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">getUserInfo(<span class=\"string\">\"kalan\"</span>, <span class=\"number\">20</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getUserInfo(userName, age)</span></div><div class=\"line\"><span class=\"comment\">// \t\t\t\t\t  [string]  [number]</span></div><div class=\"line\">getUserInfo(<span class=\"string\">\"kalan\"</span>, <span class=\"number\">20</span>)</div></pre></td></tr></table></figure>\n<p>如果有相同的函式呼叫的話，可以讓參數對齊方便閱讀。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">command = &#123;</div><div class=\"line\">\t&#123; <span class=\"string\">\"timeout\"</span>      ,   <span class=\"literal\">null</span>,     cmd_spec_timeout&#125;,</div><div class=\"line\">\t&#123; <span class=\"string\">\"timestamping\"</span> ,   bull,     cmd_adj_boolean&#125;,</div><div class=\"line\">f</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>在寫註解的時候，其實不需要太拘泥，把自己當時想到的想法，以及這個 function 應該做的事情寫下來就好了，有時候過了一段時間你會忘記這個 function 在幹麻。</p>\n<p>–</p>\n<p>#2. 註解篇：</p>\n<blockquote>\n<p>註解是為了讓其他人了解程式設計者的想法而存在的。同時也讓自己了解自己當初的想法。</p>\n</blockquote>\n<ul>\n<li>如何撰寫好的註解，以及哪些東西<code>不需要註解</code>。</li>\n<li>不該註解的部分</li>\n<li>為讀者設身處地著想</li>\n</ul>\n<p><strong>不要讓註解搶走了程式該有的位置</strong></p>\n<p>避免寫作抗拒。這通常需要一段時間才能體會到。但當專案架構還沒有變得複雜之前就盡快寫註解絕對是件好事。不然你只能寫下違背良心的</p>\n<p>// TODO: refactor</p>\n<p>然後就再也沒有下文了。</p>\n<h3 id=\"結語\"><a href=\"#結語\" class=\"headerlink\" title=\"結語\"></a>結語</h3><ul>\n<li>選用特定寫法的原因</li>\n<li>程式碼中的缺陷。</li>\n<li>使用者會對哪個部分感到疑惑</li>\n</ul>\n<h3 id=\"維持註解簡潔\"><a href=\"#維持註解簡潔\" class=\"headerlink\" title=\"維持註解簡潔\"></a>維持註解簡潔</h3><ul>\n<li>用更精確的方式來描述自己的程式碼，並且不要用代名詞來描述參數。</li>\n<li>如果參數的行為較複雜，可以直接給範例讓使用者一目了然。</li>\n</ul>\n<p>#3. 流程控制：</p>\n<p>最常見的就是 <code>if/else</code> 的判斷。書中提供一個準則，就是肯定的條件句先擺前面、先處理簡單的狀況。<br>如果你的 function / method 是有返回值的，就盡快讓他 return 吧！</p>\n<ul>\n<li>善用迪摩根定律：這個定律應該理工科都有印象吧！他可以把一些比較複雜的邏輯判斷簡化。</li>\n</ul>\n<h3 id=\"與複雜的邏輯搏鬥：\"><a href=\"#與複雜的邏輯搏鬥：\" class=\"headerlink\" title=\"與複雜的邏輯搏鬥：\"></a>與複雜的邏輯搏鬥：</h3><p>書中提到一個蠻有趣的方式，我想把它記錄下來。<br>在實作 range 的時候，我們可能有一個方法 overlapWith ，來判斷兩個 range 之間是否有重疊。比起使用直接比對這兩個 range 是否有重疊，不如比對這兩個 range 是否不重疊更簡單。因為只要比對兩種狀況 =&gt; other 的 end 在 range 之前。 other 的 start 在 end 之後。</p>\n<h3 id=\"將龐大的表示式用變數裝起來。\"><a href=\"#將龐大的表示式用變數裝起來。\" class=\"headerlink\" title=\"將龐大的表示式用變數裝起來。\"></a>將龐大的表示式用變數裝起來。</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// refactor</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> $thumbUp = $(<span class=\"string\">'.thumb_up'</span>);</div><div class=\"line\"><span class=\"keyword\">const</span> highLight = <span class=\"string\">\"highlighted\"</span>;</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\">$(<span class=\"string\">'.thumb_up'</span>).removeClass(<span class=\"string\">'highlighted'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<p>#4. 變數：</p>\n<p><strong>變數存在越久，就越難 debug</strong></p>\n<ul>\n<li>減少不必要的變數宣告。</li>\n</ul>\n<p>什麼是不必要的變數？</p>\n<ol>\n<li>無法讓意思變得更言簡意賅</li>\n<li>本身的邏輯不複雜，不需要再用變數取代</li>\n<li>只使用一次</li>\n</ol>\n<ul>\n<li>使用一次性寫入的變數</li>\n</ul>\n<p>在 functional programming 當中，我們希望 function 是 pure 且 immutable 的，對於變數來說也是，盡量讓你的變數為 const 或 immutable 的。這樣子不僅你對 function 可以一目了然，也比較容易掌握出錯的點在哪裡。</p>\n<h2 id=\"將想法轉為程式碼：\"><a href=\"#將想法轉為程式碼：\" class=\"headerlink\" title=\"將想法轉為程式碼：\"></a>將想法轉為程式碼：</h2><p>先用口語敘述行為，再把程式的行為轉換為程式碼。這樣子可以幫助程式設計師寫出更自然的程式碼。</p>\n<h2 id=\"避免撰寫不必要的程式碼\"><a href=\"#避免撰寫不必要的程式碼\" class=\"headerlink\" title=\"避免撰寫不必要的程式碼\"></a>避免撰寫不必要的程式碼</h2><ul>\n<li>了解需求</li>\n<li>重新思考需求</li>\n<li>定期閱讀 API 以維持對標準函式庫的熟悉度</li>\n</ul>\n"},{"title":"redux-saga 與 redux-observable(待整理)","date":"2017-05-04T16:00:00.000Z","_content":"\n前陣子有幾個很突出的函式庫，專門處理 redux 當中非同步的 action。最簡單暴力有效的方法是 `redux-thunk`，的確，一般的 ajax call 或是簡單的發送非同步請求時，thunk 能夠很直覺也很方便地完成我們要的需求。\n\n但，如果是更複雜的應用呢？比如說：\n\n- 為了減少伺服器的負擔，我們只想要對使用者最後的操作做處理\n- 如果發送請求之後，在還沒取得回應之前，我們想要取消請求\n\n如果我們要在 action 裡頭對這些請求做判斷，很快這些 action 就會變得肥大臃腫，逐漸難以維護。而且，thunk 並沒有辦法取消請求。\n\n這篇文章會透過範例，介紹 `redux-saga` 跟 `redux-observable`，並且分析兩者的不同之處，最後再來做比較。\n\n## 要解決什麼問題？\n\n這兩個函式庫雖然風格非常不同，但是要解決的問題是相同的，**有效管理 side effect**。而最大的不同點在於，`redux-observable` 使用 RxJS 實作，而 `redux-thunk` 使用 es6 的 generator。\n\n所有解決非同步的方式都有一種目的，**讓非同步的操作看起來像是同步的**。\n\n#### callback\n\n最剛開始的解決方案是 callback，但缺點顯然易見，很快就會因為多層牽套的關係導致越深層的程式碼越來越難維護。\n\n#### Event\n\n後來，採用監聽 event 的方式，我們可以很快地對事件變化做特定的行為，這在簡單的非同步狀況下可以有效解決問題，但如果是事件同時併發，或是監聽多個事件的話，一樣會出現 callback 的問題。\n\n#### Promise\n\npromise 把之前的 callback 做扁平化，任何的操作可以用 `then(resolve, reject)` 的方式達成，同時 Promise 也有提供`all` 之類的操作對多事件統一處理。\n\n### ReactiveX\n\n什麼是 functional reactive programming\n\n簡稱為 RxJS 在去年七月份左右逐漸竄紅，主要的概念在於提供一連串的 functional API 操作 Observable Stream。\n\n[Your mouse is database](http://queue.acm.org/detail.cfm?id=2169076)\n\n這篇文章的將 UI 上的事件操作都當作無止盡的 stream\n\n[wiki observer pattern](https://www.wikiwand.com/en/Observer_pattern)\n\n和一般的 observer 的不同點在於，如果一個 Observable 物件沒有接收到 `subscribe` 方法時，並不會開始流動。\n\nreactive，對資料的變動做出反應。\n\n將所有的資料都視為 observable stream，統一用 Observable 處理。\n\n[reactive programming](https://egghead.io/lessons/rxjs-reactive-programming-what-is-rxjs?course=introduction-to-reactive-programming)\n\n\n\n### redux-observable\n\nobservable 是什麼？其實這個名詞並不是新玩意，在 UI 上我們也常常使用 observer 的概念。例如 `addEventListener(eventType, handler)`。\n\n> 監聽畫面上的某個事件，並且對此事件做相對應的處理，這就是 observer。\n\n當然，這樣的概念很廣泛，事實上我們也不需要過度的解釋名詞。\n\n在 Rx 當中，我們將所有事件的組合當作一個資料流\n\n## 結論\n\n這邊我沒辦法很明確地說這兩個函式庫適合的場景，因為這兩個函式庫要解決的問題其實非常類似，只是手法不同而已。\n\n如果你先前就已經具備了足夠的 RxJS 的知識，比較習慣 functional reactive programming 的話，那麼 `redux-observable` 很適合勝任這個工作。\n\n又或許，在團隊裡頭技術的迭代較快，可能今年 react，明年變成 Angular(哪家公司會這樣做XD)，那麼選擇 `redux-observable` 會在之後技術線改變時較容易修改，因為 Angular2 本身配備了 RxJS，搬移的成本較低。\n\n","source":"_posts/redux-saga-and-redux-observable.md","raw":"---\ntitle: redux-saga 與 redux-observable(待整理)\ncategories: 前端\ndate: 2017-5-5\ntags:\n  - redux\n  - saga pattern\n  - observable\n  - RxJS\n\n---\n\n前陣子有幾個很突出的函式庫，專門處理 redux 當中非同步的 action。最簡單暴力有效的方法是 `redux-thunk`，的確，一般的 ajax call 或是簡單的發送非同步請求時，thunk 能夠很直覺也很方便地完成我們要的需求。\n\n但，如果是更複雜的應用呢？比如說：\n\n- 為了減少伺服器的負擔，我們只想要對使用者最後的操作做處理\n- 如果發送請求之後，在還沒取得回應之前，我們想要取消請求\n\n如果我們要在 action 裡頭對這些請求做判斷，很快這些 action 就會變得肥大臃腫，逐漸難以維護。而且，thunk 並沒有辦法取消請求。\n\n這篇文章會透過範例，介紹 `redux-saga` 跟 `redux-observable`，並且分析兩者的不同之處，最後再來做比較。\n\n## 要解決什麼問題？\n\n這兩個函式庫雖然風格非常不同，但是要解決的問題是相同的，**有效管理 side effect**。而最大的不同點在於，`redux-observable` 使用 RxJS 實作，而 `redux-thunk` 使用 es6 的 generator。\n\n所有解決非同步的方式都有一種目的，**讓非同步的操作看起來像是同步的**。\n\n#### callback\n\n最剛開始的解決方案是 callback，但缺點顯然易見，很快就會因為多層牽套的關係導致越深層的程式碼越來越難維護。\n\n#### Event\n\n後來，採用監聽 event 的方式，我們可以很快地對事件變化做特定的行為，這在簡單的非同步狀況下可以有效解決問題，但如果是事件同時併發，或是監聽多個事件的話，一樣會出現 callback 的問題。\n\n#### Promise\n\npromise 把之前的 callback 做扁平化，任何的操作可以用 `then(resolve, reject)` 的方式達成，同時 Promise 也有提供`all` 之類的操作對多事件統一處理。\n\n### ReactiveX\n\n什麼是 functional reactive programming\n\n簡稱為 RxJS 在去年七月份左右逐漸竄紅，主要的概念在於提供一連串的 functional API 操作 Observable Stream。\n\n[Your mouse is database](http://queue.acm.org/detail.cfm?id=2169076)\n\n這篇文章的將 UI 上的事件操作都當作無止盡的 stream\n\n[wiki observer pattern](https://www.wikiwand.com/en/Observer_pattern)\n\n和一般的 observer 的不同點在於，如果一個 Observable 物件沒有接收到 `subscribe` 方法時，並不會開始流動。\n\nreactive，對資料的變動做出反應。\n\n將所有的資料都視為 observable stream，統一用 Observable 處理。\n\n[reactive programming](https://egghead.io/lessons/rxjs-reactive-programming-what-is-rxjs?course=introduction-to-reactive-programming)\n\n\n\n### redux-observable\n\nobservable 是什麼？其實這個名詞並不是新玩意，在 UI 上我們也常常使用 observer 的概念。例如 `addEventListener(eventType, handler)`。\n\n> 監聽畫面上的某個事件，並且對此事件做相對應的處理，這就是 observer。\n\n當然，這樣的概念很廣泛，事實上我們也不需要過度的解釋名詞。\n\n在 Rx 當中，我們將所有事件的組合當作一個資料流\n\n## 結論\n\n這邊我沒辦法很明確地說這兩個函式庫適合的場景，因為這兩個函式庫要解決的問題其實非常類似，只是手法不同而已。\n\n如果你先前就已經具備了足夠的 RxJS 的知識，比較習慣 functional reactive programming 的話，那麼 `redux-observable` 很適合勝任這個工作。\n\n又或許，在團隊裡頭技術的迭代較快，可能今年 react，明年變成 Angular(哪家公司會這樣做XD)，那麼選擇 `redux-observable` 會在之後技術線改變時較容易修改，因為 Angular2 本身配備了 RxJS，搬移的成本較低。\n\n","slug":"redux-saga-and-redux-observable","published":1,"updated":"2017-08-12T04:20:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeits0002diw5ta2u0aflo","content":"<p>前陣子有幾個很突出的函式庫，專門處理 redux 當中非同步的 action。最簡單暴力有效的方法是 <code>redux-thunk</code>，的確，一般的 ajax call 或是簡單的發送非同步請求時，thunk 能夠很直覺也很方便地完成我們要的需求。</p>\n<p>但，如果是更複雜的應用呢？比如說：</p>\n<ul>\n<li>為了減少伺服器的負擔，我們只想要對使用者最後的操作做處理</li>\n<li>如果發送請求之後，在還沒取得回應之前，我們想要取消請求</li>\n</ul>\n<p>如果我們要在 action 裡頭對這些請求做判斷，很快這些 action 就會變得肥大臃腫，逐漸難以維護。而且，thunk 並沒有辦法取消請求。</p>\n<p>這篇文章會透過範例，介紹 <code>redux-saga</code> 跟 <code>redux-observable</code>，並且分析兩者的不同之處，最後再來做比較。</p>\n<h2 id=\"要解決什麼問題？\"><a href=\"#要解決什麼問題？\" class=\"headerlink\" title=\"要解決什麼問題？\"></a>要解決什麼問題？</h2><p>這兩個函式庫雖然風格非常不同，但是要解決的問題是相同的，<strong>有效管理 side effect</strong>。而最大的不同點在於，<code>redux-observable</code> 使用 RxJS 實作，而 <code>redux-thunk</code> 使用 es6 的 generator。</p>\n<p>所有解決非同步的方式都有一種目的，<strong>讓非同步的操作看起來像是同步的</strong>。</p>\n<h4 id=\"callback\"><a href=\"#callback\" class=\"headerlink\" title=\"callback\"></a>callback</h4><p>最剛開始的解決方案是 callback，但缺點顯然易見，很快就會因為多層牽套的關係導致越深層的程式碼越來越難維護。</p>\n<h4 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h4><p>後來，採用監聽 event 的方式，我們可以很快地對事件變化做特定的行為，這在簡單的非同步狀況下可以有效解決問題，但如果是事件同時併發，或是監聽多個事件的話，一樣會出現 callback 的問題。</p>\n<h4 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h4><p>promise 把之前的 callback 做扁平化，任何的操作可以用 <code>then(resolve, reject)</code> 的方式達成，同時 Promise 也有提供<code>all</code> 之類的操作對多事件統一處理。</p>\n<h3 id=\"ReactiveX\"><a href=\"#ReactiveX\" class=\"headerlink\" title=\"ReactiveX\"></a>ReactiveX</h3><p>什麼是 functional reactive programming</p>\n<p>簡稱為 RxJS 在去年七月份左右逐漸竄紅，主要的概念在於提供一連串的 functional API 操作 Observable Stream。</p>\n<p><a href=\"http://queue.acm.org/detail.cfm?id=2169076\" target=\"_blank\" rel=\"external\">Your mouse is database</a></p>\n<p>這篇文章的將 UI 上的事件操作都當作無止盡的 stream</p>\n<p><a href=\"https://www.wikiwand.com/en/Observer_pattern\" target=\"_blank\" rel=\"external\">wiki observer pattern</a></p>\n<p>和一般的 observer 的不同點在於，如果一個 Observable 物件沒有接收到 <code>subscribe</code> 方法時，並不會開始流動。</p>\n<p>reactive，對資料的變動做出反應。</p>\n<p>將所有的資料都視為 observable stream，統一用 Observable 處理。</p>\n<p><a href=\"https://egghead.io/lessons/rxjs-reactive-programming-what-is-rxjs?course=introduction-to-reactive-programming\" target=\"_blank\" rel=\"external\">reactive programming</a></p>\n<h3 id=\"redux-observable\"><a href=\"#redux-observable\" class=\"headerlink\" title=\"redux-observable\"></a>redux-observable</h3><p>observable 是什麼？其實這個名詞並不是新玩意，在 UI 上我們也常常使用 observer 的概念。例如 <code>addEventListener(eventType, handler)</code>。</p>\n<blockquote>\n<p>監聽畫面上的某個事件，並且對此事件做相對應的處理，這就是 observer。</p>\n</blockquote>\n<p>當然，這樣的概念很廣泛，事實上我們也不需要過度的解釋名詞。</p>\n<p>在 Rx 當中，我們將所有事件的組合當作一個資料流</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這邊我沒辦法很明確地說這兩個函式庫適合的場景，因為這兩個函式庫要解決的問題其實非常類似，只是手法不同而已。</p>\n<p>如果你先前就已經具備了足夠的 RxJS 的知識，比較習慣 functional reactive programming 的話，那麼 <code>redux-observable</code> 很適合勝任這個工作。</p>\n<p>又或許，在團隊裡頭技術的迭代較快，可能今年 react，明年變成 Angular(哪家公司會這樣做XD)，那麼選擇 <code>redux-observable</code> 會在之後技術線改變時較容易修改，因為 Angular2 本身配備了 RxJS，搬移的成本較低。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>前陣子有幾個很突出的函式庫，專門處理 redux 當中非同步的 action。最簡單暴力有效的方法是 <code>redux-thunk</code>，的確，一般的 ajax call 或是簡單的發送非同步請求時，thunk 能夠很直覺也很方便地完成我們要的需求。</p>\n<p>但，如果是更複雜的應用呢？比如說：</p>\n<ul>\n<li>為了減少伺服器的負擔，我們只想要對使用者最後的操作做處理</li>\n<li>如果發送請求之後，在還沒取得回應之前，我們想要取消請求</li>\n</ul>\n<p>如果我們要在 action 裡頭對這些請求做判斷，很快這些 action 就會變得肥大臃腫，逐漸難以維護。而且，thunk 並沒有辦法取消請求。</p>\n<p>這篇文章會透過範例，介紹 <code>redux-saga</code> 跟 <code>redux-observable</code>，並且分析兩者的不同之處，最後再來做比較。</p>\n<h2 id=\"要解決什麼問題？\"><a href=\"#要解決什麼問題？\" class=\"headerlink\" title=\"要解決什麼問題？\"></a>要解決什麼問題？</h2><p>這兩個函式庫雖然風格非常不同，但是要解決的問題是相同的，<strong>有效管理 side effect</strong>。而最大的不同點在於，<code>redux-observable</code> 使用 RxJS 實作，而 <code>redux-thunk</code> 使用 es6 的 generator。</p>\n<p>所有解決非同步的方式都有一種目的，<strong>讓非同步的操作看起來像是同步的</strong>。</p>\n<h4 id=\"callback\"><a href=\"#callback\" class=\"headerlink\" title=\"callback\"></a>callback</h4><p>最剛開始的解決方案是 callback，但缺點顯然易見，很快就會因為多層牽套的關係導致越深層的程式碼越來越難維護。</p>\n<h4 id=\"Event\"><a href=\"#Event\" class=\"headerlink\" title=\"Event\"></a>Event</h4><p>後來，採用監聽 event 的方式，我們可以很快地對事件變化做特定的行為，這在簡單的非同步狀況下可以有效解決問題，但如果是事件同時併發，或是監聽多個事件的話，一樣會出現 callback 的問題。</p>\n<h4 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h4><p>promise 把之前的 callback 做扁平化，任何的操作可以用 <code>then(resolve, reject)</code> 的方式達成，同時 Promise 也有提供<code>all</code> 之類的操作對多事件統一處理。</p>\n<h3 id=\"ReactiveX\"><a href=\"#ReactiveX\" class=\"headerlink\" title=\"ReactiveX\"></a>ReactiveX</h3><p>什麼是 functional reactive programming</p>\n<p>簡稱為 RxJS 在去年七月份左右逐漸竄紅，主要的概念在於提供一連串的 functional API 操作 Observable Stream。</p>\n<p><a href=\"http://queue.acm.org/detail.cfm?id=2169076\" target=\"_blank\" rel=\"external\">Your mouse is database</a></p>\n<p>這篇文章的將 UI 上的事件操作都當作無止盡的 stream</p>\n<p><a href=\"https://www.wikiwand.com/en/Observer_pattern\" target=\"_blank\" rel=\"external\">wiki observer pattern</a></p>\n<p>和一般的 observer 的不同點在於，如果一個 Observable 物件沒有接收到 <code>subscribe</code> 方法時，並不會開始流動。</p>\n<p>reactive，對資料的變動做出反應。</p>\n<p>將所有的資料都視為 observable stream，統一用 Observable 處理。</p>\n<p><a href=\"https://egghead.io/lessons/rxjs-reactive-programming-what-is-rxjs?course=introduction-to-reactive-programming\" target=\"_blank\" rel=\"external\">reactive programming</a></p>\n<h3 id=\"redux-observable\"><a href=\"#redux-observable\" class=\"headerlink\" title=\"redux-observable\"></a>redux-observable</h3><p>observable 是什麼？其實這個名詞並不是新玩意，在 UI 上我們也常常使用 observer 的概念。例如 <code>addEventListener(eventType, handler)</code>。</p>\n<blockquote>\n<p>監聽畫面上的某個事件，並且對此事件做相對應的處理，這就是 observer。</p>\n</blockquote>\n<p>當然，這樣的概念很廣泛，事實上我們也不需要過度的解釋名詞。</p>\n<p>在 Rx 當中，我們將所有事件的組合當作一個資料流</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這邊我沒辦法很明確地說這兩個函式庫適合的場景，因為這兩個函式庫要解決的問題其實非常類似，只是手法不同而已。</p>\n<p>如果你先前就已經具備了足夠的 RxJS 的知識，比較習慣 functional reactive programming 的話，那麼 <code>redux-observable</code> 很適合勝任這個工作。</p>\n<p>又或許，在團隊裡頭技術的迭代較快，可能今年 react，明年變成 Angular(哪家公司會這樣做XD)，那麼選擇 <code>redux-observable</code> 會在之後技術線改變時較容易修改，因為 Angular2 本身配備了 RxJS，搬移的成本較低。</p>\n"},{"title":"高度相同的排版解決方案","date":"2017-02-01T07:33:41.000Z","_content":"\n在前端的頁面中，我們經常會碰到需要相同高度的排版。最直覺的方法就是將容器裡的所有元素設為 float 或是 inline-block。\n\n### float 及 inline-block\n\n如果是使用 float 排版，不但要先撐開父元素容器(clearfix)，還要針對子元素設定 margin。\n所以一旦內容太多，或是高度不足就會跑版。\n\n而且，這樣的排版最大的缺陷就是，**必須設定高度**。\n\n那，如果不設置高度呢？\n就算設定了 min-height 也一樣，當內容超出高度時，就必定會面臨 overflow 的危機。\n\n{% asset_img \"example1.png\" \"example1\" %}\n\n後來決定直接用 css media query 在不同的螢幕寬度下分別給予不同的高度。\n雖然解法比較麻煩，也比較醜一點，但的確解決了寬度過窄時會跑版的問題。\n\n\n這個問題後來一直深埋在心中，直到最近發現了 flex 的奧秘。\n\n### 排版遇到困難，先想想 flex\n\n人生遇到挫折的時候，想想 flex，這個彈性盒子常常會救你一命。\nflex 已經支援大部分的主流瀏覽器，而且真的很好用！\n\n將 display 設置為 flex 的時候，如果子元素沒有設定高度，則子元素的高度會是其中最高的那個。\n\n一行屬性就解決了我朝思暮想的問題，真是優雅的 `flex`。\n\n但除此之外，我們還需要對排版做一些調整。 flex 預設如果沒有設置 `flex-wrap` 屬性的話，就會以單行顯示的方式來撐開父容器。\n因此我們可以再加上一行。\n\n```css\n.wrap { flex-wrap: wrap; }\n```\n\n好了，高度相同的 responsive 排版，不宣告 `height` 就此完成。大概的 css 會長得像這樣：\n\n```css\n.container {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-around;\n}\n\n.card {\n\theight: auto;\n\twidth: 30%;\n\tborder: 1px solid #aaa;\n}\n\n```\n\n### 不支援 flex 的瀏覽器怎麼辦？\n\n首先 flex 已經支援大部分的主流瀏覽器了，不要用支援度這種藉口來忽視這麼好用的 `flex`。\n但如果瀏覽器真的不支援，可以用 js 的方式來做排版。主要的原理是不設定高度，偵測 container 裡面的所有元素，並且找出高度最高的，並將此高度套用到每個元素中。\n\n寫了一個很基本的範例代碼：\n\n```js\nvar cards = document.querySelectorAll('.card');\n\nfunction getMaxinumHeight(elements) {\n  var nums = [];\n\n  elements.forEach(function(value) {\n    nums.push(value.offsetHeight);\n  });\n\n  return nums.sort(function(a,b) {\n  \treturn a < b;\n  })[0];\n}\n\nvar maxHeight = getMaxinumHeight(cards);\ncards.forEach(value => {\n\n  value.style.height = maxHeight + 'px';\n});\n```\n\n### Table is new sexy\n\n雖然古老的 table 排版已經被唾棄，不過像是等高這種場景，如果不幸無法使用 flex 時，可以利用 table 的特性來達成等高排版。\n\n要完成 table 排版，可以使用 `display: table`, `display:table-row`, `display: table-cell`，來完成。\n\n`display: table` 等同於 `<table>`；`display: table-row` 等同於 `<tr>`；`display: table-cell` 等同於 `<td>`。\n\n<iframe height='265' scrolling='no' title='table-height' src='//codepen.io/kjj6198/embed/evpxjx/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/kjj6198/pen/evpxjx/'>table-height</a> by 愷開 (<a href='http://codepen.io/kjj6198'>@kjj6198</a>) on <a href='http://codepen.io'>CodePen</a>.\n</iframe>\n\n不過，雖然能夠達到等高的效果，但 HTML 的 markup 變得更複雜了。而且 table 在使用上仍然有一些限制，像是 margin 沒辦法在 `table` 裡頭生效等等，這些在實作 mockup 時都是很大的阻礙。所以，如果能夠用 flex 來做的話，就盡量使用 flex 吧！\n\n\n\n### 延伸閱讀\n\n[Flexbox responsive equal height](http://osvaldas.info/flexbox-based-responsive-equal-height-blocks-with-javascript-fallback)\n","source":"_posts/responsive-flex.md","raw":"---\ntitle: 高度相同的排版解決方案\ncategories: 前端\ntags: flex\ndate: 2017-2-1 15:33:41\n---\n\n在前端的頁面中，我們經常會碰到需要相同高度的排版。最直覺的方法就是將容器裡的所有元素設為 float 或是 inline-block。\n\n### float 及 inline-block\n\n如果是使用 float 排版，不但要先撐開父元素容器(clearfix)，還要針對子元素設定 margin。\n所以一旦內容太多，或是高度不足就會跑版。\n\n而且，這樣的排版最大的缺陷就是，**必須設定高度**。\n\n那，如果不設置高度呢？\n就算設定了 min-height 也一樣，當內容超出高度時，就必定會面臨 overflow 的危機。\n\n{% asset_img \"example1.png\" \"example1\" %}\n\n後來決定直接用 css media query 在不同的螢幕寬度下分別給予不同的高度。\n雖然解法比較麻煩，也比較醜一點，但的確解決了寬度過窄時會跑版的問題。\n\n\n這個問題後來一直深埋在心中，直到最近發現了 flex 的奧秘。\n\n### 排版遇到困難，先想想 flex\n\n人生遇到挫折的時候，想想 flex，這個彈性盒子常常會救你一命。\nflex 已經支援大部分的主流瀏覽器，而且真的很好用！\n\n將 display 設置為 flex 的時候，如果子元素沒有設定高度，則子元素的高度會是其中最高的那個。\n\n一行屬性就解決了我朝思暮想的問題，真是優雅的 `flex`。\n\n但除此之外，我們還需要對排版做一些調整。 flex 預設如果沒有設置 `flex-wrap` 屬性的話，就會以單行顯示的方式來撐開父容器。\n因此我們可以再加上一行。\n\n```css\n.wrap { flex-wrap: wrap; }\n```\n\n好了，高度相同的 responsive 排版，不宣告 `height` 就此完成。大概的 css 會長得像這樣：\n\n```css\n.container {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-around;\n}\n\n.card {\n\theight: auto;\n\twidth: 30%;\n\tborder: 1px solid #aaa;\n}\n\n```\n\n### 不支援 flex 的瀏覽器怎麼辦？\n\n首先 flex 已經支援大部分的主流瀏覽器了，不要用支援度這種藉口來忽視這麼好用的 `flex`。\n但如果瀏覽器真的不支援，可以用 js 的方式來做排版。主要的原理是不設定高度，偵測 container 裡面的所有元素，並且找出高度最高的，並將此高度套用到每個元素中。\n\n寫了一個很基本的範例代碼：\n\n```js\nvar cards = document.querySelectorAll('.card');\n\nfunction getMaxinumHeight(elements) {\n  var nums = [];\n\n  elements.forEach(function(value) {\n    nums.push(value.offsetHeight);\n  });\n\n  return nums.sort(function(a,b) {\n  \treturn a < b;\n  })[0];\n}\n\nvar maxHeight = getMaxinumHeight(cards);\ncards.forEach(value => {\n\n  value.style.height = maxHeight + 'px';\n});\n```\n\n### Table is new sexy\n\n雖然古老的 table 排版已經被唾棄，不過像是等高這種場景，如果不幸無法使用 flex 時，可以利用 table 的特性來達成等高排版。\n\n要完成 table 排版，可以使用 `display: table`, `display:table-row`, `display: table-cell`，來完成。\n\n`display: table` 等同於 `<table>`；`display: table-row` 等同於 `<tr>`；`display: table-cell` 等同於 `<td>`。\n\n<iframe height='265' scrolling='no' title='table-height' src='//codepen.io/kjj6198/embed/evpxjx/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/kjj6198/pen/evpxjx/'>table-height</a> by 愷開 (<a href='http://codepen.io/kjj6198'>@kjj6198</a>) on <a href='http://codepen.io'>CodePen</a>.\n</iframe>\n\n不過，雖然能夠達到等高的效果，但 HTML 的 markup 變得更複雜了。而且 table 在使用上仍然有一些限制，像是 margin 沒辦法在 `table` 裡頭生效等等，這些在實作 mockup 時都是很大的阻礙。所以，如果能夠用 flex 來做的話，就盡量使用 flex 吧！\n\n\n\n### 延伸閱讀\n\n[Flexbox responsive equal height](http://osvaldas.info/flexbox-based-responsive-equal-height-blocks-with-javascript-fallback)\n","slug":"responsive-flex","published":1,"updated":"2017-03-01T03:04:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeits2002giw5t1emjxd2p","content":"<p>在前端的頁面中，我們經常會碰到需要相同高度的排版。最直覺的方法就是將容器裡的所有元素設為 float 或是 inline-block。</p>\n<h3 id=\"float-及-inline-block\"><a href=\"#float-及-inline-block\" class=\"headerlink\" title=\"float 及 inline-block\"></a>float 及 inline-block</h3><p>如果是使用 float 排版，不但要先撐開父元素容器(clearfix)，還要針對子元素設定 margin。<br>所以一旦內容太多，或是高度不足就會跑版。</p>\n<p>而且，這樣的排版最大的缺陷就是，<strong>必須設定高度</strong>。</p>\n<p>那，如果不設置高度呢？<br>就算設定了 min-height 也一樣，當內容超出高度時，就必定會面臨 overflow 的危機。</p>\n<img src=\"/2017/02/01/responsive-flex/example1.png\" title=\"example1\">\n<p>後來決定直接用 css media query 在不同的螢幕寬度下分別給予不同的高度。<br>雖然解法比較麻煩，也比較醜一點，但的確解決了寬度過窄時會跑版的問題。</p>\n<p>這個問題後來一直深埋在心中，直到最近發現了 flex 的奧秘。</p>\n<h3 id=\"排版遇到困難，先想想-flex\"><a href=\"#排版遇到困難，先想想-flex\" class=\"headerlink\" title=\"排版遇到困難，先想想 flex\"></a>排版遇到困難，先想想 flex</h3><p>人生遇到挫折的時候，想想 flex，這個彈性盒子常常會救你一命。<br>flex 已經支援大部分的主流瀏覽器，而且真的很好用！</p>\n<p>將 display 設置為 flex 的時候，如果子元素沒有設定高度，則子元素的高度會是其中最高的那個。</p>\n<p>一行屬性就解決了我朝思暮想的問題，真是優雅的 <code>flex</code>。</p>\n<p>但除此之外，我們還需要對排版做一些調整。 flex 預設如果沒有設置 <code>flex-wrap</code> 屬性的話，就會以單行顯示的方式來撐開父容器。<br>因此我們可以再加上一行。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.wrap</span> &#123; <span class=\"attribute\">flex-wrap</span>: wrap; &#125;</div></pre></td></tr></table></figure>\n<p>好了，高度相同的 responsive 排版，不宣告 <code>height</code> 就此完成。大概的 css 會長得像這樣：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: flex;</div><div class=\"line\">\t<span class=\"attribute\">flex-wrap</span>: wrap;</div><div class=\"line\">\t<span class=\"attribute\">justify-content</span>: space-around;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.card</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">height</span>: auto;</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">30%</span>;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"不支援-flex-的瀏覽器怎麼辦？\"><a href=\"#不支援-flex-的瀏覽器怎麼辦？\" class=\"headerlink\" title=\"不支援 flex 的瀏覽器怎麼辦？\"></a>不支援 flex 的瀏覽器怎麼辦？</h3><p>首先 flex 已經支援大部分的主流瀏覽器了，不要用支援度這種藉口來忽視這麼好用的 <code>flex</code>。<br>但如果瀏覽器真的不支援，可以用 js 的方式來做排版。主要的原理是不設定高度，偵測 container 裡面的所有元素，並且找出高度最高的，並將此高度套用到每個元素中。</p>\n<p>寫了一個很基本的範例代碼：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cards = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'.card'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMaxinumHeight</span>(<span class=\"params\">elements</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> nums = [];</div><div class=\"line\"></div><div class=\"line\">  elements.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    nums.push(value.offsetHeight);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> nums.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>) </span>&#123;</div><div class=\"line\">  \t<span class=\"keyword\">return</span> a &lt; b;</div><div class=\"line\">  &#125;)[<span class=\"number\">0</span>];</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> maxHeight = getMaxinumHeight(cards);</div><div class=\"line\">cards.forEach(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</div><div class=\"line\"></div><div class=\"line\">  value.style.height = maxHeight + <span class=\"string\">'px'</span>;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"Table-is-new-sexy\"><a href=\"#Table-is-new-sexy\" class=\"headerlink\" title=\"Table is new sexy\"></a>Table is new sexy</h3><p>雖然古老的 table 排版已經被唾棄，不過像是等高這種場景，如果不幸無法使用 flex 時，可以利用 table 的特性來達成等高排版。</p>\n<p>要完成 table 排版，可以使用 <code>display: table</code>, <code>display:table-row</code>, <code>display: table-cell</code>，來完成。</p>\n<p><code>display: table</code> 等同於 <code>&lt;table&gt;</code>；<code>display: table-row</code> 等同於 <code>&lt;tr&gt;</code>；<code>display: table-cell</code> 等同於 <code>&lt;td&gt;</code>。</p>\n<iframe height=\"265\" scrolling=\"no\" title=\"table-height\" src=\"//codepen.io/kjj6198/embed/evpxjx/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"http://codepen.io/kjj6198/pen/evpxjx/\" target=\"_blank\" rel=\"external\">table-height</a> by 愷開 (<a href=\"http://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"http://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.<br></iframe>\n\n<p>不過，雖然能夠達到等高的效果，但 HTML 的 markup 變得更複雜了。而且 table 在使用上仍然有一些限制，像是 margin 沒辦法在 <code>table</code> 裡頭生效等等，這些在實作 mockup 時都是很大的阻礙。所以，如果能夠用 flex 來做的話，就盡量使用 flex 吧！</p>\n<h3 id=\"延伸閱讀\"><a href=\"#延伸閱讀\" class=\"headerlink\" title=\"延伸閱讀\"></a>延伸閱讀</h3><p><a href=\"http://osvaldas.info/flexbox-based-responsive-equal-height-blocks-with-javascript-fallback\" target=\"_blank\" rel=\"external\">Flexbox responsive equal height</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>在前端的頁面中，我們經常會碰到需要相同高度的排版。最直覺的方法就是將容器裡的所有元素設為 float 或是 inline-block。</p>\n<h3 id=\"float-及-inline-block\"><a href=\"#float-及-inline-block\" class=\"headerlink\" title=\"float 及 inline-block\"></a>float 及 inline-block</h3><p>如果是使用 float 排版，不但要先撐開父元素容器(clearfix)，還要針對子元素設定 margin。<br>所以一旦內容太多，或是高度不足就會跑版。</p>\n<p>而且，這樣的排版最大的缺陷就是，<strong>必須設定高度</strong>。</p>\n<p>那，如果不設置高度呢？<br>就算設定了 min-height 也一樣，當內容超出高度時，就必定會面臨 overflow 的危機。</p>\n<img src=\"/2017/02/01/responsive-flex/example1.png\" title=\"example1\">\n<p>後來決定直接用 css media query 在不同的螢幕寬度下分別給予不同的高度。<br>雖然解法比較麻煩，也比較醜一點，但的確解決了寬度過窄時會跑版的問題。</p>\n<p>這個問題後來一直深埋在心中，直到最近發現了 flex 的奧秘。</p>\n<h3 id=\"排版遇到困難，先想想-flex\"><a href=\"#排版遇到困難，先想想-flex\" class=\"headerlink\" title=\"排版遇到困難，先想想 flex\"></a>排版遇到困難，先想想 flex</h3><p>人生遇到挫折的時候，想想 flex，這個彈性盒子常常會救你一命。<br>flex 已經支援大部分的主流瀏覽器，而且真的很好用！</p>\n<p>將 display 設置為 flex 的時候，如果子元素沒有設定高度，則子元素的高度會是其中最高的那個。</p>\n<p>一行屬性就解決了我朝思暮想的問題，真是優雅的 <code>flex</code>。</p>\n<p>但除此之外，我們還需要對排版做一些調整。 flex 預設如果沒有設置 <code>flex-wrap</code> 屬性的話，就會以單行顯示的方式來撐開父容器。<br>因此我們可以再加上一行。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.wrap</span> &#123; <span class=\"attribute\">flex-wrap</span>: wrap; &#125;</div></pre></td></tr></table></figure>\n<p>好了，高度相同的 responsive 排版，不宣告 <code>height</code> 就此完成。大概的 css 會長得像這樣：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.container</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">display</span>: flex;</div><div class=\"line\">\t<span class=\"attribute\">flex-wrap</span>: wrap;</div><div class=\"line\">\t<span class=\"attribute\">justify-content</span>: space-around;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.card</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">height</span>: auto;</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">30%</span>;</div><div class=\"line\">\t<span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"不支援-flex-的瀏覽器怎麼辦？\"><a href=\"#不支援-flex-的瀏覽器怎麼辦？\" class=\"headerlink\" title=\"不支援 flex 的瀏覽器怎麼辦？\"></a>不支援 flex 的瀏覽器怎麼辦？</h3><p>首先 flex 已經支援大部分的主流瀏覽器了，不要用支援度這種藉口來忽視這麼好用的 <code>flex</code>。<br>但如果瀏覽器真的不支援，可以用 js 的方式來做排版。主要的原理是不設定高度，偵測 container 裡面的所有元素，並且找出高度最高的，並將此高度套用到每個元素中。</p>\n<p>寫了一個很基本的範例代碼：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> cards = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'.card'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMaxinumHeight</span>(<span class=\"params\">elements</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> nums = [];</div><div class=\"line\"></div><div class=\"line\">  elements.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    nums.push(value.offsetHeight);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> nums.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>) </span>&#123;</div><div class=\"line\">  \t<span class=\"keyword\">return</span> a &lt; b;</div><div class=\"line\">  &#125;)[<span class=\"number\">0</span>];</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> maxHeight = getMaxinumHeight(cards);</div><div class=\"line\">cards.forEach(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</div><div class=\"line\"></div><div class=\"line\">  value.style.height = maxHeight + <span class=\"string\">'px'</span>;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"Table-is-new-sexy\"><a href=\"#Table-is-new-sexy\" class=\"headerlink\" title=\"Table is new sexy\"></a>Table is new sexy</h3><p>雖然古老的 table 排版已經被唾棄，不過像是等高這種場景，如果不幸無法使用 flex 時，可以利用 table 的特性來達成等高排版。</p>\n<p>要完成 table 排版，可以使用 <code>display: table</code>, <code>display:table-row</code>, <code>display: table-cell</code>，來完成。</p>\n<p><code>display: table</code> 等同於 <code>&lt;table&gt;</code>；<code>display: table-row</code> 等同於 <code>&lt;tr&gt;</code>；<code>display: table-cell</code> 等同於 <code>&lt;td&gt;</code>。</p>\n<iframe height=\"265\" scrolling=\"no\" title=\"table-height\" src=\"//codepen.io/kjj6198/embed/evpxjx/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"http://codepen.io/kjj6198/pen/evpxjx/\" target=\"_blank\" rel=\"external\">table-height</a> by 愷開 (<a href=\"http://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"http://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.<br></iframe>\n\n<p>不過，雖然能夠達到等高的效果，但 HTML 的 markup 變得更複雜了。而且 table 在使用上仍然有一些限制，像是 margin 沒辦法在 <code>table</code> 裡頭生效等等，這些在實作 mockup 時都是很大的阻礙。所以，如果能夠用 flex 來做的話，就盡量使用 flex 吧！</p>\n<h3 id=\"延伸閱讀\"><a href=\"#延伸閱讀\" class=\"headerlink\" title=\"延伸閱讀\"></a>延伸閱讀</h3><p><a href=\"http://osvaldas.info/flexbox-based-responsive-equal-height-blocks-with-javascript-fallback\" target=\"_blank\" rel=\"external\">Flexbox responsive equal height</a></p>\n"},{"title":"smooth animation - （下）easing 的使用","date":"2016-10-13T09:06:19.000Z","_content":"\n\n但是，為什麼感覺動畫那麼不自然呢？\n\n有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態**逐漸加速**，再從移動的狀態中**逐漸停止**。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，**物體的移動速度並非成線性變化**，這是造成我們動畫看起來不自然的主要原因。\n\n知道了原理之後，就可以馬上來實作了：\n\n- 計算距離\n- 重新計算每一次的位移 = 距離 * 比例係數（easing）\n\n把我們原本的 `function` 改寫成這樣：\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) \n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    var p = currentTime / t;\n    var d = Math.cos(Math.PI * pos) - 1); // 利用 cos 函數，重新計算移動的位置。\n    \n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * d);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 [easing.js](https://github.com/danro/easing-js/blob/master/easing.js) 看看，這裡蒐藏了很多 `ease` 效果。\n\n### 小結\n\n原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。\n\n不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。\n\n","source":"_posts/scroll-animation-2.md","raw":"---\ntitle: smooth animation - （下）easing 的使用\ndate: 2016-10-13 17:06:19\ncategories: 前端\ntags:\n  - smooth scoll\n  - animation\n  - easing\n---\n\n\n但是，為什麼感覺動畫那麼不自然呢？\n\n有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態**逐漸加速**，再從移動的狀態中**逐漸停止**。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，**物體的移動速度並非成線性變化**，這是造成我們動畫看起來不自然的主要原因。\n\n知道了原理之後，就可以馬上來實作了：\n\n- 計算距離\n- 重新計算每一次的位移 = 距離 * 比例係數（easing）\n\n把我們原本的 `function` 改寫成這樣：\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) \n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    var p = currentTime / t;\n    var d = Math.cos(Math.PI * pos) - 1); // 利用 cos 函數，重新計算移動的位置。\n    \n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * d);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 [easing.js](https://github.com/danro/easing-js/blob/master/easing.js) 看看，這裡蒐藏了很多 `ease` 效果。\n\n### 小結\n\n原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。\n\n不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。\n\n","slug":"scroll-animation-2","published":1,"updated":"2016-10-19T06:20:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeits4002iiw5txxenhmg9","content":"<p>但是，為什麼感覺動畫那麼不自然呢？</p>\n<p>有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態<strong>逐漸加速</strong>，再從移動的狀態中<strong>逐漸停止</strong>。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，<strong>物體的移動速度並非成線性變化</strong>，這是造成我們動畫看起來不自然的主要原因。</p>\n<p>知道了原理之後，就可以馬上來實作了：</p>\n<ul>\n<li>計算距離</li>\n<li>重新計算每一次的位移 = 距離 * 比例係數（easing）</li>\n</ul>\n<p>把我們原本的 <code>function</code> 改寫成這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) </span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">var</span> d = <span class=\"built_in\">Math</span>.cos(<span class=\"built_in\">Math</span>.PI * pos) - <span class=\"number\">1</span>); <span class=\"comment\">// 利用 cos 函數，重新計算移動的位置。</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * d);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 <a href=\"https://github.com/danro/easing-js/blob/master/easing.js\" target=\"_blank\" rel=\"external\">easing.js</a> 看看，這裡蒐藏了很多 <code>ease</code> 效果。</p>\n<h3 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h3><p>原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。</p>\n<p>不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>但是，為什麼感覺動畫那麼不自然呢？</p>\n<p>有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態<strong>逐漸加速</strong>，再從移動的狀態中<strong>逐漸停止</strong>。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，<strong>物體的移動速度並非成線性變化</strong>，這是造成我們動畫看起來不自然的主要原因。</p>\n<p>知道了原理之後，就可以馬上來實作了：</p>\n<ul>\n<li>計算距離</li>\n<li>重新計算每一次的位移 = 距離 * 比例係數（easing）</li>\n</ul>\n<p>把我們原本的 <code>function</code> 改寫成這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) </span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">var</span> d = <span class=\"built_in\">Math</span>.cos(<span class=\"built_in\">Math</span>.PI * pos) - <span class=\"number\">1</span>); <span class=\"comment\">// 利用 cos 函數，重新計算移動的位置。</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * d);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 <a href=\"https://github.com/danro/easing-js/blob/master/easing.js\" target=\"_blank\" rel=\"external\">easing.js</a> 看看，這裡蒐藏了很多 <code>ease</code> 效果。</p>\n<h3 id=\"小結\"><a href=\"#小結\" class=\"headerlink\" title=\"小結\"></a>小結</h3><p>原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。</p>\n<p>不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。</p>\n"},{"title":"smooth scroll","date":"2016-10-12T09:06:19.000Z","_content":"\n在 window 物件當中，提供了 `scrollTo(x, y)` 的方法，我們可以透過 `scrollTo` 來操作滾動。但， scrollTo 方法是直接讓滾動軸移到指定的位置，並沒有動畫的效果，如果要藉由動畫的幫助達到良好的使用者體驗，我們必須自己設計。\n\n## 基本動畫知識\n\n在開始之前先來讓我們了解一下動畫的基礎吧！\n\n動畫最基本的要素有這些：\n\n- 時間 = 距離（位移）/ 速度\n- 位移 = 速度 * 時間\n- 速度 = 距離 / 時間\n\n有了這些基礎知識就可以來製作簡單的動畫效果了。\n\n### 第一次嘗試\n\n我們要做的事是要讓 scroll 能夠用動畫的方式滑到自己想要的地方。所以，在本例當中，`scrollTo(x, y)` 將會是我們的`位移`。速度的話，我們先暫定是 200ms 吧！\n\n```javascript\n/* */\nfunction moveScrollY(targetY, speed) {\n  const speed = 200;\n  const scrollY = window.scrollY || window.pageYOffset;\n  scrollTo(0, scrollY + (targetY - scrollY) * t);\n}\n```\n\n咦？這個 t 是 `undefined` 吧？\n\n在定義 t(time) 之前，我們先來思考 t 應該要是什麼。根據剛剛的公式，時間 = 距離 / 速度，所以在本例當中，t 為 `targetY - scrollY / speed`。這樣寫的話如果 scrollY 大於 targetY 的話時間就會為負了，所以這邊我們要取絕對值。\n\n```javascript\n/* */\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.abs((targetY - scrollY) / speed);\n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    p = currentTime / t;\n    scrollTo(0, scrollY + (targetY - scrollY) * p);\n    setTimeout(move, 1000/60);\n  }\n  move();\n}\n```\n\n到目前為止，我們的 scroll 動畫雛形已經出來，不過存在一些問題：\n\n- 距離太遠的時候，動畫的時間顯得有點長\n- 這個動畫不會停\n\n現在我們來改善一下 scroll 的動畫。\n\n### 距離太遠\n\n顯然如果距離太遠時，動畫完成的時間會變得更長，所以我們需要限制一下 t 的範圍。\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) 以下\n}\n```\n\n這樣子好多了，在距離太遠時，動畫不會顯得太慢。\n\n\n\n### 動畫不會停\n\n在程式碼當中，因為沒有設定停止條件，所以會無止盡的延續下去。[芝諾悖論](https://www.wikiwand.com/zh-tw/%E8%8A%9D%E8%AF%BA%E6%82%96%E8%AE%BA)\n\n怎樣才算是完成了呢？這邊的終止條件是目前的時間（禎數）等於 t 的時候，就算終止了。\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) 以下\n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    p = currentTime / t;\n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * p);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們將 `setTimeout` 取代成 `requestAnimationFrame`，requestAnimation 跟 setTimeout 的差別在於使用 `requestAnimationFrame` 時，瀏覽器會幫我們做最佳化，在不必要的時候不會進行重繪，達到節省資源的效果。\n\n目前主流瀏覽器都已經支援了（主流當然不包含 IE8 囉！）\n\n但是，為什麼感覺動畫那麼不自然呢？\n\n有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態**逐漸加速**，再從移動的狀態中**逐漸停止**。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，**物體的移動速度並非成線性變化**，這是造成我們動畫看起來不自然的主要原因。\n\n知道了原理之後，就可以馬上來實作了：\n\n- 計算距離\n- 重新計算每一次的位移 = 距離 * 比例係數（easing）\n\n把我們原本的 `function` 改寫成這樣：\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) \n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    var p = currentTime / t;\n    var d = Math.cos(Math.PI * pos) - 1); // 利用 cos 函數，重新計算移動的位置。\n    \n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * d);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 [easing.js](https://github.com/danro/easing-js/blob/master/easing.js) 看看，這裡蒐藏了很多 `ease` 效果。\n\n## 結論\n\n這邊很簡略地用 scroll 的 API 當作範例，介紹了動畫的基礎。當然還動畫的原理跟使用，又是另外一門深奧的學問了。\n\n到目前爲止，我們的 scroll 動畫就算完成了，但因為位移是線性移動，看起來比較不自然一點，下一篇文章，再來介紹 ease 的概念，讓我們 scroller 變得更 smooth。\n\n原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。\n\n不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。\n","source":"_posts/scroll-animation.md","raw":"---\ntitle: smooth scroll\ndate: 2016-10-12 17:06:19\ncategory: 前端\ntags:\n  - scroll\n---\n\n在 window 物件當中，提供了 `scrollTo(x, y)` 的方法，我們可以透過 `scrollTo` 來操作滾動。但， scrollTo 方法是直接讓滾動軸移到指定的位置，並沒有動畫的效果，如果要藉由動畫的幫助達到良好的使用者體驗，我們必須自己設計。\n\n## 基本動畫知識\n\n在開始之前先來讓我們了解一下動畫的基礎吧！\n\n動畫最基本的要素有這些：\n\n- 時間 = 距離（位移）/ 速度\n- 位移 = 速度 * 時間\n- 速度 = 距離 / 時間\n\n有了這些基礎知識就可以來製作簡單的動畫效果了。\n\n### 第一次嘗試\n\n我們要做的事是要讓 scroll 能夠用動畫的方式滑到自己想要的地方。所以，在本例當中，`scrollTo(x, y)` 將會是我們的`位移`。速度的話，我們先暫定是 200ms 吧！\n\n```javascript\n/* */\nfunction moveScrollY(targetY, speed) {\n  const speed = 200;\n  const scrollY = window.scrollY || window.pageYOffset;\n  scrollTo(0, scrollY + (targetY - scrollY) * t);\n}\n```\n\n咦？這個 t 是 `undefined` 吧？\n\n在定義 t(time) 之前，我們先來思考 t 應該要是什麼。根據剛剛的公式，時間 = 距離 / 速度，所以在本例當中，t 為 `targetY - scrollY / speed`。這樣寫的話如果 scrollY 大於 targetY 的話時間就會為負了，所以這邊我們要取絕對值。\n\n```javascript\n/* */\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.abs((targetY - scrollY) / speed);\n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    p = currentTime / t;\n    scrollTo(0, scrollY + (targetY - scrollY) * p);\n    setTimeout(move, 1000/60);\n  }\n  move();\n}\n```\n\n到目前為止，我們的 scroll 動畫雛形已經出來，不過存在一些問題：\n\n- 距離太遠的時候，動畫的時間顯得有點長\n- 這個動畫不會停\n\n現在我們來改善一下 scroll 的動畫。\n\n### 距離太遠\n\n顯然如果距離太遠時，動畫完成的時間會變得更長，所以我們需要限制一下 t 的範圍。\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) 以下\n}\n```\n\n這樣子好多了，在距離太遠時，動畫不會顯得太慢。\n\n\n\n### 動畫不會停\n\n在程式碼當中，因為沒有設定停止條件，所以會無止盡的延續下去。[芝諾悖論](https://www.wikiwand.com/zh-tw/%E8%8A%9D%E8%AF%BA%E6%82%96%E8%AE%BA)\n\n怎樣才算是完成了呢？這邊的終止條件是目前的時間（禎數）等於 t 的時候，就算終止了。\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) 以下\n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    p = currentTime / t;\n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * p);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們將 `setTimeout` 取代成 `requestAnimationFrame`，requestAnimation 跟 setTimeout 的差別在於使用 `requestAnimationFrame` 時，瀏覽器會幫我們做最佳化，在不必要的時候不會進行重繪，達到節省資源的效果。\n\n目前主流瀏覽器都已經支援了（主流當然不包含 IE8 囉！）\n\n但是，為什麼感覺動畫那麼不自然呢？\n\n有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態**逐漸加速**，再從移動的狀態中**逐漸停止**。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，**物體的移動速度並非成線性變化**，這是造成我們動畫看起來不自然的主要原因。\n\n知道了原理之後，就可以馬上來實作了：\n\n- 計算距離\n- 重新計算每一次的位移 = 距離 * 比例係數（easing）\n\n把我們原本的 `function` 改寫成這樣：\n\n```javascript\nfunction moveScrollY(targetY, speed) {\n  const scrollY = window.scrollY || window.pageYOffset;\n  const t = Math.min(0.5, Math.abs((targetY - scrollY) / speed)); // 將時間限制在 0.5(500ms) \n  let currentTime = 0;\n  \n  function move() {\n    currentTime += 1 / 60;\n    var p = currentTime / t;\n    var d = Math.cos(Math.PI * pos) - 1); // 利用 cos 函數，重新計算移動的位置。\n    \n    if (p < 1) {\n      scrollTo(0, scrollY + (targetY - scrollY) * d);\n      requestAnimationFrame(move); // 採用 requestAnimationFrame\n    } else {\n      scrollTo(0, targetY);\n      alert('done');\n    }\n  }\n  move();\n}\n```\n\n這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 [easing.js](https://github.com/danro/easing-js/blob/master/easing.js) 看看，這裡蒐藏了很多 `ease` 效果。\n\n## 結論\n\n這邊很簡略地用 scroll 的 API 當作範例，介紹了動畫的基礎。當然還動畫的原理跟使用，又是另外一門深奧的學問了。\n\n到目前爲止，我們的 scroll 動畫就算完成了，但因為位移是線性移動，看起來比較不自然一點，下一篇文章，再來介紹 ease 的概念，讓我們 scroller 變得更 smooth。\n\n原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。\n\n不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。\n","slug":"scroll-animation","published":1,"updated":"2016-10-19T06:21:04.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeits6002liw5tywnsklpu","content":"<p>在 window 物件當中，提供了 <code>scrollTo(x, y)</code> 的方法，我們可以透過 <code>scrollTo</code> 來操作滾動。但， scrollTo 方法是直接讓滾動軸移到指定的位置，並沒有動畫的效果，如果要藉由動畫的幫助達到良好的使用者體驗，我們必須自己設計。</p>\n<h2 id=\"基本動畫知識\"><a href=\"#基本動畫知識\" class=\"headerlink\" title=\"基本動畫知識\"></a>基本動畫知識</h2><p>在開始之前先來讓我們了解一下動畫的基礎吧！</p>\n<p>動畫最基本的要素有這些：</p>\n<ul>\n<li>時間 = 距離（位移）/ 速度</li>\n<li>位移 = 速度 * 時間</li>\n<li>速度 = 距離 / 時間</li>\n</ul>\n<p>有了這些基礎知識就可以來製作簡單的動畫效果了。</p>\n<h3 id=\"第一次嘗試\"><a href=\"#第一次嘗試\" class=\"headerlink\" title=\"第一次嘗試\"></a>第一次嘗試</h3><p>我們要做的事是要讓 scroll 能夠用動畫的方式滑到自己想要的地方。所以，在本例當中，<code>scrollTo(x, y)</code> 將會是我們的<code>位移</code>。速度的話，我們先暫定是 200ms 吧！</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> speed = <span class=\"number\">200</span>;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * t);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>咦？這個 t 是 <code>undefined</code> 吧？</p>\n<p>在定義 t(time) 之前，我們先來思考 t 應該要是什麼。根據剛剛的公式，時間 = 距離 / 速度，所以在本例當中，t 為 <code>targetY - scrollY / speed</code>。這樣寫的話如果 scrollY 大於 targetY 的話時間就會為負了，所以這邊我們要取絕對值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed);</div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    p = currentTime / t;</div><div class=\"line\">    scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * p);</div><div class=\"line\">    setTimeout(move, <span class=\"number\">1000</span>/<span class=\"number\">60</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>到目前為止，我們的 scroll 動畫雛形已經出來，不過存在一些問題：</p>\n<ul>\n<li>距離太遠的時候，動畫的時間顯得有點長</li>\n<li>這個動畫不會停</li>\n</ul>\n<p>現在我們來改善一下 scroll 的動畫。</p>\n<h3 id=\"距離太遠\"><a href=\"#距離太遠\" class=\"headerlink\" title=\"距離太遠\"></a>距離太遠</h3><p>顯然如果距離太遠時，動畫完成的時間會變得更長，所以我們需要限制一下 t 的範圍。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) 以下</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣子好多了，在距離太遠時，動畫不會顯得太慢。</p>\n<h3 id=\"動畫不會停\"><a href=\"#動畫不會停\" class=\"headerlink\" title=\"動畫不會停\"></a>動畫不會停</h3><p>在程式碼當中，因為沒有設定停止條件，所以會無止盡的延續下去。<a href=\"https://www.wikiwand.com/zh-tw/%E8%8A%9D%E8%AF%BA%E6%82%96%E8%AE%BA\" target=\"_blank\" rel=\"external\">芝諾悖論</a></p>\n<p>怎樣才算是完成了呢？這邊的終止條件是目前的時間（禎數）等於 t 的時候，就算終止了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) 以下</span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * p);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們將 <code>setTimeout</code> 取代成 <code>requestAnimationFrame</code>，requestAnimation 跟 setTimeout 的差別在於使用 <code>requestAnimationFrame</code> 時，瀏覽器會幫我們做最佳化，在不必要的時候不會進行重繪，達到節省資源的效果。</p>\n<p>目前主流瀏覽器都已經支援了（主流當然不包含 IE8 囉！）</p>\n<p>但是，為什麼感覺動畫那麼不自然呢？</p>\n<p>有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態<strong>逐漸加速</strong>，再從移動的狀態中<strong>逐漸停止</strong>。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，<strong>物體的移動速度並非成線性變化</strong>，這是造成我們動畫看起來不自然的主要原因。</p>\n<p>知道了原理之後，就可以馬上來實作了：</p>\n<ul>\n<li>計算距離</li>\n<li>重新計算每一次的位移 = 距離 * 比例係數（easing）</li>\n</ul>\n<p>把我們原本的 <code>function</code> 改寫成這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) </span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">var</span> d = <span class=\"built_in\">Math</span>.cos(<span class=\"built_in\">Math</span>.PI * pos) - <span class=\"number\">1</span>); <span class=\"comment\">// 利用 cos 函數，重新計算移動的位置。</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * d);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 <a href=\"https://github.com/danro/easing-js/blob/master/easing.js\" target=\"_blank\" rel=\"external\">easing.js</a> 看看，這裡蒐藏了很多 <code>ease</code> 效果。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這邊很簡略地用 scroll 的 API 當作範例，介紹了動畫的基礎。當然還動畫的原理跟使用，又是另外一門深奧的學問了。</p>\n<p>到目前爲止，我們的 scroll 動畫就算完成了，但因為位移是線性移動，看起來比較不自然一點，下一篇文章，再來介紹 ease 的概念，讓我們 scroller 變得更 smooth。</p>\n<p>原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。</p>\n<p>不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>在 window 物件當中，提供了 <code>scrollTo(x, y)</code> 的方法，我們可以透過 <code>scrollTo</code> 來操作滾動。但， scrollTo 方法是直接讓滾動軸移到指定的位置，並沒有動畫的效果，如果要藉由動畫的幫助達到良好的使用者體驗，我們必須自己設計。</p>\n<h2 id=\"基本動畫知識\"><a href=\"#基本動畫知識\" class=\"headerlink\" title=\"基本動畫知識\"></a>基本動畫知識</h2><p>在開始之前先來讓我們了解一下動畫的基礎吧！</p>\n<p>動畫最基本的要素有這些：</p>\n<ul>\n<li>時間 = 距離（位移）/ 速度</li>\n<li>位移 = 速度 * 時間</li>\n<li>速度 = 距離 / 時間</li>\n</ul>\n<p>有了這些基礎知識就可以來製作簡單的動畫效果了。</p>\n<h3 id=\"第一次嘗試\"><a href=\"#第一次嘗試\" class=\"headerlink\" title=\"第一次嘗試\"></a>第一次嘗試</h3><p>我們要做的事是要讓 scroll 能夠用動畫的方式滑到自己想要的地方。所以，在本例當中，<code>scrollTo(x, y)</code> 將會是我們的<code>位移</code>。速度的話，我們先暫定是 200ms 吧！</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> speed = <span class=\"number\">200</span>;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * t);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>咦？這個 t 是 <code>undefined</code> 吧？</p>\n<p>在定義 t(time) 之前，我們先來思考 t 應該要是什麼。根據剛剛的公式，時間 = 距離 / 速度，所以在本例當中，t 為 <code>targetY - scrollY / speed</code>。這樣寫的話如果 scrollY 大於 targetY 的話時間就會為負了，所以這邊我們要取絕對值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed);</div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    p = currentTime / t;</div><div class=\"line\">    scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * p);</div><div class=\"line\">    setTimeout(move, <span class=\"number\">1000</span>/<span class=\"number\">60</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>到目前為止，我們的 scroll 動畫雛形已經出來，不過存在一些問題：</p>\n<ul>\n<li>距離太遠的時候，動畫的時間顯得有點長</li>\n<li>這個動畫不會停</li>\n</ul>\n<p>現在我們來改善一下 scroll 的動畫。</p>\n<h3 id=\"距離太遠\"><a href=\"#距離太遠\" class=\"headerlink\" title=\"距離太遠\"></a>距離太遠</h3><p>顯然如果距離太遠時，動畫完成的時間會變得更長，所以我們需要限制一下 t 的範圍。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) 以下</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這樣子好多了，在距離太遠時，動畫不會顯得太慢。</p>\n<h3 id=\"動畫不會停\"><a href=\"#動畫不會停\" class=\"headerlink\" title=\"動畫不會停\"></a>動畫不會停</h3><p>在程式碼當中，因為沒有設定停止條件，所以會無止盡的延續下去。<a href=\"https://www.wikiwand.com/zh-tw/%E8%8A%9D%E8%AF%BA%E6%82%96%E8%AE%BA\" target=\"_blank\" rel=\"external\">芝諾悖論</a></p>\n<p>怎樣才算是完成了呢？這邊的終止條件是目前的時間（禎數）等於 t 的時候，就算終止了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) 以下</span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * p);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們將 <code>setTimeout</code> 取代成 <code>requestAnimationFrame</code>，requestAnimation 跟 setTimeout 的差別在於使用 <code>requestAnimationFrame</code> 時，瀏覽器會幫我們做最佳化，在不必要的時候不會進行重繪，達到節省資源的效果。</p>\n<p>目前主流瀏覽器都已經支援了（主流當然不包含 IE8 囉！）</p>\n<p>但是，為什麼感覺動畫那麼不自然呢？</p>\n<p>有沒有發現，時間與距離是完全呈現線性變化的，這代表我們假設這個物體在所有的時間點，速度都是相同的。真實生活中通常不會有這樣的事情發生，物體一定都是從靜止狀態<strong>逐漸加速</strong>，再從移動的狀態中<strong>逐漸停止</strong>。而上一篇的範例當中，動畫是突然開始，突然停止。在現實生活中，<strong>物體的移動速度並非成線性變化</strong>，這是造成我們動畫看起來不自然的主要原因。</p>\n<p>知道了原理之後，就可以馬上來實作了：</p>\n<ul>\n<li>計算距離</li>\n<li>重新計算每一次的位移 = 距離 * 比例係數（easing）</li>\n</ul>\n<p>把我們原本的 <code>function</code> 改寫成這樣：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">moveScrollY</span>(<span class=\"params\">targetY, speed</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> scrollY = <span class=\"built_in\">window</span>.scrollY || <span class=\"built_in\">window</span>.pageYOffset;</div><div class=\"line\">  <span class=\"keyword\">const</span> t = <span class=\"built_in\">Math</span>.min(<span class=\"number\">0.5</span>, <span class=\"built_in\">Math</span>.abs((targetY - scrollY) / speed)); <span class=\"comment\">// 將時間限制在 0.5(500ms) </span></div><div class=\"line\">  <span class=\"keyword\">let</span> currentTime = <span class=\"number\">0</span>;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    currentTime += <span class=\"number\">1</span> / <span class=\"number\">60</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> p = currentTime / t;</div><div class=\"line\">    <span class=\"keyword\">var</span> d = <span class=\"built_in\">Math</span>.cos(<span class=\"built_in\">Math</span>.PI * pos) - <span class=\"number\">1</span>); <span class=\"comment\">// 利用 cos 函數，重新計算移動的位置。</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> (p &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, scrollY + (targetY - scrollY) * d);</div><div class=\"line\">      requestAnimationFrame(move); <span class=\"comment\">// 採用 requestAnimationFrame</span></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      scrollTo(<span class=\"number\">0</span>, targetY);</div><div class=\"line\">      alert(<span class=\"string\">'done'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  move();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>這邊我們加上了一個簡單的 cos 函數，重新計算位移的位置，達到 easing 的效果。詳細 easing 效果，可以到 <a href=\"https://github.com/danro/easing-js/blob/master/easing.js\" target=\"_blank\" rel=\"external\">easing.js</a> 看看，這裡蒐藏了很多 <code>ease</code> 效果。</p>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>這邊很簡略地用 scroll 的 API 當作範例，介紹了動畫的基礎。當然還動畫的原理跟使用，又是另外一門深奧的學問了。</p>\n<p>到目前爲止，我們的 scroll 動畫就算完成了，但因為位移是線性移動，看起來比較不自然一點，下一篇文章，再來介紹 ease 的概念，讓我們 scroller 變得更 smooth。</p>\n<p>原本以為篇幅很長，不過基本的動畫原理的確只有這樣而已，加上了 easing 之後，動畫的效果看起來自然很多，當然，你也可以依照自己的經驗調整參數，達到更完美的使用者體驗。</p>\n<p>不過，如果可以，盡量不要綁架使用者預設的滾動效果，一來可能會造成效能的問題，二來你綁定的滾動效果如果沒有依照使用者預期反應的話，很容易造成非常差的體驗。</p>\n"},{"title":"如何設計 user friendly 的 table","_content":"\n> 認清一件事實，table 是拿來看，不是被當作絢麗的視覺使用的\n\n最近在後台頻繁有使用表格的需求，如何設計對使用者良好的 table 是一項挑戰，尤其在資料筆數多、欄位多的情況下，使用者很容易就會被額外的元素吸引。\n\n而在現代 `div` 排版盛行的影響下，使用 table 很容易就被當成二流的前端工程師。\n\n其實對於呈現資料上，table 仍然是個相當有效的排版方式，且他們具有的特色可以幫助我們排版更加輕鬆。\n\n## HTML 中的 table\n\n在 HTML 當中 table 由幾個標籤組成：\n\n* `thead`：定義表頭標題\n  * `tr`：定義表頭的 row\n  * `th`：定義標題\n* `tbody`：定義表格內容\n* `tfoot`：定義表格的結尾部份\n\n## 盡量不要拉滿整個 table 寬度\n\n讓 table 當中內容自行決定寬度。如果拉滿寬度的話，使用者很容易因為兩個 column 之間的距離間隔太長而不容易閱讀。\n\n## 選擇顯示欄位\n\n如果資料的欄位太多（例如超過 10 個以上），可以透過 checkbox 等方式讓使用者選擇希望顯示的欄位。\n\n## 加入 `<caption>`\n\n在表格當中可以加入 `<caption>`，方便標注表格的 title。例如：\n\n```html\n<table>\n  <caption>\n    <h4>出帳列表</h4>\n  </caption>\n  <thead>\n    <tr>\n      <th>日期</th>\n      <th>姓名</th>\n      <th>人口</th>\n      <th>年紀</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2017-11-11</td>\n      <td>kalan.chen</td>\n      <td>12375</td>\n      <td>22</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n透過 `caption-side: top | bottom` 可以做定位。\n\n```css\ncaption {\n  caption-side: top;\n}\n```\n\n\n\n![](https://cdn-images-1.medium.com/max/2000/1*J7yBJAKumOucYIDsRAUa1g.png)\n\n## 移除不必要的顏色與 border\n\n![](https://cdn-images-1.medium.com/max/2000/1*5469jk5PDIYQMJq69DWgog.png)\n\n雖然乍看之下色彩繽紛，但對於使用者來說，border 和背景顏色都可能造成視覺雜訊，雖然是看似貼心的設計，但可能難以找到想要的資料。\n\n使用簡單的灰階做辨識，並消除（或者調淡）邊界的顏色，去除不必要的視覺雜訊，讓使用者更容易找到資料。\n\n## 表頭跟內容對齊\n\n一般來說文字會靠左對齊，而數字則是靠右對齊。\n\n## 提供簡單的排序與搜尋\n\n對於後台來說，使用者可能會頻繁搜尋表格內的資料，一個方式是每次都用 ajax 請求更新資料，或者在前端實作。我們可以提供簡單的排序功能，方便使用者快速地找到資料，或是提供簡易的搜尋功能。\n\n題外話：排序其實可以直接使用 `element.appendChild` 來做，如果 appendChild 的節點已經出現在 parent 當中，會直接替換位置而不會加入一個新的 node。\n\n{% raw %}\n<iframe height='500' scrolling='no' title='table sort' src='//codepen.io/kjj6198/embed/qXgQdL/?height=265&theme-id=0&default-tab=js,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/kjj6198/pen/qXgQdL/'>table sort</a> by 愷開 (<a href='https://codepen.io/kjj6198'>@kjj6198</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n{% endraw %}\n\n\n## 考慮簡單的 @print\n\n對於像是出帳系統、記錄等等，營運人員除了在網頁上觀看外，也有可能需要將表格內容列印下來，這時可以使用 `@media print` 的方式處理列印的細節，例如 font-size 的設定可能要用 `pt` 表示、將顏色改為黑白、縮短間距等等，都是需要考慮的細節。\n\n## reponsive\n\n傳統的 table 在做手機版支援時，通常是使用水平滾動的方式來顯示。不過在手機上頻繁滾動對使用者來說仍然不是個理想的操作。\n\n可以利用 data attribute 搭配 CSS 的 pseudo 完成。在手機上，我們將每一個 row 的顯示改為垂直。像這樣：\n\n```html\n<table>\n  <caption>付款紀錄</caption>\n  <thead>\n    <tr>\n      <th>方案內容</th>\n      <th>金額</th>\n      <th>數量</th>\n      <th>贊助日期</th>\n      <th>贊助狀態</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\">付款成功</td>\n    </tr>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\" data-status=\"success\">付款成功</td>\n    </tr>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\" data-status=\"fail\">付款失敗\n        <div class=\"repay-information\">\n          <button>重新付款</button>\n          <button>刪除紀錄</button>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n```\n\n\n\n![](https://cdn-images-1.medium.com/max/1000/1*fr66cE0Lh50irSlVsvIHfw.png)\n\n轉為\n\n![](https://cdn-images-1.medium.com/max/1000/1*k73_3ve_SiW7D2QBqXwlGQ.png)\n\n這樣即使在手機上也不需要滾動了。\n\n{% raw %}\n<iframe height='500' scrolling='no' title='responsive-table' src='//codepen.io/kjj6198/embed/oBZweY/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/kjj6198/pen/oBZweY/'>responsive-table</a> by 愷開 (<a href='https://codepen.io/kjj6198'>@kjj6198</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n{% endraw %}\n\n\n```scss\ntable {\n  width: 100%;\n  font-family: \"PingFang TC\";\n  td { text-align: cetner; }\n   \n}\n\n@media screen and (max-width: 500px) {\n  table > thead {\n    border: 0;\n    display: none;\n    position: absolute;\n  }\n  tbody tr {\n    border: 1px solid #aaa;\n    margin-bottom: 1em;\n    display: block;\n  }\n  \n  td:first-child {\n    display: block;\n    font-weight: bold;\n    text-align: center;\n  }\n  \n  td:not(:first-child) { \n    margin-top: 1em;\n    margin-bottom: 1em;\n    display: block;\n    text-align: right;\n    &:before {\n      float: left;\n      content: attr(data-label);\n    }\n  }\n}\n```\n\n## 結論\n\ntable 在資料呈現上相當方便，寬度的計算、等高都已經幫我們實作完成，在製作後台時，table 也幾乎是觀看資料時不可或缺的排版之一。\n\ntable 的設計上也有一些眉角可以注意，本篇文章提供了幾個製作 table 時需要注意的地方以及簡單的實作，未來如果有其他事項也會逐一加入。\n\n\n\n","source":"_posts/user-friendly-table.md","raw":"---\ntitle: 如何設計 user friendly 的 table\ncategories: 前端\ntags:\n  - table\n  - CSS\n---\n\n> 認清一件事實，table 是拿來看，不是被當作絢麗的視覺使用的\n\n最近在後台頻繁有使用表格的需求，如何設計對使用者良好的 table 是一項挑戰，尤其在資料筆數多、欄位多的情況下，使用者很容易就會被額外的元素吸引。\n\n而在現代 `div` 排版盛行的影響下，使用 table 很容易就被當成二流的前端工程師。\n\n其實對於呈現資料上，table 仍然是個相當有效的排版方式，且他們具有的特色可以幫助我們排版更加輕鬆。\n\n## HTML 中的 table\n\n在 HTML 當中 table 由幾個標籤組成：\n\n* `thead`：定義表頭標題\n  * `tr`：定義表頭的 row\n  * `th`：定義標題\n* `tbody`：定義表格內容\n* `tfoot`：定義表格的結尾部份\n\n## 盡量不要拉滿整個 table 寬度\n\n讓 table 當中內容自行決定寬度。如果拉滿寬度的話，使用者很容易因為兩個 column 之間的距離間隔太長而不容易閱讀。\n\n## 選擇顯示欄位\n\n如果資料的欄位太多（例如超過 10 個以上），可以透過 checkbox 等方式讓使用者選擇希望顯示的欄位。\n\n## 加入 `<caption>`\n\n在表格當中可以加入 `<caption>`，方便標注表格的 title。例如：\n\n```html\n<table>\n  <caption>\n    <h4>出帳列表</h4>\n  </caption>\n  <thead>\n    <tr>\n      <th>日期</th>\n      <th>姓名</th>\n      <th>人口</th>\n      <th>年紀</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>2017-11-11</td>\n      <td>kalan.chen</td>\n      <td>12375</td>\n      <td>22</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n透過 `caption-side: top | bottom` 可以做定位。\n\n```css\ncaption {\n  caption-side: top;\n}\n```\n\n\n\n![](https://cdn-images-1.medium.com/max/2000/1*J7yBJAKumOucYIDsRAUa1g.png)\n\n## 移除不必要的顏色與 border\n\n![](https://cdn-images-1.medium.com/max/2000/1*5469jk5PDIYQMJq69DWgog.png)\n\n雖然乍看之下色彩繽紛，但對於使用者來說，border 和背景顏色都可能造成視覺雜訊，雖然是看似貼心的設計，但可能難以找到想要的資料。\n\n使用簡單的灰階做辨識，並消除（或者調淡）邊界的顏色，去除不必要的視覺雜訊，讓使用者更容易找到資料。\n\n## 表頭跟內容對齊\n\n一般來說文字會靠左對齊，而數字則是靠右對齊。\n\n## 提供簡單的排序與搜尋\n\n對於後台來說，使用者可能會頻繁搜尋表格內的資料，一個方式是每次都用 ajax 請求更新資料，或者在前端實作。我們可以提供簡單的排序功能，方便使用者快速地找到資料，或是提供簡易的搜尋功能。\n\n題外話：排序其實可以直接使用 `element.appendChild` 來做，如果 appendChild 的節點已經出現在 parent 當中，會直接替換位置而不會加入一個新的 node。\n\n{% raw %}\n<iframe height='500' scrolling='no' title='table sort' src='//codepen.io/kjj6198/embed/qXgQdL/?height=265&theme-id=0&default-tab=js,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/kjj6198/pen/qXgQdL/'>table sort</a> by 愷開 (<a href='https://codepen.io/kjj6198'>@kjj6198</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n{% endraw %}\n\n\n## 考慮簡單的 @print\n\n對於像是出帳系統、記錄等等，營運人員除了在網頁上觀看外，也有可能需要將表格內容列印下來，這時可以使用 `@media print` 的方式處理列印的細節，例如 font-size 的設定可能要用 `pt` 表示、將顏色改為黑白、縮短間距等等，都是需要考慮的細節。\n\n## reponsive\n\n傳統的 table 在做手機版支援時，通常是使用水平滾動的方式來顯示。不過在手機上頻繁滾動對使用者來說仍然不是個理想的操作。\n\n可以利用 data attribute 搭配 CSS 的 pseudo 完成。在手機上，我們將每一個 row 的顯示改為垂直。像這樣：\n\n```html\n<table>\n  <caption>付款紀錄</caption>\n  <thead>\n    <tr>\n      <th>方案內容</th>\n      <th>金額</th>\n      <th>數量</th>\n      <th>贊助日期</th>\n      <th>贊助狀態</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\">付款成功</td>\n    </tr>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\" data-status=\"success\">付款成功</td>\n    </tr>\n    <tr>\n      <td data-label=\"方案\">一枝草一點露，一人一百支持 TingChi</td>\n      <td data-label=\"金額\">$100</td>\n      <td data-label=\"數量\">1</td>\n      <td data-label=\"贊助日期\">2016-12-26</td>\n      <td data-label=\"贊助狀態\" data-status=\"fail\">付款失敗\n        <div class=\"repay-information\">\n          <button>重新付款</button>\n          <button>刪除紀錄</button>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n```\n\n\n\n![](https://cdn-images-1.medium.com/max/1000/1*fr66cE0Lh50irSlVsvIHfw.png)\n\n轉為\n\n![](https://cdn-images-1.medium.com/max/1000/1*k73_3ve_SiW7D2QBqXwlGQ.png)\n\n這樣即使在手機上也不需要滾動了。\n\n{% raw %}\n<iframe height='500' scrolling='no' title='responsive-table' src='//codepen.io/kjj6198/embed/oBZweY/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/kjj6198/pen/oBZweY/'>responsive-table</a> by 愷開 (<a href='https://codepen.io/kjj6198'>@kjj6198</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n{% endraw %}\n\n\n```scss\ntable {\n  width: 100%;\n  font-family: \"PingFang TC\";\n  td { text-align: cetner; }\n   \n}\n\n@media screen and (max-width: 500px) {\n  table > thead {\n    border: 0;\n    display: none;\n    position: absolute;\n  }\n  tbody tr {\n    border: 1px solid #aaa;\n    margin-bottom: 1em;\n    display: block;\n  }\n  \n  td:first-child {\n    display: block;\n    font-weight: bold;\n    text-align: center;\n  }\n  \n  td:not(:first-child) { \n    margin-top: 1em;\n    margin-bottom: 1em;\n    display: block;\n    text-align: right;\n    &:before {\n      float: left;\n      content: attr(data-label);\n    }\n  }\n}\n```\n\n## 結論\n\ntable 在資料呈現上相當方便，寬度的計算、等高都已經幫我們實作完成，在製作後台時，table 也幾乎是觀看資料時不可或缺的排版之一。\n\ntable 的設計上也有一些眉角可以注意，本篇文章提供了幾個製作 table 時需要注意的地方以及簡單的實作，未來如果有其他事項也會逐一加入。\n\n\n\n","slug":"user-friendly-table","published":1,"date":"2017-11-23T16:35:38.000Z","updated":"2017-12-17T06:39:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeits8002niw5tkx7e8z2t","content":"<blockquote>\n<p>認清一件事實，table 是拿來看，不是被當作絢麗的視覺使用的</p>\n</blockquote>\n<p>最近在後台頻繁有使用表格的需求，如何設計對使用者良好的 table 是一項挑戰，尤其在資料筆數多、欄位多的情況下，使用者很容易就會被額外的元素吸引。</p>\n<p>而在現代 <code>div</code> 排版盛行的影響下，使用 table 很容易就被當成二流的前端工程師。</p>\n<p>其實對於呈現資料上，table 仍然是個相當有效的排版方式，且他們具有的特色可以幫助我們排版更加輕鬆。</p>\n<h2 id=\"HTML-中的-table\"><a href=\"#HTML-中的-table\" class=\"headerlink\" title=\"HTML 中的 table\"></a>HTML 中的 table</h2><p>在 HTML 當中 table 由幾個標籤組成：</p>\n<ul>\n<li><code>thead</code>：定義表頭標題<ul>\n<li><code>tr</code>：定義表頭的 row</li>\n<li><code>th</code>：定義標題</li>\n</ul>\n</li>\n<li><code>tbody</code>：定義表格內容</li>\n<li><code>tfoot</code>：定義表格的結尾部份</li>\n</ul>\n<h2 id=\"盡量不要拉滿整個-table-寬度\"><a href=\"#盡量不要拉滿整個-table-寬度\" class=\"headerlink\" title=\"盡量不要拉滿整個 table 寬度\"></a>盡量不要拉滿整個 table 寬度</h2><p>讓 table 當中內容自行決定寬度。如果拉滿寬度的話，使用者很容易因為兩個 column 之間的距離間隔太長而不容易閱讀。</p>\n<h2 id=\"選擇顯示欄位\"><a href=\"#選擇顯示欄位\" class=\"headerlink\" title=\"選擇顯示欄位\"></a>選擇顯示欄位</h2><p>如果資料的欄位太多（例如超過 10 個以上），可以透過 checkbox 等方式讓使用者選擇希望顯示的欄位。</p>\n<h2 id=\"加入-lt-caption-gt\"><a href=\"#加入-lt-caption-gt\" class=\"headerlink\" title=\"加入 &lt;caption&gt;\"></a>加入 <code>&lt;caption&gt;</code></h2><p>在表格當中可以加入 <code>&lt;caption&gt;</code>，方便標注表格的 title。例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h4</span>&gt;</span>出帳列表<span class=\"tag\">&lt;/<span class=\"name\">h4</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>日期<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>姓名<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>人口<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>年紀<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>2017-11-11<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>kalan.chen<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>12375<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>22<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>透過 <code>caption-side: top | bottom</code> 可以做定位。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">caption</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">caption-side</span>: top;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*J7yBJAKumOucYIDsRAUa1g.png\" alt=\"\"></p>\n<h2 id=\"移除不必要的顏色與-border\"><a href=\"#移除不必要的顏色與-border\" class=\"headerlink\" title=\"移除不必要的顏色與 border\"></a>移除不必要的顏色與 border</h2><p><img src=\"https://cdn-images-1.medium.com/max/2000/1*5469jk5PDIYQMJq69DWgog.png\" alt=\"\"></p>\n<p>雖然乍看之下色彩繽紛，但對於使用者來說，border 和背景顏色都可能造成視覺雜訊，雖然是看似貼心的設計，但可能難以找到想要的資料。</p>\n<p>使用簡單的灰階做辨識，並消除（或者調淡）邊界的顏色，去除不必要的視覺雜訊，讓使用者更容易找到資料。</p>\n<h2 id=\"表頭跟內容對齊\"><a href=\"#表頭跟內容對齊\" class=\"headerlink\" title=\"表頭跟內容對齊\"></a>表頭跟內容對齊</h2><p>一般來說文字會靠左對齊，而數字則是靠右對齊。</p>\n<h2 id=\"提供簡單的排序與搜尋\"><a href=\"#提供簡單的排序與搜尋\" class=\"headerlink\" title=\"提供簡單的排序與搜尋\"></a>提供簡單的排序與搜尋</h2><p>對於後台來說，使用者可能會頻繁搜尋表格內的資料，一個方式是每次都用 ajax 請求更新資料，或者在前端實作。我們可以提供簡單的排序功能，方便使用者快速地找到資料，或是提供簡易的搜尋功能。</p>\n<p>題外話：排序其實可以直接使用 <code>element.appendChild</code> 來做，如果 appendChild 的節點已經出現在 parent 當中，會直接替換位置而不會加入一個新的 node。</p>\n\n<iframe height=\"500\" scrolling=\"no\" title=\"table sort\" src=\"//codepen.io/kjj6198/embed/qXgQdL/?height=265&theme-id=0&default-tab=js,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"https://codepen.io/kjj6198/pen/qXgQdL/\" target=\"_blank\" rel=\"external\">table sort</a> by 愷開 (<a href=\"https://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"https://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.\n</iframe>\n\n<h2 id=\"考慮簡單的-print\"><a href=\"#考慮簡單的-print\" class=\"headerlink\" title=\"考慮簡單的 @print\"></a>考慮簡單的 @print</h2><p>對於像是出帳系統、記錄等等，營運人員除了在網頁上觀看外，也有可能需要將表格內容列印下來，這時可以使用 <code>@media print</code> 的方式處理列印的細節，例如 font-size 的設定可能要用 <code>pt</code> 表示、將顏色改為黑白、縮短間距等等，都是需要考慮的細節。</p>\n<h2 id=\"reponsive\"><a href=\"#reponsive\" class=\"headerlink\" title=\"reponsive\"></a>reponsive</h2><p>傳統的 table 在做手機版支援時，通常是使用水平滾動的方式來顯示。不過在手機上頻繁滾動對使用者來說仍然不是個理想的操作。</p>\n<p>可以利用 data attribute 搭配 CSS 的 pseudo 完成。在手機上，我們將每一個 row 的顯示改為垂直。像這樣：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span>付款紀錄<span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>方案內容<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>金額<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>數量<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>贊助日期<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>贊助狀態<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span>&gt;</span>付款成功<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span> <span class=\"attr\">data-status</span>=<span class=\"string\">\"success\"</span>&gt;</span>付款成功<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span> <span class=\"attr\">data-status</span>=<span class=\"string\">\"fail\"</span>&gt;</span>付款失敗</div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"repay-information\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>重新付款<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>刪除紀錄<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*fr66cE0Lh50irSlVsvIHfw.png\" alt=\"\"></p>\n<p>轉為</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*k73_3ve_SiW7D2QBqXwlGQ.png\" alt=\"\"></p>\n<p>這樣即使在手機上也不需要滾動了。</p>\n\n<iframe height=\"500\" scrolling=\"no\" title=\"responsive-table\" src=\"//codepen.io/kjj6198/embed/oBZweY/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"https://codepen.io/kjj6198/pen/oBZweY/\" target=\"_blank\" rel=\"external\">responsive-table</a> by 愷開 (<a href=\"https://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"https://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.\n</iframe>\n\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">table</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">\"PingFang TC\"</span>;</div><div class=\"line\">  <span class=\"selector-tag\">td</span> &#123; <span class=\"attribute\">text-align</span>: cetner; &#125;</div><div class=\"line\">   </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">media</span> screen and (max-width: 500px) &#123;</div><div class=\"line\">  <span class=\"selector-tag\">table</span> &gt; <span class=\"selector-tag\">thead</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: none;</div><div class=\"line\">    <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"selector-tag\">tbody</span> <span class=\"selector-tag\">tr</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"selector-tag\">td</span>:first-child &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">    <span class=\"attribute\">font-weight</span>: bold;</div><div class=\"line\">    <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"selector-tag\">td</span>:not(:first-child) &#123; </div><div class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">    <span class=\"attribute\">text-align</span>: right;</div><div class=\"line\">    &amp;:before &#123;</div><div class=\"line\">      <span class=\"attribute\">float</span>: left;</div><div class=\"line\">      <span class=\"attribute\">content</span>: attr(data-label);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>table 在資料呈現上相當方便，寬度的計算、等高都已經幫我們實作完成，在製作後台時，table 也幾乎是觀看資料時不可或缺的排版之一。</p>\n<p>table 的設計上也有一些眉角可以注意，本篇文章提供了幾個製作 table 時需要注意的地方以及簡單的實作，未來如果有其他事項也會逐一加入。</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>認清一件事實，table 是拿來看，不是被當作絢麗的視覺使用的</p>\n</blockquote>\n<p>最近在後台頻繁有使用表格的需求，如何設計對使用者良好的 table 是一項挑戰，尤其在資料筆數多、欄位多的情況下，使用者很容易就會被額外的元素吸引。</p>\n<p>而在現代 <code>div</code> 排版盛行的影響下，使用 table 很容易就被當成二流的前端工程師。</p>\n<p>其實對於呈現資料上，table 仍然是個相當有效的排版方式，且他們具有的特色可以幫助我們排版更加輕鬆。</p>\n<h2 id=\"HTML-中的-table\"><a href=\"#HTML-中的-table\" class=\"headerlink\" title=\"HTML 中的 table\"></a>HTML 中的 table</h2><p>在 HTML 當中 table 由幾個標籤組成：</p>\n<ul>\n<li><code>thead</code>：定義表頭標題<ul>\n<li><code>tr</code>：定義表頭的 row</li>\n<li><code>th</code>：定義標題</li>\n</ul>\n</li>\n<li><code>tbody</code>：定義表格內容</li>\n<li><code>tfoot</code>：定義表格的結尾部份</li>\n</ul>\n<h2 id=\"盡量不要拉滿整個-table-寬度\"><a href=\"#盡量不要拉滿整個-table-寬度\" class=\"headerlink\" title=\"盡量不要拉滿整個 table 寬度\"></a>盡量不要拉滿整個 table 寬度</h2><p>讓 table 當中內容自行決定寬度。如果拉滿寬度的話，使用者很容易因為兩個 column 之間的距離間隔太長而不容易閱讀。</p>\n<h2 id=\"選擇顯示欄位\"><a href=\"#選擇顯示欄位\" class=\"headerlink\" title=\"選擇顯示欄位\"></a>選擇顯示欄位</h2><p>如果資料的欄位太多（例如超過 10 個以上），可以透過 checkbox 等方式讓使用者選擇希望顯示的欄位。</p>\n<h2 id=\"加入-lt-caption-gt\"><a href=\"#加入-lt-caption-gt\" class=\"headerlink\" title=\"加入 &lt;caption&gt;\"></a>加入 <code>&lt;caption&gt;</code></h2><p>在表格當中可以加入 <code>&lt;caption&gt;</code>，方便標注表格的 title。例如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h4</span>&gt;</span>出帳列表<span class=\"tag\">&lt;/<span class=\"name\">h4</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>日期<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>姓名<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>人口<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>年紀<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>2017-11-11<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>kalan.chen<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>12375<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>22<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>透過 <code>caption-side: top | bottom</code> 可以做定位。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">caption</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">caption-side</span>: top;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*J7yBJAKumOucYIDsRAUa1g.png\" alt=\"\"></p>\n<h2 id=\"移除不必要的顏色與-border\"><a href=\"#移除不必要的顏色與-border\" class=\"headerlink\" title=\"移除不必要的顏色與 border\"></a>移除不必要的顏色與 border</h2><p><img src=\"https://cdn-images-1.medium.com/max/2000/1*5469jk5PDIYQMJq69DWgog.png\" alt=\"\"></p>\n<p>雖然乍看之下色彩繽紛，但對於使用者來說，border 和背景顏色都可能造成視覺雜訊，雖然是看似貼心的設計，但可能難以找到想要的資料。</p>\n<p>使用簡單的灰階做辨識，並消除（或者調淡）邊界的顏色，去除不必要的視覺雜訊，讓使用者更容易找到資料。</p>\n<h2 id=\"表頭跟內容對齊\"><a href=\"#表頭跟內容對齊\" class=\"headerlink\" title=\"表頭跟內容對齊\"></a>表頭跟內容對齊</h2><p>一般來說文字會靠左對齊，而數字則是靠右對齊。</p>\n<h2 id=\"提供簡單的排序與搜尋\"><a href=\"#提供簡單的排序與搜尋\" class=\"headerlink\" title=\"提供簡單的排序與搜尋\"></a>提供簡單的排序與搜尋</h2><p>對於後台來說，使用者可能會頻繁搜尋表格內的資料，一個方式是每次都用 ajax 請求更新資料，或者在前端實作。我們可以提供簡單的排序功能，方便使用者快速地找到資料，或是提供簡易的搜尋功能。</p>\n<p>題外話：排序其實可以直接使用 <code>element.appendChild</code> 來做，如果 appendChild 的節點已經出現在 parent 當中，會直接替換位置而不會加入一個新的 node。</p>\n\n<iframe height=\"500\" scrolling=\"no\" title=\"table sort\" src=\"//codepen.io/kjj6198/embed/qXgQdL/?height=265&theme-id=0&default-tab=js,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"https://codepen.io/kjj6198/pen/qXgQdL/\" target=\"_blank\" rel=\"external\">table sort</a> by 愷開 (<a href=\"https://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"https://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.\n</iframe>\n\n<h2 id=\"考慮簡單的-print\"><a href=\"#考慮簡單的-print\" class=\"headerlink\" title=\"考慮簡單的 @print\"></a>考慮簡單的 @print</h2><p>對於像是出帳系統、記錄等等，營運人員除了在網頁上觀看外，也有可能需要將表格內容列印下來，這時可以使用 <code>@media print</code> 的方式處理列印的細節，例如 font-size 的設定可能要用 <code>pt</code> 表示、將顏色改為黑白、縮短間距等等，都是需要考慮的細節。</p>\n<h2 id=\"reponsive\"><a href=\"#reponsive\" class=\"headerlink\" title=\"reponsive\"></a>reponsive</h2><p>傳統的 table 在做手機版支援時，通常是使用水平滾動的方式來顯示。不過在手機上頻繁滾動對使用者來說仍然不是個理想的操作。</p>\n<p>可以利用 data attribute 搭配 CSS 的 pseudo 完成。在手機上，我們將每一個 row 的顯示改為垂直。像這樣：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span>付款紀錄<span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>方案內容<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>金額<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>數量<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>贊助日期<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>贊助狀態<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span>&gt;</span>付款成功<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span> <span class=\"attr\">data-status</span>=<span class=\"string\">\"success\"</span>&gt;</span>付款成功<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"方案\"</span>&gt;</span>一枝草一點露，一人一百支持 TingChi<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"金額\"</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"數量\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助日期\"</span>&gt;</span>2016-12-26<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">data-label</span>=<span class=\"string\">\"贊助狀態\"</span> <span class=\"attr\">data-status</span>=<span class=\"string\">\"fail\"</span>&gt;</span>付款失敗</div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"repay-information\"</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>重新付款<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">button</span>&gt;</span>刪除紀錄<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*fr66cE0Lh50irSlVsvIHfw.png\" alt=\"\"></p>\n<p>轉為</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*k73_3ve_SiW7D2QBqXwlGQ.png\" alt=\"\"></p>\n<p>這樣即使在手機上也不需要滾動了。</p>\n\n<iframe height=\"500\" scrolling=\"no\" title=\"responsive-table\" src=\"//codepen.io/kjj6198/embed/oBZweY/?height=265&theme-id=0&default-tab=html,result&embed-version=2\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\" style=\"width: 100%;\">See the Pen <a href=\"https://codepen.io/kjj6198/pen/oBZweY/\" target=\"_blank\" rel=\"external\">responsive-table</a> by 愷開 (<a href=\"https://codepen.io/kjj6198\" target=\"_blank\" rel=\"external\">@kjj6198</a>) on <a href=\"https://codepen.io\" target=\"_blank\" rel=\"external\">CodePen</a>.\n</iframe>\n\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">table</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</div><div class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">\"PingFang TC\"</span>;</div><div class=\"line\">  <span class=\"selector-tag\">td</span> &#123; <span class=\"attribute\">text-align</span>: cetner; &#125;</div><div class=\"line\">   </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">media</span> screen and (max-width: 500px) &#123;</div><div class=\"line\">  <span class=\"selector-tag\">table</span> &gt; <span class=\"selector-tag\">thead</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: none;</div><div class=\"line\">    <span class=\"attribute\">position</span>: absolute;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"selector-tag\">tbody</span> <span class=\"selector-tag\">tr</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#aaa</span>;</div><div class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"selector-tag\">td</span>:first-child &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">    <span class=\"attribute\">font-weight</span>: bold;</div><div class=\"line\">    <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">  &#125;</div><div class=\"line\">  </div><div class=\"line\">  <span class=\"selector-tag\">td</span>:not(:first-child) &#123; </div><div class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">1em</span>;</div><div class=\"line\">    <span class=\"attribute\">display</span>: block;</div><div class=\"line\">    <span class=\"attribute\">text-align</span>: right;</div><div class=\"line\">    &amp;:before &#123;</div><div class=\"line\">      <span class=\"attribute\">float</span>: left;</div><div class=\"line\">      <span class=\"attribute\">content</span>: attr(data-label);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h2><p>table 在資料呈現上相當方便，寬度的計算、等高都已經幫我們實作完成，在製作後台時，table 也幾乎是觀看資料時不可或缺的排版之一。</p>\n<p>table 的設計上也有一些眉角可以注意，本篇文章提供了幾個製作 table 時需要注意的地方以及簡單的實作，未來如果有其他事項也會逐一加入。</p>\n"},{"title":"IT 鐵人幫完賽心得","date":"2017-02-28T15:44:42.000Z","_content":"\n[連結](http://ithelp.ithome.com.tw/users/20103565/ironman/1188)\n\n今天是鐵人賽的最後一天，感覺自己最後結尾的部分收得不是很好，也有很多部分都因為時間上的關係沒有很完整地\n介紹完。\n\n挑戰 30 天連續發文的確是一件非常不容易的事情，自己也更了解到如果還有類似的機會，一定要事先做好準備才行，才不會突發狀況發生時，急就章地寫完文章結尾。\n\n同時，這次挑戰的主題是以前從來沒有碰過的 webGL 及 3D 圖學。原本以為前 10 天的學習能夠掌握基本的知識，不過實際上要了解 webGL shader 的應用跟撰寫、活用 three.js API 等等，都需要相對應的圖形理論做補助，這樣框架用起來才能得心應手。\n\n不過 10 天的學習完全不夠用，光是要了解 GSGL 的撰寫就要不少時間了，更別說應用在實際的計算上。儘管已經有框架幫我們處理掉底層的操作，但如果需要更進階、或是更強大的活用，就必須更了解背後的操作。\n\naframe 的部分，我會再找時間陸續補齊（如果有時間的話QQ）。未來也希望自己能夠繼續往 3D 之路邁進，讓前端畫面的展現更加豐富。\n\n這絕對需要時間的累積跟練習，也比以往的前端開發更有挑戰性，不過這 30 天的確學習到了很多過去完全不懂的知識。過去望之生畏的 shader ，現在也能夠寫、也能夠看懂；three.js 的 API 有基本的認知和了解；同時也看了一下 webVR 的發展跟認識 aframe 這個框架。\n\n這 30 天可以堪稱最充實的一個月了（笑）。我知道本系列文章中仍然有許多不完整的部分，但希望各位讀者或多或少都能從中獲得一些知識！\n\n## 後記\n\n得到[佳作](http://ithelp.ithome.com.tw/announces/9)。算是自己 2016 的總結吧！有太多事情沒有好好地記錄下來。\n\n看到報名通知時其實掙扎蠻久的，因爲前端可想而知，今年寫 `react` `redux` 的人一定很多，既然如此，何不嘗試一下自己想碰很久，卻一直沒有碰過的 webGL？\n\n一直以來都對畫面上的互動很有興趣，但是對一位工程師來說，處理動畫之類的邏輯是很煩人又枯燥的事。這一個月雖然學習的東西跟網站開發天差地遠，甚至很少能夠應用在實際的開發當中（壓榨時程都不夠了，誰還在管特效？）。不過能夠學習這些知識，拓寬自己的視野，又何嘗不是件好事呢？\n\n越來越多公司對前端的要求，都是在數據視覺化上。以前被視為無聊、枯燥，在大數據的時代下開始被重視，對這個方向的要求就是 canvas 以及 webGL 的操作能力，不過現在也已經有很多框架幫你處理底層的 API 了。但身為前端，還是要有對底層的基本認識。不然總有一天抽象化滲透還是會找上門。\n","source":"_posts/webgl-it.md","raw":"---\ntitle: IT 鐵人幫完賽心得\ncategories: 前端\ndate: 2017-02-28 23:44:42\ntags:\n  - webGL\n  - IT 鐵人幫\n---\n\n[連結](http://ithelp.ithome.com.tw/users/20103565/ironman/1188)\n\n今天是鐵人賽的最後一天，感覺自己最後結尾的部分收得不是很好，也有很多部分都因為時間上的關係沒有很完整地\n介紹完。\n\n挑戰 30 天連續發文的確是一件非常不容易的事情，自己也更了解到如果還有類似的機會，一定要事先做好準備才行，才不會突發狀況發生時，急就章地寫完文章結尾。\n\n同時，這次挑戰的主題是以前從來沒有碰過的 webGL 及 3D 圖學。原本以為前 10 天的學習能夠掌握基本的知識，不過實際上要了解 webGL shader 的應用跟撰寫、活用 three.js API 等等，都需要相對應的圖形理論做補助，這樣框架用起來才能得心應手。\n\n不過 10 天的學習完全不夠用，光是要了解 GSGL 的撰寫就要不少時間了，更別說應用在實際的計算上。儘管已經有框架幫我們處理掉底層的操作，但如果需要更進階、或是更強大的活用，就必須更了解背後的操作。\n\naframe 的部分，我會再找時間陸續補齊（如果有時間的話QQ）。未來也希望自己能夠繼續往 3D 之路邁進，讓前端畫面的展現更加豐富。\n\n這絕對需要時間的累積跟練習，也比以往的前端開發更有挑戰性，不過這 30 天的確學習到了很多過去完全不懂的知識。過去望之生畏的 shader ，現在也能夠寫、也能夠看懂；three.js 的 API 有基本的認知和了解；同時也看了一下 webVR 的發展跟認識 aframe 這個框架。\n\n這 30 天可以堪稱最充實的一個月了（笑）。我知道本系列文章中仍然有許多不完整的部分，但希望各位讀者或多或少都能從中獲得一些知識！\n\n## 後記\n\n得到[佳作](http://ithelp.ithome.com.tw/announces/9)。算是自己 2016 的總結吧！有太多事情沒有好好地記錄下來。\n\n看到報名通知時其實掙扎蠻久的，因爲前端可想而知，今年寫 `react` `redux` 的人一定很多，既然如此，何不嘗試一下自己想碰很久，卻一直沒有碰過的 webGL？\n\n一直以來都對畫面上的互動很有興趣，但是對一位工程師來說，處理動畫之類的邏輯是很煩人又枯燥的事。這一個月雖然學習的東西跟網站開發天差地遠，甚至很少能夠應用在實際的開發當中（壓榨時程都不夠了，誰還在管特效？）。不過能夠學習這些知識，拓寬自己的視野，又何嘗不是件好事呢？\n\n越來越多公司對前端的要求，都是在數據視覺化上。以前被視為無聊、枯燥，在大數據的時代下開始被重視，對這個方向的要求就是 canvas 以及 webGL 的操作能力，不過現在也已經有很多框架幫你處理底層的 API 了。但身為前端，還是要有對底層的基本認識。不然總有一天抽象化滲透還是會找上門。\n","slug":"webgl-it","published":1,"updated":"2017-02-28T16:28:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsb002qiw5tq42arns6","content":"<p><a href=\"http://ithelp.ithome.com.tw/users/20103565/ironman/1188\" target=\"_blank\" rel=\"external\">連結</a></p>\n<p>今天是鐵人賽的最後一天，感覺自己最後結尾的部分收得不是很好，也有很多部分都因為時間上的關係沒有很完整地<br>介紹完。</p>\n<p>挑戰 30 天連續發文的確是一件非常不容易的事情，自己也更了解到如果還有類似的機會，一定要事先做好準備才行，才不會突發狀況發生時，急就章地寫完文章結尾。</p>\n<p>同時，這次挑戰的主題是以前從來沒有碰過的 webGL 及 3D 圖學。原本以為前 10 天的學習能夠掌握基本的知識，不過實際上要了解 webGL shader 的應用跟撰寫、活用 three.js API 等等，都需要相對應的圖形理論做補助，這樣框架用起來才能得心應手。</p>\n<p>不過 10 天的學習完全不夠用，光是要了解 GSGL 的撰寫就要不少時間了，更別說應用在實際的計算上。儘管已經有框架幫我們處理掉底層的操作，但如果需要更進階、或是更強大的活用，就必須更了解背後的操作。</p>\n<p>aframe 的部分，我會再找時間陸續補齊（如果有時間的話QQ）。未來也希望自己能夠繼續往 3D 之路邁進，讓前端畫面的展現更加豐富。</p>\n<p>這絕對需要時間的累積跟練習，也比以往的前端開發更有挑戰性，不過這 30 天的確學習到了很多過去完全不懂的知識。過去望之生畏的 shader ，現在也能夠寫、也能夠看懂；three.js 的 API 有基本的認知和了解；同時也看了一下 webVR 的發展跟認識 aframe 這個框架。</p>\n<p>這 30 天可以堪稱最充實的一個月了（笑）。我知道本系列文章中仍然有許多不完整的部分，但希望各位讀者或多或少都能從中獲得一些知識！</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>得到<a href=\"http://ithelp.ithome.com.tw/announces/9\" target=\"_blank\" rel=\"external\">佳作</a>。算是自己 2016 的總結吧！有太多事情沒有好好地記錄下來。</p>\n<p>看到報名通知時其實掙扎蠻久的，因爲前端可想而知，今年寫 <code>react</code> <code>redux</code> 的人一定很多，既然如此，何不嘗試一下自己想碰很久，卻一直沒有碰過的 webGL？</p>\n<p>一直以來都對畫面上的互動很有興趣，但是對一位工程師來說，處理動畫之類的邏輯是很煩人又枯燥的事。這一個月雖然學習的東西跟網站開發天差地遠，甚至很少能夠應用在實際的開發當中（壓榨時程都不夠了，誰還在管特效？）。不過能夠學習這些知識，拓寬自己的視野，又何嘗不是件好事呢？</p>\n<p>越來越多公司對前端的要求，都是在數據視覺化上。以前被視為無聊、枯燥，在大數據的時代下開始被重視，對這個方向的要求就是 canvas 以及 webGL 的操作能力，不過現在也已經有很多框架幫你處理底層的 API 了。但身為前端，還是要有對底層的基本認識。不然總有一天抽象化滲透還是會找上門。</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://ithelp.ithome.com.tw/users/20103565/ironman/1188\" target=\"_blank\" rel=\"external\">連結</a></p>\n<p>今天是鐵人賽的最後一天，感覺自己最後結尾的部分收得不是很好，也有很多部分都因為時間上的關係沒有很完整地<br>介紹完。</p>\n<p>挑戰 30 天連續發文的確是一件非常不容易的事情，自己也更了解到如果還有類似的機會，一定要事先做好準備才行，才不會突發狀況發生時，急就章地寫完文章結尾。</p>\n<p>同時，這次挑戰的主題是以前從來沒有碰過的 webGL 及 3D 圖學。原本以為前 10 天的學習能夠掌握基本的知識，不過實際上要了解 webGL shader 的應用跟撰寫、活用 three.js API 等等，都需要相對應的圖形理論做補助，這樣框架用起來才能得心應手。</p>\n<p>不過 10 天的學習完全不夠用，光是要了解 GSGL 的撰寫就要不少時間了，更別說應用在實際的計算上。儘管已經有框架幫我們處理掉底層的操作，但如果需要更進階、或是更強大的活用，就必須更了解背後的操作。</p>\n<p>aframe 的部分，我會再找時間陸續補齊（如果有時間的話QQ）。未來也希望自己能夠繼續往 3D 之路邁進，讓前端畫面的展現更加豐富。</p>\n<p>這絕對需要時間的累積跟練習，也比以往的前端開發更有挑戰性，不過這 30 天的確學習到了很多過去完全不懂的知識。過去望之生畏的 shader ，現在也能夠寫、也能夠看懂；three.js 的 API 有基本的認知和了解；同時也看了一下 webVR 的發展跟認識 aframe 這個框架。</p>\n<p>這 30 天可以堪稱最充實的一個月了（笑）。我知道本系列文章中仍然有許多不完整的部分，但希望各位讀者或多或少都能從中獲得一些知識！</p>\n<h2 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h2><p>得到<a href=\"http://ithelp.ithome.com.tw/announces/9\" target=\"_blank\" rel=\"external\">佳作</a>。算是自己 2016 的總結吧！有太多事情沒有好好地記錄下來。</p>\n<p>看到報名通知時其實掙扎蠻久的，因爲前端可想而知，今年寫 <code>react</code> <code>redux</code> 的人一定很多，既然如此，何不嘗試一下自己想碰很久，卻一直沒有碰過的 webGL？</p>\n<p>一直以來都對畫面上的互動很有興趣，但是對一位工程師來說，處理動畫之類的邏輯是很煩人又枯燥的事。這一個月雖然學習的東西跟網站開發天差地遠，甚至很少能夠應用在實際的開發當中（壓榨時程都不夠了，誰還在管特效？）。不過能夠學習這些知識，拓寬自己的視野，又何嘗不是件好事呢？</p>\n<p>越來越多公司對前端的要求，都是在數據視覺化上。以前被視為無聊、枯燥，在大數據的時代下開始被重視，對這個方向的要求就是 canvas 以及 webGL 的操作能力，不過現在也已經有很多框架幫你處理底層的 API 了。但身為前端，還是要有對底層的基本認識。不然總有一天抽象化滲透還是會找上門。</p>\n"},{"title":"weekly-6/6","date":"2016-06-06T13:52:39.000Z","_content":"\n\n這次介紹一下我建置 style guide 的過程以及心得。\n\n## 工作內容\n\n1. styleguide 建置\n2. 新的 `ws_job_index` search bar\n\n## Styleguide 真的很重要\n\n在建置的過程中，我們常常會忽略，「如果是別人，該如何快速懂得文件的內容」。\n所以在上以前的 view 當中，我其實都不太清楚。「啊！原來這個已經寫成 helper 了」「啊！這個已經寫成 class」的情況屢見不鮮，所以我在上新的版面過程中，都會盡量地以「之後的自己或別人也能看得懂」為原則。同時也會順手把以前的 code 跟文件統一整理。\n\n最陽春的 styleguide 只花了兩天就有了雛形了，這證明文件的建置並不是那麼困難。但是更重要的是 consistency，也就是持續更新這件事。\n\n而且透過寫文件的方式，其實 code 的概念很容易就讓別人懂，雖然無可避免地要花一些時間，但我認為這是蠻值得的投資。所以讓我們一起來 document driven 吧！\n\n接下來會介紹我在建置時發現的一些不錯的概念。\n\n## Helper 真的很好用\n\n使用 helper 的方式，我們不僅可以快速套用 `rails` `ruby` 內建的方法，還可以讓 view 裡面的 HTML 碼大量減少，增加易讀性跟擴展性。\n\n```html\n<%= ui_component(\"sudo_tags\", {\n\t:tags => \"blabla\"\n}) %>\n```\n\n這個 `ui_component` 的方法，其實是對 render 的進一步包裝：\n\n```ruby\ndef ui_component url, options = nil\n\trender \"components/#{url}\", :locals => options\nend\n```\n\n雖然是簡單的方法包裝，但其實大量提升了可讀性，我們也可以拆分元件，統一放入 `component` 裡面管理。如果元件的構成很簡單，甚至還可利用 `content_tag` 來包裝。\n\n```ruby\ndef\tbutton_generator content, options = nil\n\tbtn_class = \"btn \"\n\toptions.merge(:class => btn_class)\n  content_tag :button, content, options\nend\n```\n\n希望以後真的可以達到高度組件化，這樣就算是科科，也能簡單引用某個元件。\n\n## 關於 layout 的新想法：\n\n我實在非常不喜歡 grid，但實務上無可避免地還是會使用到。\n那麼，有沒有比較折衷的辦法來維持可讀性，也就是所謂的 `layout` 與語意分離。\n\n還真的有，而且這個方法實作起來並不難。答案是善用 css 的 attribute selector\n\n```html\n<div layout=\"col-3\"></div>\n```\n\n```css\n[layout^=\"col-*\"] {\n  // your gird style\n}\n```\n\n雖然看起來只是將 layout 拆至一個 attribute 裡面，但這樣至少不會看見 `col-3` 等 grid 的 rule 出現在 class 裡面。對我來說可讀性提高很多，但最理想的方式還是盡可能寫進 class\t裡面吧！\n\n","source":"_posts/weekly-6-6.md","raw":"---\ntitle: weekly-6/6\ncategories: 前端週刊\ndate: 2016-06-06 21:52:39\ntags:\n---\n\n\n這次介紹一下我建置 style guide 的過程以及心得。\n\n## 工作內容\n\n1. styleguide 建置\n2. 新的 `ws_job_index` search bar\n\n## Styleguide 真的很重要\n\n在建置的過程中，我們常常會忽略，「如果是別人，該如何快速懂得文件的內容」。\n所以在上以前的 view 當中，我其實都不太清楚。「啊！原來這個已經寫成 helper 了」「啊！這個已經寫成 class」的情況屢見不鮮，所以我在上新的版面過程中，都會盡量地以「之後的自己或別人也能看得懂」為原則。同時也會順手把以前的 code 跟文件統一整理。\n\n最陽春的 styleguide 只花了兩天就有了雛形了，這證明文件的建置並不是那麼困難。但是更重要的是 consistency，也就是持續更新這件事。\n\n而且透過寫文件的方式，其實 code 的概念很容易就讓別人懂，雖然無可避免地要花一些時間，但我認為這是蠻值得的投資。所以讓我們一起來 document driven 吧！\n\n接下來會介紹我在建置時發現的一些不錯的概念。\n\n## Helper 真的很好用\n\n使用 helper 的方式，我們不僅可以快速套用 `rails` `ruby` 內建的方法，還可以讓 view 裡面的 HTML 碼大量減少，增加易讀性跟擴展性。\n\n```html\n<%= ui_component(\"sudo_tags\", {\n\t:tags => \"blabla\"\n}) %>\n```\n\n這個 `ui_component` 的方法，其實是對 render 的進一步包裝：\n\n```ruby\ndef ui_component url, options = nil\n\trender \"components/#{url}\", :locals => options\nend\n```\n\n雖然是簡單的方法包裝，但其實大量提升了可讀性，我們也可以拆分元件，統一放入 `component` 裡面管理。如果元件的構成很簡單，甚至還可利用 `content_tag` 來包裝。\n\n```ruby\ndef\tbutton_generator content, options = nil\n\tbtn_class = \"btn \"\n\toptions.merge(:class => btn_class)\n  content_tag :button, content, options\nend\n```\n\n希望以後真的可以達到高度組件化，這樣就算是科科，也能簡單引用某個元件。\n\n## 關於 layout 的新想法：\n\n我實在非常不喜歡 grid，但實務上無可避免地還是會使用到。\n那麼，有沒有比較折衷的辦法來維持可讀性，也就是所謂的 `layout` 與語意分離。\n\n還真的有，而且這個方法實作起來並不難。答案是善用 css 的 attribute selector\n\n```html\n<div layout=\"col-3\"></div>\n```\n\n```css\n[layout^=\"col-*\"] {\n  // your gird style\n}\n```\n\n雖然看起來只是將 layout 拆至一個 attribute 裡面，但這樣至少不會看見 `col-3` 等 grid 的 rule 出現在 class 裡面。對我來說可讀性提高很多，但最理想的方式還是盡可能寫進 class\t裡面吧！\n\n","slug":"weekly-6-6","published":1,"updated":"2016-11-14T11:45:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsh002tiw5t5mrhn9el","content":"<p>這次介紹一下我建置 style guide 的過程以及心得。</p>\n<h2 id=\"工作內容\"><a href=\"#工作內容\" class=\"headerlink\" title=\"工作內容\"></a>工作內容</h2><ol>\n<li>styleguide 建置</li>\n<li>新的 <code>ws_job_index</code> search bar</li>\n</ol>\n<h2 id=\"Styleguide-真的很重要\"><a href=\"#Styleguide-真的很重要\" class=\"headerlink\" title=\"Styleguide 真的很重要\"></a>Styleguide 真的很重要</h2><p>在建置的過程中，我們常常會忽略，「如果是別人，該如何快速懂得文件的內容」。<br>所以在上以前的 view 當中，我其實都不太清楚。「啊！原來這個已經寫成 helper 了」「啊！這個已經寫成 class」的情況屢見不鮮，所以我在上新的版面過程中，都會盡量地以「之後的自己或別人也能看得懂」為原則。同時也會順手把以前的 code 跟文件統一整理。</p>\n<p>最陽春的 styleguide 只花了兩天就有了雛形了，這證明文件的建置並不是那麼困難。但是更重要的是 consistency，也就是持續更新這件事。</p>\n<p>而且透過寫文件的方式，其實 code 的概念很容易就讓別人懂，雖然無可避免地要花一些時間，但我認為這是蠻值得的投資。所以讓我們一起來 document driven 吧！</p>\n<p>接下來會介紹我在建置時發現的一些不錯的概念。</p>\n<h2 id=\"Helper-真的很好用\"><a href=\"#Helper-真的很好用\" class=\"headerlink\" title=\"Helper 真的很好用\"></a>Helper 真的很好用</h2><p>使用 helper 的方式，我們不僅可以快速套用 <code>rails</code> <code>ruby</code> 內建的方法，還可以讓 view 裡面的 HTML 碼大量減少，增加易讀性跟擴展性。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">ui_component</span>(\"<span class=\"attr\">sudo_tags</span>\", &#123;</span></div><div class=\"line\">\t<span class=\"attr\">:tags</span> =&gt; \"blabla\"</div><div class=\"line\">&#125;) %&gt;</div></pre></td></tr></table></figure>\n<p>這個 <code>ui_component</code> 的方法，其實是對 render 的進一步包裝：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ui_component</span> <span class=\"title\">url</span>, <span class=\"title\">options</span> = <span class=\"title\">nil</span></span></div><div class=\"line\">\trender <span class=\"string\">\"components/<span class=\"subst\">#&#123;url&#125;</span>\"</span>, <span class=\"symbol\">:locals</span> =&gt; options</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>雖然是簡單的方法包裝，但其實大量提升了可讀性，我們也可以拆分元件，統一放入 <code>component</code> 裡面管理。如果元件的構成很簡單，甚至還可利用 <code>content_tag</code> 來包裝。</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span>\t<span class=\"title\">button_generator</span> <span class=\"title\">content</span>, <span class=\"title\">options</span> = <span class=\"title\">nil</span></span></div><div class=\"line\">\tbtn_class = <span class=\"string\">\"btn \"</span></div><div class=\"line\">\toptions.merge(<span class=\"symbol\">:class</span> =&gt; btn_class)</div><div class=\"line\">  content_tag <span class=\"symbol\">:button</span>, content, options</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>希望以後真的可以達到高度組件化，這樣就算是科科，也能簡單引用某個元件。</p>\n<h2 id=\"關於-layout-的新想法：\"><a href=\"#關於-layout-的新想法：\" class=\"headerlink\" title=\"關於 layout 的新想法：\"></a>關於 layout 的新想法：</h2><p>我實在非常不喜歡 grid，但實務上無可避免地還是會使用到。<br>那麼，有沒有比較折衷的辦法來維持可讀性，也就是所謂的 <code>layout</code> 與語意分離。</p>\n<p>還真的有，而且這個方法實作起來並不難。答案是善用 css 的 attribute selector</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">layout</span>=<span class=\"string\">\"col-3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[layout^=\"col-*\"] &#123;</div><div class=\"line\">  // your gird style</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>雖然看起來只是將 layout 拆至一個 attribute 裡面，但這樣至少不會看見 <code>col-3</code> 等 grid 的 rule 出現在 class 裡面。對我來說可讀性提高很多，但最理想的方式還是盡可能寫進 class    裡面吧！</p>\n","site":{"data":{}},"excerpt":"","more":"<p>這次介紹一下我建置 style guide 的過程以及心得。</p>\n<h2 id=\"工作內容\"><a href=\"#工作內容\" class=\"headerlink\" title=\"工作內容\"></a>工作內容</h2><ol>\n<li>styleguide 建置</li>\n<li>新的 <code>ws_job_index</code> search bar</li>\n</ol>\n<h2 id=\"Styleguide-真的很重要\"><a href=\"#Styleguide-真的很重要\" class=\"headerlink\" title=\"Styleguide 真的很重要\"></a>Styleguide 真的很重要</h2><p>在建置的過程中，我們常常會忽略，「如果是別人，該如何快速懂得文件的內容」。<br>所以在上以前的 view 當中，我其實都不太清楚。「啊！原來這個已經寫成 helper 了」「啊！這個已經寫成 class」的情況屢見不鮮，所以我在上新的版面過程中，都會盡量地以「之後的自己或別人也能看得懂」為原則。同時也會順手把以前的 code 跟文件統一整理。</p>\n<p>最陽春的 styleguide 只花了兩天就有了雛形了，這證明文件的建置並不是那麼困難。但是更重要的是 consistency，也就是持續更新這件事。</p>\n<p>而且透過寫文件的方式，其實 code 的概念很容易就讓別人懂，雖然無可避免地要花一些時間，但我認為這是蠻值得的投資。所以讓我們一起來 document driven 吧！</p>\n<p>接下來會介紹我在建置時發現的一些不錯的概念。</p>\n<h2 id=\"Helper-真的很好用\"><a href=\"#Helper-真的很好用\" class=\"headerlink\" title=\"Helper 真的很好用\"></a>Helper 真的很好用</h2><p>使用 helper 的方式，我們不僅可以快速套用 <code>rails</code> <code>ruby</code> 內建的方法，還可以讓 view 裡面的 HTML 碼大量減少，增加易讀性跟擴展性。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">ui_component</span>(\"<span class=\"attr\">sudo_tags</span>\", &#123;</span></div><div class=\"line\">\t<span class=\"attr\">:tags</span> =&gt; \"blabla\"</div><div class=\"line\">&#125;) %&gt;</div></pre></td></tr></table></figure>\n<p>這個 <code>ui_component</code> 的方法，其實是對 render 的進一步包裝：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ui_component</span> <span class=\"title\">url</span>, <span class=\"title\">options</span> = <span class=\"title\">nil</span></span></div><div class=\"line\">\trender <span class=\"string\">\"components/<span class=\"subst\">#&#123;url&#125;</span>\"</span>, <span class=\"symbol\">:locals</span> =&gt; options</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>雖然是簡單的方法包裝，但其實大量提升了可讀性，我們也可以拆分元件，統一放入 <code>component</code> 裡面管理。如果元件的構成很簡單，甚至還可利用 <code>content_tag</code> 來包裝。</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span>\t<span class=\"title\">button_generator</span> <span class=\"title\">content</span>, <span class=\"title\">options</span> = <span class=\"title\">nil</span></span></div><div class=\"line\">\tbtn_class = <span class=\"string\">\"btn \"</span></div><div class=\"line\">\toptions.merge(<span class=\"symbol\">:class</span> =&gt; btn_class)</div><div class=\"line\">  content_tag <span class=\"symbol\">:button</span>, content, options</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>希望以後真的可以達到高度組件化，這樣就算是科科，也能簡單引用某個元件。</p>\n<h2 id=\"關於-layout-的新想法：\"><a href=\"#關於-layout-的新想法：\" class=\"headerlink\" title=\"關於 layout 的新想法：\"></a>關於 layout 的新想法：</h2><p>我實在非常不喜歡 grid，但實務上無可避免地還是會使用到。<br>那麼，有沒有比較折衷的辦法來維持可讀性，也就是所謂的 <code>layout</code> 與語意分離。</p>\n<p>還真的有，而且這個方法實作起來並不難。答案是善用 css 的 attribute selector</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">layout</span>=<span class=\"string\">\"col-3\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">[layout^=\"col-*\"] &#123;</div><div class=\"line\">  // your gird style</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>雖然看起來只是將 layout 拆至一個 attribute 裡面，但這樣至少不會看見 <code>col-3</code> 等 grid 的 rule 出現在 class 裡面。對我來說可讀性提高很多，但最理想的方式還是盡可能寫進 class    裡面吧！</p>\n"},{"title":"weekly-thought-5/29","date":"2016-05-29T13:09:36.000Z","_content":"\n\n### 發現的新東西\n\n## flow\n\n第一次聽到，是從 henry 的口中。第二次看到，是從看了 draftjs 的 source code。\n\n當前端的 code 無可避免地增肥之後（尤其是 js 跟 css)，我們也應該尋找更有效的代碼管理方式。像是逐漸引入的 eslinter 跟 stylelint 都是。\n\n而 flow 給我的感覺有點像 Typescript，但優點是你可以完全用寫 js 的方式，也不需要改變副檔名（typescript 要寫成 a.ts)。不過還是會害怕抽象化滲透，所以一樣會先觀望一段陣子再套用到主站上吧。\n\n## draft\n\n假日閒來無事、天氣燥熱，在咖啡廳喝咖啡、聽音樂、寫 code 也蠻愜意的。所以就趁著假日的時光研究了一下科科所說的[draft-js](https://facebook.github.io/draft-js/)\n\n所有的骯髒事（selection 兼容、檔案拖曳、編輯器內的樣式）draft-js 幾乎都幫你搞定了。當然因為這個 open source 還非常新（react conf 的時候才推出來），有時候噴錯也不知道從哪邊找起。但這的確是值得令人關注的 editor 解決方案。\n\n### 目前編輯器會遇到的問題\n\n#### 1. input 跟 textarea 是有極限的\n\n- 他們只能渲染 plain text，如果想要對文字做加粗、斜體、標記等動作，需要花很大的功實作\n- 當你的文字輸入到下一行時，textarea 高度不足不會自動幫你移位。你可能需要計算下一行文字的位置，然後做相關的操作。這也很費工，而且對使用者的體驗非常糟糕。(備註：現在已經有了新的解法 []())\n\n#### 2. [contenteditable is terrible](https://medium.engineering/why-contenteditable-is-terrible-122d8a40e480#.7cqtr19fk)\n\n因為是將文字內容放在非 input 的 tag 裡面，每種瀏覽器的實作都不太一樣，也很容易就會有意想不到的問題發生。不過 contenteditable 的好處是他活得夠久，瀏覽器也都幾乎實作了，所以反而可以利用這樣的特性來解決當前編輯器遇到的問題。\n\n\ndraft 的概念其實也跟 react 很像，將 editor 跟 content 的狀態存放起來，而非依賴在 DOM 上面。而且他們的狀態不是用純 string 去儲存，而是用 Record(他們實作的資料結構)來代表每個節點。\n\n而 API 文件也寫得挺清楚的，同時也完全實作 immutable 的概念。每次對編輯的內容做操作，就是完全更新狀態。剛開始會覺得很麻煩，我明明只是要一段 text，還要呼叫 getCurrentContent() 回傳的竟然還是一個 `Map` 在從裡面呼叫 getText()；或者我想要更動狀態時，還要做類似這樣的操作：`RichUtils.toggleInlineStyle(curState,'BOLD')`，然後再把新的 state 傳進去。看似麻煩，不過這樣的方式到後期的開發顯然是有好處的。\n容易測試，易讀性高，容易修改、除錯。\n\nfacebook 也提供了蠻實用的[範例](https://github.com/facebook/draft-js) 看完之後可以更瞭解 draft 到底是怎樣運作的。\n\n這邊是我看了官方文件之後實作的範例：[draft-example](https://github.com/kjj6198/redux-setup) 。還不算太完整，之後會再慢慢補上。\n\n**reference**\n\n[a guide to draftJS](https://medium.com/@adrianli/a-beginner-s-guide-to-draft-js-d1823f58d8cc#.3apelia5r)\n\n## 重新思考 rails helper\n\n在逐漸重構 css 跟 html 的過程中，常常會忘記 helper 的存在，最近寫一寫才恍然大悟，對啊！我不是有 helper 嗎？目前對於比較複雜的邏輯判斷已經會習慣性地去使用 helper，但在 view 裡頭，有沒有 helper 可以幫上忙的可能性？\n\n雖然用 partial 也可以做到類似的事情，但跟 helper 做搭配會更強大啊！\n\n而且因為 partial 有時候還要去對應路徑，而 helper 則是全域都可以使用。對高度重複的頁面來說或許用 helper 會更加簡單！\n\n**例如我們很常用到的 tags。**\n\n當初 sudo tags 改版的時候花了不少時間去更動，因為幾乎每個 tag 裡面都重寫了一次 each，class 命名有時候也不盡相同。\n\n不過使用 partial 又好像太小題大作，畢竟 tag 的架構並沒有如此複雜。\n\n```ruby\ndef tag_of_tags(tags, options = {}, html_options)\n\n  raw tags.collect { |tag| content_tag(:span,tag.name, options, html_options)}\nend\n```\n\n這樣一來，每次我需要用到 tag 的時候就只要\n\n```html\n<%= tag_of_tags(@post.tags) %>\n```\n\n當然也可以做一些調整，例如加入 namespace 來符合我們的使用情境。\n```ruby\ndef tag_of_tags(tags, namespace,options = {}, html_options)\n\n  raw tags.collect { |tag| content_tag(:span,tag.name, :class => namespace)\nend\n```\n\n```html\n<%= tag_of_tags(@post.tags, \"sudo\") %>\n```\n這樣一來每次 tag 要更新的時候，我只要安心修改 helper，其他地方全部都會生效。寫起來自然輕鬆！\n\n以上只是一小部分的例子，舉凡 `navbar` `button` `dropdown` 等，幾乎是每個網站開發必備的元素。我們在新增 partial 的同時，說不定也可以搭配 helper 一起思考更多的可能性！\n\n## 關於文件，我有話要說\n\n最近因為想要讓 legacy 漸漸減少，會盡量地用重用性的角度來思考。\n\n不過科科給了我一句話「太早談重用性，反而會掉入過度設計的陷阱」。仔細想過之後，的確如此吧！\n\n但我認為，這樣的嘗試是好的，對自己來講是從更寬的角度來看自己的 code，也可以減少一些自己以前的盲點等等。\n\n而想要讓 code review 變得輕鬆的辦法，就是寫文件。不管對 senior 也好對 junior 也好都是有幫助。雖然我的 code 現階段還沒有達到很高的水準，可是透過寫文件這件事情，code reviewer 可以快速理解我的想法，為什麼我要這麼做。\n\n而不是讓 reviewer 從頭看我的 code，揣測我到底在幹嘛？像是 modal 對我來說就是一個很好的嘗試，科科很快地就指出其中的問題跟盲點。\n\n這樣一來，對我來說，我可以從自己的想法裡面寫出品質更好的 code；而 reviewer 因為容易理解我的想法，給予 feedback 的意願也就相對提高了。\n\n當然，可能目前寫得還不夠多，想法也還不夠成熟也說不定，但是從這樣的練習過程中，我想也會慢慢進步吧！\n\n這是我為什麼很用心在寫文件的原因，因為對彼此來講都是節省時間。我省掉以後再看 code 時回想的時間，而 code reviewer 則是省下從頭開始理解的時間。\n\n目前還在磨合期中，希望科科也可以提供建議！\n\n### reference\n\n[good commit message](https://speakerdeck.com/yinghau76/the-elements-of-good-commit-messages?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_44)\n\n## javascipt test\n\n[how to write test in existing javascript](https://rmurphey.com/blog/2014/07/13/unit-tests)\n\n很多人都是從前任接手 code 的，這篇文章教你如何從現存的 code 當中進行 refactor。裡頭有很多想法值得一提：\n\n- 不要怪罪前任，要知道代碼的由來通常是有歷史的（每個人都會寫爛 code）\n- 如果沒有 unit test 也沒關係，至少從自己做起\n- 用消極的態度、因為情緒而過度設計，反而會造成更多問題\n- 永遠不要情緒化寫 code\n- **don't use !important with anger**\n\n目前也正在找尋適合主站的測試工具中，希望有一天我們可以達到超過...百分之五十的測試率。\n\n## [日本工作三個月](http://wangyung.blogspot.tw/2016/05/blog-post.html?utm_content=bufferd71fd&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer)\n","source":"_posts/weekly-thought-5-29.md","raw":"---\ntitle: weekly-thought-5/29\ncategories: 前端週刊\ntags:\n  - js\n  - draft-js\n  - flow\ndate: 2016-05-29 21:09:36\n---\n\n\n### 發現的新東西\n\n## flow\n\n第一次聽到，是從 henry 的口中。第二次看到，是從看了 draftjs 的 source code。\n\n當前端的 code 無可避免地增肥之後（尤其是 js 跟 css)，我們也應該尋找更有效的代碼管理方式。像是逐漸引入的 eslinter 跟 stylelint 都是。\n\n而 flow 給我的感覺有點像 Typescript，但優點是你可以完全用寫 js 的方式，也不需要改變副檔名（typescript 要寫成 a.ts)。不過還是會害怕抽象化滲透，所以一樣會先觀望一段陣子再套用到主站上吧。\n\n## draft\n\n假日閒來無事、天氣燥熱，在咖啡廳喝咖啡、聽音樂、寫 code 也蠻愜意的。所以就趁著假日的時光研究了一下科科所說的[draft-js](https://facebook.github.io/draft-js/)\n\n所有的骯髒事（selection 兼容、檔案拖曳、編輯器內的樣式）draft-js 幾乎都幫你搞定了。當然因為這個 open source 還非常新（react conf 的時候才推出來），有時候噴錯也不知道從哪邊找起。但這的確是值得令人關注的 editor 解決方案。\n\n### 目前編輯器會遇到的問題\n\n#### 1. input 跟 textarea 是有極限的\n\n- 他們只能渲染 plain text，如果想要對文字做加粗、斜體、標記等動作，需要花很大的功實作\n- 當你的文字輸入到下一行時，textarea 高度不足不會自動幫你移位。你可能需要計算下一行文字的位置，然後做相關的操作。這也很費工，而且對使用者的體驗非常糟糕。(備註：現在已經有了新的解法 []())\n\n#### 2. [contenteditable is terrible](https://medium.engineering/why-contenteditable-is-terrible-122d8a40e480#.7cqtr19fk)\n\n因為是將文字內容放在非 input 的 tag 裡面，每種瀏覽器的實作都不太一樣，也很容易就會有意想不到的問題發生。不過 contenteditable 的好處是他活得夠久，瀏覽器也都幾乎實作了，所以反而可以利用這樣的特性來解決當前編輯器遇到的問題。\n\n\ndraft 的概念其實也跟 react 很像，將 editor 跟 content 的狀態存放起來，而非依賴在 DOM 上面。而且他們的狀態不是用純 string 去儲存，而是用 Record(他們實作的資料結構)來代表每個節點。\n\n而 API 文件也寫得挺清楚的，同時也完全實作 immutable 的概念。每次對編輯的內容做操作，就是完全更新狀態。剛開始會覺得很麻煩，我明明只是要一段 text，還要呼叫 getCurrentContent() 回傳的竟然還是一個 `Map` 在從裡面呼叫 getText()；或者我想要更動狀態時，還要做類似這樣的操作：`RichUtils.toggleInlineStyle(curState,'BOLD')`，然後再把新的 state 傳進去。看似麻煩，不過這樣的方式到後期的開發顯然是有好處的。\n容易測試，易讀性高，容易修改、除錯。\n\nfacebook 也提供了蠻實用的[範例](https://github.com/facebook/draft-js) 看完之後可以更瞭解 draft 到底是怎樣運作的。\n\n這邊是我看了官方文件之後實作的範例：[draft-example](https://github.com/kjj6198/redux-setup) 。還不算太完整，之後會再慢慢補上。\n\n**reference**\n\n[a guide to draftJS](https://medium.com/@adrianli/a-beginner-s-guide-to-draft-js-d1823f58d8cc#.3apelia5r)\n\n## 重新思考 rails helper\n\n在逐漸重構 css 跟 html 的過程中，常常會忘記 helper 的存在，最近寫一寫才恍然大悟，對啊！我不是有 helper 嗎？目前對於比較複雜的邏輯判斷已經會習慣性地去使用 helper，但在 view 裡頭，有沒有 helper 可以幫上忙的可能性？\n\n雖然用 partial 也可以做到類似的事情，但跟 helper 做搭配會更強大啊！\n\n而且因為 partial 有時候還要去對應路徑，而 helper 則是全域都可以使用。對高度重複的頁面來說或許用 helper 會更加簡單！\n\n**例如我們很常用到的 tags。**\n\n當初 sudo tags 改版的時候花了不少時間去更動，因為幾乎每個 tag 裡面都重寫了一次 each，class 命名有時候也不盡相同。\n\n不過使用 partial 又好像太小題大作，畢竟 tag 的架構並沒有如此複雜。\n\n```ruby\ndef tag_of_tags(tags, options = {}, html_options)\n\n  raw tags.collect { |tag| content_tag(:span,tag.name, options, html_options)}\nend\n```\n\n這樣一來，每次我需要用到 tag 的時候就只要\n\n```html\n<%= tag_of_tags(@post.tags) %>\n```\n\n當然也可以做一些調整，例如加入 namespace 來符合我們的使用情境。\n```ruby\ndef tag_of_tags(tags, namespace,options = {}, html_options)\n\n  raw tags.collect { |tag| content_tag(:span,tag.name, :class => namespace)\nend\n```\n\n```html\n<%= tag_of_tags(@post.tags, \"sudo\") %>\n```\n這樣一來每次 tag 要更新的時候，我只要安心修改 helper，其他地方全部都會生效。寫起來自然輕鬆！\n\n以上只是一小部分的例子，舉凡 `navbar` `button` `dropdown` 等，幾乎是每個網站開發必備的元素。我們在新增 partial 的同時，說不定也可以搭配 helper 一起思考更多的可能性！\n\n## 關於文件，我有話要說\n\n最近因為想要讓 legacy 漸漸減少，會盡量地用重用性的角度來思考。\n\n不過科科給了我一句話「太早談重用性，反而會掉入過度設計的陷阱」。仔細想過之後，的確如此吧！\n\n但我認為，這樣的嘗試是好的，對自己來講是從更寬的角度來看自己的 code，也可以減少一些自己以前的盲點等等。\n\n而想要讓 code review 變得輕鬆的辦法，就是寫文件。不管對 senior 也好對 junior 也好都是有幫助。雖然我的 code 現階段還沒有達到很高的水準，可是透過寫文件這件事情，code reviewer 可以快速理解我的想法，為什麼我要這麼做。\n\n而不是讓 reviewer 從頭看我的 code，揣測我到底在幹嘛？像是 modal 對我來說就是一個很好的嘗試，科科很快地就指出其中的問題跟盲點。\n\n這樣一來，對我來說，我可以從自己的想法裡面寫出品質更好的 code；而 reviewer 因為容易理解我的想法，給予 feedback 的意願也就相對提高了。\n\n當然，可能目前寫得還不夠多，想法也還不夠成熟也說不定，但是從這樣的練習過程中，我想也會慢慢進步吧！\n\n這是我為什麼很用心在寫文件的原因，因為對彼此來講都是節省時間。我省掉以後再看 code 時回想的時間，而 code reviewer 則是省下從頭開始理解的時間。\n\n目前還在磨合期中，希望科科也可以提供建議！\n\n### reference\n\n[good commit message](https://speakerdeck.com/yinghau76/the-elements-of-good-commit-messages?utm_campaign=CodeTengu&utm_medium=email&utm_source=CodeTengu_44)\n\n## javascipt test\n\n[how to write test in existing javascript](https://rmurphey.com/blog/2014/07/13/unit-tests)\n\n很多人都是從前任接手 code 的，這篇文章教你如何從現存的 code 當中進行 refactor。裡頭有很多想法值得一提：\n\n- 不要怪罪前任，要知道代碼的由來通常是有歷史的（每個人都會寫爛 code）\n- 如果沒有 unit test 也沒關係，至少從自己做起\n- 用消極的態度、因為情緒而過度設計，反而會造成更多問題\n- 永遠不要情緒化寫 code\n- **don't use !important with anger**\n\n目前也正在找尋適合主站的測試工具中，希望有一天我們可以達到超過...百分之五十的測試率。\n\n## [日本工作三個月](http://wangyung.blogspot.tw/2016/05/blog-post.html?utm_content=bufferd71fd&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer)\n","slug":"weekly-thought-5-29","published":1,"updated":"2017-02-19T11:19:08.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsl002xiw5to008sd4w","content":"<h3 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h3><h2 id=\"flow\"><a href=\"#flow\" class=\"headerlink\" title=\"flow\"></a>flow</h2><p>第一次聽到，是從 henry 的口中。第二次看到，是從看了 draftjs 的 source code。</p>\n<p>當前端的 code 無可避免地增肥之後（尤其是 js 跟 css)，我們也應該尋找更有效的代碼管理方式。像是逐漸引入的 eslinter 跟 stylelint 都是。</p>\n<p>而 flow 給我的感覺有點像 Typescript，但優點是你可以完全用寫 js 的方式，也不需要改變副檔名（typescript 要寫成 a.ts)。不過還是會害怕抽象化滲透，所以一樣會先觀望一段陣子再套用到主站上吧。</p>\n<h2 id=\"draft\"><a href=\"#draft\" class=\"headerlink\" title=\"draft\"></a>draft</h2><p>假日閒來無事、天氣燥熱，在咖啡廳喝咖啡、聽音樂、寫 code 也蠻愜意的。所以就趁著假日的時光研究了一下科科所說的<a href=\"https://facebook.github.io/draft-js/\" target=\"_blank\" rel=\"external\">draft-js</a></p>\n<p>所有的骯髒事（selection 兼容、檔案拖曳、編輯器內的樣式）draft-js 幾乎都幫你搞定了。當然因為這個 open source 還非常新（react conf 的時候才推出來），有時候噴錯也不知道從哪邊找起。但這的確是值得令人關注的 editor 解決方案。</p>\n<h3 id=\"目前編輯器會遇到的問題\"><a href=\"#目前編輯器會遇到的問題\" class=\"headerlink\" title=\"目前編輯器會遇到的問題\"></a>目前編輯器會遇到的問題</h3><h4 id=\"1-input-跟-textarea-是有極限的\"><a href=\"#1-input-跟-textarea-是有極限的\" class=\"headerlink\" title=\"1. input 跟 textarea 是有極限的\"></a>1. input 跟 textarea 是有極限的</h4><ul>\n<li>他們只能渲染 plain text，如果想要對文字做加粗、斜體、標記等動作，需要花很大的功實作</li>\n<li>當你的文字輸入到下一行時，textarea 高度不足不會自動幫你移位。你可能需要計算下一行文字的位置，然後做相關的操作。這也很費工，而且對使用者的體驗非常糟糕。(備註：現在已經有了新的解法 <a href=\"\"></a>)</li>\n</ul>\n<h4 id=\"2-contenteditable-is-terrible\"><a href=\"#2-contenteditable-is-terrible\" class=\"headerlink\" title=\"2. contenteditable is terrible\"></a>2. <a href=\"https://medium.engineering/why-contenteditable-is-terrible-122d8a40e480#.7cqtr19fk\" target=\"_blank\" rel=\"external\">contenteditable is terrible</a></h4><p>因為是將文字內容放在非 input 的 tag 裡面，每種瀏覽器的實作都不太一樣，也很容易就會有意想不到的問題發生。不過 contenteditable 的好處是他活得夠久，瀏覽器也都幾乎實作了，所以反而可以利用這樣的特性來解決當前編輯器遇到的問題。</p>\n<p>draft 的概念其實也跟 react 很像，將 editor 跟 content 的狀態存放起來，而非依賴在 DOM 上面。而且他們的狀態不是用純 string 去儲存，而是用 Record(他們實作的資料結構)來代表每個節點。</p>\n<p>而 API 文件也寫得挺清楚的，同時也完全實作 immutable 的概念。每次對編輯的內容做操作，就是完全更新狀態。剛開始會覺得很麻煩，我明明只是要一段 text，還要呼叫 getCurrentContent() 回傳的竟然還是一個 <code>Map</code> 在從裡面呼叫 getText()；或者我想要更動狀態時，還要做類似這樣的操作：<code>RichUtils.toggleInlineStyle(curState,&#39;BOLD&#39;)</code>，然後再把新的 state 傳進去。看似麻煩，不過這樣的方式到後期的開發顯然是有好處的。<br>容易測試，易讀性高，容易修改、除錯。</p>\n<p>facebook 也提供了蠻實用的<a href=\"https://github.com/facebook/draft-js\" target=\"_blank\" rel=\"external\">範例</a> 看完之後可以更瞭解 draft 到底是怎樣運作的。</p>\n<p>這邊是我看了官方文件之後實作的範例：<a href=\"https://github.com/kjj6198/redux-setup\" target=\"_blank\" rel=\"external\">draft-example</a> 。還不算太完整，之後會再慢慢補上。</p>\n<p><strong>reference</strong></p>\n<p><a href=\"https://medium.com/@adrianli/a-beginner-s-guide-to-draft-js-d1823f58d8cc#.3apelia5r\" target=\"_blank\" rel=\"external\">a guide to draftJS</a></p>\n<h2 id=\"重新思考-rails-helper\"><a href=\"#重新思考-rails-helper\" class=\"headerlink\" title=\"重新思考 rails helper\"></a>重新思考 rails helper</h2><p>在逐漸重構 css 跟 html 的過程中，常常會忘記 helper 的存在，最近寫一寫才恍然大悟，對啊！我不是有 helper 嗎？目前對於比較複雜的邏輯判斷已經會習慣性地去使用 helper，但在 view 裡頭，有沒有 helper 可以幫上忙的可能性？</p>\n<p>雖然用 partial 也可以做到類似的事情，但跟 helper 做搭配會更強大啊！</p>\n<p>而且因為 partial 有時候還要去對應路徑，而 helper 則是全域都可以使用。對高度重複的頁面來說或許用 helper 會更加簡單！</p>\n<p><strong>例如我們很常用到的 tags。</strong></p>\n<p>當初 sudo tags 改版的時候花了不少時間去更動，因為幾乎每個 tag 裡面都重寫了一次 each，class 命名有時候也不盡相同。</p>\n<p>不過使用 partial 又好像太小題大作，畢竟 tag 的架構並沒有如此複雜。</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag_of_tags</span><span class=\"params\">(tags, options = &#123;&#125;, html_options)</span></span></div><div class=\"line\"></div><div class=\"line\">  raw tags.collect &#123; <span class=\"params\">|tag|</span> content_tag(<span class=\"symbol\">:span</span>,tag.name, options, html_options)&#125;</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>這樣一來，每次我需要用到 tag 的時候就只要</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">tag_of_tags</span>(@<span class=\"attr\">post.tags</span>) %&gt;</span></div></pre></td></tr></table></figure>\n<p>當然也可以做一些調整，例如加入 namespace 來符合我們的使用情境。<br><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag_of_tags</span><span class=\"params\">(tags, namespace,options = &#123;&#125;, html_options)</span></span></div><div class=\"line\"></div><div class=\"line\">  raw tags.collect &#123; <span class=\"params\">|tag|</span> content_tag(<span class=\"symbol\">:span</span>,tag.name, <span class=\"symbol\">:class</span> =&gt; namespace)</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">tag_of_tags</span>(@<span class=\"attr\">post.tags</span>, \"<span class=\"attr\">sudo</span>\") %&gt;</span></div></pre></td></tr></table></figure>\n<p>這樣一來每次 tag 要更新的時候，我只要安心修改 helper，其他地方全部都會生效。寫起來自然輕鬆！</p>\n<p>以上只是一小部分的例子，舉凡 <code>navbar</code> <code>button</code> <code>dropdown</code> 等，幾乎是每個網站開發必備的元素。我們在新增 partial 的同時，說不定也可以搭配 helper 一起思考更多的可能性！</p>\n<h2 id=\"關於文件，我有話要說\"><a href=\"#關於文件，我有話要說\" class=\"headerlink\" title=\"關於文件，我有話要說\"></a>關於文件，我有話要說</h2><p>最近因為想要讓 legacy 漸漸減少，會盡量地用重用性的角度來思考。</p>\n<p>不過科科給了我一句話「太早談重用性，反而會掉入過度設計的陷阱」。仔細想過之後，的確如此吧！</p>\n<p>但我認為，這樣的嘗試是好的，對自己來講是從更寬的角度來看自己的 code，也可以減少一些自己以前的盲點等等。</p>\n<p>而想要讓 code review 變得輕鬆的辦法，就是寫文件。不管對 senior 也好對 junior 也好都是有幫助。雖然我的 code 現階段還沒有達到很高的水準，可是透過寫文件這件事情，code reviewer 可以快速理解我的想法，為什麼我要這麼做。</p>\n<p>而不是讓 reviewer 從頭看我的 code，揣測我到底在幹嘛？像是 modal 對我來說就是一個很好的嘗試，科科很快地就指出其中的問題跟盲點。</p>\n<p>這樣一來，對我來說，我可以從自己的想法裡面寫出品質更好的 code；而 reviewer 因為容易理解我的想法，給予 feedback 的意願也就相對提高了。</p>\n<p>當然，可能目前寫得還不夠多，想法也還不夠成熟也說不定，但是從這樣的練習過程中，我想也會慢慢進步吧！</p>\n<p>這是我為什麼很用心在寫文件的原因，因為對彼此來講都是節省時間。我省掉以後再看 code 時回想的時間，而 code reviewer 則是省下從頭開始理解的時間。</p>\n<p>目前還在磨合期中，希望科科也可以提供建議！</p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"https://speakerdeck.com/yinghau76/the-elements-of-good-commit-messages?utm_campaign=CodeTengu&amp;utm_medium=email&amp;utm_source=CodeTengu_44\" target=\"_blank\" rel=\"external\">good commit message</a></p>\n<h2 id=\"javascipt-test\"><a href=\"#javascipt-test\" class=\"headerlink\" title=\"javascipt test\"></a>javascipt test</h2><p><a href=\"https://rmurphey.com/blog/2014/07/13/unit-tests\" target=\"_blank\" rel=\"external\">how to write test in existing javascript</a></p>\n<p>很多人都是從前任接手 code 的，這篇文章教你如何從現存的 code 當中進行 refactor。裡頭有很多想法值得一提：</p>\n<ul>\n<li>不要怪罪前任，要知道代碼的由來通常是有歷史的（每個人都會寫爛 code）</li>\n<li>如果沒有 unit test 也沒關係，至少從自己做起</li>\n<li>用消極的態度、因為情緒而過度設計，反而會造成更多問題</li>\n<li>永遠不要情緒化寫 code</li>\n<li><strong>don’t use !important with anger</strong></li>\n</ul>\n<p>目前也正在找尋適合主站的測試工具中，希望有一天我們可以達到超過…百分之五十的測試率。</p>\n<h2 id=\"日本工作三個月\"><a href=\"#日本工作三個月\" class=\"headerlink\" title=\"日本工作三個月\"></a><a href=\"http://wangyung.blogspot.tw/2016/05/blog-post.html?utm_content=bufferd71fd&amp;utm_medium=social&amp;utm_source=facebook.com&amp;utm_campaign=buffer\" target=\"_blank\" rel=\"external\">日本工作三個月</a></h2>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h3><h2 id=\"flow\"><a href=\"#flow\" class=\"headerlink\" title=\"flow\"></a>flow</h2><p>第一次聽到，是從 henry 的口中。第二次看到，是從看了 draftjs 的 source code。</p>\n<p>當前端的 code 無可避免地增肥之後（尤其是 js 跟 css)，我們也應該尋找更有效的代碼管理方式。像是逐漸引入的 eslinter 跟 stylelint 都是。</p>\n<p>而 flow 給我的感覺有點像 Typescript，但優點是你可以完全用寫 js 的方式，也不需要改變副檔名（typescript 要寫成 a.ts)。不過還是會害怕抽象化滲透，所以一樣會先觀望一段陣子再套用到主站上吧。</p>\n<h2 id=\"draft\"><a href=\"#draft\" class=\"headerlink\" title=\"draft\"></a>draft</h2><p>假日閒來無事、天氣燥熱，在咖啡廳喝咖啡、聽音樂、寫 code 也蠻愜意的。所以就趁著假日的時光研究了一下科科所說的<a href=\"https://facebook.github.io/draft-js/\" target=\"_blank\" rel=\"external\">draft-js</a></p>\n<p>所有的骯髒事（selection 兼容、檔案拖曳、編輯器內的樣式）draft-js 幾乎都幫你搞定了。當然因為這個 open source 還非常新（react conf 的時候才推出來），有時候噴錯也不知道從哪邊找起。但這的確是值得令人關注的 editor 解決方案。</p>\n<h3 id=\"目前編輯器會遇到的問題\"><a href=\"#目前編輯器會遇到的問題\" class=\"headerlink\" title=\"目前編輯器會遇到的問題\"></a>目前編輯器會遇到的問題</h3><h4 id=\"1-input-跟-textarea-是有極限的\"><a href=\"#1-input-跟-textarea-是有極限的\" class=\"headerlink\" title=\"1. input 跟 textarea 是有極限的\"></a>1. input 跟 textarea 是有極限的</h4><ul>\n<li>他們只能渲染 plain text，如果想要對文字做加粗、斜體、標記等動作，需要花很大的功實作</li>\n<li>當你的文字輸入到下一行時，textarea 高度不足不會自動幫你移位。你可能需要計算下一行文字的位置，然後做相關的操作。這也很費工，而且對使用者的體驗非常糟糕。(備註：現在已經有了新的解法 <a href=\"\"></a>)</li>\n</ul>\n<h4 id=\"2-contenteditable-is-terrible\"><a href=\"#2-contenteditable-is-terrible\" class=\"headerlink\" title=\"2. contenteditable is terrible\"></a>2. <a href=\"https://medium.engineering/why-contenteditable-is-terrible-122d8a40e480#.7cqtr19fk\" target=\"_blank\" rel=\"external\">contenteditable is terrible</a></h4><p>因為是將文字內容放在非 input 的 tag 裡面，每種瀏覽器的實作都不太一樣，也很容易就會有意想不到的問題發生。不過 contenteditable 的好處是他活得夠久，瀏覽器也都幾乎實作了，所以反而可以利用這樣的特性來解決當前編輯器遇到的問題。</p>\n<p>draft 的概念其實也跟 react 很像，將 editor 跟 content 的狀態存放起來，而非依賴在 DOM 上面。而且他們的狀態不是用純 string 去儲存，而是用 Record(他們實作的資料結構)來代表每個節點。</p>\n<p>而 API 文件也寫得挺清楚的，同時也完全實作 immutable 的概念。每次對編輯的內容做操作，就是完全更新狀態。剛開始會覺得很麻煩，我明明只是要一段 text，還要呼叫 getCurrentContent() 回傳的竟然還是一個 <code>Map</code> 在從裡面呼叫 getText()；或者我想要更動狀態時，還要做類似這樣的操作：<code>RichUtils.toggleInlineStyle(curState,&#39;BOLD&#39;)</code>，然後再把新的 state 傳進去。看似麻煩，不過這樣的方式到後期的開發顯然是有好處的。<br>容易測試，易讀性高，容易修改、除錯。</p>\n<p>facebook 也提供了蠻實用的<a href=\"https://github.com/facebook/draft-js\" target=\"_blank\" rel=\"external\">範例</a> 看完之後可以更瞭解 draft 到底是怎樣運作的。</p>\n<p>這邊是我看了官方文件之後實作的範例：<a href=\"https://github.com/kjj6198/redux-setup\" target=\"_blank\" rel=\"external\">draft-example</a> 。還不算太完整，之後會再慢慢補上。</p>\n<p><strong>reference</strong></p>\n<p><a href=\"https://medium.com/@adrianli/a-beginner-s-guide-to-draft-js-d1823f58d8cc#.3apelia5r\" target=\"_blank\" rel=\"external\">a guide to draftJS</a></p>\n<h2 id=\"重新思考-rails-helper\"><a href=\"#重新思考-rails-helper\" class=\"headerlink\" title=\"重新思考 rails helper\"></a>重新思考 rails helper</h2><p>在逐漸重構 css 跟 html 的過程中，常常會忘記 helper 的存在，最近寫一寫才恍然大悟，對啊！我不是有 helper 嗎？目前對於比較複雜的邏輯判斷已經會習慣性地去使用 helper，但在 view 裡頭，有沒有 helper 可以幫上忙的可能性？</p>\n<p>雖然用 partial 也可以做到類似的事情，但跟 helper 做搭配會更強大啊！</p>\n<p>而且因為 partial 有時候還要去對應路徑，而 helper 則是全域都可以使用。對高度重複的頁面來說或許用 helper 會更加簡單！</p>\n<p><strong>例如我們很常用到的 tags。</strong></p>\n<p>當初 sudo tags 改版的時候花了不少時間去更動，因為幾乎每個 tag 裡面都重寫了一次 each，class 命名有時候也不盡相同。</p>\n<p>不過使用 partial 又好像太小題大作，畢竟 tag 的架構並沒有如此複雜。</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag_of_tags</span><span class=\"params\">(tags, options = &#123;&#125;, html_options)</span></span></div><div class=\"line\"></div><div class=\"line\">  raw tags.collect &#123; <span class=\"params\">|tag|</span> content_tag(<span class=\"symbol\">:span</span>,tag.name, options, html_options)&#125;</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>這樣一來，每次我需要用到 tag 的時候就只要</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">tag_of_tags</span>(@<span class=\"attr\">post.tags</span>) %&gt;</span></div></pre></td></tr></table></figure>\n<p>當然也可以做一些調整，例如加入 namespace 來符合我們的使用情境。<br><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tag_of_tags</span><span class=\"params\">(tags, namespace,options = &#123;&#125;, html_options)</span></span></div><div class=\"line\"></div><div class=\"line\">  raw tags.collect &#123; <span class=\"params\">|tag|</span> content_tag(<span class=\"symbol\">:span</span>,tag.name, <span class=\"symbol\">:class</span> =&gt; namespace)</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">tag_of_tags</span>(@<span class=\"attr\">post.tags</span>, \"<span class=\"attr\">sudo</span>\") %&gt;</span></div></pre></td></tr></table></figure>\n<p>這樣一來每次 tag 要更新的時候，我只要安心修改 helper，其他地方全部都會生效。寫起來自然輕鬆！</p>\n<p>以上只是一小部分的例子，舉凡 <code>navbar</code> <code>button</code> <code>dropdown</code> 等，幾乎是每個網站開發必備的元素。我們在新增 partial 的同時，說不定也可以搭配 helper 一起思考更多的可能性！</p>\n<h2 id=\"關於文件，我有話要說\"><a href=\"#關於文件，我有話要說\" class=\"headerlink\" title=\"關於文件，我有話要說\"></a>關於文件，我有話要說</h2><p>最近因為想要讓 legacy 漸漸減少，會盡量地用重用性的角度來思考。</p>\n<p>不過科科給了我一句話「太早談重用性，反而會掉入過度設計的陷阱」。仔細想過之後，的確如此吧！</p>\n<p>但我認為，這樣的嘗試是好的，對自己來講是從更寬的角度來看自己的 code，也可以減少一些自己以前的盲點等等。</p>\n<p>而想要讓 code review 變得輕鬆的辦法，就是寫文件。不管對 senior 也好對 junior 也好都是有幫助。雖然我的 code 現階段還沒有達到很高的水準，可是透過寫文件這件事情，code reviewer 可以快速理解我的想法，為什麼我要這麼做。</p>\n<p>而不是讓 reviewer 從頭看我的 code，揣測我到底在幹嘛？像是 modal 對我來說就是一個很好的嘗試，科科很快地就指出其中的問題跟盲點。</p>\n<p>這樣一來，對我來說，我可以從自己的想法裡面寫出品質更好的 code；而 reviewer 因為容易理解我的想法，給予 feedback 的意願也就相對提高了。</p>\n<p>當然，可能目前寫得還不夠多，想法也還不夠成熟也說不定，但是從這樣的練習過程中，我想也會慢慢進步吧！</p>\n<p>這是我為什麼很用心在寫文件的原因，因為對彼此來講都是節省時間。我省掉以後再看 code 時回想的時間，而 code reviewer 則是省下從頭開始理解的時間。</p>\n<p>目前還在磨合期中，希望科科也可以提供建議！</p>\n<h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"https://speakerdeck.com/yinghau76/the-elements-of-good-commit-messages?utm_campaign=CodeTengu&amp;utm_medium=email&amp;utm_source=CodeTengu_44\" target=\"_blank\" rel=\"external\">good commit message</a></p>\n<h2 id=\"javascipt-test\"><a href=\"#javascipt-test\" class=\"headerlink\" title=\"javascipt test\"></a>javascipt test</h2><p><a href=\"https://rmurphey.com/blog/2014/07/13/unit-tests\" target=\"_blank\" rel=\"external\">how to write test in existing javascript</a></p>\n<p>很多人都是從前任接手 code 的，這篇文章教你如何從現存的 code 當中進行 refactor。裡頭有很多想法值得一提：</p>\n<ul>\n<li>不要怪罪前任，要知道代碼的由來通常是有歷史的（每個人都會寫爛 code）</li>\n<li>如果沒有 unit test 也沒關係，至少從自己做起</li>\n<li>用消極的態度、因為情緒而過度設計，反而會造成更多問題</li>\n<li>永遠不要情緒化寫 code</li>\n<li><strong>don’t use !important with anger</strong></li>\n</ul>\n<p>目前也正在找尋適合主站的測試工具中，希望有一天我們可以達到超過…百分之五十的測試率。</p>\n<h2 id=\"日本工作三個月\"><a href=\"#日本工作三個月\" class=\"headerlink\" title=\"日本工作三個月\"></a><a href=\"http://wangyung.blogspot.tw/2016/05/blog-post.html?utm_content=bufferd71fd&amp;utm_medium=social&amp;utm_source=facebook.com&amp;utm_campaign=buffer\" target=\"_blank\" rel=\"external\">日本工作三個月</a></h2>"},{"title":"weekly-thought-5/30","image":"landing.png","desc":"這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。","date":"2016-11-14T11:51:39.000Z","_content":"\n\n這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。\n\n這些東西在前端變化快速的時代下或許顯得不那麼重要，不過思考總是件好事。\n\n## 語義化標籤\n\n### 重新思考語義化這件事\n\n會有這個想法，是看到 `instant article` 的 html 架構，他們規範 instant article 的架構必須符合他們的規範，而且結構的表達也很清楚。我在裡頭看到了好多我以前沒有注意過的 html tag。像是 `address` `figure` `caption` `summary` 。好奇之下查了一下[文件](http://www.w3schools.com/tags/tag_html.asp)等等。發現其實有很多語義化的標籤都已經支持目前主流的瀏覽器，spec 也寫得很清楚，但是目前主站多還是以 `div + class` 的方式做表達，雖然有些地方會套用 `header`，但我認為有更多適合的語義化標籤可以加入使用。除了減少不必要的 class 命名，也能夠提高 html 的易讀性跟 SEO，重點是，我們寫的是符合標準的 html。\n\n\n而且 w3c 在 html5 致力推廣語義化的標籤，諸如 `nav` `header` `dd` `dt` 等等，並且將一些沒有意義的 tag 刪除或是不推薦使用如 `b` `font` `center` 等等。\n\n\n### 對於 class 的思考\n\n[語義化 css](http://www.w3cplus.com/css/semantic-css-with-intelligent-selectors.html)\n\n用了那麼久的 class，我回去找了找 spec，發現了 w3c 對 class 的描述。\n\n> There are no additional restrictions on the tokens authors can use in the class attribute, but authors are encouraged to use values that describe the nature of the content, rather than values that describe the desired presentation of the content.  -w3c\n\n\n雖然 class 並沒有使用上的規定，但是鼓勵盡量將 class 用於表達元素內容而非描述元素的展現。也就是說那些 `col-md-*` 等表現性的 class 名稱其實在 w3c 的 spec 裡面是不符合規範的。但是會出現 unit class 的原因卻是因為我們沒有按照標準來而孵化出來的產物。雖然很多人擁護 unit class 的便利性跟節省開發的速度，但我認為比起開發上的時間節省，**身為網頁開發人員，我們要注重的更應該是頁面的表達跟使用者的互動**。\n\n當然不得不承認的是，在理想上跟實際上總是會有差異。因為嚴格說起來，facebook 也沒有符合規範，他們是用`css module`的方式進行開發。\n\n不過這裡想提出這樣子的想法跟大家討論。\n雖然標準的定案到瀏覽器的實作，總是要花不少時間。\n\n為什麼要符合標準？\n1. 標準規範是由一大堆科學家研究過後、大量的討論過後所制定出來的規範，給大家遵守以便達到統一性。\n2. 通常這些規範是 best practice。\n3. 為什麼我們要為了節省開發時間而寫出不符標準的網頁本末倒置？\n\n\n\n我們有更好的解決方案 > SASS\ntake id rethink\n我不會反對用挖掘機清理災難現場，但我不會拿來整理自己的家。\n給後代選擇器一個平反的機會，搭配 id 使用效果佳\n\n\n\n```html\n<!-- 元素展現 -->\n<div class=\"margin-b-10\">\n\n</div>\n\n<!-- 內容 -->\n<div class=\"user_info\">\n\n</div>\n\n```\n\n自己的理解是這樣。\n\n至於為什麼會造成這樣的原因，或許是因為在網頁發展初期，CSS 的支持性並不好，在語義化跟表現之間很難得到平衡，才會有當時純 style 的 `center` `width` 出現。但現在已經不是那個綁手綁腳的年代了。我們應該朝向語義化的年代前進，而且這也是`w3c`在推廣的事情，身為一個站在網路業尖端的優質網路招聘公司，就由我們來引領風騷吧！\n\n對 `unit class` 難道沒有其他辦法解決嗎？我自己非常喜歡語義化的 `class`，而且很討厭 `row` `col` `text-center`，每次寫起來都會有罪惡感...。\n\n至於用 unit class 的人，通常是因為不想花太多時間重寫 style 架構、節省開發時間、或是他根本不會 css，所以找個 `bootstrap` 直接套。但我們是前端工程師，我們有能力去組織 css。現在這個語義化年代，正是我們前端平反的好時機。\n\n1. 推行標準的目的是為技術交流構建一個統一的上下文語境平台，提高溝通效率，避免雞同鴨講。\n2. 同時標準跟規範的製定是經過一群資深開發者／科學家經過仔細研究及社區討論的，一套完整的一致的基礎架構系統是推進生態發展的必要條件。\n3. 就Web語義化這件事情而言，如果你的HTML是基於標準來編寫的，意味著你的頁面具備更多的可能性。比如搜索引擎友好，多終端適配(不是響應式。。是指兼容各種閱讀設備、讀屏軟件等。參見microformats )，更智能的風格查錯能力。\n4. 在前端開發體系裡，能體系專業性的地方不多。。拿程序複雜度而言，它跟大型後端系統差不止一個量級(前端的難度在於工程上)。。好不容易有一個能體現專業素養的領域(語義化Web)，為什麼我們不抓住機會為自己正名呢。。\n\n我覺得這並不會增加維護成本，反而會在長期內減少冗餘樣式、不可預知的樣式覆蓋等維護問題。唯一的成本可能就是你在開始一個頁面之前，需要去抽像一下可複用的單元，然後用sass表達出來。不過我感覺如果你採用的是正確的工作流(面向語義)，這些事情都是比較順理成章的。\n\n對於團隊開發如何確保面向語義，這確實是一個比較難解決的問題。除了需要提供一個清晰的團隊sass庫說明之外，貌似只能通過一些工程化手段解決了(加強code review流程、制定規範等等)。\n\n### grid system 是個很棒的東西耶！\n\n我承認 grid system 的確是個非常好用的模式，在實際場景也會遇到 layout 無法用語義化來表示的問題，但根據語義化的定義，為了寫出更好看的 HTML 跟易讀性，我們或許總有一天還是要把 grid system 拔掉。這會是個大工程，但在目前主站說大不大，說小不小的架構上，還是越早開始越好吧！\n\n- 使用 susy\n- @include @extend\n\n## Page Visibility API\n\n能夠知道目前 user 是否 focus 在這個 page 上。\n在很多情境下，我們希望當使用者沒有聚焦在這個網頁上（可能跳去別的應用程式、切換分頁時），可以盡量減少不必的請求或操作。facebook 好像也是當你回到網頁時才會有訊息的提示聲音。\n比較常見的情景是播放影片時，如果使用者跳出頁面，我們可以先自動讓影片停止，等使用者回來之後，影片在繼續播放。\n\n### 回頭看看 js 的事件傳播\n\n最近把犀牛書拿回來翻了翻，主要是為了釐清以前不是那麼明白的觀念。太多 js library 充斥在網路，我們是否已經忘記原生的 js 了？雖然高度的抽象化是科技趨於發達後一定會有的現象，但是了解一下內部的運作也是好的，對於之後寫 code 也會比較有概念！\n\n#### js 事件傳播\n\njs 的事件傳播主要分為兩大類型，`bubble` 跟 `capture`，大部分的傳播方式是用 `bubble`。什麼是 `bubble` 呢？在註冊對象元素的事件處理器被調用之後，事件就會開始往上漂浮（不包含某些元素的特定事件），然後再調用註冊於祖父元素上的處理器。這種現象會上升到 `document` 最後到達 `window`。\n\n在實際應用上，我們時常看到：\n```js\n$(\".abc\").on('click', e => {\n\t\n});\n\n$(\".ass\").on('click', e => {\n\t\n});\n\n$(\".asass\").on('click', e => {\n\t\n});\n\n```\n\n散亂的事件註冊在角落，不僅維護上困難，在尋找 code 的時候也沒有統一入口，非常難以除錯。於是我們可以利用 js 事件的冒泡特性，為 document 統一註冊事件。jQuery 的 on 第二個函數便提供了事件委託的功能，如下：\n\n```js\n$('document').on('click','.sass', e => {\n \n});\n```\n\n這樣的好處不僅減少了散亂的事件註冊，還統一了入口。如果要新增事件，只要在 document 統一做擴充即可。我們還可以在 html 這樣寫：\n\n```html\n\t<a  class=\"js_action\" data-action=\"foo\">\n\t<a  class=\"js_action\" data-action=\"bar\">\n```\n\n```js\n  var actionList = {\n  \tfoo: function(),\n  \tbar: function()\n\t}\n\t$('document').on('click','.js_action', e => {\n\t\tif(typeof e.target.dataset.action === 'function'){\n\t\t\tactionList[e.target.dataset.action]\n\t\t}\n\t})\n```\n\n像這樣，以後如果要增加新的 event handlder 只要在 acionList 新增就好，甚至搭配 extend 的方式，可以不用寫在 actionList 也沒關係。充分提高了擴充性\n\n\n那麼，為什麼那麼少人使用 capture 呢？最大的原因在於因為可愛的 IE 無法使用。再來事件捕捉只適用於 addEventListener 的方式。\n事件捕捉有點像是反過來，會先從祖父開始，依序向下船，直到**事件父元素的事件處理被被調用為止**，註冊於事件元素的事件處理器永遠不會被調用。\n\n#### 事件取消\n\n我們也常常看到類似 `e.preventDefault()` 的方法。其實像是舊版的瀏覽器並不支援，我們可以用一些比較 tricky 的方式來做取消。\n\n```js\nfunction cancelDefault(event) {\n\tvar event = event || window.event;\n\n\tif(event.preventDefault) event.preventDefault()\n\tif(event.returnValue) event.returnValue = false\n\treturn false\n}\n\n```\n\n","source":"_posts/weekly-thought-5-30.md","raw":"---\ntitle: weekly-thought-5/30\ncategories: 前端週刊\ntags:\n  - javascript\n  - html\n  - css\nimage: landing.png\ndesc: >-\n  這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。\ndate: 2016-11-14 19:51:39\n---\n\n\n這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。\n\n這些東西在前端變化快速的時代下或許顯得不那麼重要，不過思考總是件好事。\n\n## 語義化標籤\n\n### 重新思考語義化這件事\n\n會有這個想法，是看到 `instant article` 的 html 架構，他們規範 instant article 的架構必須符合他們的規範，而且結構的表達也很清楚。我在裡頭看到了好多我以前沒有注意過的 html tag。像是 `address` `figure` `caption` `summary` 。好奇之下查了一下[文件](http://www.w3schools.com/tags/tag_html.asp)等等。發現其實有很多語義化的標籤都已經支持目前主流的瀏覽器，spec 也寫得很清楚，但是目前主站多還是以 `div + class` 的方式做表達，雖然有些地方會套用 `header`，但我認為有更多適合的語義化標籤可以加入使用。除了減少不必要的 class 命名，也能夠提高 html 的易讀性跟 SEO，重點是，我們寫的是符合標準的 html。\n\n\n而且 w3c 在 html5 致力推廣語義化的標籤，諸如 `nav` `header` `dd` `dt` 等等，並且將一些沒有意義的 tag 刪除或是不推薦使用如 `b` `font` `center` 等等。\n\n\n### 對於 class 的思考\n\n[語義化 css](http://www.w3cplus.com/css/semantic-css-with-intelligent-selectors.html)\n\n用了那麼久的 class，我回去找了找 spec，發現了 w3c 對 class 的描述。\n\n> There are no additional restrictions on the tokens authors can use in the class attribute, but authors are encouraged to use values that describe the nature of the content, rather than values that describe the desired presentation of the content.  -w3c\n\n\n雖然 class 並沒有使用上的規定，但是鼓勵盡量將 class 用於表達元素內容而非描述元素的展現。也就是說那些 `col-md-*` 等表現性的 class 名稱其實在 w3c 的 spec 裡面是不符合規範的。但是會出現 unit class 的原因卻是因為我們沒有按照標準來而孵化出來的產物。雖然很多人擁護 unit class 的便利性跟節省開發的速度，但我認為比起開發上的時間節省，**身為網頁開發人員，我們要注重的更應該是頁面的表達跟使用者的互動**。\n\n當然不得不承認的是，在理想上跟實際上總是會有差異。因為嚴格說起來，facebook 也沒有符合規範，他們是用`css module`的方式進行開發。\n\n不過這裡想提出這樣子的想法跟大家討論。\n雖然標準的定案到瀏覽器的實作，總是要花不少時間。\n\n為什麼要符合標準？\n1. 標準規範是由一大堆科學家研究過後、大量的討論過後所制定出來的規範，給大家遵守以便達到統一性。\n2. 通常這些規範是 best practice。\n3. 為什麼我們要為了節省開發時間而寫出不符標準的網頁本末倒置？\n\n\n\n我們有更好的解決方案 > SASS\ntake id rethink\n我不會反對用挖掘機清理災難現場，但我不會拿來整理自己的家。\n給後代選擇器一個平反的機會，搭配 id 使用效果佳\n\n\n\n```html\n<!-- 元素展現 -->\n<div class=\"margin-b-10\">\n\n</div>\n\n<!-- 內容 -->\n<div class=\"user_info\">\n\n</div>\n\n```\n\n自己的理解是這樣。\n\n至於為什麼會造成這樣的原因，或許是因為在網頁發展初期，CSS 的支持性並不好，在語義化跟表現之間很難得到平衡，才會有當時純 style 的 `center` `width` 出現。但現在已經不是那個綁手綁腳的年代了。我們應該朝向語義化的年代前進，而且這也是`w3c`在推廣的事情，身為一個站在網路業尖端的優質網路招聘公司，就由我們來引領風騷吧！\n\n對 `unit class` 難道沒有其他辦法解決嗎？我自己非常喜歡語義化的 `class`，而且很討厭 `row` `col` `text-center`，每次寫起來都會有罪惡感...。\n\n至於用 unit class 的人，通常是因為不想花太多時間重寫 style 架構、節省開發時間、或是他根本不會 css，所以找個 `bootstrap` 直接套。但我們是前端工程師，我們有能力去組織 css。現在這個語義化年代，正是我們前端平反的好時機。\n\n1. 推行標準的目的是為技術交流構建一個統一的上下文語境平台，提高溝通效率，避免雞同鴨講。\n2. 同時標準跟規範的製定是經過一群資深開發者／科學家經過仔細研究及社區討論的，一套完整的一致的基礎架構系統是推進生態發展的必要條件。\n3. 就Web語義化這件事情而言，如果你的HTML是基於標準來編寫的，意味著你的頁面具備更多的可能性。比如搜索引擎友好，多終端適配(不是響應式。。是指兼容各種閱讀設備、讀屏軟件等。參見microformats )，更智能的風格查錯能力。\n4. 在前端開發體系裡，能體系專業性的地方不多。。拿程序複雜度而言，它跟大型後端系統差不止一個量級(前端的難度在於工程上)。。好不容易有一個能體現專業素養的領域(語義化Web)，為什麼我們不抓住機會為自己正名呢。。\n\n我覺得這並不會增加維護成本，反而會在長期內減少冗餘樣式、不可預知的樣式覆蓋等維護問題。唯一的成本可能就是你在開始一個頁面之前，需要去抽像一下可複用的單元，然後用sass表達出來。不過我感覺如果你採用的是正確的工作流(面向語義)，這些事情都是比較順理成章的。\n\n對於團隊開發如何確保面向語義，這確實是一個比較難解決的問題。除了需要提供一個清晰的團隊sass庫說明之外，貌似只能通過一些工程化手段解決了(加強code review流程、制定規範等等)。\n\n### grid system 是個很棒的東西耶！\n\n我承認 grid system 的確是個非常好用的模式，在實際場景也會遇到 layout 無法用語義化來表示的問題，但根據語義化的定義，為了寫出更好看的 HTML 跟易讀性，我們或許總有一天還是要把 grid system 拔掉。這會是個大工程，但在目前主站說大不大，說小不小的架構上，還是越早開始越好吧！\n\n- 使用 susy\n- @include @extend\n\n## Page Visibility API\n\n能夠知道目前 user 是否 focus 在這個 page 上。\n在很多情境下，我們希望當使用者沒有聚焦在這個網頁上（可能跳去別的應用程式、切換分頁時），可以盡量減少不必的請求或操作。facebook 好像也是當你回到網頁時才會有訊息的提示聲音。\n比較常見的情景是播放影片時，如果使用者跳出頁面，我們可以先自動讓影片停止，等使用者回來之後，影片在繼續播放。\n\n### 回頭看看 js 的事件傳播\n\n最近把犀牛書拿回來翻了翻，主要是為了釐清以前不是那麼明白的觀念。太多 js library 充斥在網路，我們是否已經忘記原生的 js 了？雖然高度的抽象化是科技趨於發達後一定會有的現象，但是了解一下內部的運作也是好的，對於之後寫 code 也會比較有概念！\n\n#### js 事件傳播\n\njs 的事件傳播主要分為兩大類型，`bubble` 跟 `capture`，大部分的傳播方式是用 `bubble`。什麼是 `bubble` 呢？在註冊對象元素的事件處理器被調用之後，事件就會開始往上漂浮（不包含某些元素的特定事件），然後再調用註冊於祖父元素上的處理器。這種現象會上升到 `document` 最後到達 `window`。\n\n在實際應用上，我們時常看到：\n```js\n$(\".abc\").on('click', e => {\n\t\n});\n\n$(\".ass\").on('click', e => {\n\t\n});\n\n$(\".asass\").on('click', e => {\n\t\n});\n\n```\n\n散亂的事件註冊在角落，不僅維護上困難，在尋找 code 的時候也沒有統一入口，非常難以除錯。於是我們可以利用 js 事件的冒泡特性，為 document 統一註冊事件。jQuery 的 on 第二個函數便提供了事件委託的功能，如下：\n\n```js\n$('document').on('click','.sass', e => {\n \n});\n```\n\n這樣的好處不僅減少了散亂的事件註冊，還統一了入口。如果要新增事件，只要在 document 統一做擴充即可。我們還可以在 html 這樣寫：\n\n```html\n\t<a  class=\"js_action\" data-action=\"foo\">\n\t<a  class=\"js_action\" data-action=\"bar\">\n```\n\n```js\n  var actionList = {\n  \tfoo: function(),\n  \tbar: function()\n\t}\n\t$('document').on('click','.js_action', e => {\n\t\tif(typeof e.target.dataset.action === 'function'){\n\t\t\tactionList[e.target.dataset.action]\n\t\t}\n\t})\n```\n\n像這樣，以後如果要增加新的 event handlder 只要在 acionList 新增就好，甚至搭配 extend 的方式，可以不用寫在 actionList 也沒關係。充分提高了擴充性\n\n\n那麼，為什麼那麼少人使用 capture 呢？最大的原因在於因為可愛的 IE 無法使用。再來事件捕捉只適用於 addEventListener 的方式。\n事件捕捉有點像是反過來，會先從祖父開始，依序向下船，直到**事件父元素的事件處理被被調用為止**，註冊於事件元素的事件處理器永遠不會被調用。\n\n#### 事件取消\n\n我們也常常看到類似 `e.preventDefault()` 的方法。其實像是舊版的瀏覽器並不支援，我們可以用一些比較 tricky 的方式來做取消。\n\n```js\nfunction cancelDefault(event) {\n\tvar event = event || window.event;\n\n\tif(event.preventDefault) event.preventDefault()\n\tif(event.returnValue) event.returnValue = false\n\treturn false\n}\n\n```\n\n","slug":"weekly-thought-5-30","published":1,"updated":"2016-11-14T11:51:39.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsn0030iw5tf6oqb30w","content":"<p>這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。</p>\n<p>這些東西在前端變化快速的時代下或許顯得不那麼重要，不過思考總是件好事。</p>\n<h2 id=\"語義化標籤\"><a href=\"#語義化標籤\" class=\"headerlink\" title=\"語義化標籤\"></a>語義化標籤</h2><h3 id=\"重新思考語義化這件事\"><a href=\"#重新思考語義化這件事\" class=\"headerlink\" title=\"重新思考語義化這件事\"></a>重新思考語義化這件事</h3><p>會有這個想法，是看到 <code>instant article</code> 的 html 架構，他們規範 instant article 的架構必須符合他們的規範，而且結構的表達也很清楚。我在裡頭看到了好多我以前沒有注意過的 html tag。像是 <code>address</code> <code>figure</code> <code>caption</code> <code>summary</code> 。好奇之下查了一下<a href=\"http://www.w3schools.com/tags/tag_html.asp\" target=\"_blank\" rel=\"external\">文件</a>等等。發現其實有很多語義化的標籤都已經支持目前主流的瀏覽器，spec 也寫得很清楚，但是目前主站多還是以 <code>div + class</code> 的方式做表達，雖然有些地方會套用 <code>header</code>，但我認為有更多適合的語義化標籤可以加入使用。除了減少不必要的 class 命名，也能夠提高 html 的易讀性跟 SEO，重點是，我們寫的是符合標準的 html。</p>\n<p>而且 w3c 在 html5 致力推廣語義化的標籤，諸如 <code>nav</code> <code>header</code> <code>dd</code> <code>dt</code> 等等，並且將一些沒有意義的 tag 刪除或是不推薦使用如 <code>b</code> <code>font</code> <code>center</code> 等等。</p>\n<h3 id=\"對於-class-的思考\"><a href=\"#對於-class-的思考\" class=\"headerlink\" title=\"對於 class 的思考\"></a>對於 class 的思考</h3><p><a href=\"http://www.w3cplus.com/css/semantic-css-with-intelligent-selectors.html\" target=\"_blank\" rel=\"external\">語義化 css</a></p>\n<p>用了那麼久的 class，我回去找了找 spec，發現了 w3c 對 class 的描述。</p>\n<blockquote>\n<p>There are no additional restrictions on the tokens authors can use in the class attribute, but authors are encouraged to use values that describe the nature of the content, rather than values that describe the desired presentation of the content.  -w3c</p>\n</blockquote>\n<p>雖然 class 並沒有使用上的規定，但是鼓勵盡量將 class 用於表達元素內容而非描述元素的展現。也就是說那些 <code>col-md-*</code> 等表現性的 class 名稱其實在 w3c 的 spec 裡面是不符合規範的。但是會出現 unit class 的原因卻是因為我們沒有按照標準來而孵化出來的產物。雖然很多人擁護 unit class 的便利性跟節省開發的速度，但我認為比起開發上的時間節省，<strong>身為網頁開發人員，我們要注重的更應該是頁面的表達跟使用者的互動</strong>。</p>\n<p>當然不得不承認的是，在理想上跟實際上總是會有差異。因為嚴格說起來，facebook 也沒有符合規範，他們是用<code>css module</code>的方式進行開發。</p>\n<p>不過這裡想提出這樣子的想法跟大家討論。<br>雖然標準的定案到瀏覽器的實作，總是要花不少時間。</p>\n<p>為什麼要符合標準？</p>\n<ol>\n<li>標準規範是由一大堆科學家研究過後、大量的討論過後所制定出來的規範，給大家遵守以便達到統一性。</li>\n<li>通常這些規範是 best practice。</li>\n<li>為什麼我們要為了節省開發時間而寫出不符標準的網頁本末倒置？</li>\n</ol>\n<p>我們有更好的解決方案 &gt; SASS<br>take id rethink<br>我不會反對用挖掘機清理災難現場，但我不會拿來整理自己的家。<br>給後代選擇器一個平反的機會，搭配 id 使用效果佳</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 元素展現 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"margin-b-10\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- 內容 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"user_info\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>自己的理解是這樣。</p>\n<p>至於為什麼會造成這樣的原因，或許是因為在網頁發展初期，CSS 的支持性並不好，在語義化跟表現之間很難得到平衡，才會有當時純 style 的 <code>center</code> <code>width</code> 出現。但現在已經不是那個綁手綁腳的年代了。我們應該朝向語義化的年代前進，而且這也是<code>w3c</code>在推廣的事情，身為一個站在網路業尖端的優質網路招聘公司，就由我們來引領風騷吧！</p>\n<p>對 <code>unit class</code> 難道沒有其他辦法解決嗎？我自己非常喜歡語義化的 <code>class</code>，而且很討厭 <code>row</code> <code>col</code> <code>text-center</code>，每次寫起來都會有罪惡感…。</p>\n<p>至於用 unit class 的人，通常是因為不想花太多時間重寫 style 架構、節省開發時間、或是他根本不會 css，所以找個 <code>bootstrap</code> 直接套。但我們是前端工程師，我們有能力去組織 css。現在這個語義化年代，正是我們前端平反的好時機。</p>\n<ol>\n<li>推行標準的目的是為技術交流構建一個統一的上下文語境平台，提高溝通效率，避免雞同鴨講。</li>\n<li>同時標準跟規範的製定是經過一群資深開發者／科學家經過仔細研究及社區討論的，一套完整的一致的基礎架構系統是推進生態發展的必要條件。</li>\n<li>就Web語義化這件事情而言，如果你的HTML是基於標準來編寫的，意味著你的頁面具備更多的可能性。比如搜索引擎友好，多終端適配(不是響應式。。是指兼容各種閱讀設備、讀屏軟件等。參見microformats )，更智能的風格查錯能力。</li>\n<li>在前端開發體系裡，能體系專業性的地方不多。。拿程序複雜度而言，它跟大型後端系統差不止一個量級(前端的難度在於工程上)。。好不容易有一個能體現專業素養的領域(語義化Web)，為什麼我們不抓住機會為自己正名呢。。</li>\n</ol>\n<p>我覺得這並不會增加維護成本，反而會在長期內減少冗餘樣式、不可預知的樣式覆蓋等維護問題。唯一的成本可能就是你在開始一個頁面之前，需要去抽像一下可複用的單元，然後用sass表達出來。不過我感覺如果你採用的是正確的工作流(面向語義)，這些事情都是比較順理成章的。</p>\n<p>對於團隊開發如何確保面向語義，這確實是一個比較難解決的問題。除了需要提供一個清晰的團隊sass庫說明之外，貌似只能通過一些工程化手段解決了(加強code review流程、制定規範等等)。</p>\n<h3 id=\"grid-system-是個很棒的東西耶！\"><a href=\"#grid-system-是個很棒的東西耶！\" class=\"headerlink\" title=\"grid system 是個很棒的東西耶！\"></a>grid system 是個很棒的東西耶！</h3><p>我承認 grid system 的確是個非常好用的模式，在實際場景也會遇到 layout 無法用語義化來表示的問題，但根據語義化的定義，為了寫出更好看的 HTML 跟易讀性，我們或許總有一天還是要把 grid system 拔掉。這會是個大工程，但在目前主站說大不大，說小不小的架構上，還是越早開始越好吧！</p>\n<ul>\n<li>使用 susy</li>\n<li>@include @extend</li>\n</ul>\n<h2 id=\"Page-Visibility-API\"><a href=\"#Page-Visibility-API\" class=\"headerlink\" title=\"Page Visibility API\"></a>Page Visibility API</h2><p>能夠知道目前 user 是否 focus 在這個 page 上。<br>在很多情境下，我們希望當使用者沒有聚焦在這個網頁上（可能跳去別的應用程式、切換分頁時），可以盡量減少不必的請求或操作。facebook 好像也是當你回到網頁時才會有訊息的提示聲音。<br>比較常見的情景是播放影片時，如果使用者跳出頁面，我們可以先自動讓影片停止，等使用者回來之後，影片在繼續播放。</p>\n<h3 id=\"回頭看看-js-的事件傳播\"><a href=\"#回頭看看-js-的事件傳播\" class=\"headerlink\" title=\"回頭看看 js 的事件傳播\"></a>回頭看看 js 的事件傳播</h3><p>最近把犀牛書拿回來翻了翻，主要是為了釐清以前不是那麼明白的觀念。太多 js library 充斥在網路，我們是否已經忘記原生的 js 了？雖然高度的抽象化是科技趨於發達後一定會有的現象，但是了解一下內部的運作也是好的，對於之後寫 code 也會比較有概念！</p>\n<h4 id=\"js-事件傳播\"><a href=\"#js-事件傳播\" class=\"headerlink\" title=\"js 事件傳播\"></a>js 事件傳播</h4><p>js 的事件傳播主要分為兩大類型，<code>bubble</code> 跟 <code>capture</code>，大部分的傳播方式是用 <code>bubble</code>。什麼是 <code>bubble</code> 呢？在註冊對象元素的事件處理器被調用之後，事件就會開始往上漂浮（不包含某些元素的特定事件），然後再調用註冊於祖父元素上的處理器。這種現象會上升到 <code>document</code> 最後到達 <code>window</code>。</p>\n<p>在實際應用上，我們時常看到：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">\".abc\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\".ass\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\".asass\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>散亂的事件註冊在角落，不僅維護上困難，在尋找 code 的時候也沒有統一入口，非常難以除錯。於是我們可以利用 js 事件的冒泡特性，為 document 統一註冊事件。jQuery 的 on 第二個函數便提供了事件委託的功能，如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">'document'</span>).on(<span class=\"string\">'click'</span>,<span class=\"string\">'.sass'</span>, e =&gt; &#123;</div><div class=\"line\"> </div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>這樣的好處不僅減少了散亂的事件註冊，還統一了入口。如果要新增事件，只要在 document 統一做擴充即可。我們還可以在 html 這樣寫：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>  <span class=\"attr\">class</span>=<span class=\"string\">\"js_action\"</span> <span class=\"attr\">data-action</span>=<span class=\"string\">\"foo\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>  <span class=\"attr\">class</span>=<span class=\"string\">\"js_action\"</span> <span class=\"attr\">data-action</span>=<span class=\"string\">\"bar\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">var</span> actionList = &#123;</div><div class=\"line\"> \t<span class=\"attr\">foo</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>),</span></div><div class=\"line\"> \t<span class=\"title\">bar</span>: <span class=\"title\">function</span>(<span class=\"params\"></span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"title\">$</span>(<span class=\"params\"><span class=\"string\">'document'</span></span>).<span class=\"title\">on</span>(<span class=\"params\"><span class=\"string\">'click'</span>,<span class=\"string\">'.js_action'</span>, e =&gt; &#123;</span></div><div class=\"line\">\tif(typeof e.target.dataset.action === <span class=\"string\">'function'</span>)&#123;</div><div class=\"line\">\t\tactionList[e.target.dataset.action]</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>像這樣，以後如果要增加新的 event handlder 只要在 acionList 新增就好，甚至搭配 extend 的方式，可以不用寫在 actionList 也沒關係。充分提高了擴充性</p>\n<p>那麼，為什麼那麼少人使用 capture 呢？最大的原因在於因為可愛的 IE 無法使用。再來事件捕捉只適用於 addEventListener 的方式。<br>事件捕捉有點像是反過來，會先從祖父開始，依序向下船，直到<strong>事件父元素的事件處理被被調用為止</strong>，註冊於事件元素的事件處理器永遠不會被調用。</p>\n<h4 id=\"事件取消\"><a href=\"#事件取消\" class=\"headerlink\" title=\"事件取消\"></a>事件取消</h4><p>我們也常常看到類似 <code>e.preventDefault()</code> 的方法。其實像是舊版的瀏覽器並不支援，我們可以用一些比較 tricky 的方式來做取消。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cancelDefault</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> event = event || <span class=\"built_in\">window</span>.event;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span>(event.preventDefault) event.preventDefault()</div><div class=\"line\">\t<span class=\"keyword\">if</span>(event.returnValue) event.returnValue = <span class=\"literal\">false</span></div><div class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>這個禮拜不談「新」東西，多數會是關於網頁開發的重新思考。算是回過頭來漸漸補齊自己的技術債吧！比起前幾個禮拜所談的新東西，這一篇文章可能相對枯燥一點，當然篇幅也會比較長，但我認為這是必要的。</p>\n<p>這些東西在前端變化快速的時代下或許顯得不那麼重要，不過思考總是件好事。</p>\n<h2 id=\"語義化標籤\"><a href=\"#語義化標籤\" class=\"headerlink\" title=\"語義化標籤\"></a>語義化標籤</h2><h3 id=\"重新思考語義化這件事\"><a href=\"#重新思考語義化這件事\" class=\"headerlink\" title=\"重新思考語義化這件事\"></a>重新思考語義化這件事</h3><p>會有這個想法，是看到 <code>instant article</code> 的 html 架構，他們規範 instant article 的架構必須符合他們的規範，而且結構的表達也很清楚。我在裡頭看到了好多我以前沒有注意過的 html tag。像是 <code>address</code> <code>figure</code> <code>caption</code> <code>summary</code> 。好奇之下查了一下<a href=\"http://www.w3schools.com/tags/tag_html.asp\" target=\"_blank\" rel=\"external\">文件</a>等等。發現其實有很多語義化的標籤都已經支持目前主流的瀏覽器，spec 也寫得很清楚，但是目前主站多還是以 <code>div + class</code> 的方式做表達，雖然有些地方會套用 <code>header</code>，但我認為有更多適合的語義化標籤可以加入使用。除了減少不必要的 class 命名，也能夠提高 html 的易讀性跟 SEO，重點是，我們寫的是符合標準的 html。</p>\n<p>而且 w3c 在 html5 致力推廣語義化的標籤，諸如 <code>nav</code> <code>header</code> <code>dd</code> <code>dt</code> 等等，並且將一些沒有意義的 tag 刪除或是不推薦使用如 <code>b</code> <code>font</code> <code>center</code> 等等。</p>\n<h3 id=\"對於-class-的思考\"><a href=\"#對於-class-的思考\" class=\"headerlink\" title=\"對於 class 的思考\"></a>對於 class 的思考</h3><p><a href=\"http://www.w3cplus.com/css/semantic-css-with-intelligent-selectors.html\" target=\"_blank\" rel=\"external\">語義化 css</a></p>\n<p>用了那麼久的 class，我回去找了找 spec，發現了 w3c 對 class 的描述。</p>\n<blockquote>\n<p>There are no additional restrictions on the tokens authors can use in the class attribute, but authors are encouraged to use values that describe the nature of the content, rather than values that describe the desired presentation of the content.  -w3c</p>\n</blockquote>\n<p>雖然 class 並沒有使用上的規定，但是鼓勵盡量將 class 用於表達元素內容而非描述元素的展現。也就是說那些 <code>col-md-*</code> 等表現性的 class 名稱其實在 w3c 的 spec 裡面是不符合規範的。但是會出現 unit class 的原因卻是因為我們沒有按照標準來而孵化出來的產物。雖然很多人擁護 unit class 的便利性跟節省開發的速度，但我認為比起開發上的時間節省，<strong>身為網頁開發人員，我們要注重的更應該是頁面的表達跟使用者的互動</strong>。</p>\n<p>當然不得不承認的是，在理想上跟實際上總是會有差異。因為嚴格說起來，facebook 也沒有符合規範，他們是用<code>css module</code>的方式進行開發。</p>\n<p>不過這裡想提出這樣子的想法跟大家討論。<br>雖然標準的定案到瀏覽器的實作，總是要花不少時間。</p>\n<p>為什麼要符合標準？</p>\n<ol>\n<li>標準規範是由一大堆科學家研究過後、大量的討論過後所制定出來的規範，給大家遵守以便達到統一性。</li>\n<li>通常這些規範是 best practice。</li>\n<li>為什麼我們要為了節省開發時間而寫出不符標準的網頁本末倒置？</li>\n</ol>\n<p>我們有更好的解決方案 &gt; SASS<br>take id rethink<br>我不會反對用挖掘機清理災難現場，但我不會拿來整理自己的家。<br>給後代選擇器一個平反的機會，搭配 id 使用效果佳</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- 元素展現 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"margin-b-10\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- 內容 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"user_info\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>自己的理解是這樣。</p>\n<p>至於為什麼會造成這樣的原因，或許是因為在網頁發展初期，CSS 的支持性並不好，在語義化跟表現之間很難得到平衡，才會有當時純 style 的 <code>center</code> <code>width</code> 出現。但現在已經不是那個綁手綁腳的年代了。我們應該朝向語義化的年代前進，而且這也是<code>w3c</code>在推廣的事情，身為一個站在網路業尖端的優質網路招聘公司，就由我們來引領風騷吧！</p>\n<p>對 <code>unit class</code> 難道沒有其他辦法解決嗎？我自己非常喜歡語義化的 <code>class</code>，而且很討厭 <code>row</code> <code>col</code> <code>text-center</code>，每次寫起來都會有罪惡感…。</p>\n<p>至於用 unit class 的人，通常是因為不想花太多時間重寫 style 架構、節省開發時間、或是他根本不會 css，所以找個 <code>bootstrap</code> 直接套。但我們是前端工程師，我們有能力去組織 css。現在這個語義化年代，正是我們前端平反的好時機。</p>\n<ol>\n<li>推行標準的目的是為技術交流構建一個統一的上下文語境平台，提高溝通效率，避免雞同鴨講。</li>\n<li>同時標準跟規範的製定是經過一群資深開發者／科學家經過仔細研究及社區討論的，一套完整的一致的基礎架構系統是推進生態發展的必要條件。</li>\n<li>就Web語義化這件事情而言，如果你的HTML是基於標準來編寫的，意味著你的頁面具備更多的可能性。比如搜索引擎友好，多終端適配(不是響應式。。是指兼容各種閱讀設備、讀屏軟件等。參見microformats )，更智能的風格查錯能力。</li>\n<li>在前端開發體系裡，能體系專業性的地方不多。。拿程序複雜度而言，它跟大型後端系統差不止一個量級(前端的難度在於工程上)。。好不容易有一個能體現專業素養的領域(語義化Web)，為什麼我們不抓住機會為自己正名呢。。</li>\n</ol>\n<p>我覺得這並不會增加維護成本，反而會在長期內減少冗餘樣式、不可預知的樣式覆蓋等維護問題。唯一的成本可能就是你在開始一個頁面之前，需要去抽像一下可複用的單元，然後用sass表達出來。不過我感覺如果你採用的是正確的工作流(面向語義)，這些事情都是比較順理成章的。</p>\n<p>對於團隊開發如何確保面向語義，這確實是一個比較難解決的問題。除了需要提供一個清晰的團隊sass庫說明之外，貌似只能通過一些工程化手段解決了(加強code review流程、制定規範等等)。</p>\n<h3 id=\"grid-system-是個很棒的東西耶！\"><a href=\"#grid-system-是個很棒的東西耶！\" class=\"headerlink\" title=\"grid system 是個很棒的東西耶！\"></a>grid system 是個很棒的東西耶！</h3><p>我承認 grid system 的確是個非常好用的模式，在實際場景也會遇到 layout 無法用語義化來表示的問題，但根據語義化的定義，為了寫出更好看的 HTML 跟易讀性，我們或許總有一天還是要把 grid system 拔掉。這會是個大工程，但在目前主站說大不大，說小不小的架構上，還是越早開始越好吧！</p>\n<ul>\n<li>使用 susy</li>\n<li>@include @extend</li>\n</ul>\n<h2 id=\"Page-Visibility-API\"><a href=\"#Page-Visibility-API\" class=\"headerlink\" title=\"Page Visibility API\"></a>Page Visibility API</h2><p>能夠知道目前 user 是否 focus 在這個 page 上。<br>在很多情境下，我們希望當使用者沒有聚焦在這個網頁上（可能跳去別的應用程式、切換分頁時），可以盡量減少不必的請求或操作。facebook 好像也是當你回到網頁時才會有訊息的提示聲音。<br>比較常見的情景是播放影片時，如果使用者跳出頁面，我們可以先自動讓影片停止，等使用者回來之後，影片在繼續播放。</p>\n<h3 id=\"回頭看看-js-的事件傳播\"><a href=\"#回頭看看-js-的事件傳播\" class=\"headerlink\" title=\"回頭看看 js 的事件傳播\"></a>回頭看看 js 的事件傳播</h3><p>最近把犀牛書拿回來翻了翻，主要是為了釐清以前不是那麼明白的觀念。太多 js library 充斥在網路，我們是否已經忘記原生的 js 了？雖然高度的抽象化是科技趨於發達後一定會有的現象，但是了解一下內部的運作也是好的，對於之後寫 code 也會比較有概念！</p>\n<h4 id=\"js-事件傳播\"><a href=\"#js-事件傳播\" class=\"headerlink\" title=\"js 事件傳播\"></a>js 事件傳播</h4><p>js 的事件傳播主要分為兩大類型，<code>bubble</code> 跟 <code>capture</code>，大部分的傳播方式是用 <code>bubble</code>。什麼是 <code>bubble</code> 呢？在註冊對象元素的事件處理器被調用之後，事件就會開始往上漂浮（不包含某些元素的特定事件），然後再調用註冊於祖父元素上的處理器。這種現象會上升到 <code>document</code> 最後到達 <code>window</code>。</p>\n<p>在實際應用上，我們時常看到：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">\".abc\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\".ass\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">$(<span class=\"string\">\".asass\"</span>).on(<span class=\"string\">'click'</span>, e =&gt; &#123;</div><div class=\"line\">\t</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>散亂的事件註冊在角落，不僅維護上困難，在尋找 code 的時候也沒有統一入口，非常難以除錯。於是我們可以利用 js 事件的冒泡特性，為 document 統一註冊事件。jQuery 的 on 第二個函數便提供了事件委託的功能，如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">'document'</span>).on(<span class=\"string\">'click'</span>,<span class=\"string\">'.sass'</span>, e =&gt; &#123;</div><div class=\"line\"> </div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>這樣的好處不僅減少了散亂的事件註冊，還統一了入口。如果要新增事件，只要在 document 統一做擴充即可。我們還可以在 html 這樣寫：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>  <span class=\"attr\">class</span>=<span class=\"string\">\"js_action\"</span> <span class=\"attr\">data-action</span>=<span class=\"string\">\"foo\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>  <span class=\"attr\">class</span>=<span class=\"string\">\"js_action\"</span> <span class=\"attr\">data-action</span>=<span class=\"string\">\"bar\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">var</span> actionList = &#123;</div><div class=\"line\"> \t<span class=\"attr\">foo</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>),</span></div><div class=\"line\"> \t<span class=\"title\">bar</span>: <span class=\"title\">function</span>(<span class=\"params\"></span>)</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"title\">$</span>(<span class=\"params\"><span class=\"string\">'document'</span></span>).<span class=\"title\">on</span>(<span class=\"params\"><span class=\"string\">'click'</span>,<span class=\"string\">'.js_action'</span>, e =&gt; &#123;</span></div><div class=\"line\">\tif(typeof e.target.dataset.action === <span class=\"string\">'function'</span>)&#123;</div><div class=\"line\">\t\tactionList[e.target.dataset.action]</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>像這樣，以後如果要增加新的 event handlder 只要在 acionList 新增就好，甚至搭配 extend 的方式，可以不用寫在 actionList 也沒關係。充分提高了擴充性</p>\n<p>那麼，為什麼那麼少人使用 capture 呢？最大的原因在於因為可愛的 IE 無法使用。再來事件捕捉只適用於 addEventListener 的方式。<br>事件捕捉有點像是反過來，會先從祖父開始，依序向下船，直到<strong>事件父元素的事件處理被被調用為止</strong>，註冊於事件元素的事件處理器永遠不會被調用。</p>\n<h4 id=\"事件取消\"><a href=\"#事件取消\" class=\"headerlink\" title=\"事件取消\"></a>事件取消</h4><p>我們也常常看到類似 <code>e.preventDefault()</code> 的方法。其實像是舊版的瀏覽器並不支援，我們可以用一些比較 tricky 的方式來做取消。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cancelDefault</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> event = event || <span class=\"built_in\">window</span>.event;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span>(event.preventDefault) event.preventDefault()</div><div class=\"line\">\t<span class=\"keyword\">if</span>(event.returnValue) event.returnValue = <span class=\"literal\">false</span></div><div class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"title":"weekly thought-7/17","keywords":"a, b,c","date":"2016-07-17T01:48:34.000Z","_content":"\n\n## 發現的新東西\n\n### [別跟我說你懂 margin](http://www.hicss.net/do-not-tell-me-you-understand-margin/)\n\n拿捏 margin 跟 padding 可以很容易地看出前端工程師對 CSS 的掌握程度。說真的超多眉眉角角的，不過看完文章發現原來 margin 的妙用這麼多。以後的實踐或許有比較容易的方法也說不定！\n\n### [MutationObserver](http://javascript.ruanyifeng.com/dom/mutationobserver.html)\n\n這個鮮為人知的 API，被喜歡翻 MSDN 的我挖掘到了，基本上已經支持目前主流的瀏覽器（IE11+)。\n\n看完介紹會發現他很像事件，專門給 DOM 的變化使用的，不過不同的是，一般的事件是同步的，而 MutationObserver 是**非同步**的。\n\n這可以幫助我們在 DOM 有變化的時候，做出相對應的反應。\n\n利用這個特性，我們可以達到以下幾個應用：\n1. lazy loading\n2. initialize\n\n因為在 HTML 實際被 render 之前，DOM 就已經先下載下來了，所以我們可以在 rendering 之前就改變 DOM 的內容。\n\n```js\nvar observer =  new  MutationObserver ( function ( mutations ){ \n  for  ( var i = 0 ; i < mutations . length ; i ++){ \n    for  ( var j = 0 ; j < mutations [ i ]. addedNodes . length ; j ++ ){ \n      lazyLoad ( mutations [ i ]. addedNodes [ j ]); \n    } \n  } \n});\n\nobserver . observe ( document . documentElement ,  { \n  childList :  true , \n  subtree :  true \n});\n```\n\n### [astrum](http://astrum.nodividestudio.com/)\n\n這是一個很炫砲的 style guide library。做得非常精緻。\n最近像這些 styleguide 的 library 一直推陳出新，其實就像潘大所說的。寫文件是好的，但是一定要評估成本、其他人的熟悉成本、要建構的時間等等，不能只是因為又潮又炫就自己跳下去自幹。而是要讓寫文件這件事情逐漸被引入。\n\n不過當作 side project 或是自己想玩玩看就另當別論了。\n\n### 新的問題\n\n每個框架都是為了解決某個問題而出現的。但使用了某個框架之後，好像逐漸又會萌生新的問題。我把一些自己在開發上常會碰到的問題整理了一下：\n\n1. 文件切換\n\n我覺得很麻煩的一點就是要一直在 component 之間跳來跳去，有時候還要切過去看看 action, reducer 之類的，久了很容易阻礙思考。\n\n2. Webpack 打包過慢\n\n要 bundle 的檔案越來越多，webpack 逐漸變得沒有那麼快了。每次寫完 code 還要等他 bundle，而且每次更新都會 reload 一次，說真的還挺麻煩的。\n\n### SudoDashboard\n\n其實只是想練習 dashboard 的 UI 跟 Websocket 的實作。不過感覺做起來還蠻實用的，最近空閒的時候應該會開始組織一下。還請潘大多多擔任設計指導。\n\n","source":"_posts/weekly-thought-7-17.md","raw":"---\ntitle: weekly thought-7/17\ncategories: 前端週刊\ntags:\n  - sudo週刊\nkeywords: 'a, b,c'\ndate: 2016-07-17 09:48:34\n---\n\n\n## 發現的新東西\n\n### [別跟我說你懂 margin](http://www.hicss.net/do-not-tell-me-you-understand-margin/)\n\n拿捏 margin 跟 padding 可以很容易地看出前端工程師對 CSS 的掌握程度。說真的超多眉眉角角的，不過看完文章發現原來 margin 的妙用這麼多。以後的實踐或許有比較容易的方法也說不定！\n\n### [MutationObserver](http://javascript.ruanyifeng.com/dom/mutationobserver.html)\n\n這個鮮為人知的 API，被喜歡翻 MSDN 的我挖掘到了，基本上已經支持目前主流的瀏覽器（IE11+)。\n\n看完介紹會發現他很像事件，專門給 DOM 的變化使用的，不過不同的是，一般的事件是同步的，而 MutationObserver 是**非同步**的。\n\n這可以幫助我們在 DOM 有變化的時候，做出相對應的反應。\n\n利用這個特性，我們可以達到以下幾個應用：\n1. lazy loading\n2. initialize\n\n因為在 HTML 實際被 render 之前，DOM 就已經先下載下來了，所以我們可以在 rendering 之前就改變 DOM 的內容。\n\n```js\nvar observer =  new  MutationObserver ( function ( mutations ){ \n  for  ( var i = 0 ; i < mutations . length ; i ++){ \n    for  ( var j = 0 ; j < mutations [ i ]. addedNodes . length ; j ++ ){ \n      lazyLoad ( mutations [ i ]. addedNodes [ j ]); \n    } \n  } \n});\n\nobserver . observe ( document . documentElement ,  { \n  childList :  true , \n  subtree :  true \n});\n```\n\n### [astrum](http://astrum.nodividestudio.com/)\n\n這是一個很炫砲的 style guide library。做得非常精緻。\n最近像這些 styleguide 的 library 一直推陳出新，其實就像潘大所說的。寫文件是好的，但是一定要評估成本、其他人的熟悉成本、要建構的時間等等，不能只是因為又潮又炫就自己跳下去自幹。而是要讓寫文件這件事情逐漸被引入。\n\n不過當作 side project 或是自己想玩玩看就另當別論了。\n\n### 新的問題\n\n每個框架都是為了解決某個問題而出現的。但使用了某個框架之後，好像逐漸又會萌生新的問題。我把一些自己在開發上常會碰到的問題整理了一下：\n\n1. 文件切換\n\n我覺得很麻煩的一點就是要一直在 component 之間跳來跳去，有時候還要切過去看看 action, reducer 之類的，久了很容易阻礙思考。\n\n2. Webpack 打包過慢\n\n要 bundle 的檔案越來越多，webpack 逐漸變得沒有那麼快了。每次寫完 code 還要等他 bundle，而且每次更新都會 reload 一次，說真的還挺麻煩的。\n\n### SudoDashboard\n\n其實只是想練習 dashboard 的 UI 跟 Websocket 的實作。不過感覺做起來還蠻實用的，最近空閒的時候應該會開始組織一下。還請潘大多多擔任設計指導。\n\n","slug":"weekly-thought-7-17","published":1,"updated":"2016-11-14T11:54:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsq0033iw5t46i848op","content":"<h2 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h2><h3 id=\"別跟我說你懂-margin\"><a href=\"#別跟我說你懂-margin\" class=\"headerlink\" title=\"別跟我說你懂 margin\"></a><a href=\"http://www.hicss.net/do-not-tell-me-you-understand-margin/\" target=\"_blank\" rel=\"external\">別跟我說你懂 margin</a></h3><p>拿捏 margin 跟 padding 可以很容易地看出前端工程師對 CSS 的掌握程度。說真的超多眉眉角角的，不過看完文章發現原來 margin 的妙用這麼多。以後的實踐或許有比較容易的方法也說不定！</p>\n<h3 id=\"MutationObserver\"><a href=\"#MutationObserver\" class=\"headerlink\" title=\"MutationObserver\"></a><a href=\"http://javascript.ruanyifeng.com/dom/mutationobserver.html\" target=\"_blank\" rel=\"external\">MutationObserver</a></h3><p>這個鮮為人知的 API，被喜歡翻 MSDN 的我挖掘到了，基本上已經支持目前主流的瀏覽器（IE11+)。</p>\n<p>看完介紹會發現他很像事件，專門給 DOM 的變化使用的，不過不同的是，一般的事件是同步的，而 MutationObserver 是<strong>非同步</strong>的。</p>\n<p>這可以幫助我們在 DOM 有變化的時候，做出相對應的反應。</p>\n<p>利用這個特性，我們可以達到以下幾個應用：</p>\n<ol>\n<li>lazy loading</li>\n<li>initialize</li>\n</ol>\n<p>因為在 HTML 實際被 render 之前，DOM 就已經先下載下來了，所以我們可以在 rendering 之前就改變 DOM 的內容。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> observer =  <span class=\"keyword\">new</span>  MutationObserver ( <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"> mutations </span>)</span>&#123; </div><div class=\"line\">  <span class=\"keyword\">for</span>  ( <span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; mutations . length ; i ++)&#123; </div><div class=\"line\">    <span class=\"keyword\">for</span>  ( <span class=\"keyword\">var</span> j = <span class=\"number\">0</span> ; j &lt; mutations [ i ]. addedNodes . length ; j ++ )&#123; </div><div class=\"line\">      lazyLoad ( mutations [ i ]. addedNodes [ j ]); </div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">observer . observe ( <span class=\"built_in\">document</span> . documentElement ,  &#123; </div><div class=\"line\">  <span class=\"attr\">childList</span> :  <span class=\"literal\">true</span> , </div><div class=\"line\">  <span class=\"attr\">subtree</span> :  <span class=\"literal\">true</span> </div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"astrum\"><a href=\"#astrum\" class=\"headerlink\" title=\"astrum\"></a><a href=\"http://astrum.nodividestudio.com/\" target=\"_blank\" rel=\"external\">astrum</a></h3><p>這是一個很炫砲的 style guide library。做得非常精緻。<br>最近像這些 styleguide 的 library 一直推陳出新，其實就像潘大所說的。寫文件是好的，但是一定要評估成本、其他人的熟悉成本、要建構的時間等等，不能只是因為又潮又炫就自己跳下去自幹。而是要讓寫文件這件事情逐漸被引入。</p>\n<p>不過當作 side project 或是自己想玩玩看就另當別論了。</p>\n<h3 id=\"新的問題\"><a href=\"#新的問題\" class=\"headerlink\" title=\"新的問題\"></a>新的問題</h3><p>每個框架都是為了解決某個問題而出現的。但使用了某個框架之後，好像逐漸又會萌生新的問題。我把一些自己在開發上常會碰到的問題整理了一下：</p>\n<ol>\n<li>文件切換</li>\n</ol>\n<p>我覺得很麻煩的一點就是要一直在 component 之間跳來跳去，有時候還要切過去看看 action, reducer 之類的，久了很容易阻礙思考。</p>\n<ol>\n<li>Webpack 打包過慢</li>\n</ol>\n<p>要 bundle 的檔案越來越多，webpack 逐漸變得沒有那麼快了。每次寫完 code 還要等他 bundle，而且每次更新都會 reload 一次，說真的還挺麻煩的。</p>\n<h3 id=\"SudoDashboard\"><a href=\"#SudoDashboard\" class=\"headerlink\" title=\"SudoDashboard\"></a>SudoDashboard</h3><p>其實只是想練習 dashboard 的 UI 跟 Websocket 的實作。不過感覺做起來還蠻實用的，最近空閒的時候應該會開始組織一下。還請潘大多多擔任設計指導。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h2><h3 id=\"別跟我說你懂-margin\"><a href=\"#別跟我說你懂-margin\" class=\"headerlink\" title=\"別跟我說你懂 margin\"></a><a href=\"http://www.hicss.net/do-not-tell-me-you-understand-margin/\" target=\"_blank\" rel=\"external\">別跟我說你懂 margin</a></h3><p>拿捏 margin 跟 padding 可以很容易地看出前端工程師對 CSS 的掌握程度。說真的超多眉眉角角的，不過看完文章發現原來 margin 的妙用這麼多。以後的實踐或許有比較容易的方法也說不定！</p>\n<h3 id=\"MutationObserver\"><a href=\"#MutationObserver\" class=\"headerlink\" title=\"MutationObserver\"></a><a href=\"http://javascript.ruanyifeng.com/dom/mutationobserver.html\" target=\"_blank\" rel=\"external\">MutationObserver</a></h3><p>這個鮮為人知的 API，被喜歡翻 MSDN 的我挖掘到了，基本上已經支持目前主流的瀏覽器（IE11+)。</p>\n<p>看完介紹會發現他很像事件，專門給 DOM 的變化使用的，不過不同的是，一般的事件是同步的，而 MutationObserver 是<strong>非同步</strong>的。</p>\n<p>這可以幫助我們在 DOM 有變化的時候，做出相對應的反應。</p>\n<p>利用這個特性，我們可以達到以下幾個應用：</p>\n<ol>\n<li>lazy loading</li>\n<li>initialize</li>\n</ol>\n<p>因為在 HTML 實際被 render 之前，DOM 就已經先下載下來了，所以我們可以在 rendering 之前就改變 DOM 的內容。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> observer =  <span class=\"keyword\">new</span>  MutationObserver ( <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"> mutations </span>)</span>&#123; </div><div class=\"line\">  <span class=\"keyword\">for</span>  ( <span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; mutations . length ; i ++)&#123; </div><div class=\"line\">    <span class=\"keyword\">for</span>  ( <span class=\"keyword\">var</span> j = <span class=\"number\">0</span> ; j &lt; mutations [ i ]. addedNodes . length ; j ++ )&#123; </div><div class=\"line\">      lazyLoad ( mutations [ i ]. addedNodes [ j ]); </div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">observer . observe ( <span class=\"built_in\">document</span> . documentElement ,  &#123; </div><div class=\"line\">  <span class=\"attr\">childList</span> :  <span class=\"literal\">true</span> , </div><div class=\"line\">  <span class=\"attr\">subtree</span> :  <span class=\"literal\">true</span> </div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"astrum\"><a href=\"#astrum\" class=\"headerlink\" title=\"astrum\"></a><a href=\"http://astrum.nodividestudio.com/\" target=\"_blank\" rel=\"external\">astrum</a></h3><p>這是一個很炫砲的 style guide library。做得非常精緻。<br>最近像這些 styleguide 的 library 一直推陳出新，其實就像潘大所說的。寫文件是好的，但是一定要評估成本、其他人的熟悉成本、要建構的時間等等，不能只是因為又潮又炫就自己跳下去自幹。而是要讓寫文件這件事情逐漸被引入。</p>\n<p>不過當作 side project 或是自己想玩玩看就另當別論了。</p>\n<h3 id=\"新的問題\"><a href=\"#新的問題\" class=\"headerlink\" title=\"新的問題\"></a>新的問題</h3><p>每個框架都是為了解決某個問題而出現的。但使用了某個框架之後，好像逐漸又會萌生新的問題。我把一些自己在開發上常會碰到的問題整理了一下：</p>\n<ol>\n<li>文件切換</li>\n</ol>\n<p>我覺得很麻煩的一點就是要一直在 component 之間跳來跳去，有時候還要切過去看看 action, reducer 之類的，久了很容易阻礙思考。</p>\n<ol>\n<li>Webpack 打包過慢</li>\n</ol>\n<p>要 bundle 的檔案越來越多，webpack 逐漸變得沒有那麼快了。每次寫完 code 還要等他 bundle，而且每次更新都會 reload 一次，說真的還挺麻煩的。</p>\n<h3 id=\"SudoDashboard\"><a href=\"#SudoDashboard\" class=\"headerlink\" title=\"SudoDashboard\"></a>SudoDashboard</h3><p>其實只是想練習 dashboard 的 UI 跟 Websocket 的實作。不過感覺做起來還蠻實用的，最近空閒的時候應該會開始組織一下。還請潘大多多擔任設計指導。</p>\n"},{"title":"weekly-thought-7/31","date":"2016-07-31T06:45:18.000Z","_content":"\n\n## 發現的新東西\n\n### 瀏覽器的字體渲染\n\n前陣子發現了 `font-smoothing` 的屬性，雖然 w3c 已經把他從標準刪除，但在 chrome 上面還是可以使用這個屬性。\n\n但令人好奇的是，其他瀏覽器的字體渲染方式呢？\n\n其實字型渲染是一個一直以來容易被忽略，卻又是極為重要的議題。因為網站的易讀性除了 layout 之外，再來就是字體了。\n\n為了確認網站在瀏覽器的一致性，稍微研究了一下字體渲染的方式。\n分享在這邊給大家做參考。\n\n每個字，在電腦當中都會被當作一個向量圖像。而當我們把字體渲染在螢幕上的時候，就會把字型用像素渲染的方式呈現在螢幕上，所以每個字其實都是由一個個小方塊組合起來的。\n\n但問題發生了，用小方塊的壞處就是在邊緣會出現無可避免的鋸齒狀，造成閱讀體驗不佳。\n\n## 基本解法 grayscale\n\n這個解法是讓邊緣的像素補上一些灰階的像素，讓字型遠遠看起來比較圓滑，用這些灰階的像素來補償字體本來應該有的面積。這個方法很聰明又優雅，讓人不禁佩服。\n\n### 進階解法 subpixel\n\n顏色信息，如果我們把屏幕截圖不斷放大，可以看到字體邊緣有紅藍兩色出現，這就是亞像素渲染了。\n\n在LCD屏中，一個像素是由紅綠藍三個緊密排列的亞像素構成的，它們決定了這一像素的顏色和亮度。由於它們是如此之小，以至於肉眼不會把它們看作是一個個獨立的色點。如果我們仔細看看上圖中被白點標記的「紅色」像素，就可以發現它所採用的渲染策略：所有的亞像素都可以單獨控制開或關的；若「空白」像素最右側的亞像素是紅色的話，則此像素都將填滿紅色。\n\n### 問題點：百家爭鳴的瀏覽器\n\n每個瀏覽器實作字型渲染的方式都不盡相同，甚至不同的 OS 下也是。更蛋疼的是，在Windows下還可能採用兩種技術來渲染—— GDI或者DirectWrite。\n\nWindows\n在Windows系統下，字體格式對其渲染效果有很顯著的影響，比如PostScript字體和TrueType字體之間就存在著巨大的差別。但這種差別並不是由瀏覽器所引起的，只要底層的字體一樣，我們就可以看到完全相同的渲染效果。\n\n儘管這種方法並不十分可靠，但從字體的命名中我們可以大致推斷該字體所採用的渲染技術，比如，EOT和.ttf格式一定是TrueType技術，反之.otf通常是PostScript技術。但是還有一中封裝的字體格式WOFF，它可以包含其中任意一種字體格式。因此光看文件名 ​​是不可能清楚它所採用的渲染技術的。除了EOT​​和.ttf格式文件可以斷定是TrueType渲染技術外，其他文件格式所包含的是哪種字體都無法確定。因此在你購買字體時，你最好對想要購買的字體做一番了解。（@Ryekee :我覺得這一句根本不用翻譯，中國還有人會買字體麼？）\n\nTrueType和PostScript的區別在於描繪曲線時所採用的數學方法不同，但這一差異對柵格器並不會造成太大的影響，只有字型設計人員才需要考慮著兩者的差別。另一個重要的區別就是所採用的字體微調的方法。PostScript只包含了組成字體的各種元素的抽象位置信息，而TrueType則包含了非常詳細的底層命令，直接接管了渲染的進程。然而造成兩種渲染技術的差異並不是它們的設計理念上的差別，而是源於Micro$oft採對TrueType採用了新的渲染引擎。\n\n操作系统OS提供了支持不同的字体渲染方法的API。在windows下是GDI(Graphics Device Interface)和DirectWrite，OS X下是Quartz。\n\nGDI分为GDI Grayscale和GDI ClearType。前者为灰阶渲染API，后者是亚像素渲染API。由于GDI ClearType并未对字体进行垂直方向的平滑，因此当字体较大时会出现边缘不平滑的情况。为了弥补GDI ClearType的不足，MS实现了DirectWrite API，它在GDI ClearType的基础上增加了垂直方向的平滑。\n但是！字体渲染的API都是由浏览器厂商自己选择的！\n\n使用同一颜色，感官上的颜色深浅为：黑白渲染>grayscale>sub-pixel。\n\nChrome35/36采用的是GDI ClearType，因此在字体较大时边缘会出现毛刺，而FF30采用的DirectWrite则没有此类问题。如下图所示：\n\n不過最近看了一下 windows 的字型渲染，不得不說微軟在這方面還真是下了不少功夫。\n\n越來越多的字體設計師都開始注意到Web字體所帶來的技術問題，尤其是TrueType字體的微調。隨著Web字體產業的崛起，他們願意付出精力為屏幕顯示而優化字體。在不遠的將來，我們將看到大量精心設計的字體問世（或者至少是對現有字體的更新）。\n\n隨著屏幕分辨率的增加（以及對柵格器的重大改進），我們慢慢地不再擔心字體渲染的技術細節。採用GDI渲染模式的瀏覽器必將拖後腿，正因為此，未來數年內，我們都還無法放心的使用無微調的TrueType字體。只有當這一類瀏覽器用戶比例降到足夠低的程度的時候，TrueType字體微調（耗時又需要高超的技巧）才可以被扔到一邊。儘管目前市面上幾乎所有Web字體都是TrueType格式的，我仍希望字體行業能夠大規模轉向PostScript格式，因為這種字體能為設計師減少絕大部分的工作。\n\n不過好處是，科技日新月異。希望之後不用再擔心字型渲染的東西。\n\nMAC 使用他們自己的引擎來渲染字體，不管 truetype 跟 posttype 渲染方式都一樣。這個渲染引擎只有一個字，屌。\n\ntruetype 跟 posttype 的差別。\n\n### 結論\n\n如果想直接看結果，在網頁的時候，可以使用反鋸齒的技術來增加易讀性。\n但如果在手機上建議關閉，因為反鋸齒的演算需要比較多的 GPU 來做計算。通常直接採用灰階的渲染方式就夠用了！\n\n### 事件控制\n\n如果可以，希望在每個檔案都能夠新增一個 EventManager 的方式，統一管理事件。我很喜歡事件委託的方式。\n\n善用 data attribute 的方式來給標籤一些好用的屬性。\n\n## [microdata](http://lepture.com/zh/2015/fe-microdata)\n\n\n## Rails view\n\n最近希望把一些常用的 tag 跟撰寫方式拆成 helper，於是開始去研究 rails 裡面的 view helper method。發現裡面的 helper 撰寫大有學問，這邊跟大家分享：\n\n```ruby \ndef link_to(name = nil, options = nil, html_options = nil, &block)\n  html_options, options, name = options, name, block if block_given?\n  options ||= {}\n\n  html_options = convert_options_to_data_attributes(options, html_options)\n\n  url = url_for(options)\n  html_options['href'] ||= url\n\n  content_tag(:a, name || url, html_options, &block)\nend\n```\n\n這邊用 `link_to` 方法舉例，可以看到這邊分成了兩種方式，如果有給定 `block` 的話，會將傳入的參數作轉換，如果沒有的話，則是將 `option` 做處理之後，傳給 \t`content_tag` 這個方法。注意到這邊的 `block_given?` 方法，有這個方法我們就可以很容易的判斷是否有傳入 block。\n\n所以在設計 helper 的時候，可以適時包裝這些方法，簡化 helper 的複雜度：\n\n```ruby\n  def link_to_with_noopener(name = nil, options = {}, html_options = nil, &block)\n  \thtml_options.merge!({\n  \t\t:ref => \"noopener\"\n  \t})\n\t\tif block_given?\n\t\t  link_to(name, options, html_options, &block)\n\t\telse\n\t\t  link_to(name, options, html_options)\n\t\tend\n  end\n```\n請參考：[About rel=noopener](https://mathiasbynens.github.io/rel-noopener/)\n\n再來就是 viewhelper 裡面有很多還蠻好用的方法，我們不用再花很大的功夫重造輪子，像是：\n\n* [link_to_if](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_if)\n* [link_to_unless](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless)\n* [link_to_unless_current](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless_current)\n\n不過每次只要一動到 helper 就很容易出包...，但直接用原生的 HTML 不但很醜，又不好維護，所以在撰寫 helper 的時候，為了保險還是寫一下 test 吧！\n\n最近的有個想法是將常用的片段程式碼拆成 partial，**並且用比較統一的方式管理！**，每次接到新的頁面就要先思考哪些會是局部代碼，哪些會是共用代碼。\n\n### partial 設計的幾個要點：\n\n經過這次標籤消失的事件，首先先跟顆顆說聲道歉之外，更應該檢討的是以下幾點：\n\n1. 預設值很重要！\n2. if else 判斷式要思考更全面\n3. 如果害怕沒有預設狀況，就乾脆讓他噴例外\n\n第三點的實作方法如下：\n\n```ruby\n# in component_helper.rb\n# ui_component 方法是對 render 的進一步包裝。\ndef ui_component(url, props = {})\n  render \"components/#{url}\", locals: props\nend\n\n# in error_helper.rb\ndef check_required_options!(locals, *options)\n    options.each do |option|\n      raise MissingOptionError, %Q{option \"#{option.to_s}\" is required.} if locals[option].nil?\n    end\n  end\n\n\n  private\n\n  class MissingOptionError < StandardError\n  end\n```\n\n然後在 partial 的程式碼裡面：\n\n```html\n// in _tags.html.erb\n<% check_required_options locals, :propA, :propsB, :propsC %>\n```\n\n這樣如果 locals 裡面的 option 不夠完整，就會在使用的時候噴出例外，不知道這樣的設計夠不夠完整。而且 partial 設計的時候很容易因為時間久的關係，忘記了 locals 裡面的選項，在 partial 裡面養成檢查 locals 的習慣，可以幫助我們補上遺落的 option。不知道這樣的設計夠不夠恰當跟完整？還請顆顆提出意見。\n\n### component 化\n\n這邊的 component 化並不是指全部使用 react 改寫，畢竟我們的頁面也還沒有到這種需求。但是既然 rails 有強大的 partial 機制跟 view heleper 方法，我們可以在撰寫的時候做更進一步的拆分：\n\n```html\n<div id=\"page_id\">\n  <header>\n    <%= load_component(\"company_header\") %>\n  </header>\n  <main>\n    <aside>\n    \t<%= load_component(\"company_sidebar__header\") %>\n\t    <%= load_component(\"company_sidebar__content\") %>\n    </aside>\n\t  <%= load_component(\"company_summary\") %>\n    <%= load_component(\"company_introduction\") %>\n\t\t<%= load_component(\"company_section\") %>\n  </main>\n  <footer>\n  \t<%= load_component(\"company_footer\") %>\n  </footer>\n</div>\n```\n\n但其實目前主站的頁面都仍時常變動，所以過早的抽象化反而會浪費更多成本吧！不過未來如果能用這樣的方式來撰寫程式碼，相信應該是非常好維護的！\n\n## Webstrom\n\n其實以前也是那種很瞧不起 IDE 的那一派，開起來要花我好幾秒，重點是又吃記憶體，然後又要常常使用滑鼠操作...。但使用 IDE 來幫助我們 debug、重構是一件非常省力又輕鬆的事情，只要右鍵 => refacter 即可。\n\n所以如果是一般的功能開發，如果牽扯到比較多檔案的 CSS 或是 JS 檔案的話，我會使用 Webstorm 來開發，搭配 react 跟 jsx 的 plugin，不用每次都會忘記 action 的名字在不同檔案跳來跳去，或是突然忘記長長的 API 又跑去找文件，要整理 code 也只要按下 refactor 就好，出錯的機率自然會降低、也節省了不必要的時間。\n\n但如果是剛入門的人還是建議從文字編輯器開始，門檻比較低。不然設定 IDE 的時間，都可以吃好幾碗肉骨茶麵了。\n\n## CSS @supports\n\n這個屬性\n","source":"_posts/weekly-thought-7-31.md","raw":"---\ntitle: weekly-thought-7/31\ncategories: 前端週刊\ntags: 前端\ndate: 2016-07-31 14:45:18\n---\n\n\n## 發現的新東西\n\n### 瀏覽器的字體渲染\n\n前陣子發現了 `font-smoothing` 的屬性，雖然 w3c 已經把他從標準刪除，但在 chrome 上面還是可以使用這個屬性。\n\n但令人好奇的是，其他瀏覽器的字體渲染方式呢？\n\n其實字型渲染是一個一直以來容易被忽略，卻又是極為重要的議題。因為網站的易讀性除了 layout 之外，再來就是字體了。\n\n為了確認網站在瀏覽器的一致性，稍微研究了一下字體渲染的方式。\n分享在這邊給大家做參考。\n\n每個字，在電腦當中都會被當作一個向量圖像。而當我們把字體渲染在螢幕上的時候，就會把字型用像素渲染的方式呈現在螢幕上，所以每個字其實都是由一個個小方塊組合起來的。\n\n但問題發生了，用小方塊的壞處就是在邊緣會出現無可避免的鋸齒狀，造成閱讀體驗不佳。\n\n## 基本解法 grayscale\n\n這個解法是讓邊緣的像素補上一些灰階的像素，讓字型遠遠看起來比較圓滑，用這些灰階的像素來補償字體本來應該有的面積。這個方法很聰明又優雅，讓人不禁佩服。\n\n### 進階解法 subpixel\n\n顏色信息，如果我們把屏幕截圖不斷放大，可以看到字體邊緣有紅藍兩色出現，這就是亞像素渲染了。\n\n在LCD屏中，一個像素是由紅綠藍三個緊密排列的亞像素構成的，它們決定了這一像素的顏色和亮度。由於它們是如此之小，以至於肉眼不會把它們看作是一個個獨立的色點。如果我們仔細看看上圖中被白點標記的「紅色」像素，就可以發現它所採用的渲染策略：所有的亞像素都可以單獨控制開或關的；若「空白」像素最右側的亞像素是紅色的話，則此像素都將填滿紅色。\n\n### 問題點：百家爭鳴的瀏覽器\n\n每個瀏覽器實作字型渲染的方式都不盡相同，甚至不同的 OS 下也是。更蛋疼的是，在Windows下還可能採用兩種技術來渲染—— GDI或者DirectWrite。\n\nWindows\n在Windows系統下，字體格式對其渲染效果有很顯著的影響，比如PostScript字體和TrueType字體之間就存在著巨大的差別。但這種差別並不是由瀏覽器所引起的，只要底層的字體一樣，我們就可以看到完全相同的渲染效果。\n\n儘管這種方法並不十分可靠，但從字體的命名中我們可以大致推斷該字體所採用的渲染技術，比如，EOT和.ttf格式一定是TrueType技術，反之.otf通常是PostScript技術。但是還有一中封裝的字體格式WOFF，它可以包含其中任意一種字體格式。因此光看文件名 ​​是不可能清楚它所採用的渲染技術的。除了EOT​​和.ttf格式文件可以斷定是TrueType渲染技術外，其他文件格式所包含的是哪種字體都無法確定。因此在你購買字體時，你最好對想要購買的字體做一番了解。（@Ryekee :我覺得這一句根本不用翻譯，中國還有人會買字體麼？）\n\nTrueType和PostScript的區別在於描繪曲線時所採用的數學方法不同，但這一差異對柵格器並不會造成太大的影響，只有字型設計人員才需要考慮著兩者的差別。另一個重要的區別就是所採用的字體微調的方法。PostScript只包含了組成字體的各種元素的抽象位置信息，而TrueType則包含了非常詳細的底層命令，直接接管了渲染的進程。然而造成兩種渲染技術的差異並不是它們的設計理念上的差別，而是源於Micro$oft採對TrueType採用了新的渲染引擎。\n\n操作系统OS提供了支持不同的字体渲染方法的API。在windows下是GDI(Graphics Device Interface)和DirectWrite，OS X下是Quartz。\n\nGDI分为GDI Grayscale和GDI ClearType。前者为灰阶渲染API，后者是亚像素渲染API。由于GDI ClearType并未对字体进行垂直方向的平滑，因此当字体较大时会出现边缘不平滑的情况。为了弥补GDI ClearType的不足，MS实现了DirectWrite API，它在GDI ClearType的基础上增加了垂直方向的平滑。\n但是！字体渲染的API都是由浏览器厂商自己选择的！\n\n使用同一颜色，感官上的颜色深浅为：黑白渲染>grayscale>sub-pixel。\n\nChrome35/36采用的是GDI ClearType，因此在字体较大时边缘会出现毛刺，而FF30采用的DirectWrite则没有此类问题。如下图所示：\n\n不過最近看了一下 windows 的字型渲染，不得不說微軟在這方面還真是下了不少功夫。\n\n越來越多的字體設計師都開始注意到Web字體所帶來的技術問題，尤其是TrueType字體的微調。隨著Web字體產業的崛起，他們願意付出精力為屏幕顯示而優化字體。在不遠的將來，我們將看到大量精心設計的字體問世（或者至少是對現有字體的更新）。\n\n隨著屏幕分辨率的增加（以及對柵格器的重大改進），我們慢慢地不再擔心字體渲染的技術細節。採用GDI渲染模式的瀏覽器必將拖後腿，正因為此，未來數年內，我們都還無法放心的使用無微調的TrueType字體。只有當這一類瀏覽器用戶比例降到足夠低的程度的時候，TrueType字體微調（耗時又需要高超的技巧）才可以被扔到一邊。儘管目前市面上幾乎所有Web字體都是TrueType格式的，我仍希望字體行業能夠大規模轉向PostScript格式，因為這種字體能為設計師減少絕大部分的工作。\n\n不過好處是，科技日新月異。希望之後不用再擔心字型渲染的東西。\n\nMAC 使用他們自己的引擎來渲染字體，不管 truetype 跟 posttype 渲染方式都一樣。這個渲染引擎只有一個字，屌。\n\ntruetype 跟 posttype 的差別。\n\n### 結論\n\n如果想直接看結果，在網頁的時候，可以使用反鋸齒的技術來增加易讀性。\n但如果在手機上建議關閉，因為反鋸齒的演算需要比較多的 GPU 來做計算。通常直接採用灰階的渲染方式就夠用了！\n\n### 事件控制\n\n如果可以，希望在每個檔案都能夠新增一個 EventManager 的方式，統一管理事件。我很喜歡事件委託的方式。\n\n善用 data attribute 的方式來給標籤一些好用的屬性。\n\n## [microdata](http://lepture.com/zh/2015/fe-microdata)\n\n\n## Rails view\n\n最近希望把一些常用的 tag 跟撰寫方式拆成 helper，於是開始去研究 rails 裡面的 view helper method。發現裡面的 helper 撰寫大有學問，這邊跟大家分享：\n\n```ruby \ndef link_to(name = nil, options = nil, html_options = nil, &block)\n  html_options, options, name = options, name, block if block_given?\n  options ||= {}\n\n  html_options = convert_options_to_data_attributes(options, html_options)\n\n  url = url_for(options)\n  html_options['href'] ||= url\n\n  content_tag(:a, name || url, html_options, &block)\nend\n```\n\n這邊用 `link_to` 方法舉例，可以看到這邊分成了兩種方式，如果有給定 `block` 的話，會將傳入的參數作轉換，如果沒有的話，則是將 `option` 做處理之後，傳給 \t`content_tag` 這個方法。注意到這邊的 `block_given?` 方法，有這個方法我們就可以很容易的判斷是否有傳入 block。\n\n所以在設計 helper 的時候，可以適時包裝這些方法，簡化 helper 的複雜度：\n\n```ruby\n  def link_to_with_noopener(name = nil, options = {}, html_options = nil, &block)\n  \thtml_options.merge!({\n  \t\t:ref => \"noopener\"\n  \t})\n\t\tif block_given?\n\t\t  link_to(name, options, html_options, &block)\n\t\telse\n\t\t  link_to(name, options, html_options)\n\t\tend\n  end\n```\n請參考：[About rel=noopener](https://mathiasbynens.github.io/rel-noopener/)\n\n再來就是 viewhelper 裡面有很多還蠻好用的方法，我們不用再花很大的功夫重造輪子，像是：\n\n* [link_to_if](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_if)\n* [link_to_unless](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless)\n* [link_to_unless_current](http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless_current)\n\n不過每次只要一動到 helper 就很容易出包...，但直接用原生的 HTML 不但很醜，又不好維護，所以在撰寫 helper 的時候，為了保險還是寫一下 test 吧！\n\n最近的有個想法是將常用的片段程式碼拆成 partial，**並且用比較統一的方式管理！**，每次接到新的頁面就要先思考哪些會是局部代碼，哪些會是共用代碼。\n\n### partial 設計的幾個要點：\n\n經過這次標籤消失的事件，首先先跟顆顆說聲道歉之外，更應該檢討的是以下幾點：\n\n1. 預設值很重要！\n2. if else 判斷式要思考更全面\n3. 如果害怕沒有預設狀況，就乾脆讓他噴例外\n\n第三點的實作方法如下：\n\n```ruby\n# in component_helper.rb\n# ui_component 方法是對 render 的進一步包裝。\ndef ui_component(url, props = {})\n  render \"components/#{url}\", locals: props\nend\n\n# in error_helper.rb\ndef check_required_options!(locals, *options)\n    options.each do |option|\n      raise MissingOptionError, %Q{option \"#{option.to_s}\" is required.} if locals[option].nil?\n    end\n  end\n\n\n  private\n\n  class MissingOptionError < StandardError\n  end\n```\n\n然後在 partial 的程式碼裡面：\n\n```html\n// in _tags.html.erb\n<% check_required_options locals, :propA, :propsB, :propsC %>\n```\n\n這樣如果 locals 裡面的 option 不夠完整，就會在使用的時候噴出例外，不知道這樣的設計夠不夠完整。而且 partial 設計的時候很容易因為時間久的關係，忘記了 locals 裡面的選項，在 partial 裡面養成檢查 locals 的習慣，可以幫助我們補上遺落的 option。不知道這樣的設計夠不夠恰當跟完整？還請顆顆提出意見。\n\n### component 化\n\n這邊的 component 化並不是指全部使用 react 改寫，畢竟我們的頁面也還沒有到這種需求。但是既然 rails 有強大的 partial 機制跟 view heleper 方法，我們可以在撰寫的時候做更進一步的拆分：\n\n```html\n<div id=\"page_id\">\n  <header>\n    <%= load_component(\"company_header\") %>\n  </header>\n  <main>\n    <aside>\n    \t<%= load_component(\"company_sidebar__header\") %>\n\t    <%= load_component(\"company_sidebar__content\") %>\n    </aside>\n\t  <%= load_component(\"company_summary\") %>\n    <%= load_component(\"company_introduction\") %>\n\t\t<%= load_component(\"company_section\") %>\n  </main>\n  <footer>\n  \t<%= load_component(\"company_footer\") %>\n  </footer>\n</div>\n```\n\n但其實目前主站的頁面都仍時常變動，所以過早的抽象化反而會浪費更多成本吧！不過未來如果能用這樣的方式來撰寫程式碼，相信應該是非常好維護的！\n\n## Webstrom\n\n其實以前也是那種很瞧不起 IDE 的那一派，開起來要花我好幾秒，重點是又吃記憶體，然後又要常常使用滑鼠操作...。但使用 IDE 來幫助我們 debug、重構是一件非常省力又輕鬆的事情，只要右鍵 => refacter 即可。\n\n所以如果是一般的功能開發，如果牽扯到比較多檔案的 CSS 或是 JS 檔案的話，我會使用 Webstorm 來開發，搭配 react 跟 jsx 的 plugin，不用每次都會忘記 action 的名字在不同檔案跳來跳去，或是突然忘記長長的 API 又跑去找文件，要整理 code 也只要按下 refactor 就好，出錯的機率自然會降低、也節省了不必要的時間。\n\n但如果是剛入門的人還是建議從文字編輯器開始，門檻比較低。不然設定 IDE 的時間，都可以吃好幾碗肉骨茶麵了。\n\n## CSS @supports\n\n這個屬性\n","slug":"weekly-thought-7-31","published":1,"updated":"2016-11-14T11:51:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitss0036iw5tu0xq0dtg","content":"<h2 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h2><h3 id=\"瀏覽器的字體渲染\"><a href=\"#瀏覽器的字體渲染\" class=\"headerlink\" title=\"瀏覽器的字體渲染\"></a>瀏覽器的字體渲染</h3><p>前陣子發現了 <code>font-smoothing</code> 的屬性，雖然 w3c 已經把他從標準刪除，但在 chrome 上面還是可以使用這個屬性。</p>\n<p>但令人好奇的是，其他瀏覽器的字體渲染方式呢？</p>\n<p>其實字型渲染是一個一直以來容易被忽略，卻又是極為重要的議題。因為網站的易讀性除了 layout 之外，再來就是字體了。</p>\n<p>為了確認網站在瀏覽器的一致性，稍微研究了一下字體渲染的方式。<br>分享在這邊給大家做參考。</p>\n<p>每個字，在電腦當中都會被當作一個向量圖像。而當我們把字體渲染在螢幕上的時候，就會把字型用像素渲染的方式呈現在螢幕上，所以每個字其實都是由一個個小方塊組合起來的。</p>\n<p>但問題發生了，用小方塊的壞處就是在邊緣會出現無可避免的鋸齒狀，造成閱讀體驗不佳。</p>\n<h2 id=\"基本解法-grayscale\"><a href=\"#基本解法-grayscale\" class=\"headerlink\" title=\"基本解法 grayscale\"></a>基本解法 grayscale</h2><p>這個解法是讓邊緣的像素補上一些灰階的像素，讓字型遠遠看起來比較圓滑，用這些灰階的像素來補償字體本來應該有的面積。這個方法很聰明又優雅，讓人不禁佩服。</p>\n<h3 id=\"進階解法-subpixel\"><a href=\"#進階解法-subpixel\" class=\"headerlink\" title=\"進階解法 subpixel\"></a>進階解法 subpixel</h3><p>顏色信息，如果我們把屏幕截圖不斷放大，可以看到字體邊緣有紅藍兩色出現，這就是亞像素渲染了。</p>\n<p>在LCD屏中，一個像素是由紅綠藍三個緊密排列的亞像素構成的，它們決定了這一像素的顏色和亮度。由於它們是如此之小，以至於肉眼不會把它們看作是一個個獨立的色點。如果我們仔細看看上圖中被白點標記的「紅色」像素，就可以發現它所採用的渲染策略：所有的亞像素都可以單獨控制開或關的；若「空白」像素最右側的亞像素是紅色的話，則此像素都將填滿紅色。</p>\n<h3 id=\"問題點：百家爭鳴的瀏覽器\"><a href=\"#問題點：百家爭鳴的瀏覽器\" class=\"headerlink\" title=\"問題點：百家爭鳴的瀏覽器\"></a>問題點：百家爭鳴的瀏覽器</h3><p>每個瀏覽器實作字型渲染的方式都不盡相同，甚至不同的 OS 下也是。更蛋疼的是，在Windows下還可能採用兩種技術來渲染—— GDI或者DirectWrite。</p>\n<p>Windows<br>在Windows系統下，字體格式對其渲染效果有很顯著的影響，比如PostScript字體和TrueType字體之間就存在著巨大的差別。但這種差別並不是由瀏覽器所引起的，只要底層的字體一樣，我們就可以看到完全相同的渲染效果。</p>\n<p>儘管這種方法並不十分可靠，但從字體的命名中我們可以大致推斷該字體所採用的渲染技術，比如，EOT和.ttf格式一定是TrueType技術，反之.otf通常是PostScript技術。但是還有一中封裝的字體格式WOFF，它可以包含其中任意一種字體格式。因此光看文件名 ​​是不可能清楚它所採用的渲染技術的。除了EOT​​和.ttf格式文件可以斷定是TrueType渲染技術外，其他文件格式所包含的是哪種字體都無法確定。因此在你購買字體時，你最好對想要購買的字體做一番了解。（@Ryekee :我覺得這一句根本不用翻譯，中國還有人會買字體麼？）</p>\n<p>TrueType和PostScript的區別在於描繪曲線時所採用的數學方法不同，但這一差異對柵格器並不會造成太大的影響，只有字型設計人員才需要考慮著兩者的差別。另一個重要的區別就是所採用的字體微調的方法。PostScript只包含了組成字體的各種元素的抽象位置信息，而TrueType則包含了非常詳細的底層命令，直接接管了渲染的進程。然而造成兩種渲染技術的差異並不是它們的設計理念上的差別，而是源於Micro$oft採對TrueType採用了新的渲染引擎。</p>\n<p>操作系统OS提供了支持不同的字体渲染方法的API。在windows下是GDI(Graphics Device Interface)和DirectWrite，OS X下是Quartz。</p>\n<p>GDI分为GDI Grayscale和GDI ClearType。前者为灰阶渲染API，后者是亚像素渲染API。由于GDI ClearType并未对字体进行垂直方向的平滑，因此当字体较大时会出现边缘不平滑的情况。为了弥补GDI ClearType的不足，MS实现了DirectWrite API，它在GDI ClearType的基础上增加了垂直方向的平滑。<br>但是！字体渲染的API都是由浏览器厂商自己选择的！</p>\n<p>使用同一颜色，感官上的颜色深浅为：黑白渲染&gt;grayscale&gt;sub-pixel。</p>\n<p>Chrome35/36采用的是GDI ClearType，因此在字体较大时边缘会出现毛刺，而FF30采用的DirectWrite则没有此类问题。如下图所示：</p>\n<p>不過最近看了一下 windows 的字型渲染，不得不說微軟在這方面還真是下了不少功夫。</p>\n<p>越來越多的字體設計師都開始注意到Web字體所帶來的技術問題，尤其是TrueType字體的微調。隨著Web字體產業的崛起，他們願意付出精力為屏幕顯示而優化字體。在不遠的將來，我們將看到大量精心設計的字體問世（或者至少是對現有字體的更新）。</p>\n<p>隨著屏幕分辨率的增加（以及對柵格器的重大改進），我們慢慢地不再擔心字體渲染的技術細節。採用GDI渲染模式的瀏覽器必將拖後腿，正因為此，未來數年內，我們都還無法放心的使用無微調的TrueType字體。只有當這一類瀏覽器用戶比例降到足夠低的程度的時候，TrueType字體微調（耗時又需要高超的技巧）才可以被扔到一邊。儘管目前市面上幾乎所有Web字體都是TrueType格式的，我仍希望字體行業能夠大規模轉向PostScript格式，因為這種字體能為設計師減少絕大部分的工作。</p>\n<p>不過好處是，科技日新月異。希望之後不用再擔心字型渲染的東西。</p>\n<p>MAC 使用他們自己的引擎來渲染字體，不管 truetype 跟 posttype 渲染方式都一樣。這個渲染引擎只有一個字，屌。</p>\n<p>truetype 跟 posttype 的差別。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>如果想直接看結果，在網頁的時候，可以使用反鋸齒的技術來增加易讀性。<br>但如果在手機上建議關閉，因為反鋸齒的演算需要比較多的 GPU 來做計算。通常直接採用灰階的渲染方式就夠用了！</p>\n<h3 id=\"事件控制\"><a href=\"#事件控制\" class=\"headerlink\" title=\"事件控制\"></a>事件控制</h3><p>如果可以，希望在每個檔案都能夠新增一個 EventManager 的方式，統一管理事件。我很喜歡事件委託的方式。</p>\n<p>善用 data attribute 的方式來給標籤一些好用的屬性。</p>\n<h2 id=\"microdata\"><a href=\"#microdata\" class=\"headerlink\" title=\"microdata\"></a><a href=\"http://lepture.com/zh/2015/fe-microdata\" target=\"_blank\" rel=\"external\">microdata</a></h2><h2 id=\"Rails-view\"><a href=\"#Rails-view\" class=\"headerlink\" title=\"Rails view\"></a>Rails view</h2><p>最近希望把一些常用的 tag 跟撰寫方式拆成 helper，於是開始去研究 rails 裡面的 view helper method。發現裡面的 helper 撰寫大有學問，這邊跟大家分享：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">link_to</span><span class=\"params\">(name = <span class=\"literal\">nil</span>, options = <span class=\"literal\">nil</span>, html_options = <span class=\"literal\">nil</span>, &amp;block)</span></span></div><div class=\"line\">  html_options, options, name = options, name, block <span class=\"keyword\">if</span> block_given?</div><div class=\"line\">  options <span class=\"params\">||</span>= &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">  html_options = convert_options_to_data_attributes(options, html_options)</div><div class=\"line\"></div><div class=\"line\">  url = url_for(options)</div><div class=\"line\">  html_options[<span class=\"string\">'href'</span>] <span class=\"params\">||</span>= url</div><div class=\"line\"></div><div class=\"line\">  content_tag(<span class=\"symbol\">:a</span>, name <span class=\"params\">||</span> url, html_options, &amp;block)</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>這邊用 <code>link_to</code> 方法舉例，可以看到這邊分成了兩種方式，如果有給定 <code>block</code> 的話，會將傳入的參數作轉換，如果沒有的話，則是將 <code>option</code> 做處理之後，傳給     <code>content_tag</code> 這個方法。注意到這邊的 <code>block_given?</code> 方法，有這個方法我們就可以很容易的判斷是否有傳入 block。</p>\n<p>所以在設計 helper 的時候，可以適時包裝這些方法，簡化 helper 的複雜度：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">link_to_with_noopener</span><span class=\"params\">(name = <span class=\"literal\">nil</span>, options = &#123;&#125;, html_options = <span class=\"literal\">nil</span>, &amp;block)</span></span></div><div class=\"line\">\thtml_options.merge!(&#123;</div><div class=\"line\">\t\t<span class=\"symbol\">:ref</span> =&gt; <span class=\"string\">\"noopener\"</span></div><div class=\"line\">\t&#125;)</div><div class=\"line\"><span class=\"keyword\">if</span> block_given?</div><div class=\"line\">  link_to(name, options, html_options, &amp;block)</div><div class=\"line\"><span class=\"keyword\">else</span></div><div class=\"line\">  link_to(name, options, html_options)</div><div class=\"line\"><span class=\"keyword\">end</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>請參考：<a href=\"https://mathiasbynens.github.io/rel-noopener/\" target=\"_blank\" rel=\"external\">About rel=noopener</a></p>\n<p>再來就是 viewhelper 裡面有很多還蠻好用的方法，我們不用再花很大的功夫重造輪子，像是：</p>\n<ul>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_if\" target=\"_blank\" rel=\"external\">link_to_if</a></li>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless\" target=\"_blank\" rel=\"external\">link_to_unless</a></li>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless_current\" target=\"_blank\" rel=\"external\">link_to_unless_current</a></li>\n</ul>\n<p>不過每次只要一動到 helper 就很容易出包…，但直接用原生的 HTML 不但很醜，又不好維護，所以在撰寫 helper 的時候，為了保險還是寫一下 test 吧！</p>\n<p>最近的有個想法是將常用的片段程式碼拆成 partial，<strong>並且用比較統一的方式管理！</strong>，每次接到新的頁面就要先思考哪些會是局部代碼，哪些會是共用代碼。</p>\n<h3 id=\"partial-設計的幾個要點：\"><a href=\"#partial-設計的幾個要點：\" class=\"headerlink\" title=\"partial 設計的幾個要點：\"></a>partial 設計的幾個要點：</h3><p>經過這次標籤消失的事件，首先先跟顆顆說聲道歉之外，更應該檢討的是以下幾點：</p>\n<ol>\n<li>預設值很重要！</li>\n<li>if else 判斷式要思考更全面</li>\n<li>如果害怕沒有預設狀況，就乾脆讓他噴例外</li>\n</ol>\n<p>第三點的實作方法如下：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># in component_helper.rb</span></div><div class=\"line\"><span class=\"comment\"># ui_component 方法是對 render 的進一步包裝。</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ui_component</span><span class=\"params\">(url, props = &#123;&#125;)</span></span></div><div class=\"line\">  render <span class=\"string\">\"components/<span class=\"subst\">#&#123;url&#125;</span>\"</span>, <span class=\"symbol\">locals:</span> props</div><div class=\"line\"><span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># in error_helper.rb</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_required_options!</span><span class=\"params\">(locals, *options)</span></span></div><div class=\"line\">    options.each <span class=\"keyword\">do</span> <span class=\"params\">|option|</span></div><div class=\"line\">      raise MissingOptionError, <span class=\"string\">%Q&#123;option \"<span class=\"subst\">#&#123;option.to_s&#125;</span>\" is required.&#125;</span> <span class=\"keyword\">if</span> locals[option].<span class=\"literal\">nil</span>?</div><div class=\"line\">    <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  private</div><div class=\"line\"></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MissingOptionError</span> &lt; StandardError</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>然後在 partial 的程式碼裡面：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">// in _tags.html.erb</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">check_required_options</span> <span class=\"attr\">locals</span>, <span class=\"attr\">:propA</span>, <span class=\"attr\">:propsB</span>, <span class=\"attr\">:propsC</span> %&gt;</span></div></pre></td></tr></table></figure>\n<p>這樣如果 locals 裡面的 option 不夠完整，就會在使用的時候噴出例外，不知道這樣的設計夠不夠完整。而且 partial 設計的時候很容易因為時間久的關係，忘記了 locals 裡面的選項，在 partial 裡面養成檢查 locals 的習慣，可以幫助我們補上遺落的 option。不知道這樣的設計夠不夠恰當跟完整？還請顆顆提出意見。</p>\n<h3 id=\"component-化\"><a href=\"#component-化\" class=\"headerlink\" title=\"component 化\"></a>component 化</h3><p>這邊的 component 化並不是指全部使用 react 改寫，畢竟我們的頁面也還沒有到這種需求。但是既然 rails 有強大的 partial 機制跟 view heleper 方法，我們可以在撰寫的時候做更進一步的拆分：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"page_id\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_header</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aside</span>&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_sidebar__header</span>\") %&gt;</span></div><div class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_sidebar__content</span>\") %&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aside</span>&gt;</span></div><div class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_summary</span>\") %&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_introduction</span>\") %&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_section</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_footer</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>但其實目前主站的頁面都仍時常變動，所以過早的抽象化反而會浪費更多成本吧！不過未來如果能用這樣的方式來撰寫程式碼，相信應該是非常好維護的！</p>\n<h2 id=\"Webstrom\"><a href=\"#Webstrom\" class=\"headerlink\" title=\"Webstrom\"></a>Webstrom</h2><p>其實以前也是那種很瞧不起 IDE 的那一派，開起來要花我好幾秒，重點是又吃記憶體，然後又要常常使用滑鼠操作…。但使用 IDE 來幫助我們 debug、重構是一件非常省力又輕鬆的事情，只要右鍵 =&gt; refacter 即可。</p>\n<p>所以如果是一般的功能開發，如果牽扯到比較多檔案的 CSS 或是 JS 檔案的話，我會使用 Webstorm 來開發，搭配 react 跟 jsx 的 plugin，不用每次都會忘記 action 的名字在不同檔案跳來跳去，或是突然忘記長長的 API 又跑去找文件，要整理 code 也只要按下 refactor 就好，出錯的機率自然會降低、也節省了不必要的時間。</p>\n<p>但如果是剛入門的人還是建議從文字編輯器開始，門檻比較低。不然設定 IDE 的時間，都可以吃好幾碗肉骨茶麵了。</p>\n<h2 id=\"CSS-supports\"><a href=\"#CSS-supports\" class=\"headerlink\" title=\"CSS @supports\"></a>CSS @supports</h2><p>這個屬性</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"發現的新東西\"><a href=\"#發現的新東西\" class=\"headerlink\" title=\"發現的新東西\"></a>發現的新東西</h2><h3 id=\"瀏覽器的字體渲染\"><a href=\"#瀏覽器的字體渲染\" class=\"headerlink\" title=\"瀏覽器的字體渲染\"></a>瀏覽器的字體渲染</h3><p>前陣子發現了 <code>font-smoothing</code> 的屬性，雖然 w3c 已經把他從標準刪除，但在 chrome 上面還是可以使用這個屬性。</p>\n<p>但令人好奇的是，其他瀏覽器的字體渲染方式呢？</p>\n<p>其實字型渲染是一個一直以來容易被忽略，卻又是極為重要的議題。因為網站的易讀性除了 layout 之外，再來就是字體了。</p>\n<p>為了確認網站在瀏覽器的一致性，稍微研究了一下字體渲染的方式。<br>分享在這邊給大家做參考。</p>\n<p>每個字，在電腦當中都會被當作一個向量圖像。而當我們把字體渲染在螢幕上的時候，就會把字型用像素渲染的方式呈現在螢幕上，所以每個字其實都是由一個個小方塊組合起來的。</p>\n<p>但問題發生了，用小方塊的壞處就是在邊緣會出現無可避免的鋸齒狀，造成閱讀體驗不佳。</p>\n<h2 id=\"基本解法-grayscale\"><a href=\"#基本解法-grayscale\" class=\"headerlink\" title=\"基本解法 grayscale\"></a>基本解法 grayscale</h2><p>這個解法是讓邊緣的像素補上一些灰階的像素，讓字型遠遠看起來比較圓滑，用這些灰階的像素來補償字體本來應該有的面積。這個方法很聰明又優雅，讓人不禁佩服。</p>\n<h3 id=\"進階解法-subpixel\"><a href=\"#進階解法-subpixel\" class=\"headerlink\" title=\"進階解法 subpixel\"></a>進階解法 subpixel</h3><p>顏色信息，如果我們把屏幕截圖不斷放大，可以看到字體邊緣有紅藍兩色出現，這就是亞像素渲染了。</p>\n<p>在LCD屏中，一個像素是由紅綠藍三個緊密排列的亞像素構成的，它們決定了這一像素的顏色和亮度。由於它們是如此之小，以至於肉眼不會把它們看作是一個個獨立的色點。如果我們仔細看看上圖中被白點標記的「紅色」像素，就可以發現它所採用的渲染策略：所有的亞像素都可以單獨控制開或關的；若「空白」像素最右側的亞像素是紅色的話，則此像素都將填滿紅色。</p>\n<h3 id=\"問題點：百家爭鳴的瀏覽器\"><a href=\"#問題點：百家爭鳴的瀏覽器\" class=\"headerlink\" title=\"問題點：百家爭鳴的瀏覽器\"></a>問題點：百家爭鳴的瀏覽器</h3><p>每個瀏覽器實作字型渲染的方式都不盡相同，甚至不同的 OS 下也是。更蛋疼的是，在Windows下還可能採用兩種技術來渲染—— GDI或者DirectWrite。</p>\n<p>Windows<br>在Windows系統下，字體格式對其渲染效果有很顯著的影響，比如PostScript字體和TrueType字體之間就存在著巨大的差別。但這種差別並不是由瀏覽器所引起的，只要底層的字體一樣，我們就可以看到完全相同的渲染效果。</p>\n<p>儘管這種方法並不十分可靠，但從字體的命名中我們可以大致推斷該字體所採用的渲染技術，比如，EOT和.ttf格式一定是TrueType技術，反之.otf通常是PostScript技術。但是還有一中封裝的字體格式WOFF，它可以包含其中任意一種字體格式。因此光看文件名 ​​是不可能清楚它所採用的渲染技術的。除了EOT​​和.ttf格式文件可以斷定是TrueType渲染技術外，其他文件格式所包含的是哪種字體都無法確定。因此在你購買字體時，你最好對想要購買的字體做一番了解。（@Ryekee :我覺得這一句根本不用翻譯，中國還有人會買字體麼？）</p>\n<p>TrueType和PostScript的區別在於描繪曲線時所採用的數學方法不同，但這一差異對柵格器並不會造成太大的影響，只有字型設計人員才需要考慮著兩者的差別。另一個重要的區別就是所採用的字體微調的方法。PostScript只包含了組成字體的各種元素的抽象位置信息，而TrueType則包含了非常詳細的底層命令，直接接管了渲染的進程。然而造成兩種渲染技術的差異並不是它們的設計理念上的差別，而是源於Micro$oft採對TrueType採用了新的渲染引擎。</p>\n<p>操作系统OS提供了支持不同的字体渲染方法的API。在windows下是GDI(Graphics Device Interface)和DirectWrite，OS X下是Quartz。</p>\n<p>GDI分为GDI Grayscale和GDI ClearType。前者为灰阶渲染API，后者是亚像素渲染API。由于GDI ClearType并未对字体进行垂直方向的平滑，因此当字体较大时会出现边缘不平滑的情况。为了弥补GDI ClearType的不足，MS实现了DirectWrite API，它在GDI ClearType的基础上增加了垂直方向的平滑。<br>但是！字体渲染的API都是由浏览器厂商自己选择的！</p>\n<p>使用同一颜色，感官上的颜色深浅为：黑白渲染&gt;grayscale&gt;sub-pixel。</p>\n<p>Chrome35/36采用的是GDI ClearType，因此在字体较大时边缘会出现毛刺，而FF30采用的DirectWrite则没有此类问题。如下图所示：</p>\n<p>不過最近看了一下 windows 的字型渲染，不得不說微軟在這方面還真是下了不少功夫。</p>\n<p>越來越多的字體設計師都開始注意到Web字體所帶來的技術問題，尤其是TrueType字體的微調。隨著Web字體產業的崛起，他們願意付出精力為屏幕顯示而優化字體。在不遠的將來，我們將看到大量精心設計的字體問世（或者至少是對現有字體的更新）。</p>\n<p>隨著屏幕分辨率的增加（以及對柵格器的重大改進），我們慢慢地不再擔心字體渲染的技術細節。採用GDI渲染模式的瀏覽器必將拖後腿，正因為此，未來數年內，我們都還無法放心的使用無微調的TrueType字體。只有當這一類瀏覽器用戶比例降到足夠低的程度的時候，TrueType字體微調（耗時又需要高超的技巧）才可以被扔到一邊。儘管目前市面上幾乎所有Web字體都是TrueType格式的，我仍希望字體行業能夠大規模轉向PostScript格式，因為這種字體能為設計師減少絕大部分的工作。</p>\n<p>不過好處是，科技日新月異。希望之後不用再擔心字型渲染的東西。</p>\n<p>MAC 使用他們自己的引擎來渲染字體，不管 truetype 跟 posttype 渲染方式都一樣。這個渲染引擎只有一個字，屌。</p>\n<p>truetype 跟 posttype 的差別。</p>\n<h3 id=\"結論\"><a href=\"#結論\" class=\"headerlink\" title=\"結論\"></a>結論</h3><p>如果想直接看結果，在網頁的時候，可以使用反鋸齒的技術來增加易讀性。<br>但如果在手機上建議關閉，因為反鋸齒的演算需要比較多的 GPU 來做計算。通常直接採用灰階的渲染方式就夠用了！</p>\n<h3 id=\"事件控制\"><a href=\"#事件控制\" class=\"headerlink\" title=\"事件控制\"></a>事件控制</h3><p>如果可以，希望在每個檔案都能夠新增一個 EventManager 的方式，統一管理事件。我很喜歡事件委託的方式。</p>\n<p>善用 data attribute 的方式來給標籤一些好用的屬性。</p>\n<h2 id=\"microdata\"><a href=\"#microdata\" class=\"headerlink\" title=\"microdata\"></a><a href=\"http://lepture.com/zh/2015/fe-microdata\" target=\"_blank\" rel=\"external\">microdata</a></h2><h2 id=\"Rails-view\"><a href=\"#Rails-view\" class=\"headerlink\" title=\"Rails view\"></a>Rails view</h2><p>最近希望把一些常用的 tag 跟撰寫方式拆成 helper，於是開始去研究 rails 裡面的 view helper method。發現裡面的 helper 撰寫大有學問，這邊跟大家分享：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">link_to</span><span class=\"params\">(name = <span class=\"literal\">nil</span>, options = <span class=\"literal\">nil</span>, html_options = <span class=\"literal\">nil</span>, &amp;block)</span></span></div><div class=\"line\">  html_options, options, name = options, name, block <span class=\"keyword\">if</span> block_given?</div><div class=\"line\">  options <span class=\"params\">||</span>= &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">  html_options = convert_options_to_data_attributes(options, html_options)</div><div class=\"line\"></div><div class=\"line\">  url = url_for(options)</div><div class=\"line\">  html_options[<span class=\"string\">'href'</span>] <span class=\"params\">||</span>= url</div><div class=\"line\"></div><div class=\"line\">  content_tag(<span class=\"symbol\">:a</span>, name <span class=\"params\">||</span> url, html_options, &amp;block)</div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>這邊用 <code>link_to</code> 方法舉例，可以看到這邊分成了兩種方式，如果有給定 <code>block</code> 的話，會將傳入的參數作轉換，如果沒有的話，則是將 <code>option</code> 做處理之後，傳給     <code>content_tag</code> 這個方法。注意到這邊的 <code>block_given?</code> 方法，有這個方法我們就可以很容易的判斷是否有傳入 block。</p>\n<p>所以在設計 helper 的時候，可以適時包裝這些方法，簡化 helper 的複雜度：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">link_to_with_noopener</span><span class=\"params\">(name = <span class=\"literal\">nil</span>, options = &#123;&#125;, html_options = <span class=\"literal\">nil</span>, &amp;block)</span></span></div><div class=\"line\">\thtml_options.merge!(&#123;</div><div class=\"line\">\t\t<span class=\"symbol\">:ref</span> =&gt; <span class=\"string\">\"noopener\"</span></div><div class=\"line\">\t&#125;)</div><div class=\"line\"><span class=\"keyword\">if</span> block_given?</div><div class=\"line\">  link_to(name, options, html_options, &amp;block)</div><div class=\"line\"><span class=\"keyword\">else</span></div><div class=\"line\">  link_to(name, options, html_options)</div><div class=\"line\"><span class=\"keyword\">end</span></div><div class=\"line\"><span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>請參考：<a href=\"https://mathiasbynens.github.io/rel-noopener/\" target=\"_blank\" rel=\"external\">About rel=noopener</a></p>\n<p>再來就是 viewhelper 裡面有很多還蠻好用的方法，我們不用再花很大的功夫重造輪子，像是：</p>\n<ul>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_if\" target=\"_blank\" rel=\"external\">link_to_if</a></li>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless\" target=\"_blank\" rel=\"external\">link_to_unless</a></li>\n<li><a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/UrlHelper/link_to_unless_current\" target=\"_blank\" rel=\"external\">link_to_unless_current</a></li>\n</ul>\n<p>不過每次只要一動到 helper 就很容易出包…，但直接用原生的 HTML 不但很醜，又不好維護，所以在撰寫 helper 的時候，為了保險還是寫一下 test 吧！</p>\n<p>最近的有個想法是將常用的片段程式碼拆成 partial，<strong>並且用比較統一的方式管理！</strong>，每次接到新的頁面就要先思考哪些會是局部代碼，哪些會是共用代碼。</p>\n<h3 id=\"partial-設計的幾個要點：\"><a href=\"#partial-設計的幾個要點：\" class=\"headerlink\" title=\"partial 設計的幾個要點：\"></a>partial 設計的幾個要點：</h3><p>經過這次標籤消失的事件，首先先跟顆顆說聲道歉之外，更應該檢討的是以下幾點：</p>\n<ol>\n<li>預設值很重要！</li>\n<li>if else 判斷式要思考更全面</li>\n<li>如果害怕沒有預設狀況，就乾脆讓他噴例外</li>\n</ol>\n<p>第三點的實作方法如下：</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># in component_helper.rb</span></div><div class=\"line\"><span class=\"comment\"># ui_component 方法是對 render 的進一步包裝。</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">ui_component</span><span class=\"params\">(url, props = &#123;&#125;)</span></span></div><div class=\"line\">  render <span class=\"string\">\"components/<span class=\"subst\">#&#123;url&#125;</span>\"</span>, <span class=\"symbol\">locals:</span> props</div><div class=\"line\"><span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># in error_helper.rb</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_required_options!</span><span class=\"params\">(locals, *options)</span></span></div><div class=\"line\">    options.each <span class=\"keyword\">do</span> <span class=\"params\">|option|</span></div><div class=\"line\">      raise MissingOptionError, <span class=\"string\">%Q&#123;option \"<span class=\"subst\">#&#123;option.to_s&#125;</span>\" is required.&#125;</span> <span class=\"keyword\">if</span> locals[option].<span class=\"literal\">nil</span>?</div><div class=\"line\">    <span class=\"keyword\">end</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  private</div><div class=\"line\"></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MissingOptionError</span> &lt; StandardError</span></div><div class=\"line\">  <span class=\"keyword\">end</span></div></pre></td></tr></table></figure>\n<p>然後在 partial 的程式碼裡面：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">// in _tags.html.erb</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">check_required_options</span> <span class=\"attr\">locals</span>, <span class=\"attr\">:propA</span>, <span class=\"attr\">:propsB</span>, <span class=\"attr\">:propsC</span> %&gt;</span></div></pre></td></tr></table></figure>\n<p>這樣如果 locals 裡面的 option 不夠完整，就會在使用的時候噴出例外，不知道這樣的設計夠不夠完整。而且 partial 設計的時候很容易因為時間久的關係，忘記了 locals 裡面的選項，在 partial 裡面養成檢查 locals 的習慣，可以幫助我們補上遺落的 option。不知道這樣的設計夠不夠恰當跟完整？還請顆顆提出意見。</p>\n<h3 id=\"component-化\"><a href=\"#component-化\" class=\"headerlink\" title=\"component 化\"></a>component 化</h3><p>這邊的 component 化並不是指全部使用 react 改寫，畢竟我們的頁面也還沒有到這種需求。但是既然 rails 有強大的 partial 機制跟 view heleper 方法，我們可以在撰寫的時候做更進一步的拆分：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"page_id\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_header</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aside</span>&gt;</span></div><div class=\"line\">    \t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_sidebar__header</span>\") %&gt;</span></div><div class=\"line\">\t    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_sidebar__content</span>\") %&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">aside</span>&gt;</span></div><div class=\"line\">\t  <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_summary</span>\") %&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_introduction</span>\") %&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_section</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">load_component</span>(\"<span class=\"attr\">company_footer</span>\") %&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">footer</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>但其實目前主站的頁面都仍時常變動，所以過早的抽象化反而會浪費更多成本吧！不過未來如果能用這樣的方式來撰寫程式碼，相信應該是非常好維護的！</p>\n<h2 id=\"Webstrom\"><a href=\"#Webstrom\" class=\"headerlink\" title=\"Webstrom\"></a>Webstrom</h2><p>其實以前也是那種很瞧不起 IDE 的那一派，開起來要花我好幾秒，重點是又吃記憶體，然後又要常常使用滑鼠操作…。但使用 IDE 來幫助我們 debug、重構是一件非常省力又輕鬆的事情，只要右鍵 =&gt; refacter 即可。</p>\n<p>所以如果是一般的功能開發，如果牽扯到比較多檔案的 CSS 或是 JS 檔案的話，我會使用 Webstorm 來開發，搭配 react 跟 jsx 的 plugin，不用每次都會忘記 action 的名字在不同檔案跳來跳去，或是突然忘記長長的 API 又跑去找文件，要整理 code 也只要按下 refactor 就好，出錯的機率自然會降低、也節省了不必要的時間。</p>\n<p>但如果是剛入門的人還是建議從文字編輯器開始，門檻比較低。不然設定 IDE 的時間，都可以吃好幾碗肉骨茶麵了。</p>\n<h2 id=\"CSS-supports\"><a href=\"#CSS-supports\" class=\"headerlink\" title=\"CSS @supports\"></a>CSS @supports</h2><p>這個屬性</p>\n"},{"title":"做了一份週刊 - 日語八百屋","date":"2017-07-13T16:00:00.000Z","_content":"\n自學日文也已經三年多了，做了一份周刊，叫做[日語八百屋](https://www.shurado.com)。\n\n- [粉絲專頁](https://fb.me/nipponyaoya)\n- [Medium](https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B)\n\n### 什麼是日語八百屋？\n\n八百屋的由來源自於日語的八百屋（やおや），除了大家熟知的「蔬菜店」之外，也有「很多」的意思在裡頭。\n\n我的目標很簡單：「滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。」\n\n學語言，多的是從微不足道的小事開始，50 音、文法、單字、敬語，最後內化成自己的事物，積跬步，成千里，最後逐漸變成「八百」。\n\n學英文的線上資源很多，平台也相對完整，voicetube、希平方、tutorABC 都是不錯的學習管道，有大量的影片可以學習，在網路上用心搜尋，也能夠找到不錯的資源。\n\n不過在學習日文的資源相對較少，多數都是從部落格上、FB 社團上而來的片段資訊。像是音速學習日語、王可樂的日語教室等等，仍然是以傳統的線下教學或是買書自學居多。\n\n訂閱了週刊之後，每個禮拜一早上，我們都會寄送 5 ~ 10 篇不等的文章給讀者們閱讀。\n\n### 為什麼不用經營粉絲專頁的方式就好？\n\n這答案其實蠻主觀的，因為日語相關的粉絲專頁幾乎是多到噴出來，在 facebook 順手搜尋日語、日文、日劇就會出現數不清的專頁。\n\n然而，這些片段的資訊散佈在網路的各個角落，不僅統整困難之外，初學者在茫茫大海中也不知道該從哪裡開始。\n\n分享特定領域的資訊不是我們的目的，而是想要不侷限在文法、單字、日文學習的範圍上，盡量由多面向的方式更深入日文這個語言。\n\n出書跟開課，我們沒有那麼多的資源這樣做，而且坊間已經有很多人在這樣做了。\n\n粉絲專頁，也夠多人在經營了，不缺我這一個興趣使然的日語學習者。所以對我來說目前最簡單也最純粹的方式就是寄送 email。\n\n開設的粉絲專頁只是用來做推廣而已，基本上不會有太多貼文。\n\n### 跟一般的粉絲專頁有什麼不一樣？\n\n不過，如果只搜集文法、單字相關的資訊，似乎有些枯燥乏味，而且網路上、各大書店、部落格上的內容豐富，絕對有許多優秀的教材。\n\n要說不一樣的話，我們主要是用 email 來推送內容的。\n\nemail 雖然不像 facebook 那樣即時，但這反而是個優點，可以讓你只專注在目前的內容中。再來 email 不會被其他外在因素干擾，而且大家檢查 email 的頻率大概只比 facebook 少一點點吧！\n\n利用 email 渾然天成的特性，我們一週會推送 5 ~ 10 篇不等的文章，絕對是在一週（甚至是一天）看得完的份量。\n\n雖然不一定能對學習有顯著的幫助，但希望能夠藉由這樣的方式，不僅擴展自身對日文的理解之外，也順便了解日本文化。因此，涵蓋的範圍很廣，有關於日本文化的，都可以是本週刊的素材之一。\n\n未來希望能夠讓大家都能夠輕易地分享自己的筆記或連結，讓這份週刊的廣度更活躍，所以如果有人也願意分享文章或是學習筆記的話那就太好了。\n\n畢竟一個人對日本所知有限，有人每天追劇、有人追動漫、有人對歷史瞭若指掌、有人可能懂得分析經濟等等。但如果能夠把這些內容結合起來，這份週刊就會變得非常有料：）。\n\n最後，不妨到網站訂閱一下 [https://www.shurado.com](https://www.shurado.com) 吧！\n\n### 技術線\n\n因為想要專注在寫文章上，花了兩天左右建好網站，並且逐漸擴充功能，反正最基本的功能只要達到：\n\n- 寄信\n- 製作電子報\n- 寄送電子報\n- 存放歷期週刊的頁面\n- 首頁\n\n基本上就差不多了。整個 app 是用 Ruby On Rails 寫的，用 Redis 管後台任務，比較麻煩的頁面互動就用 react + redux + redux-observable 解決。\n\n寄信的功能主要串接了 mailgun 跟 mailchimp 這兩個第三方套件。mailgun 是負責寄送單一信件，例如訂閱確認信等等；而 mailchimp 則是負責寄送電子報。兩個的 API 都還蠻好串接的，文件也寫得很不錯。\n\n之後還會陸續加上一些功能，例如：\n\n- 在後台發布文章時，能夠同步發表到 medium 跟粉絲專頁\n- 日文文章可以依照需求加入平假名讀音\n- 可以用搜尋的方式找到想要的週刊或 issue\n\n### 後記\n\n想說在畢業前好好做點事情，所以趁著熱情還沒消失前，也在 hahow 上開了一門課叫做[從 0 到 1 - 為初學者而設計的日文課](https://hahow.in/cr/nihongogo)，整理了基本的日文文法。\n\n後來想想，訂價實在太便宜，$1500 裡頭涵蓋的文法幾乎是一堂 $10000 出頭的補習班課程。\n\n不過結果還挺出乎意料的。原本想說能夠成功開課就不錯了，沒想到現在募資率竟然已經破 900% 了。現在想想，如果知道準備一門課那麼累的話，或許我就不會開課了，尤其是在雙語之間上字幕，實在有夠累人。\n\n### 心得\n\n不知不覺這份週刊已經要到 20期了，最大的體會是技術已經不是最大的瓶頸，而是如何產生這些內容。雖然之後或許可以靠著機器學習的幫忙省下一些功夫，不過內容的生產永遠是有需求的，不過光有內容，卻沒有良好的體驗來吸引讀者們的話，再怎麼努力產出也是白搭。\n\n希望能夠繼續堅持下去。","source":"_posts/what-is-yaoya.md","raw":"---\ntitle: 做了一份週刊 - 日語八百屋\ncategories: 日語學習\ndate: 2017-7-14\ntags:\n  - 日語學習\n  - 日語八百屋\n\n---\n\n自學日文也已經三年多了，做了一份周刊，叫做[日語八百屋](https://www.shurado.com)。\n\n- [粉絲專頁](https://fb.me/nipponyaoya)\n- [Medium](https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B)\n\n### 什麼是日語八百屋？\n\n八百屋的由來源自於日語的八百屋（やおや），除了大家熟知的「蔬菜店」之外，也有「很多」的意思在裡頭。\n\n我的目標很簡單：「滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。」\n\n學語言，多的是從微不足道的小事開始，50 音、文法、單字、敬語，最後內化成自己的事物，積跬步，成千里，最後逐漸變成「八百」。\n\n學英文的線上資源很多，平台也相對完整，voicetube、希平方、tutorABC 都是不錯的學習管道，有大量的影片可以學習，在網路上用心搜尋，也能夠找到不錯的資源。\n\n不過在學習日文的資源相對較少，多數都是從部落格上、FB 社團上而來的片段資訊。像是音速學習日語、王可樂的日語教室等等，仍然是以傳統的線下教學或是買書自學居多。\n\n訂閱了週刊之後，每個禮拜一早上，我們都會寄送 5 ~ 10 篇不等的文章給讀者們閱讀。\n\n### 為什麼不用經營粉絲專頁的方式就好？\n\n這答案其實蠻主觀的，因為日語相關的粉絲專頁幾乎是多到噴出來，在 facebook 順手搜尋日語、日文、日劇就會出現數不清的專頁。\n\n然而，這些片段的資訊散佈在網路的各個角落，不僅統整困難之外，初學者在茫茫大海中也不知道該從哪裡開始。\n\n分享特定領域的資訊不是我們的目的，而是想要不侷限在文法、單字、日文學習的範圍上，盡量由多面向的方式更深入日文這個語言。\n\n出書跟開課，我們沒有那麼多的資源這樣做，而且坊間已經有很多人在這樣做了。\n\n粉絲專頁，也夠多人在經營了，不缺我這一個興趣使然的日語學習者。所以對我來說目前最簡單也最純粹的方式就是寄送 email。\n\n開設的粉絲專頁只是用來做推廣而已，基本上不會有太多貼文。\n\n### 跟一般的粉絲專頁有什麼不一樣？\n\n不過，如果只搜集文法、單字相關的資訊，似乎有些枯燥乏味，而且網路上、各大書店、部落格上的內容豐富，絕對有許多優秀的教材。\n\n要說不一樣的話，我們主要是用 email 來推送內容的。\n\nemail 雖然不像 facebook 那樣即時，但這反而是個優點，可以讓你只專注在目前的內容中。再來 email 不會被其他外在因素干擾，而且大家檢查 email 的頻率大概只比 facebook 少一點點吧！\n\n利用 email 渾然天成的特性，我們一週會推送 5 ~ 10 篇不等的文章，絕對是在一週（甚至是一天）看得完的份量。\n\n雖然不一定能對學習有顯著的幫助，但希望能夠藉由這樣的方式，不僅擴展自身對日文的理解之外，也順便了解日本文化。因此，涵蓋的範圍很廣，有關於日本文化的，都可以是本週刊的素材之一。\n\n未來希望能夠讓大家都能夠輕易地分享自己的筆記或連結，讓這份週刊的廣度更活躍，所以如果有人也願意分享文章或是學習筆記的話那就太好了。\n\n畢竟一個人對日本所知有限，有人每天追劇、有人追動漫、有人對歷史瞭若指掌、有人可能懂得分析經濟等等。但如果能夠把這些內容結合起來，這份週刊就會變得非常有料：）。\n\n最後，不妨到網站訂閱一下 [https://www.shurado.com](https://www.shurado.com) 吧！\n\n### 技術線\n\n因為想要專注在寫文章上，花了兩天左右建好網站，並且逐漸擴充功能，反正最基本的功能只要達到：\n\n- 寄信\n- 製作電子報\n- 寄送電子報\n- 存放歷期週刊的頁面\n- 首頁\n\n基本上就差不多了。整個 app 是用 Ruby On Rails 寫的，用 Redis 管後台任務，比較麻煩的頁面互動就用 react + redux + redux-observable 解決。\n\n寄信的功能主要串接了 mailgun 跟 mailchimp 這兩個第三方套件。mailgun 是負責寄送單一信件，例如訂閱確認信等等；而 mailchimp 則是負責寄送電子報。兩個的 API 都還蠻好串接的，文件也寫得很不錯。\n\n之後還會陸續加上一些功能，例如：\n\n- 在後台發布文章時，能夠同步發表到 medium 跟粉絲專頁\n- 日文文章可以依照需求加入平假名讀音\n- 可以用搜尋的方式找到想要的週刊或 issue\n\n### 後記\n\n想說在畢業前好好做點事情，所以趁著熱情還沒消失前，也在 hahow 上開了一門課叫做[從 0 到 1 - 為初學者而設計的日文課](https://hahow.in/cr/nihongogo)，整理了基本的日文文法。\n\n後來想想，訂價實在太便宜，$1500 裡頭涵蓋的文法幾乎是一堂 $10000 出頭的補習班課程。\n\n不過結果還挺出乎意料的。原本想說能夠成功開課就不錯了，沒想到現在募資率竟然已經破 900% 了。現在想想，如果知道準備一門課那麼累的話，或許我就不會開課了，尤其是在雙語之間上字幕，實在有夠累人。\n\n### 心得\n\n不知不覺這份週刊已經要到 20期了，最大的體會是技術已經不是最大的瓶頸，而是如何產生這些內容。雖然之後或許可以靠著機器學習的幫忙省下一些功夫，不過內容的生產永遠是有需求的，不過光有內容，卻沒有良好的體驗來吸引讀者們的話，再怎麼努力產出也是白搭。\n\n希望能夠繼續堅持下去。","slug":"what-is-yaoya","published":1,"updated":"2017-07-19T14:52:32.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjbaeitsu0039iw5t0yc3dn1j","content":"<p>自學日文也已經三年多了，做了一份周刊，叫做<a href=\"https://www.shurado.com\" target=\"_blank\" rel=\"external\">日語八百屋</a>。</p>\n<ul>\n<li><a href=\"https://fb.me/nipponyaoya\" target=\"_blank\" rel=\"external\">粉絲專頁</a></li>\n<li><a href=\"https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B\" target=\"_blank\" rel=\"external\">Medium</a></li>\n</ul>\n<h3 id=\"什麼是日語八百屋？\"><a href=\"#什麼是日語八百屋？\" class=\"headerlink\" title=\"什麼是日語八百屋？\"></a>什麼是日語八百屋？</h3><p>八百屋的由來源自於日語的八百屋（やおや），除了大家熟知的「蔬菜店」之外，也有「很多」的意思在裡頭。</p>\n<p>我的目標很簡單：「滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。」</p>\n<p>學語言，多的是從微不足道的小事開始，50 音、文法、單字、敬語，最後內化成自己的事物，積跬步，成千里，最後逐漸變成「八百」。</p>\n<p>學英文的線上資源很多，平台也相對完整，voicetube、希平方、tutorABC 都是不錯的學習管道，有大量的影片可以學習，在網路上用心搜尋，也能夠找到不錯的資源。</p>\n<p>不過在學習日文的資源相對較少，多數都是從部落格上、FB 社團上而來的片段資訊。像是音速學習日語、王可樂的日語教室等等，仍然是以傳統的線下教學或是買書自學居多。</p>\n<p>訂閱了週刊之後，每個禮拜一早上，我們都會寄送 5 ~ 10 篇不等的文章給讀者們閱讀。</p>\n<h3 id=\"為什麼不用經營粉絲專頁的方式就好？\"><a href=\"#為什麼不用經營粉絲專頁的方式就好？\" class=\"headerlink\" title=\"為什麼不用經營粉絲專頁的方式就好？\"></a>為什麼不用經營粉絲專頁的方式就好？</h3><p>這答案其實蠻主觀的，因為日語相關的粉絲專頁幾乎是多到噴出來，在 facebook 順手搜尋日語、日文、日劇就會出現數不清的專頁。</p>\n<p>然而，這些片段的資訊散佈在網路的各個角落，不僅統整困難之外，初學者在茫茫大海中也不知道該從哪裡開始。</p>\n<p>分享特定領域的資訊不是我們的目的，而是想要不侷限在文法、單字、日文學習的範圍上，盡量由多面向的方式更深入日文這個語言。</p>\n<p>出書跟開課，我們沒有那麼多的資源這樣做，而且坊間已經有很多人在這樣做了。</p>\n<p>粉絲專頁，也夠多人在經營了，不缺我這一個興趣使然的日語學習者。所以對我來說目前最簡單也最純粹的方式就是寄送 email。</p>\n<p>開設的粉絲專頁只是用來做推廣而已，基本上不會有太多貼文。</p>\n<h3 id=\"跟一般的粉絲專頁有什麼不一樣？\"><a href=\"#跟一般的粉絲專頁有什麼不一樣？\" class=\"headerlink\" title=\"跟一般的粉絲專頁有什麼不一樣？\"></a>跟一般的粉絲專頁有什麼不一樣？</h3><p>不過，如果只搜集文法、單字相關的資訊，似乎有些枯燥乏味，而且網路上、各大書店、部落格上的內容豐富，絕對有許多優秀的教材。</p>\n<p>要說不一樣的話，我們主要是用 email 來推送內容的。</p>\n<p>email 雖然不像 facebook 那樣即時，但這反而是個優點，可以讓你只專注在目前的內容中。再來 email 不會被其他外在因素干擾，而且大家檢查 email 的頻率大概只比 facebook 少一點點吧！</p>\n<p>利用 email 渾然天成的特性，我們一週會推送 5 ~ 10 篇不等的文章，絕對是在一週（甚至是一天）看得完的份量。</p>\n<p>雖然不一定能對學習有顯著的幫助，但希望能夠藉由這樣的方式，不僅擴展自身對日文的理解之外，也順便了解日本文化。因此，涵蓋的範圍很廣，有關於日本文化的，都可以是本週刊的素材之一。</p>\n<p>未來希望能夠讓大家都能夠輕易地分享自己的筆記或連結，讓這份週刊的廣度更活躍，所以如果有人也願意分享文章或是學習筆記的話那就太好了。</p>\n<p>畢竟一個人對日本所知有限，有人每天追劇、有人追動漫、有人對歷史瞭若指掌、有人可能懂得分析經濟等等。但如果能夠把這些內容結合起來，這份週刊就會變得非常有料：）。</p>\n<p>最後，不妨到網站訂閱一下 <a href=\"https://www.shurado.com\" target=\"_blank\" rel=\"external\">https://www.shurado.com</a> 吧！</p>\n<h3 id=\"技術線\"><a href=\"#技術線\" class=\"headerlink\" title=\"技術線\"></a>技術線</h3><p>因為想要專注在寫文章上，花了兩天左右建好網站，並且逐漸擴充功能，反正最基本的功能只要達到：</p>\n<ul>\n<li>寄信</li>\n<li>製作電子報</li>\n<li>寄送電子報</li>\n<li>存放歷期週刊的頁面</li>\n<li>首頁</li>\n</ul>\n<p>基本上就差不多了。整個 app 是用 Ruby On Rails 寫的，用 Redis 管後台任務，比較麻煩的頁面互動就用 react + redux + redux-observable 解決。</p>\n<p>寄信的功能主要串接了 mailgun 跟 mailchimp 這兩個第三方套件。mailgun 是負責寄送單一信件，例如訂閱確認信等等；而 mailchimp 則是負責寄送電子報。兩個的 API 都還蠻好串接的，文件也寫得很不錯。</p>\n<p>之後還會陸續加上一些功能，例如：</p>\n<ul>\n<li>在後台發布文章時，能夠同步發表到 medium 跟粉絲專頁</li>\n<li>日文文章可以依照需求加入平假名讀音</li>\n<li>可以用搜尋的方式找到想要的週刊或 issue</li>\n</ul>\n<h3 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h3><p>想說在畢業前好好做點事情，所以趁著熱情還沒消失前，也在 hahow 上開了一門課叫做<a href=\"https://hahow.in/cr/nihongogo\" target=\"_blank\" rel=\"external\">從 0 到 1 - 為初學者而設計的日文課</a>，整理了基本的日文文法。</p>\n<p>後來想想，訂價實在太便宜，$1500 裡頭涵蓋的文法幾乎是一堂 $10000 出頭的補習班課程。</p>\n<p>不過結果還挺出乎意料的。原本想說能夠成功開課就不錯了，沒想到現在募資率竟然已經破 900% 了。現在想想，如果知道準備一門課那麼累的話，或許我就不會開課了，尤其是在雙語之間上字幕，實在有夠累人。</p>\n<h3 id=\"心得\"><a href=\"#心得\" class=\"headerlink\" title=\"心得\"></a>心得</h3><p>不知不覺這份週刊已經要到 20期了，最大的體會是技術已經不是最大的瓶頸，而是如何產生這些內容。雖然之後或許可以靠著機器學習的幫忙省下一些功夫，不過內容的生產永遠是有需求的，不過光有內容，卻沒有良好的體驗來吸引讀者們的話，再怎麼努力產出也是白搭。</p>\n<p>希望能夠繼續堅持下去。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>自學日文也已經三年多了，做了一份周刊，叫做<a href=\"https://www.shurado.com\" target=\"_blank\" rel=\"external\">日語八百屋</a>。</p>\n<ul>\n<li><a href=\"https://fb.me/nipponyaoya\" target=\"_blank\" rel=\"external\">粉絲專頁</a></li>\n<li><a href=\"https://medium.com/%E6%97%A5%E8%AA%9E%E5%85%AB%E7%99%BE%E5%B1%8B\" target=\"_blank\" rel=\"external\">Medium</a></li>\n</ul>\n<h3 id=\"什麼是日語八百屋？\"><a href=\"#什麼是日語八百屋？\" class=\"headerlink\" title=\"什麼是日語八百屋？\"></a>什麼是日語八百屋？</h3><p>八百屋的由來源自於日語的八百屋（やおや），除了大家熟知的「蔬菜店」之外，也有「很多」的意思在裡頭。</p>\n<p>我的目標很簡單：「滿足日文、日本、日劇愛好者們的求知慾以及資訊焦慮症。幫助減少學習阻礙、資訊不對稱、增加日本文化知識，內容涵蓋了日語學習、日本旅行、日本文化、動漫、語言學習技巧等等。」</p>\n<p>學語言，多的是從微不足道的小事開始，50 音、文法、單字、敬語，最後內化成自己的事物，積跬步，成千里，最後逐漸變成「八百」。</p>\n<p>學英文的線上資源很多，平台也相對完整，voicetube、希平方、tutorABC 都是不錯的學習管道，有大量的影片可以學習，在網路上用心搜尋，也能夠找到不錯的資源。</p>\n<p>不過在學習日文的資源相對較少，多數都是從部落格上、FB 社團上而來的片段資訊。像是音速學習日語、王可樂的日語教室等等，仍然是以傳統的線下教學或是買書自學居多。</p>\n<p>訂閱了週刊之後，每個禮拜一早上，我們都會寄送 5 ~ 10 篇不等的文章給讀者們閱讀。</p>\n<h3 id=\"為什麼不用經營粉絲專頁的方式就好？\"><a href=\"#為什麼不用經營粉絲專頁的方式就好？\" class=\"headerlink\" title=\"為什麼不用經營粉絲專頁的方式就好？\"></a>為什麼不用經營粉絲專頁的方式就好？</h3><p>這答案其實蠻主觀的，因為日語相關的粉絲專頁幾乎是多到噴出來，在 facebook 順手搜尋日語、日文、日劇就會出現數不清的專頁。</p>\n<p>然而，這些片段的資訊散佈在網路的各個角落，不僅統整困難之外，初學者在茫茫大海中也不知道該從哪裡開始。</p>\n<p>分享特定領域的資訊不是我們的目的，而是想要不侷限在文法、單字、日文學習的範圍上，盡量由多面向的方式更深入日文這個語言。</p>\n<p>出書跟開課，我們沒有那麼多的資源這樣做，而且坊間已經有很多人在這樣做了。</p>\n<p>粉絲專頁，也夠多人在經營了，不缺我這一個興趣使然的日語學習者。所以對我來說目前最簡單也最純粹的方式就是寄送 email。</p>\n<p>開設的粉絲專頁只是用來做推廣而已，基本上不會有太多貼文。</p>\n<h3 id=\"跟一般的粉絲專頁有什麼不一樣？\"><a href=\"#跟一般的粉絲專頁有什麼不一樣？\" class=\"headerlink\" title=\"跟一般的粉絲專頁有什麼不一樣？\"></a>跟一般的粉絲專頁有什麼不一樣？</h3><p>不過，如果只搜集文法、單字相關的資訊，似乎有些枯燥乏味，而且網路上、各大書店、部落格上的內容豐富，絕對有許多優秀的教材。</p>\n<p>要說不一樣的話，我們主要是用 email 來推送內容的。</p>\n<p>email 雖然不像 facebook 那樣即時，但這反而是個優點，可以讓你只專注在目前的內容中。再來 email 不會被其他外在因素干擾，而且大家檢查 email 的頻率大概只比 facebook 少一點點吧！</p>\n<p>利用 email 渾然天成的特性，我們一週會推送 5 ~ 10 篇不等的文章，絕對是在一週（甚至是一天）看得完的份量。</p>\n<p>雖然不一定能對學習有顯著的幫助，但希望能夠藉由這樣的方式，不僅擴展自身對日文的理解之外，也順便了解日本文化。因此，涵蓋的範圍很廣，有關於日本文化的，都可以是本週刊的素材之一。</p>\n<p>未來希望能夠讓大家都能夠輕易地分享自己的筆記或連結，讓這份週刊的廣度更活躍，所以如果有人也願意分享文章或是學習筆記的話那就太好了。</p>\n<p>畢竟一個人對日本所知有限，有人每天追劇、有人追動漫、有人對歷史瞭若指掌、有人可能懂得分析經濟等等。但如果能夠把這些內容結合起來，這份週刊就會變得非常有料：）。</p>\n<p>最後，不妨到網站訂閱一下 <a href=\"https://www.shurado.com\" target=\"_blank\" rel=\"external\">https://www.shurado.com</a> 吧！</p>\n<h3 id=\"技術線\"><a href=\"#技術線\" class=\"headerlink\" title=\"技術線\"></a>技術線</h3><p>因為想要專注在寫文章上，花了兩天左右建好網站，並且逐漸擴充功能，反正最基本的功能只要達到：</p>\n<ul>\n<li>寄信</li>\n<li>製作電子報</li>\n<li>寄送電子報</li>\n<li>存放歷期週刊的頁面</li>\n<li>首頁</li>\n</ul>\n<p>基本上就差不多了。整個 app 是用 Ruby On Rails 寫的，用 Redis 管後台任務，比較麻煩的頁面互動就用 react + redux + redux-observable 解決。</p>\n<p>寄信的功能主要串接了 mailgun 跟 mailchimp 這兩個第三方套件。mailgun 是負責寄送單一信件，例如訂閱確認信等等；而 mailchimp 則是負責寄送電子報。兩個的 API 都還蠻好串接的，文件也寫得很不錯。</p>\n<p>之後還會陸續加上一些功能，例如：</p>\n<ul>\n<li>在後台發布文章時，能夠同步發表到 medium 跟粉絲專頁</li>\n<li>日文文章可以依照需求加入平假名讀音</li>\n<li>可以用搜尋的方式找到想要的週刊或 issue</li>\n</ul>\n<h3 id=\"後記\"><a href=\"#後記\" class=\"headerlink\" title=\"後記\"></a>後記</h3><p>想說在畢業前好好做點事情，所以趁著熱情還沒消失前，也在 hahow 上開了一門課叫做<a href=\"https://hahow.in/cr/nihongogo\" target=\"_blank\" rel=\"external\">從 0 到 1 - 為初學者而設計的日文課</a>，整理了基本的日文文法。</p>\n<p>後來想想，訂價實在太便宜，$1500 裡頭涵蓋的文法幾乎是一堂 $10000 出頭的補習班課程。</p>\n<p>不過結果還挺出乎意料的。原本想說能夠成功開課就不錯了，沒想到現在募資率竟然已經破 900% 了。現在想想，如果知道準備一門課那麼累的話，或許我就不會開課了，尤其是在雙語之間上字幕，實在有夠累人。</p>\n<h3 id=\"心得\"><a href=\"#心得\" class=\"headerlink\" title=\"心得\"></a>心得</h3><p>不知不覺這份週刊已經要到 20期了，最大的體會是技術已經不是最大的瓶頸，而是如何產生這些內容。雖然之後或許可以靠著機器學習的幫忙省下一些功夫，不過內容的生產永遠是有需求的，不過光有內容，卻沒有良好的體驗來吸引讀者們的話，再怎麼努力產出也是白搭。</p>\n<p>希望能夠繼續堅持下去。</p>\n"}],"PostAsset":[{"_id":"source/_posts/responsive-flex/example1.png","slug":"example1.png","post":"cjbaeits2002giw5t1emjxd2p","modified":0,"renderable":0},{"_id":"source/_posts/chatops/payload.png","slug":"payload.png","post":"cjbaeitqg000siw5tk7z71iy7","modified":0,"renderable":0},{"_id":"source/_posts/responsive-flex/example3.png","slug":"example3.png","post":"cjbaeits2002giw5t1emjxd2p","modified":0,"renderable":0},{"_id":"source/_posts/chatops/process.png","slug":"process.png","post":"cjbaeitqg000siw5tk7z71iy7","modified":0,"renderable":0},{"_id":"source/_posts/chatops/success.png","slug":"success.png","post":"cjbaeitqg000siw5tk7z71iy7","modified":0,"renderable":0},{"_id":"source/_posts/responsive-flex/example2.png","slug":"example2.png","post":"cjbaeits2002giw5t1emjxd2p","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cjbaeitpl0001iw5twpg89p72","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitq4000ciw5tvsok97jc"},{"post_id":"cjbaeitps0005iw5teqrdzv7q","category_id":"cjbaeitq20008iw5t7mogkqbj","_id":"cjbaeitqa000hiw5thxgr9tks"},{"post_id":"cjbaeitq4000biw5t6n7qrnuv","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitqe000liw5tpjbs1ua7"},{"post_id":"cjbaeitq5000fiw5t09af7epn","category_id":"cjbaeitq20008iw5t7mogkqbj","_id":"cjbaeitqg000oiw5t9gl32470"},{"post_id":"cjbaeitpy0006iw5tgbhwirqs","category_id":"cjbaeitq5000diw5trdp3laqn","_id":"cjbaeitqi000tiw5tqo71g4wb"},{"post_id":"cjbaeitq2000aiw5tftku7e46","category_id":"cjbaeitqb000iiw5tbibyt44r","_id":"cjbaeitqj000xiw5tyu0eys02"},{"post_id":"cjbaeitqe000niw5twr44t5po","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitql0011iw5t03kj8r5h"},{"post_id":"cjbaeitq8000giw5tlwq8sv1g","category_id":"cjbaeitqg000qiw5t0lk87n10","_id":"cjbaeitqn0014iw5tpdj43sqs"},{"post_id":"cjbaeitqj000yiw5tzw3gm85o","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitqr0018iw5t60qdmapw"},{"post_id":"cjbaeitqc000kiw5thd1z29j0","category_id":"cjbaeitqk000ziw5tdum1qzxi","_id":"cjbaeitqt001ciw5tkwxwasfm"},{"post_id":"cjbaeitqm0013iw5tha8sb3yh","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitqv001giw5t0mo191xl"},{"post_id":"cjbaeitqg000siw5tk7z71iy7","category_id":"cjbaeitqn0015iw5ty4066zzt","_id":"cjbaeitr0001jiw5t6uel5046"},{"post_id":"cjbaeitqs001aiw5tseg8f5pk","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitr4001niw5txd6fp7ct"},{"post_id":"cjbaeitql0012iw5t85wjxjhk","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitrb001piw5t3l4lnu3k"},{"post_id":"cjbaeitr2001miw5t9ytzp3ri","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitrg001uiw5tzevri0xm"},{"post_id":"cjbaeitr5001oiw5tstrd63zm","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitrj001wiw5tj7z0vpww"},{"post_id":"cjbaeitqo0017iw5t0hf69ebe","category_id":"cjbaeitr1001kiw5t8h9j1dr6","_id":"cjbaeitrn0020iw5tyhg321x6"},{"post_id":"cjbaeitrb001qiw5tlfgjpwf4","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitrt0023iw5twhkcv58b"},{"post_id":"cjbaeitrf001tiw5tc0yr10ue","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitrx0027iw5tclpn995u"},{"post_id":"cjbaeitqu001fiw5txc1jgpoy","category_id":"cjbaeitr1001kiw5t8h9j1dr6","_id":"cjbaeitrz002aiw5tl2ha357d"},{"post_id":"cjbaeitrh001viw5tt9bxcid2","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeits1002eiw5tmogdh8t7"},{"post_id":"cjbaeitrm001ziw5t5sylhv8h","category_id":"cjbaeitr1001kiw5t8h9j1dr6","_id":"cjbaeits4002hiw5tqpn2za3v"},{"post_id":"cjbaeitqv001iiw5tsxvupxx4","category_id":"cjbaeitrj001xiw5tpvqejxwf","_id":"cjbaeits5002jiw5tcizdp6h7"},{"post_id":"cjbaeitro0022iw5tls5yvtfn","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeits7002miw5tx6cr77mu"},{"post_id":"cjbaeitrv0026iw5tdujoitdm","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeits9002oiw5tjo82zen4"},{"post_id":"cjbaeits0002diw5ta2u0aflo","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitsg002riw5tzw579oq3"},{"post_id":"cjbaeits2002giw5t1emjxd2p","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitsk002uiw5t0jjzuohd"},{"post_id":"cjbaeits4002iiw5txxenhmg9","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitsm002yiw5tp6p8nb9a"},{"post_id":"cjbaeitry0029iw5tyvwob6lb","category_id":"cjbaeits2002fiw5tzgi8kiy9","_id":"cjbaeitso0031iw5tk1z4p7a4"},{"post_id":"cjbaeits6002liw5tywnsklpu","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitsr0034iw5tzkjd26zn"},{"post_id":"cjbaeits8002niw5tkx7e8z2t","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitst0037iw5tdut7lzhg"},{"post_id":"cjbaeitsb002qiw5tq42arns6","category_id":"cjbaeitpq0003iw5tw5bdsyf5","_id":"cjbaeitsv003aiw5tozypi69y"},{"post_id":"cjbaeitsh002tiw5t5mrhn9el","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitsv003ciw5tll7v1igb"},{"post_id":"cjbaeitsl002xiw5to008sd4w","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitsw003diw5t70wwv5w7"},{"post_id":"cjbaeitsn0030iw5tf6oqb30w","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitt0003fiw5tt48fwang"},{"post_id":"cjbaeitsq0033iw5t46i848op","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitt1003hiw5to48ow613"},{"post_id":"cjbaeitss0036iw5tu0xq0dtg","category_id":"cjbaeitqt001diw5ti9qon7l4","_id":"cjbaeitt2003kiw5t5ezb7gv6"},{"post_id":"cjbaeitsu0039iw5t0yc3dn1j","category_id":"cjbaeitrj001xiw5tpvqejxwf","_id":"cjbaeitt4003liw5toof5xri3"}],"PostTag":[{"post_id":"cjbaeitpl0001iw5twpg89p72","tag_id":"cjbaeitpr0004iw5ty7ccdk1y","_id":"cjbaeitqe000miw5t8qcvf6o9"},{"post_id":"cjbaeitpl0001iw5twpg89p72","tag_id":"cjbaeitq20009iw5t2exryd12","_id":"cjbaeitqg000piw5tdeoosw8j"},{"post_id":"cjbaeitpl0001iw5twpg89p72","tag_id":"cjbaeitq5000eiw5todq7c4sk","_id":"cjbaeitqi000uiw5tdgs89g0u"},{"post_id":"cjbaeitps0005iw5teqrdzv7q","tag_id":"cjbaeitqb000jiw5tuqzi2sye","_id":"cjbaeitqj000wiw5t52owrd1n"},{"post_id":"cjbaeitpy0006iw5tgbhwirqs","tag_id":"cjbaeitqg000riw5tf9ptcxgc","_id":"cjbaeitqr0019iw5t49es2vc7"},{"post_id":"cjbaeitpy0006iw5tgbhwirqs","tag_id":"cjbaeitqk0010iw5tmtnfqok7","_id":"cjbaeitqt001biw5tx2yz1htx"},{"post_id":"cjbaeitq00007iw5tjvy46a13","tag_id":"cjbaeitqo0016iw5tf2mkjx8u","_id":"cjbaeitqv001hiw5txf1h4v5b"},{"post_id":"cjbaeitq2000aiw5tftku7e46","tag_id":"cjbaeitqu001eiw5tss0ewrmt","_id":"cjbaeitrn0021iw5ttmqgmdwt"},{"post_id":"cjbaeitq2000aiw5tftku7e46","tag_id":"cjbaeitr1001liw5tl4uidqe2","_id":"cjbaeitrt0024iw5t882d4ehc"},{"post_id":"cjbaeitq2000aiw5tftku7e46","tag_id":"cjbaeitre001siw5t9idl40mc","_id":"cjbaeitry0028iw5tcz19i9bl"},{"post_id":"cjbaeitq4000biw5t6n7qrnuv","tag_id":"cjbaeitrk001yiw5ta6ib8j6s","_id":"cjbaeitrz002biw5tjodii3bn"},{"post_id":"cjbaeitq5000fiw5t09af7epn","tag_id":"cjbaeitru0025iw5tp1zs742r","_id":"cjbaeitsg002siw5t0g7lwxj8"},{"post_id":"cjbaeitq5000fiw5t09af7epn","tag_id":"cjbaeits0002ciw5t7og6uvza","_id":"cjbaeitsk002viw5t63folm3a"},{"post_id":"cjbaeitq5000fiw5t09af7epn","tag_id":"cjbaeits5002kiw5txlebcoda","_id":"cjbaeitsn002ziw5tt9ub3llt"},{"post_id":"cjbaeitq8000giw5tlwq8sv1g","tag_id":"cjbaeitsa002piw5t2v6gbvdc","_id":"cjbaeitss0035iw5ttrn1vxyo"},{"post_id":"cjbaeitq8000giw5tlwq8sv1g","tag_id":"cjbaeitsl002wiw5tpdo7m3s4","_id":"cjbaeitsu0038iw5t2mj6dc5h"},{"post_id":"cjbaeitqc000kiw5thd1z29j0","tag_id":"cjbaeitsp0032iw5tph0z2ftk","_id":"cjbaeitt1003giw5t2r8zje39"},{"post_id":"cjbaeitqc000kiw5thd1z29j0","tag_id":"cjbaeitsv003biw5tm428xoij","_id":"cjbaeitt1003iiw5t7bjmtq5w"},{"post_id":"cjbaeitqg000siw5tk7z71iy7","tag_id":"cjbaeitsw003eiw5tqwud73dv","_id":"cjbaeitt7003oiw5t7f9jhf96"},{"post_id":"cjbaeitqg000siw5tk7z71iy7","tag_id":"cjbaeitt2003jiw5t9a66u6qz","_id":"cjbaeitt7003piw5t18wps5fo"},{"post_id":"cjbaeitqg000siw5tk7z71iy7","tag_id":"cjbaeitt4003miw5trz7ccthe","_id":"cjbaeitt9003riw5t5oq98ujx"},{"post_id":"cjbaeitqj000yiw5tzw3gm85o","tag_id":"cjbaeitt6003niw5t1kmx4kxi","_id":"cjbaeitta003siw5t7szgi561"},{"post_id":"cjbaeitql0012iw5t85wjxjhk","tag_id":"cjbaeitt7003qiw5tupre4t2k","_id":"cjbaeittf003viw5tizlmk6rr"},{"post_id":"cjbaeitql0012iw5t85wjxjhk","tag_id":"cjbaeitta003tiw5t7ohy5asa","_id":"cjbaeittf003wiw5t75ks16r7"},{"post_id":"cjbaeitqm0013iw5tha8sb3yh","tag_id":"cjbaeitte003uiw5tf63bptbl","_id":"cjbaeittg003yiw5t0h4gshxn"},{"post_id":"cjbaeitqo0017iw5t0hf69ebe","tag_id":"cjbaeittf003xiw5tfeuaf4mx","_id":"cjbaeittg0040iw5tz0k763fo"},{"post_id":"cjbaeitqs001aiw5tseg8f5pk","tag_id":"cjbaeittg003ziw5ttrae6mt8","_id":"cjbaeitti0043iw5td2e5r6d0"},{"post_id":"cjbaeitqs001aiw5tseg8f5pk","tag_id":"cjbaeitrk001yiw5ta6ib8j6s","_id":"cjbaeittj0044iw5t0eyyd6tc"},{"post_id":"cjbaeitqu001fiw5txc1jgpoy","tag_id":"cjbaeittf003xiw5tfeuaf4mx","_id":"cjbaeittk0047iw5tjty5sfj3"},{"post_id":"cjbaeitqu001fiw5txc1jgpoy","tag_id":"cjbaeittj0045iw5tjgbzwn8l","_id":"cjbaeittl0048iw5ts0lz2rfr"},{"post_id":"cjbaeitqv001iiw5tsxvupxx4","tag_id":"cjbaeittk0046iw5tuhhs0jxw","_id":"cjbaeittm004diw5tin1zij53"},{"post_id":"cjbaeitqv001iiw5tsxvupxx4","tag_id":"cjbaeittl0049iw5te1cdduy4","_id":"cjbaeittm004eiw5t0j0sy2uu"},{"post_id":"cjbaeitqv001iiw5tsxvupxx4","tag_id":"cjbaeittl004aiw5t3n4orx6u","_id":"cjbaeittm004giw5tqcun2xz8"},{"post_id":"cjbaeitqv001iiw5tsxvupxx4","tag_id":"cjbaeittl004biw5tkprh0geb","_id":"cjbaeittm004hiw5tse5cey0q"},{"post_id":"cjbaeitr2001miw5t9ytzp3ri","tag_id":"cjbaeittl004ciw5t63ms8ky6","_id":"cjbaeittn004liw5tigr835wa"},{"post_id":"cjbaeitr2001miw5t9ytzp3ri","tag_id":"cjbaeittm004fiw5tnumgke0t","_id":"cjbaeitto004miw5tdkwaosqh"},{"post_id":"cjbaeitr2001miw5t9ytzp3ri","tag_id":"cjbaeittm004iiw5t17gk7b2w","_id":"cjbaeitto004oiw5t796nlfl2"},{"post_id":"cjbaeitr2001miw5t9ytzp3ri","tag_id":"cjbaeittn004jiw5tnvf87zn5","_id":"cjbaeitto004piw5thm61k1z3"},{"post_id":"cjbaeitr5001oiw5tstrd63zm","tag_id":"cjbaeittn004kiw5tcfk994ra","_id":"cjbaeittp004riw5tevudgxq5"},{"post_id":"cjbaeitr5001oiw5tstrd63zm","tag_id":"cjbaeitto004niw5tv3zg326i","_id":"cjbaeittp004siw5tptd5ow1s"},{"post_id":"cjbaeitrb001qiw5tlfgjpwf4","tag_id":"cjbaeittn004kiw5tcfk994ra","_id":"cjbaeittr004viw5t8gzsqwfv"},{"post_id":"cjbaeitrb001qiw5tlfgjpwf4","tag_id":"cjbaeitto004niw5tv3zg326i","_id":"cjbaeittr004wiw5tia247185"},{"post_id":"cjbaeitrf001tiw5tc0yr10ue","tag_id":"cjbaeittq004uiw5tc8g64sg7","_id":"cjbaeittt0050iw5tm0ucuqho"},{"post_id":"cjbaeitrf001tiw5tc0yr10ue","tag_id":"cjbaeittn004kiw5tcfk994ra","_id":"cjbaeittu0051iw5t5pwcqw8m"},{"post_id":"cjbaeitrf001tiw5tc0yr10ue","tag_id":"cjbaeitts004yiw5tv3g1pg34","_id":"cjbaeittv0053iw5ty4cmtxkl"},{"post_id":"cjbaeitrh001viw5tt9bxcid2","tag_id":"cjbaeitq20009iw5t2exryd12","_id":"cjbaeittv0054iw5t06y3kysy"},{"post_id":"cjbaeitrh001viw5tt9bxcid2","tag_id":"cjbaeittt004ziw5tuafjauy3","_id":"cjbaeittv0056iw5teqane627"},{"post_id":"cjbaeitrm001ziw5t5sylhv8h","tag_id":"cjbaeittf003xiw5tfeuaf4mx","_id":"cjbaeittw0059iw5txrqms9kb"},{"post_id":"cjbaeitrm001ziw5t5sylhv8h","tag_id":"cjbaeittv0055iw5t08c22tfz","_id":"cjbaeittw005aiw5tb9zpgg9p"},{"post_id":"cjbaeitrm001ziw5t5sylhv8h","tag_id":"cjbaeittv0057iw5tnkencjcy","_id":"cjbaeittw005ciw5ta3py4bl3"},{"post_id":"cjbaeitro0022iw5tls5yvtfn","tag_id":"cjbaeittw0058iw5t90o20349","_id":"cjbaeittx005fiw5t0xnclti8"},{"post_id":"cjbaeitro0022iw5tls5yvtfn","tag_id":"cjbaeittw005biw5t1j4uce8e","_id":"cjbaeittx005giw5tfqjeqmsx"},{"post_id":"cjbaeitro0022iw5tls5yvtfn","tag_id":"cjbaeittw005diw5thzi9pm8b","_id":"cjbaeitty005iiw5tozsdew1u"},{"post_id":"cjbaeitrv0026iw5tdujoitdm","tag_id":"cjbaeitt7003qiw5tupre4t2k","_id":"cjbaeitty005jiw5t6pn5bu04"},{"post_id":"cjbaeits0002diw5ta2u0aflo","tag_id":"cjbaeittx005hiw5t8h1cq453","_id":"cjbaeittz005oiw5txa7p53jr"},{"post_id":"cjbaeits0002diw5ta2u0aflo","tag_id":"cjbaeitty005kiw5tdahywful","_id":"cjbaeittz005piw5tohssfc2p"},{"post_id":"cjbaeits0002diw5ta2u0aflo","tag_id":"cjbaeitty005liw5t9vzn05q3","_id":"cjbaeitu0005riw5tnao9sscl"},{"post_id":"cjbaeits0002diw5ta2u0aflo","tag_id":"cjbaeitty005miw5te7uamj15","_id":"cjbaeitu0005siw5tbw50m30r"},{"post_id":"cjbaeits2002giw5t1emjxd2p","tag_id":"cjbaeitty005niw5tcjqop1hl","_id":"cjbaeitu0005uiw5ttw422hhf"},{"post_id":"cjbaeits4002iiw5txxenhmg9","tag_id":"cjbaeittz005qiw5t84d6lh6r","_id":"cjbaeitu1005xiw5tl3tsg92u"},{"post_id":"cjbaeits4002iiw5txxenhmg9","tag_id":"cjbaeitu0005tiw5t0mq38k9q","_id":"cjbaeitu1005yiw5to06u1xe0"},{"post_id":"cjbaeits4002iiw5txxenhmg9","tag_id":"cjbaeitu0005viw5tbaqrdhow","_id":"cjbaeitu10060iw5t67xy6q4u"},{"post_id":"cjbaeits6002liw5tywnsklpu","tag_id":"cjbaeitu0005wiw5t4mrdpeme","_id":"cjbaeitu10061iw5tvfjni15x"},{"post_id":"cjbaeits8002niw5tkx7e8z2t","tag_id":"cjbaeitu1005ziw5t60o09smp","_id":"cjbaeitu10064iw5t5r91gsb1"},{"post_id":"cjbaeits8002niw5tkx7e8z2t","tag_id":"cjbaeitu10062iw5tgj9v2qvw","_id":"cjbaeitu20065iw5tp8f85bay"},{"post_id":"cjbaeitsb002qiw5tq42arns6","tag_id":"cjbaeitu10063iw5t8qyqrgyf","_id":"cjbaeitu20068iw5tfrzsdzma"},{"post_id":"cjbaeitsb002qiw5tq42arns6","tag_id":"cjbaeitu20066iw5t4hum3rom","_id":"cjbaeitu20069iw5t0bodsqhx"},{"post_id":"cjbaeitsl002xiw5to008sd4w","tag_id":"cjbaeitu20067iw5tf29l580b","_id":"cjbaeitu3006diw5tn1t6bggr"},{"post_id":"cjbaeitsl002xiw5to008sd4w","tag_id":"cjbaeitu2006aiw5tdr65m3bj","_id":"cjbaeitu4006eiw5t3tm2zcti"},{"post_id":"cjbaeitsl002xiw5to008sd4w","tag_id":"cjbaeitu3006biw5ti7otjt8u","_id":"cjbaeitu4006giw5t9sncjipi"},{"post_id":"cjbaeitsn0030iw5tf6oqb30w","tag_id":"cjbaeittw005biw5t1j4uce8e","_id":"cjbaeitu5006jiw5tpicdatgr"},{"post_id":"cjbaeitsn0030iw5tf6oqb30w","tag_id":"cjbaeitu4006fiw5tevem9snf","_id":"cjbaeitu5006kiw5tkmbc9c39"},{"post_id":"cjbaeitsn0030iw5tf6oqb30w","tag_id":"cjbaeitt6003niw5t1kmx4kxi","_id":"cjbaeitu6006miw5tcyeqrf98"},{"post_id":"cjbaeitsq0033iw5t46i848op","tag_id":"cjbaeitu4006iiw5ti239pocx","_id":"cjbaeitu6006niw5tk8ucm5ud"},{"post_id":"cjbaeitss0036iw5tu0xq0dtg","tag_id":"cjbaeitto004niw5tv3zg326i","_id":"cjbaeitu6006piw5t8w4t0w6q"},{"post_id":"cjbaeitsu0039iw5t0yc3dn1j","tag_id":"cjbaeittl004aiw5t3n4orx6u","_id":"cjbaeitu7006riw5t672ztp8e"},{"post_id":"cjbaeitsu0039iw5t0yc3dn1j","tag_id":"cjbaeittl004biw5tkprh0geb","_id":"cjbaeitu7006siw5tsfodepjt"}],"Tag":[{"name":"video","_id":"cjbaeitpr0004iw5ty7ccdk1y"},{"name":"canvas","_id":"cjbaeitq20009iw5t2exryd12"},{"name":"HTML5","_id":"cjbaeitq5000eiw5todq7c4sk"},{"name":"雙 11","_id":"cjbaeitqb000jiw5tuqzi2sye"},{"name":"lambda","_id":"cjbaeitqg000riw5tf9ptcxgc"},{"name":"medium","_id":"cjbaeitqk0010iw5tmtnfqok7"},{"name":"g0v","_id":"cjbaeitqo0016iw5tf2mkjx8u"},{"name":"降維","_id":"cjbaeitqu001eiw5tss0ewrmt"},{"name":"PCA","_id":"cjbaeitr1001liw5tl4uidqe2"},{"name":"t-SNE","_id":"cjbaeitre001siw5t9idl40mc"},{"name":"sass","_id":"cjbaeitrk001yiw5ta6ib8j6s"},{"name":"飛機","_id":"cjbaeitru0025iw5tp1zs742r"},{"name":"空難","_id":"cjbaeits0002ciw5t7og6uvza"},{"name":"天氣","_id":"cjbaeits5002kiw5txlebcoda"},{"name":"algorithm","_id":"cjbaeitsa002piw5t2v6gbvdc"},{"name":"sorting","_id":"cjbaeitsl002wiw5tpdo7m3s4"},{"name":"nodejs","_id":"cjbaeitsp0032iw5tph0z2ftk"},{"name":"express","_id":"cjbaeitsv003biw5tm428xoij"},{"name":"devops","_id":"cjbaeitsw003eiw5tqwud73dv"},{"name":"chatops","_id":"cjbaeitt2003jiw5t9a66u6qz"},{"name":"capistrano","_id":"cjbaeitt4003miw5trz7ccthe"},{"name":"css","_id":"cjbaeitt6003niw5t1kmx4kxi"},{"name":"react","_id":"cjbaeitt7003qiw5tupre4t2k"},{"name":"webpack","_id":"cjbaeitta003tiw5t7ohy5asa"},{"name":"面試","_id":"cjbaeitte003uiw5tf63bptbl"},{"name":"伊坂幸太郎","_id":"cjbaeittf003xiw5tfeuaf4mx"},{"name":"postcss","_id":"cjbaeittg003ziw5ttrae6mt8"},{"name":"推理","_id":"cjbaeittj0045iw5tjgbzwn8l"},{"name":"JLPT","_id":"cjbaeittk0046iw5tuhhs0jxw"},{"name":"日檢","_id":"cjbaeittl0049iw5te1cdduy4"},{"name":"日語學習","_id":"cjbaeittl004aiw5t3n4orx6u"},{"name":"日語八百屋","_id":"cjbaeittl004biw5tkprh0geb"},{"name":"勞動節","_id":"cjbaeittl004ciw5t63ms8ky6"},{"name":"視覺化","_id":"cjbaeittm004fiw5tnumgke0t"},{"name":"d3js","_id":"cjbaeittm004iiw5t17gk7b2w"},{"name":"勞工大代誌","_id":"cjbaeittn004jiw5tnvf87zn5"},{"name":"重構","_id":"cjbaeittn004kiw5tcfk994ra"},{"name":"前端","_id":"cjbaeitto004niw5tv3zg326i"},{"name":"HTML","_id":"cjbaeittq004uiw5tc8g64sg7"},{"name":"aria","_id":"cjbaeitts004yiw5tv3g1pg34"},{"name":"low poly","_id":"cjbaeittt004ziw5tuafjauy3"},{"name":"卓别林","_id":"cjbaeittv0055iw5t08c22tfz"},{"name":"摩登時代","_id":"cjbaeittv0057iw5tnkencjcy"},{"name":"ramda","_id":"cjbaeittw0058iw5t90o20349"},{"name":"javascript","_id":"cjbaeittw005biw5t1j4uce8e"},{"name":"function programming","_id":"cjbaeittw005diw5thzi9pm8b"},{"name":"redux","_id":"cjbaeittx005hiw5t8h1cq453"},{"name":"saga pattern","_id":"cjbaeitty005kiw5tdahywful"},{"name":"observable","_id":"cjbaeitty005liw5t9vzn05q3"},{"name":"RxJS","_id":"cjbaeitty005miw5te7uamj15"},{"name":"flex","_id":"cjbaeitty005niw5tcjqop1hl"},{"name":"smooth scoll","_id":"cjbaeittz005qiw5t84d6lh6r"},{"name":"animation","_id":"cjbaeitu0005tiw5t0mq38k9q"},{"name":"easing","_id":"cjbaeitu0005viw5tbaqrdhow"},{"name":"scroll","_id":"cjbaeitu0005wiw5t4mrdpeme"},{"name":"table","_id":"cjbaeitu1005ziw5t60o09smp"},{"name":"CSS","_id":"cjbaeitu10062iw5tgj9v2qvw"},{"name":"webGL","_id":"cjbaeitu10063iw5t8qyqrgyf"},{"name":"IT 鐵人幫","_id":"cjbaeitu20066iw5t4hum3rom"},{"name":"js","_id":"cjbaeitu20067iw5tf29l580b"},{"name":"draft-js","_id":"cjbaeitu2006aiw5tdr65m3bj"},{"name":"flow","_id":"cjbaeitu3006biw5ti7otjt8u"},{"name":"html","_id":"cjbaeitu4006fiw5tevem9snf"},{"name":"sudo週刊","_id":"cjbaeitu4006iiw5ti239pocx"}]}}